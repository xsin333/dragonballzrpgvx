

class Scene_Db_Battle_Anime < Scene_Base
  include Share
  include Db_Battle_Anime_test_Setup
  #キャラクターステータス表示位置
  Chastexstr = -16
  Chasteystr = 340
  Chastexend = 672
  Chasteyend = 156
  STANDARD_CHAX = -70
  STANDARD_CHAY = 120
  STANDARD_ENEX = 602
  STANDARD_ENEY = STANDARD_CHAY
  STANDARD_BACKX = 0 
  STANDARD_BACKY = 256
  CENTER_CHAX = 240
  CENTER_ENEX = 304
  TEC_CENTER_CHAX = 266
  RAY_SPEED = 14
  ENE_STOP_TEC = 102  #超能力の技ID
  ENE_STOP_TEC2 = 720  #超能力の技ID
  STOP_TURN = 1       #超能力でストップするターン
  FLASH_Y_SIZE_CUTIN_ON = 296
  FLASH_Y_SIZE_CUTIN_OFF = 356
  FASTFADEFRAME = 5 #RとBでスキップ時のフェードフレーム数
  #--------------------------------------------------------------------------
  # ● オブジェクト初期化
  #--------------------------------------------------------------------------
  def initialize(anime_event = false)
    #エラー処理用変数初期化
    $err_run_process = "戦闘アニメシーン"
    $err_run_process_d = ""
    $err_run_process_d2 = ""
    $err_run_process_d3 = ""
    @event_damege_result = false #イベント戦でダメージ処理をする
    @event_atc_hit = []          #イベント戦で敵の攻撃をヒットさせるか trueで回避
    @event_cha_atc_hit = []          #イベント戦で味方の攻撃をヒットさせるか trueで回避
    @event_ene_set_chara = []        #イベント戦で敵が何番目を攻撃するか
    @anime_event = anime_event
    @tmp_tec_move = [] #イベント戦闘時の必殺技発動の動き指定 
    
    $one_turn_cha_hit_num = [] #1ターン管理攻撃ヒット回数管理
    
    for x in 0..$cardset_cha_no.size
      $one_turn_cha_hit_num[x] = 0
    end

    battle_anime_test_setup
    
    if @anime_event == true #イベント戦の場合はセット
      set_battle_event
    end
    
    #戦闘高速化デフォ設定
    #if $game_variables[303] == 0
    #  Graphics.frame_rate = 60
    #else
    #  if $game_variables[40] >= 2
    #    Graphics.frame_rate = 100 #90
    #  else
    #    p 1
    #    Graphics.frame_rate = 90
    #  end
    #end

  end

  #--------------------------------------------------------------------------
  # ● イベント用の内容をセット
  #--------------------------------------------------------------------------    
  def set_battle_event
    #固定処理
    @tmp_cardi=[]
    @tmp_carda=[]
    @tmp_cardg=[]
    for x in 0..7
      @tmp_cardi[x] = $cardi[x]
      @tmp_carda[x] = $carda[x]
      @tmp_cardg[x] = $cardg[x]
    end
    
    
    #$partyc = [20]
    #$game_switches[17] = true
    #$game_switches[129] = true
    #$enehp[0] = 6000        #ここもそのまま
    #$game_variables[40] = 2 #シナリオ進行度
    #set_bgm = 0
    #$game_variables[96] = 1
    case $game_variables[96]
    
    when 1 #トランクス対フリーザサイボーグ
      
      $cha_set_action[0] = 187  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 410
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 5 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [102]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[10,0]    #攻撃順番
      #@set_bgm = 15
    when 2 #ゴクウ対トランクス
      $cha_set_action[0] = 1  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 5 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $enecardi[1] = 8 #敵流派
      $enecarda[1] = 7 #敵攻撃
      $enecardg[1] = 7 #敵防御
      $battleenemy = [134,134]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0,10,11]    #攻撃順番
      @set_bgm = 14
      @event_atc_hit[0] = false
      @event_atc_hit[1] = true
    when 3 #ピッコロ対17号
      $cha_set_action[0] = 1  #攻撃アクションNo
      $cha_set_action[1] = 1  #攻撃アクションNo
      $cha_set_action[2] = 45  #攻撃アクションNo
      $cha_set_action[3] = 50  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cardset_cha_no[1] = 1
      $cardset_cha_no[2] = 2
      $cardset_cha_no[3] = 3
      $cha_set_enemy[0] = 0   #味方が何番目の敵を攻撃するか
      $cha_set_enemy[1] = 1
      $cha_set_enemy[2] = 2
      $cha_set_enemy[3] = 3
      @event_ene_set_chara[0] = 0
      @event_ene_set_chara[1] = 1
      @event_ene_set_chara[2] = 2
      @event_ene_set_chara[3] = 3
      @tmp_ene_set_action = 432
      $cardi[0] = 5 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $cardi[1] = 3 #味方流派
      $carda[1] = 7 #味方攻撃
      $cardg[1] = 7 #味方防御
      $cardi[2] = 4 #味方流派
      $carda[2] = 7 #味方攻撃
      $cardg[2] = 7 #味方防御
      $cardi[3] = 4 #味方流派
      $carda[3] = 7 #味方攻撃
      $cardg[3] = 7 #味方防御
      $enecardi[0] = 5 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $enecardi[1] = 5 #敵流派
      $enecarda[1] = 7 #敵攻撃
      $enecardg[1] = 7 #敵防御
      $enecardi[2] = 4 #敵流派
      $enecarda[2] = 7 #敵攻撃
      $enecardg[2] = 7 #敵防御
      $enecardi[3] = 9 #敵流派
      $enecarda[3] = 7 #敵攻撃
      $enecardg[3] = 7 #敵防御
      $battleenemy = [125,125,125,125]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[10,0,11,1,12,2,13,3]    #攻撃順番
      @set_bgm = $bgm_no_ZSB2_pikkoro_for_gb
      @event_atc_hit[0] = false
      @event_atc_hit[1] = false
      @event_atc_hit[2] = false
      @event_atc_hit[3] = false
      @event_cha_atc_hit[0] = false
      @event_cha_atc_hit[1] = false
      @event_cha_atc_hit[2] = true
      @event_cha_atc_hit[3] = false
    when 4 #ピッコロ対セル
      $cha_set_action[0] = 49  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 4 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 8 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [127]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
      @set_bgm = $bgm_no_ZSB2_pikkoro_for_gb
      #@event_cha_atc_hit[0] = false
    when 5 #16号対セル
      $cha_set_action[0] = 1  #攻撃アクションNo
      $cha_set_action[1] = 224  #攻撃アクションNo
      $cha_set_action[2] = 225  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cardset_cha_no[1] = 1
      $cardset_cha_no[2] = 2
      $cha_set_enemy[0] = 0   #味方が何番目の敵を攻撃するか
      $cha_set_enemy[1] = 0
      $cha_set_enemy[2] = 0
      @event_ene_set_chara[0] = 0
      @tmp_ene_set_action = 432
      $cardi[0] = 5 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $cardi[1] = 9 #味方流派
      $carda[1] = 7 #味方攻撃
      $cardg[1] = 7 #味方防御
      $cardi[2] = 9 #味方流派
      $carda[2] = 7 #味方攻撃
      $cardg[2] = 7 #味方防御
      $enecardi[0] = 4 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [127]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0,10,1,2]    #攻撃順番
      @set_bgm = $bgm_no_ZSB1_16gou_for_gb
      @event_atc_hit[0] = false
      #@event_atc_hit[1] = false
      #@event_atc_hit[2] = false
      #@event_atc_hit[3] = false
      @event_cha_atc_hit[0] = true
      @event_cha_atc_hit[1] = false
      @event_cha_atc_hit[2] = false
      #@event_cha_atc_hit[3] = false
    when 6 #天津飯　新気功砲
      $cha_set_action[0] = 95  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 1 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [128]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
      #@set_bgm = $bgm_no_FCJ1_battle2
      #@event_cha_atc_hit[0] = false
    when 7 #ベジータ　ファイナルフラッシュ
      $cha_set_action[0] = 140  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 0 #敵攻撃
      $enecardg[0] = 0 #敵防御
      $battleenemy = [129]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
      #@set_bgm = $bgm_no_FCJ1_battle2
      #@event_cha_atc_hit[0] = false
    when 8 #セル反撃
      $cha_set_action[0] = 140  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 0 #敵攻撃
      $enecardg[0] = 0 #敵防御
      $battleenemy = [129]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      @tmp_ene_set_action = 0
      $attack_order=[10,10,10]    #攻撃順番
      #@set_bgm = $bgm_no_FCJ1_battle2
      #@event_cha_atc_hit[0] = false
    when 9 #サタンダイナマイトキック
      $cha_set_action[0] = 298  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 14 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 0 #敵攻撃
      $enecardg[0] = 0 #敵防御
      $battleenemy = [129]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
      @tmp_tec_move[1] = 2
    when 10 #16号自爆
      $cha_set_action[0] = 227  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 182
      $cardi[0] = 9 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 0 #敵攻撃
      $enecardg[0] = 0 #敵防御
      $battleenemy = [129]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
      #@tmp_tec_move[1] = 2
      #@set_bgm = $bgm_no_FCJ1_battle2
      #@event_cha_atc_hit[0] = false
    when 11 #超悟飯2対セル
      $cha_set_action[0] = 1  #攻撃アクションNo
      $cha_set_action[1] = 1  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cardset_cha_no[1] = 1
      $cha_set_enemy[0] = 0   #ここもそのまま
      $cha_set_enemy[1] = 0
      @tmp_ene_set_action = 0
      $cardi[0] = 4 #味方流派
      $carda[0] = 0 #味方攻撃
      $cardg[0] = 0 #味方防御
      $cardi[1] = 4 #味方流派
      $carda[1] = 0 #味方攻撃
      $cardg[1] = 0 #味方防御
      $enecardi[0] = 8 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [129]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[10,0,10,1]    #攻撃順番
    when 12 #バーダック編惑星戦士たちとの戦闘
      
      $cha_set_action[0] = 179  #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 410
      $cardi[0] = 5 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 5 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [61]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 0
      $attack_order=[0]    #攻撃順番
    when 13 #バーダック編フリーザとの戦闘
      
      $cha_set_action[0] = 180 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 410
      $cardi[0] = 5 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 5 #敵流派
      $enecarda[0] = 0 #敵攻撃
      $enecardg[0] = 0 #敵防御
      $battleenemy = [53]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 0
      $attack_order=[0]    #攻撃順番
    when 14 #未来悟飯と人造人間戦闘
      $cha_set_action[0] = 1 #攻撃アクションNo
      $cha_set_action[1] = 1 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cardset_cha_no[1] = 1
      $cha_set_enemy[0] = 0   #ここもそのまま
      $cha_set_enemy[1] = 1
      @tmp_ene_set_action = 429
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $cardi[1] = 8 #味方流派
      $carda[1] = 7 #味方攻撃
      $cardg[1] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $enecardi[1] = 9 #敵流派
      $enecarda[1] = 7 #敵攻撃
      $enecardg[1] = 7 #敵防御
      $battleenemy = [124,125]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0,1,10]    #攻撃順番
    when 15 #未来トランクスとセル戦闘
      $cha_set_action[0] = 1 #攻撃アクションNo
      $cha_set_action[1] = 1 #攻撃アクションNo
      $cha_set_action[2] = 1 #攻撃アクションNo
      $cha_set_action[3] = 1 #攻撃アクションNo
      $cha_set_action[4] = 1 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cardset_cha_no[1] = 1
      $cardset_cha_no[2] = 2
      $cardset_cha_no[3] = 3
      $cardset_cha_no[4] = 4
      $cha_set_enemy[0] = 0   #ここもそのまま
      $cha_set_enemy[1] = 0   #ここもそのまま
      $cha_set_enemy[2] = 0   #ここもそのまま
      $cha_set_enemy[3] = 0   #ここもそのまま
      $cha_set_enemy[4] = 0   #ここもそのまま
      @tmp_ene_set_action = 1
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $cardi[1] = 8 #味方流派
      $carda[1] = 7 #味方攻撃
      $cardg[1] = 7 #味方防御
      $cardi[2] = 8 #味方流派
      $carda[2] = 7 #味方攻撃
      $cardg[2] = 7 #味方防御
      $cardi[3] = 8 #味方流派
      $carda[3] = 7 #味方攻撃
      $cardg[3] = 7 #味方防御
      $cardi[4] = 8 #味方流派
      $carda[4] = 7 #味方攻撃
      $cardg[4] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $enecardi[1] = 9 #敵流派
      $enecarda[1] = 7 #敵攻撃
      $enecardg[1] = 7 #敵防御
      $battleenemy = [127,127]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0,1,10,2,3,11,4]    #攻撃順番
    when 16 #未来トランクスとセル戦闘(ヒートドームアタック
      $cha_set_action[0] = 188 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 429
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 9 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [127]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 1
      $attack_order=[0]    #攻撃順番
    when 17 #悟空 14、15号戦闘
      $cha_set_action[0] = 1 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 1 
      $cardi[0] = 3 #味方流派
      $carda[0] = 0 #味方攻撃
      $cardg[0] = 0 #味方防御
      $enecardi[0] = 8 #敵流派
      $enecarda[0] = 3 #敵攻撃
      $enecardg[0] = 3 #敵防御
      $enecardi[1] = 8 #敵流派
      $enecarda[1] = 3 #敵攻撃
      $enecardg[1] = 3 #敵防御
      $enecardi[2] = 8 #敵流派
      $enecarda[2] = 3 #敵攻撃
      $enecardg[2] = 3 #敵防御
      $battleenemy = [140,140,141]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 31
      $attack_order=[10,11,12]    #攻撃順番
      @event_atc_hit[0] = true
      @event_atc_hit[1] = true
      @event_atc_hit[2] = false
    when 18 #超バーダックとチルド戦闘(スーパーファイナルリベンジャー
      $cha_set_action[0] = 165 #攻撃アクションNo
      $cardset_cha_no[0] = 0
      $cha_set_enemy[0] = 0   #ここもそのまま
      @tmp_ene_set_action = 429
      $cardi[0] = 8 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 6 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [238]
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 35
      $attack_order=[0]    #攻撃順番
      @set_bgm = $bgm_no_DKN_tyoubardak_btl
    when 19 #Z2フリーザを超元気玉でしとめる
      #悟空が先頭じゃなくても攻撃するように
      gokuno = $partyc.index(3)

      $cha_set_action[gokuno] = 30 
      $cha_set_enemy[gokuno] = 0
      $cardset_cha_no[0] = gokuno
      
      @tmp_ene_set_action = 429
      $cardi[0] = 3 #味方流派
      $carda[0] = 7 #味方攻撃
      $cardg[0] = 7 #味方防御
      $enecardi[0] = 6 #敵流派
      $enecarda[0] = 7 #敵攻撃
      $enecardg[0] = 7 #敵防御
      $battleenemy = [56] #フリーザ
      $battleenenum = $battleenemy.size 
      $Battle_MapID = 2
      $attack_order=[0]    #攻撃順番
      #@set_bgm = $bgm_no_DKN_tyoubardak_btl
    end
    
    #tempの方を使うスキルもあるので、こっちにも格納する
    #2021/8/25現在 気の暴走でエラーの対策
    $temp_cardi = Marshal.load(Marshal.dump($cardi)) #ここもそのまま
    
    $chadeadchk[0] = false  #ここもそのまま
    for x in 0..$battleenemy.size - 1
      $enedeadchk[x] = false  #ここもそのまま
      $eneselfdeadchk[x] = false  #ここもそのまま
    end
    
    # HPセット
    for x in 0..$battleenenum -1
      $enehp[x] = $data_enemies[$battleenemy[x]].maxhp #敵hpを代入
    end

    if $game_variables[95] == 0 #指定Noへ移動が0ならば追加1
      $game_variables[41] += 1
    else
      $game_variables[41] = $game_variables[95] #0以外なら指定をセット
    end
    $game_switches[128] = false #戦闘終了後イベントNo追加
    $game_variables[95] = 0     #戦闘終了後指定イベントへ
  end
  #--------------------------------------------------------------------------
  # ● ウインドウ開放
  #--------------------------------------------------------------------------    
  def dispose_window
    @status_window.dispose
    @status_window = nil
    @back_window.dispose
    @back_window = nil
  end
  
  #--------------------------------------------------------------------------
  # ● ウインドウ内容クリア
  #--------------------------------------------------------------------------  
  def window_contents_clear
    @status_window.contents.clear
    @back_window.contents.clear
  end  

  #--------------------------------------------------------------------------
  # ● ウインドウ作成
  # mode:0通常
  #--------------------------------------------------------------------------  
  def create_window 
    # バックウインドウ作成
    #@back_window = Window_Base.new(-30,-30,700,540)
    #@back_window = Window_Base.new(-16,-16,672,512)
    #@back_window = Window_Base.new(-16,-16,672,356+32)
    @back_window = Window_Base.new(-16,-16,672,480+32)
    @back_window.opacity=0
    @back_window.back_opacity=0

    # キャラステータスウインドウ表示
    @status_window = Window_Base.new(Chastexstr,Chasteystr,Chastexend,Chasteyend)
    @status_window.opacity=0
    @status_window.back_opacity=0
  end  

  #--------------------------------------------------------------------------
  # ● メイン処理
  #-------------------------------------------------------------------------- 
  def start
    super

    @chanum = 0 #味方キャラ
    @enenum = 0 #表示順
    @enedatenum = 1 #データ順
    @battle_anime_frame = 0 #戦闘アニメフレーム数
    @anime_frame_format = false #戦闘アニメフレーム数フォーマットフラグ
    @@chastex = 50 #味方キャラステータス表示開始位置
    @@enestex = 310 #敵キャラステータス表示開始位置
    @attackcourse = 0 #攻撃方向 0:味方⇒敵 1:敵⇒味方
    @attack_num = 0   #攻撃回数
    @attack_count = 0 #攻撃回数カウント
    @damage_huttobi = true #ダメージ時吹っ飛ぶか
    @damage_center = false #ダメージを真ん中で受けるか
    @battledamage = 0 #戦闘ダメージ
    @attack_on = nil #攻撃できるかどうか判定
    @attack_any_one_flag = nil #攻撃で誰か一人でも攻撃したか(全体攻撃もここで管理)

    @ene_coerce_target_chanum = nil #敵が味方を強制的にターゲットを決める
    Graphics.fadein(5)
    create_window
    @attack_hit = nil    #攻撃がヒットするか
    @chax = STANDARD_CHAX
    @chay = STANDARD_CHAY
    @enex = STANDARD_ENEX
    @eney = STANDARD_ENEY
    @output_battle_damage_flag = false
    @tec_output_back = false
    @tec_output_back_no = 0 #背景種類
    @chr_cutin = false
    @chr_cutin_mirror_flag = false
    @chr_cutin_flag = false
    @genkitama_kanri_frame = []
    @genkitama_kanri_x = []
    @genkitama_kanri_y = []
    #@chax = -84
    #@chay = 122
    #@enex = 636
    #@eney = 122
    @backx = 0
    @backy = 256
    @tec_non_attack = false #必殺技で攻撃なし(超サイヤ人変身など
    @tec_tyousaiya = false #超サイヤ人変身の技を使った時
    @tec_back = 0
    @tec_back_anime_type = 0
    @tec_back_small = false #必殺技背景縮小フラグ
    @tec_back_color = 0 #背景色
    @battle_anime_result = 0
    @back_anime_frame = 0     #戦闘バックエフェクトのフレーム数
    @back_anime_type = 0      #戦闘バックエフェクトのタイプ
    @ray_anime_type = 0
    @ray_anime_frame = 0
    @ray_spd_up_flag = false #光線の速さアップ
    @ray_spd_up_num = 6 #光線の速さアップ量
    @scombo_cha_anime_frame = 0 #スパーキングコンボ用フレーム
    @scombo_cha1 = 0            #スパーキング用キャラ表示
    @scombo_cha2 = 0
    @scombo_cha3 = 0
    @scombo_cha4 = 0
    @scombo_cha5 = 0
    @scombo_cha6 = 0
    @scombo_cha1_anime_type = 0 #スパーキング用アニメタイプ
    @scombo_cha2_anime_type = 0
    @scombo_cha3_anime_type = 0
    @scombo_cha4_anime_type = 0
    @scombo_cha5_anime_type = 0
    @scombo_cha6_anime_type = 0
    @effect_anime_type = 0    #戦闘エフェクトのタイプ
    @effect_anime_pattern = 0 #戦闘エフェクトのNo ここにNoをいれてメソッドを呼ぶ
    @effect_anime_frame = 0   #戦闘エフェクトのフレーム数
    @effect_anime_mirror = 255  #戦闘エフェクトでエフェクトを逆のタイプを使うか
    @output_anime_type = 0    #キャラチップ変更時に通常・必殺技を読むか？
    @output_anime_type_y = 0  #Y軸を反転するかどうか
    @ray_color = 0            #光線の色
    @tec_power = 0            #必殺技攻撃力
    @all_attack_flag = false
    @all_attack_count = 0
    @ene_set_action = 0
    @scombo_flag = false      #スパーキングコンボ実行フラグ
    @chk_scombo_skill = []    #スパーキングコンボ用必殺技No格納
    @chk_scombo_cha_no = []   #スパーキングコンボ用対象キャラ格納
    #スパーキングコンボチェック用
    @btl_ani_scombo_cha_count = 0
    @btl_ani_scombo_get_flag = 0
    @btl_ani_scombo_new_flag = 0
    @btl_ani_scombo_no = 0
    @btl_ani_scombo_cha = []
    @btl_ani_scombo_flag_tec = []
    @btl_ani_scombo_skill_level_num = []
    @btl_ani_scombo_card_attack_num = []
    @btl_ani_scombo_card_gard_num = []
    @btl_ani_tokusyu_flag = false
    @btl_ani_cha_chg_no = 0
    @tyosaiyachgyureue = false
    @tyosaiyachghensin = false
    @tec_kyouda_se = false
    @kyouda_se = false
    @kyouda_Z2_se = false
    @one_turntec = [] #1ターンに1回しか使えない技
    @new_tecspark_flag = false #閃き必殺技を取得した際に消費Kiを0にするために使用 
    
    @skill_kiup_flag = false #スキル気をためるが有効になったか
    
    @tmp_scom_run_skill = [] #Sコンボ時に有効になるskillNo
    
    if $game_variables[35] == 0 #背景スクロール設定
      @back_scroll_speed = 0
    else
      @back_scroll_speed = 4
    end
    #シナリオ進行度によってファイル名の頭文字を変える
    chk_scenario_progress
    
    @cha_attack_run = []
    for x in 0..$partyc.size-1 #攻撃済みフラグを初期化
      @cha_attack_run[x] = false
    end
    
    #発動スキルの表示フレーム数
    @runskill_frame = 0
    #発動スキルの表示位置(横)
    @runskill_putx = []
    #発動スキルの表示が完了したフレーム数
    @runskill_lastput_frame = 9999999
    
    #連続攻撃回数初期化
    $cha_biattack_count = 0

    if @set_bgm != nil
      $battle_bgm = @set_bgm         #戦闘曲
      set_battle_bgm
    end
    
    #p "$game_variables[319]:" + $game_variables[319].to_s,"$game_variables[429]:" + $game_variables[429].to_s,"$game_switches[111]:" + $game_switches[111].to_s,"$battle_escape:" + $battle_escape.to_s
    #戦闘前BGM[319],イベント戦前BGM[429],ソリッドステートスカウター固定[111]
    if $game_variables[319] != 0 && $game_switches[111] == false && $battle_escape == true || #通常戦
      $game_laps == 0 && $game_variables[319] != 0 && $game_switches[111] == false && $battle_escape == false || #クリア前イベント戦
      $game_laps >= 1 && $game_variables[429] != 0 && $game_switches[111] == false && $battle_escape == false #クリア後イベント戦
      set_battle_bgm
    end
    
    #通常攻撃の真ん中へ移動するパターンのランダム値を格納
    @mannakaidouno = 0
    
    #けん制するかどうか
    @kenseiflag = nil
    
    #通常攻撃のけん制へ移動するパターンのランダム値を格納
    @keinseino = 0
  end
  
  #--------------------------------------------------------------------------
  # ● 終了処理
  #--------------------------------------------------------------------------
  def terminate
    #Graphics.fadeout(10)
    dispose_window

    #フレームレートを戻す
    if $fast_fps == false
      Graphics.frame_rate = 60
    end
    Graphics.fadein(0)
    
    for x in 0..$Cardmaxnum+1.to_i #使用したカードを更新
      if $cardset_cha_no[x] != 99

        createcardval x
      end
    end
    $game_switches[12] = true
    
    #戦闘に参加したキャラのみ フラグ初期化
    #p $cardset_cha_no
    for x in 0..$cardset_cha_no.size-1
    
      if $cardset_cha_no[x] != 99
        
        #フルの方も初期化、これをしないとflagがtrueのままになってしまう
        #バトルシーンに戻った時フルから読み込みここで戻したフラグがフルで元に戻される
        #先手カード
        $full_cha_sente_card_flag[$partyc[$cardset_cha_no[x]]] = false
        $cha_sente_card_flag[$cardset_cha_no[x]] = false
        
        #回避カード
        $full_cha_kaihi_card_flag[$partyc[$cardset_cha_no[x]]] = false
        $cha_kaihi_card_flag[$cardset_cha_no[x]] = false
        
      end
    end
    #変数初期化
    $cha_set_action = [0,0,0,0,0,0,0,0,0]
    $cardset_cha_no = [99,99,99,99,99,99]
    #@@card_set_no = [99,99,99,99,99,99]
    $cha_set_enemy = [99,99,99,99,99,99,99,99,99]
    $attack_order = Array.new
    $one_turn_cha_defense_up = false
    $run_stop_card = false
    $run_alow_card = false                      #ゴズカードを使用したか？
    $run_glow_card = false                      #メズカードを使用したか？
    $battle_turn_num_chk_flag = false #ターン数カウントフラグ
    #@@chk_attack_order = Array.new
    
    #イベント戦闘No初期化
    $game_variables[96] = 0
  end  
  
  #--------------------------------------------------------------------------
  # ● フレーム更新
  #--------------------------------------------------------------------------   
  def update
    #super
    $err_run_process_d = "アニメ開始"
    for x in 0..$attack_order.size - 1
      #攻撃したかのチェック用のフラグをここで初期化
      @attack_any_one_flag = false
      
      #攻撃ループ回数を取得
      $btl_attack_count = x
      begin #攻撃回数
        $err_run_process_d2 = "攻撃方向セット"
        chk_attack_course x
        $err_run_process_d2 = "攻撃回数セット"
        chk_attack_num x   #攻撃回数確認
        $err_run_process_d2 = "攻撃敵の攻撃設定"
        ene_action_set  #敵の攻撃を設定
        
        $err_run_process_d2 = "敵のステータスを表示するか判定"
        chk_output_status #相手のステータスを表示するかチェック(超サイヤ人変身など攻撃がない場合は表示しない
        $err_run_process_d2 = "攻撃可能か判定"
        chk_attack x    #攻撃可能か判定
        
        #p $attack_on_flag,$attack_on_flag[x]
        #if $fullpower_on_flag[x] == nil
          #攻撃したかチェック
          #@attack_on
        #  $fullpower_on_flag[x] = true
        #end

        $err_run_process_d2 = "通常攻撃のパターン決定"
        for y in 1..$attack_anime_max #攻撃パターンセット
          begin
            temp_attack_anime = rand(4)+1
            #p temp_attack_anime
            #p $attack_anime.index(temp_attack_anime) == 0
          end until $attack_anime.index(temp_attack_anime) == nil
          $attack_anime[y] = temp_attack_anime
        end
        
        $err_run_process_d2 = "必殺技発動の動作設定"
        @tec_move = []
        for y in 1..2
          @tec_move[y] = rand($tec_move_pattern)+1
          #@tec_move[y] = 3
          #p @tec_move[y]
        end
        
        #p @attack_num , @attack_count
        
        #味方が攻撃するときのみチェック 効果変更のためボツ
        #if @attackcourse == 0
        #  @skill_kiup_flag = get_skill_kiup($partyc[@chanum.to_i])
        #end
       
        begin #全体攻撃
          $err_run_process_d2 = "巨大キャラか判定"
          #巨大キャラかチェック
          if @all_attack_flag == true
            chk_all_attack
          end
          #p @enedatenum#,$data_enemies[@enedatenum]
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            @enerect = Rect.new(0 ,96*0, 96, 96)
          else
            #p @enedatenum
            @enerect = Rect.new(0 ,192*0, 192, 192)
          end
          
          
          if x >= 1 && @attack_on == true || @attack_count > 0 && @attack_on == true
            fadetime = 0
            if ((Input.press?(Input::R) and Input.press?(Input::B)) && $game_variables[96] == 0 && @new_tecspark_flag == false || ($game_switches[860] == true && $game_switches[883] == true) && (Input.press?(Input::R) and Input.press?(Input::B)))
              fadetime = FASTFADEFRAME
            else
              fadetime = 10
            end
            Graphics.fadeout(fadetime)
          end


          if @attack_on == true
            @all_attack_count += 1
            
            #味方が攻撃される、かつ全体攻撃ではない、かつかばう実行者がいる
            if @attackcourse == 1 && @all_attack_flag == false && $battle_kabau_runcha != nil
              @chanum = $battle_kabau_runcha
              #初期化
              #$battle_kabau_runcha = nil
              #$battle_kabau_runskill = nil
            end
            
            #試験的に移動
            #移動したら挑発とかが先に発動するようになってダメだった
            #==================================================================================================
            #if $battle_test_flag == false #戦闘テスト時は実行しない(なぜかSコンボ時にエラーになるため)
            #  damage_calculation (@attackcourse)
            #else
            #  @attack_hit = true
            #end
            #==================================================================================================
            
            #地球育ちのサイヤ人などのスキル発動
            run_battle_start_mae_skill (@attackcourse)
            #ここで個別処理しないとダメだったので
            
            window_contents_clear
            output_back
            output_status
            @status_window.update
            @back_window.update
            Graphics.update
            
            #全体攻撃一度でも攻撃した場合はtrueを維持
            @attack_any_one_flag = true
          end
          
          if x >= 1 && @attack_on == true || @attack_count > 0 && @attack_on == true
            fadetime = 0
            if ((Input.press?(Input::R) and Input.press?(Input::B)) && $game_variables[96] == 0 && @new_tecspark_flag == false || ($game_switches[860] == true && $game_switches[883] == true) && (Input.press?(Input::R) and Input.press?(Input::B)))
              fadetime = FASTFADEFRAME
            else
              fadetime = 10
            end
            
            Graphics.fadein(fadetime)
            
          end

          $err_run_process_d2 = "戦闘アニメ開始"
          if @attack_on == true
            battle_start #戦闘開始
            if @event_damege_result == true || $game_variables[96] == 0 #戦闘ダメージ結果反映
              chk_battle_damage if @tec_non_attack == false
            end
          end
          @output_battle_damage_flag = false
          
        end while @all_attack_flag == true
        
        @attack_count += 1
        
        
        @all_attack_flag = false
        @all_attack_count = 0
        @skill_kiup_flag = false #スキル気をためるが有効になったか
        
        @backx = 0
        
        #スパーキングコンボを使ったのであれば技を戻す
        
        scombo_no = 0  #Sコンボの格納用
        if @scombo_flag == true
          #必殺技使用回数増加用に必殺技番号をもとに戻す
          #Sコンボ参加者行動済みに
          #さらにMP消費
          #p $cha_set_action

          scombo_no = $cha_set_action[@chanum] #Sコンボの場合技Noを格納
          
          #コンボも使用回数を残すようにした。
          #使用回数増加
          #p $cha_skill_level[(scombo_no - 10)]
          if $cha_skill_level[(scombo_no - 10)] == nil
            $cha_skill_level[(scombo_no - 10)] = 0
          end
          $cha_skill_level[(scombo_no - 10)] += 1 if $game_switches[1305] == false #戦闘の練習中は増えない

          #使用回数が9999を超えたら9999をセット
          if $cha_skill_level[(scombo_no - 10)] > $cha_skill_level_max
            $cha_skill_level[(scombo_no - 10)] = $cha_skill_level_max
          end
          
          for y in 0..@btl_ani_scombo_cha.size - 1
            $cha_set_action[$partyc.index(@btl_ani_scombo_cha[y])] = (@btl_ani_scombo_flag_tec[y] + 10)
            @cha_attack_run[$partyc.index(@btl_ani_scombo_cha[y])] = true
            
            tec_mp_cost = get_mp_cost @btl_ani_scombo_cha[y],$data_skills[@btl_ani_scombo_flag_tec[y]].id,1
            
            #戦闘練習中でなければKIを消費する
            if $game_switches[1305] != true
              $game_actors[@btl_ani_scombo_cha[y]].mp -= tec_mp_cost
            end
            $cha_ki_zero[$partyc.index(@btl_ani_scombo_cha[y])] = false
            
            if $full_cha_ki_zero != nil
              $full_cha_ki_zero[$partyc[$partyc.index(@btl_ani_scombo_cha[y])]] = false
            end
            #$game_actors[@btl_ani_scombo_cha[y]].mp -= $data_skills[@btl_ani_scombo_flag_tec[y]].mp_cost
          end
        end
        
        #p "@attack_on:" + @attack_on.to_s,
        #"@attack_any_one_flag:" + @attack_any_one_flag.to_s,
        #"@attackcourse:" + @attackcourse.to_s,
        #"@cha_attack_run:" + @cha_attack_run[@chanum].to_s,
        #"@all_attack_flag:" + @all_attack_flag.to_s
        
        #if @attack_on == true || @attackcourse == 0 && @cha_attack_run[@chanum] == true
        if @attack_any_one_flag == true || @attackcourse == 0 && @cha_attack_run[@chanum] == true
          #p @cha_attack_run[@chanum],@chanum,$cha_set_action[@chanum]
          set_skill_level
        end
        
        #攻撃したかのチェック用のフラグをここで初期化
        @attack_any_one_flag = false
        
        #超サイヤ人変身
        if @tec_tyousaiya == true
          if @attackcourse == 0
            case $partyc[@chanum.to_i]
            
            when 3#,14
              schanum = 1
            when 5#,18
              schanum = 2
            when 12#,19
              schanum = 3
            when 17#,20
              schanum = 4
            when 18
              schanum = 5
            when 25
              schanum = 6
            when 16
              schanum = 7 
            end
            
            #3大スーパーサイヤ人の場合は、発動者ではなく強制的に悟空を超サイヤ人にする
            #schanum = 1 if $goku3dai == true
            schanum = 1 if scombo_no == 748
            on_super_saiyazin schanum
          end
        end
        
        #大猿変身
        if @tec_oozaru == true
          if @attackcourse == 0
            case $partyc[@chanum.to_i]
            
            when 27 #トーマ
              schanum = 1
            when 28 #セリパ
              schanum = 2
            when 29 #トテッポ
              schanum = 3
            when 30 #パンブーキン
              schanum = 4
            when 5 #悟飯
              schanum = 5
            end
            
            on_oozaru schanum
            $cha_bigsize_on[@chanum.to_i] = true
          end
        end
        
        #敵大猿
        if @ene_tec_oozaru == true
          if $battleenemy[@enenum] == 12 #ベジータを大猿化
            $battleenemy[@enenum] = 26 
            $battle_begi_oozaru_run = true
          end
          
          if $battleenemy[@enenum] == 59 #Z2ターレスを大猿化
            $battleenemy[@enenum] = 70
            $battle_tare_oozaru_run = true
          end
          
          if $battleenemy[@enenum] == 233 #ZGターレス(強)を大猿化
            $battleenemy[@enenum] = 222
            $battle_tare_oozaru_run = true
          end
          
          if $battleenemy[@enenum] == 60 #Z2スラッグを巨大化
            $battleenemy[@enenum] = 71
            $battle_sura_big_run = true
          end
          
          if $battleenemy[@enenum] == 255 #ZGスラッグ(強)を巨大化
            $battleenemy[@enenum] = 223
            $battle_sura_big_run = true
          end
        end
        Audio.bgs_stop
        $btl_yasegaman_on_flag = false
        @new_tecspark_flag = false
        @status_window.visible = true
        @tyosaiyachgyureue = false
        @tyosaiyachghensin = false
        @scombo_flag = false
        @output_battle_damage_flag = false
        @tec_output_back = false
        @tec_non_attack = false
        @tec_tyousaiya = false
        @tec_oozaru = false
        @ene_tec_oozaru = false
        @tec_kyouda_se = false
        @kyouda_se = false
        @kyouda_Z2_se = false
        @chr_cutin = false
        @chr_cutin_flag = false
        @chr_cutin_mirror_flag = false
        @tec_output_back_no = 0
        @mannakaidouno = 0
        @keinseino = 0
        @kenseiflag = nil
        $skill_yousumi_runflag = false #様子見flag初期化
        #三大超サイヤ人の素材参照フラグを初期化
        $goku3dai = false

        $battle_kabawareru_runcha = nil #戦闘中かばわれるキャラ
        $battle_kabau_runcha = nil #戦闘中かばうスキルを実行するキャラ
        $battle_kabau_runskill = nil #戦闘中実行するかばうスキルNo
        $battle_kabau_scenerun = false #かばう戦闘シーンを処理したか
        
        for y in 1..$attack_anime_max
          $attack_anime[y] = 0
        end
        
      #ここの条件次第が悪い
      #HPを吸収した時に一定HPの割合に行くとループする
        #たまに攻撃回数が少なくなる時がある
        #if @attackcourse == 1
        #  p "@attack_num > @attack_count",
        #    "@attack_num:" + @attack_num.to_s,
        #    "@attack_count:" + @attack_count.to_s
        #end
      end while @attack_num > @attack_count
      #end while @attack_num != @attack_count
      @attack_count = 0
      #スパーキングコンボチェック用
      @btl_ani_scombo_cha_count = 0
      @btl_ani_scombo_get_flag = 0
      @btl_ani_scombo_new_flag = 0
      @btl_ani_scombo_no = 0
      @btl_ani_scombo_cha = []
      @btl_ani_scombo_flag_tec = []
      @btl_ani_scombo_skill_level_num = []
      @btl_ani_scombo_card_attack_num = []
      @btl_ani_scombo_card_gard_num = []
      @btl_ani_cha_chg_no = 0
      @btl_ani_tokusyu_flag = false
      @cha_attack_run[@chanum] = true if @attackcourse == 0 #味方であれば攻撃済み
      
      @one_turntec = []
      #p @cha_attack_run
    end


    if Input.trigger?(Input::C)
      #window_key_state "C"
    end
    if Input.trigger?(Input::B)
      #window_key_state "B"
    end
    if Input.trigger?(Input::X)
      #window_key_state "X"
    end 
    if Input.trigger?(Input::DOWN)
      #window_key_state 2
    end
    if Input.trigger?(Input::UP)
      #window_key_state 8
    end
    if Input.trigger?(Input::RIGHT)
      #window_key_state 6
    end
    if Input.trigger?(Input::LEFT)
      #window_key_state 4
    end
    
    fadetime = 0
    if ((Input.press?(Input::R) and Input.press?(Input::B)) && $game_variables[96] == 0 && @new_tecspark_flag == false || ($game_switches[860] == true && $game_switches[883] == true) && (Input.press?(Input::R) and Input.press?(Input::B)))
      fadetime = FASTFADEFRAME
    else
      fadetime = 10
    end
    Graphics.fadeout(fadetime)
    if $game_variables[96] == 0
      $scene = Scene_Db_Battle.new($battle_escape,$battle_bgm,$battle_ready_bgm)
    else
      
      #戦闘関係のフラグ初期化
      reset_battle_flag
      #スーパーサイヤ人変身を解く
      off_super_saiyazin_all
      #大猿状態を解く
      off_oozaru_all
      #イベントNoを増やすかチェック
      $put_battle_bgm = false
      for x in 0..7
        $cardi[x] = @tmp_cardi[x]
        $carda[x] = @tmp_carda[x] 
        $cardg[x] = @tmp_cardg[x] 
      end
      $scene = Scene_Map.new
    end
  end
  #--------------------------------------------------------------------------
  # ● 相手のステータスを表示するか判定
  #--------------------------------------------------------------------------
  def chk_output_status
    
    #必殺技で攻撃する必要があるか
    if @attackcourse == 0
      if $cha_set_action[@chanum] > 10
        #攻撃なしか判定
        if $data_skills[$cha_set_action[@chanum]-10].element_set.index(10) != nil
          @tec_non_attack = true
        end
      end
    else
      if @ene_set_action > 10
        
        if $data_skills[@ene_set_action-10].element_set.index(10) != nil
          @tec_non_attack = true
        end
      end
    end
  end
  #--------------------------------------------------------------------------
  # ● 攻撃方向をセット
  #-------------------------------------------------------------------------- 
  def chk_attack_course x
    if $attack_order[x].to_s.size == 1
      @attackcourse = 0 #攻撃方向セット
      @chanum = $cardset_cha_no[$attack_order[x]]                   #味方キャラNoセット
      $cha_biattack_count += 1
    else
      @attackcourse = 1 #攻撃方向セット
      $cha_biattack_count = 0
    end
  end
  #--------------------------------------------------------------------------
  # ● 閃き必殺技が使用可能かチェック
  #--------------------------------------------------------------------------  
  def chk_tecspark_flag tmp_set_action
 #p $cha_set_action キャラごとの攻撃スキル番号をセット、攻撃しないのであれば値は0
 #p $cardset_cha_no 指定の枚目にキャラ番号が振ってある1人目は0,2人目は1
    

    if @attackcourse == 1
      x = 0
      card_attack_num = []    #攻撃星の数
      card_gard_num = []    #防御星の数
      cha_skill_level_num = []    
    else

        if $partyc.index(@btl_ani_tecspark_cha) != nil #仲間にいる
          if $cardset_cha_no.index($partyc.index(@btl_ani_tecspark_cha)) != nil #攻撃参加している
            #p $tecspark_chk_flag[@btl_ani_tecspark_tec_no],@btl_ani_tecspark_tec_no
            if $tecspark_chk_flag[@btl_ani_tecspark_tec_no] != 0

              if $tecspark_chk_flag[@btl_ani_tecspark_tec_no] == 1 #スイッチ
                
                return false if $game_switches[$tecspark_chk_flag_no[@btl_ani_tecspark_tec_no]] == false
                #p $tecspark_chk_flag_no[x],$game_switches[$tecspark_chk_flag_no[x]]
              elsif $tecspark_chk_flag[@btl_ani_tecspark_tec_no] == 2 #変数
                #チェック方法 0:一致 1:以上 2:以下
                case $tecspark_chk_flag_process[@btl_ani_tecspark_tec_no]
                when 0
                  return false if $game_variables[$tecspark_chk_flag_no[@btl_ani_tecspark_tec_no]] != $tecspark_chk_flag_value[@btl_ani_tecspark_tec_no]
                when 1
                  return false if $game_variables[$tecspark_chk_flag_no[@btl_ani_tecspark_tec_no]] < $tecspark_chk_flag_value[@btl_ani_tecspark_tec_no]
                when 2
                  return false if $game_variables[$tecspark_chk_flag_no[@btl_ani_tecspark_tec_no]] > $tecspark_chk_flag_value[@btl_ani_tecspark_tec_no]
                end
              end
            end
            
            #シナリオ進行度
            return false if $tecspark_chk_scenario_progress[@btl_ani_tecspark_tec_no] > $game_variables[40]
            return false if rand(100) + 1 > $tecspark_chk_acquisition_rate[@btl_ani_tecspark_tec_no] #取得率チェック
            return false if $game_switches[$tecspark_get_flag[@btl_ani_tecspark_tec_no]] == true #取得済みかチェック
            return false if $chadeadchk[$partyc.index(@btl_ani_tecspark_cha)] == true #生きてる
            return false if $cha_stop_num[$partyc.index(@btl_ani_tecspark_cha)] != 0 #超能力にかかってないか
            return false if @cha_attack_run[$partyc.index(@btl_ani_tecspark_cha)] == true #行動済みではない
            return false if $cha_set_action[$partyc.index(@btl_ani_tecspark_cha)]-10 != @btl_ani_tecspark_flag_tec #対象技を使ってるか
            return false if $game_actors[@btl_ani_tecspark_cha].class_id-1 != $cardi[$cardset_cha_no.index($partyc.index(@btl_ani_tecspark_cha))] #流派が一致
            return false if $carda[$cardset_cha_no.index($partyc.index(@btl_ani_tecspark_cha))] < @btl_ani_tecspark_card_attack_num #カードの攻撃星が以上
            return false if $cardg[$cardset_cha_no.index($partyc.index(@btl_ani_tecspark_cha))] < @btl_ani_tecspark_card_gard_num #カードの防御星が以上
            $cha_skill_level[@btl_ani_tecspark_flag_tec] = 0 if $cha_skill_level[@btl_ani_tecspark_flag_tec] == nil #必殺技使用回数がnilかチェックしてnilなら0格納
            return false if $cha_skill_level[@btl_ani_tecspark_flag_tec] < @btl_ani_tecspark_skill_level_num
            return false if $game_switches[1305] == true #戦闘の練習中は覚えない
          else
            return false
          end
        else
          return false
        end
  
    end
    
    return true
  end
  #--------------------------------------------------------------------------
  # ● 閃き必殺技があるかチェック
  #-------------------------------------------------------------------------- 
  def chk_tecspark set_action
    chk_result = false

    tmp_tecspark_count = Marshal.load(Marshal.dump($tecspark_count))
    tmp_tecspark_get_flag = Marshal.load(Marshal.dump($tecspark_get_flag))
    tmp_tecspark_new_flag = Marshal.load(Marshal.dump($tecspark_new_flag))
    tmp_tecspark_no = Marshal.load(Marshal.dump($tecspark_no))
    tmp_tecspark_cha = Marshal.load(Marshal.dump($tecspark_cha))
    tmp_tecspark_flag_tec = Marshal.load(Marshal.dump($tecspark_flag_tec))
    tmp_tecspark_skill_level_num = Marshal.load(Marshal.dump($tecspark_skill_level_num))
    tmp_tecspark_card_attack_num = Marshal.load(Marshal.dump($tecspark_card_attack_num))
    tmp_tecspark_card_gard_num = Marshal.load(Marshal.dump($tecspark_card_gard_num))
    
    #Sコンボ配列内に対象技があるかチェック
    #なければループ抜ける
    #あれば
    x = 0
    chk_loop_result = false
    loop do
      
      for x in 0..tmp_tecspark_count
        chk_loop_result = true if tmp_tecspark_flag_tec[x] == set_action
        #p "最初のループ",chk_loop_result,x,tmp_tecspark_flag_tec[x]
        if chk_loop_result != false || x >= tmp_tecspark_count
          break
        end
        x += 1 if chk_loop_result == false
      end
      
      #p "最初のループ抜けた",chk_loop_result,x,tmp_tecspark_flag_tec[x]
      if chk_loop_result != false
        #ひらめき技チェック用
        @btl_ani_tecspark_get_flag = tmp_tecspark_get_flag[x]
        @btl_ani_tecspark_new_flag = tmp_tecspark_new_flag[x]
        @btl_ani_tecspark_no = tmp_tecspark_no[x]
        @btl_ani_tecspark_cha = tmp_tecspark_cha[x]
        @btl_ani_tecspark_flag_tec = tmp_tecspark_flag_tec[x]
        @btl_ani_tecspark_skill_level_num = tmp_tecspark_skill_level_num[x]
        @btl_ani_tecspark_card_attack_num = tmp_tecspark_card_attack_num[x]
        @btl_ani_tecspark_card_gard_num = tmp_tecspark_card_gard_num[x]
        @btl_ani_tecspark_tec_no = x
        tmp_tecspark_flag_tec[x] = [0,0] #検索に引っかからないように値を変更
        #tmp_loop_count += 1
        #p @btl_ani_tecspark_cha_count,@btl_ani_tecspark_get_flag,@btl_ani_tecspark_new_flag,@btl_ani_tecspark_no,@btl_ani_tecspark_cha,@btl_ani_tecspark_flag_tec,@btl_ani_tecspark_skill_level_num,@btl_ani_tecspark_card_attack_num,@btl_ani_tecspark_card_gard_num
        #p "スパーキングコンボチェック前",chk_loop_result,x,tmp_tecspark_flag_tec[x]
        chk_result = chk_tecspark_flag @btl_ani_tecspark_no
      end

      if chk_result == true || x >= tmp_tecspark_count
        break
        
      end
      chk_loop_result = false
    end 
    
    #もし条件が一致するなら合体攻撃を格納
    if chk_result == true
      @new_tecspark_flag = true
      $cha_set_action[@chanum] = @btl_ani_tecspark_no + 10
      chk_new_get_tecspark #@btl_ani_scombo_no
    end
  end
  #--------------------------------------------------------------------------
  # ● 閃き必殺を初めて使用したかチェック
  #--------------------------------------------------------------------------
  def chk_new_get_tecspark #action_no

    if $game_switches[@btl_ani_tecspark_get_flag] == false
      $game_switches[@btl_ani_tecspark_new_flag] = true
      $game_switches[30] = true
    end

  end
  #--------------------------------------------------------------------------
  # ● 攻撃可能か判定
  #--------------------------------------------------------------------------   
  def chk_attack x
    @attack_on = true
    if $attack_order[x].to_s.size == 1
      #味方
      
      #敵が全て撃破状態
      if $enedeadchk.index(false) == nil
        @attack_on = false
        return
      end
      #@attackcourse = 0 #攻撃方向セット
      #@chanum = $cardset_cha_no[$attack_order[x]]                   #味方キャラNoセット
      #自分が死んでないかかつ超能力が掛かっていないかかつSコンボに参加してないか確認
      if $chadeadchk[@chanum] == false && $cha_stop_num[@chanum] == 0 && @cha_attack_run[@chanum] == false 
        @enenum = $cha_set_enemy[$cardset_cha_no[$attack_order[x]]]  #敵キャラNoセット(表示順)
        @enedatenum = $battleenemy[@enenum]                            #キャラNoセット(データ順)
        
        if $cha_set_action[@chanum] > 10
          #使用するスキルが閃きするかチェック
          chk_tecspark $cha_set_action[@chanum]-10
          
          #使用するスキルが合体攻撃を含むのであれば条件を満たすかチェック
          #優先度をプレイヤーが変更できる機能を入れるため、順番次第でSコンボが発動できなくなるのでその対策として
          #まず未取得分のみチェックする          
          chk_scombo_flag_num $cha_set_action[@chanum]-10,true #if $data_skills[$cha_set_action[@chanum] - 10].element_set[0] == 4
          
          #未取得が見つからなかったら取得済みもチェックする
          if @scombo_flag == false
            chk_scombo_flag_num $cha_set_action[@chanum]-10,false
          end
            
          if $data_skills[$cha_set_action[@chanum] - 10].element_set.index(10) != nil && $enedeadchk.index(false) != nil
            return
          #else
          #  #敵が全員死んでるならば
          #  @attack_on = false
          #  return
          end
          if $data_skills[$cha_set_action[@chanum] - 10].scope == 2
            @enenum = -1
            @all_attack_flag = true
            return
          end
        end
      else
        #戦闘参加で止まるターン数減らす
        if $cha_stop_num[@chanum] != 0
          $cha_stop_num[@chanum] -= 1
          if $full_cha_stop_num == nil || $full_cha_stop_num == [] || $full_cha_stop_num[$partyc[@chanum]] == nil
            $full_cha_stop_num[$partyc[@chanum]] = 0
          end
          $full_cha_stop_num[$partyc[@chanum]] -= 1
        end
        @attack_on = false
        return
      end
      
      #敵が死んでないか、かつ敵が皆死んでないかを確認
      if $enedeadchk[@enenum] == false
        return
        
      #対象の敵が死んでため、対象を選択しなおす
      elsif $enedeadchk[@enenum] == true && $enedeadchk.index(false) != nil
        
        #作戦がセットされてなかったら低い敵から攻撃をセット
        $cha_tactics[0][$partyc[@chanum]] = 0 if $cha_tactics[0][$partyc[@chanum]] == nil
        case $cha_tactics[0][$partyc[@chanum]]
        
        when 0 #弱い敵
          if $enehp.min > 0 #HPが低い敵から攻撃していく
            @enenum = $enehp.index($enehp.min)
          else
            set_enehp = 1
            while $enehp.index(set_enehp) == nil
              set_enehp += 1
            end
            @enenum = $enehp.index(set_enehp)
          end
          
        when 1 #強い敵
          
          #if $enehp.min != 0 #HPが高い敵から攻撃していく
            enemaxhp = [[],[]]
            for x in 0..$battleenemy.size - 1
              
              if $enedeadchk[x] == false
                enemaxhp[0][x] = $data_enemies[$battleenemy[x]].maxhp
                
              else
                enemaxhp[0][x] = 0
              end
              enemaxhp[1][x] = x
            end
            #p enemaxhp[0],enemaxhp[1],enemaxhp[0].max
            @enenum = enemaxhp[1][enemaxhp[0].index(enemaxhp[0].max)]
          #end
        end
        
        
        
        
        
        #if $enehp.min != 0 #HPが低い敵から攻撃していく
        #  @enenum = $enehp.index($enehp.min)
        #else
        #  set_enehp = 1
        #  while $enehp.index(set_enehp) == nil
        #    set_enehp += 1
        #  end
        #  @enenum = $enehp.index(set_enehp)
        #end
        #p @enedatenum,$battleenemy[@enenum],@enenum
        #@enenum = $enedeadchk.index(false)
        @enedatenum = $battleenemy[@enenum]
        if @enedatenum.to_i > 5 || @enedatenum.to_i == 0 || @enedatenum.to_i == 3
          #p "敵敵死亡状態:" + $enedeadchk
          #p "敵数:" + $battleenenum.to_s, "攻撃順サイズ:" + $attack_order.size.to_s
        end
        return
      else
        @attack_on = false
        return
      end
    else
      #敵
      #@attackcourse = 1 #攻撃方向セット

      chaalldead = false
      
      if $enedeadchk[@enenum] == true || $ene_stop_num[@enenum] != 0#敵が死んでないか確認
        
        if $ene_stop_num[@enenum] != 0
          $ene_stop_num[@enenum] -= 1
        end
        @attack_on = false
        return
      end
      
      if @ene_set_action > 10

        
        if $data_skills[@ene_set_action - 10].scope == 2
          @chanum = -1
          @all_attack_flag = true
          return
        end
      end
      
      for y in 0..$Cardmaxnum #死んでいない味方キャラがいるか確認
        @chanum = $cardset_cha_no[y]
        
        # カードがセットされていてかつ生きているかをチェック
        if @chanum != 99 && $chadeadchk[@chanum] == false 
          break
        elsif y == $Cardmaxnum
          @attack_on = false
          chaalldead = true
        end
      end
      
      #if $data_skills[@ene_set_action - 10].element_set.index(10) != nil && chaalldead == false
      #    return
      #else
      #    #味方が全員死んでるならば
      #    @attack_on = false
      #    return
      #end
      
      if chaalldead == false #攻撃先の決定
        begin
          begin
            y = rand($Cardmaxnum+1)
            @chanum = $cardset_cha_no[y]
            #必殺技などで強制的にターゲットを決定
            if @ene_coerce_target_chanum != nil
              @chanum = $partyc.index(@ene_coerce_target_chanum)
            end

            #イベント戦
            if @event_ene_set_chara[@enenum] != nil
              @chanum = @event_ene_set_chara[@enenum]
            end
            
          end while @chanum == 99 
        end while $chadeadchk[@chanum] == true
        
        #イベント戦ではない、ターゲットがかばう候補かつ、
        #かばうスキルの発動条件を満たしている
        if @event_ene_set_chara[@enenum] == nil &&
          chk_kabau($partyc[@chanum]) == true
          
          #今のところ必要な処理はchk_kabauで出来ているのでここではなにもしない
        end
      elsif chaalldead == true
        @attack_on = false
        return
      end
    end
    
    
  end
  
  #--------------------------------------------------------------------------
  # ● 全員攻撃可能か判定
  #--------------------------------------------------------------------------   
  def chk_all_attack
    @attack_on = true

    if @attackcourse == 0
      @enenum += 1
      @enedatenum = $battleenemy[@enenum]
      if @enenum == $battleenenum - 1 #敵数が最後までループしたか？
        @all_attack_flag = false
      end
      if $enedeadchk[@enenum] != false #死亡確認
        @attack_on = false
        return
      end
    else
      @chanum += 1

      if @chanum == $partyc.size - 1 #味方数が最後までループしたか？
        @all_attack_flag = false
      end
      
      if $chadeadchk[@chanum] != false #死亡確認
        @attack_on = false
        return
      end
      
      if $cardset_cha_no.index(@chanum) == nil #カードセット確認
        @attack_on = false
        return
      end
    end
  end
  #--------------------------------------------------------------------------
  # ● キャラ能力やカードを表示
  #-------------------------------------------------------------------------- 
  def output_status
    
    tyousei_x = 16
    tyousei_y = 10
    color = set_skn_color 0
    @status_window.contents.fill_rect(0,0,672,156,color)
    
    color = set_skn_color 1 #味方ステータス枠
    
    #表示するかチェック
    chk_put_status = true
    if @attackcourse == 1
      chk_put_status = false if @tec_non_attack == true
    end
    
    if chk_put_status == true
      @status_window.contents.fill_rect(@@chastex+64+tyousei_x ,0+10,118,98,color)
      
      if $battle_kabau_runcha == nil || $game_switches[884] == true
        putchano = @chanum
      else
        putchano = $partyc.index($battle_kabawareru_runcha)
      end
      
      #ヘッダ
      picture = Cache.picture("数字英語")
      #HP
      rect = Rect.new(0, 16, 32, 16)
      @status_window.contents.blt(@@chastex+68+tyousei_x,32+tyousei_y,picture,rect)
      #KI
      rect = Rect.new(32, 16, 32, 16)
      @status_window.contents.blt(@@chastex+68+tyousei_x,64+tyousei_y,picture,rect)
      
      #=======================================================================
      #味方キャラ能力
      #=======================================================================
      #picturea = Cache.picture("名前")
      pictureb = Cache.picture("数字英語")
      #picturec = Cache.picture($btl_top_file_name+"顔味方")
      if ($game_actors[$partyc[putchano]].hp.prec_f / $game_actors[$partyc[putchano]].maxhp.prec_f * 100).prec_i < $hinshi_hp
        rect,picturec = set_character_face 1,$partyc[putchano]-3
        #rect = Rect.new(64, ($partyc[putchano] - 3)*64, 64, 64) # 顔グラ
      else
        rect,picturec = set_character_face 0,$partyc[putchano]-3
        #rect = Rect.new(0, ($partyc[putchano] - 3)*64, 64, 64) # 顔グラ
      end
      @status_window.contents.blt(@@chastex+tyousei_x ,0+tyousei_y,picturec,rect)
      rect = Rect.new(160, 0, 16, 16) # スラッシュ
      
      if $game_actors[$partyc[putchano]].maxhp.to_s.size <= 4 #HPスラッシュずらすか
        @status_window.contents.blt(@@chastex+100+tyousei_x,48+tyousei_y,pictureb,rect)
      else
        @status_window.contents.blt(@@chastex+100+tyousei_x-16,48+tyousei_y,pictureb,rect)        
      end
      
      if $game_actors[$partyc[putchano]].maxmp.to_s.size <= 4 #MPスラッシュずらすか
        @status_window.contents.blt(@@chastex+100+tyousei_x,80+tyousei_y,pictureb,rect)
      else
        @status_window.contents.blt(@@chastex+100+tyousei_x-16,80+tyousei_y,pictureb,rect)
      end
      for y in 1..$game_actors[$partyc[putchano]].hp.to_s.size #HP
        rect = Rect.new($game_actors[$partyc[putchano]].hp.to_s[-y,1].to_i*16, 0, 16, 16)
        @status_window.contents.blt(@@chastex+tyousei_x+164-(y-1)*16,32+tyousei_y,pictureb,rect)
      end
      
      for y in 1..$game_actors[$partyc[putchano]].maxhp.to_s.size #MHP
        rect = Rect.new($game_actors[$partyc[putchano]].maxhp.to_s[-y,1].to_i*16, 0, 16, 16)
        @status_window.contents.blt(@@chastex+tyousei_x+164-(y-1)*16,48+tyousei_y,pictureb,rect)
      end
      
      for y in 1..$game_actors[$partyc[putchano]].mp.to_s.size #MP
        rect = Rect.new($game_actors[$partyc[putchano]].mp.to_s[-y,1].to_i*16, 0, 16, 16)
        @status_window.contents.blt(@@chastex+tyousei_x+164-(y-1)*16,64+tyousei_y,pictureb,rect)
      end
      
      for y in 1..$game_actors[$partyc[putchano]].maxmp.to_s.size #MMP
        rect = Rect.new($game_actors[$partyc[putchano]].maxmp.to_s[-y,1].to_i*16, 0, 16, 16)
        @status_window.contents.blt(@@chastex+tyousei_x+164-(y-1)*16,80+tyousei_y,pictureb,rect)
      end
        
      #流派_カード
      picture = Cache.picture("カード関係")
      rect = set_card_frame 4 # 流派枠
      @status_window.contents.blt(@@chastex+tyousei_x ,64+tyousei_y,picture,rect)
      rect = Rect.new(32*($game_actors[$partyc[putchano]].class_id-1), 64, 32, 32) # 流派
      @status_window.contents.blt(@@chastex+16+tyousei_x ,64+tyousei_y,picture,rect)
      rect = set_card_frame 0
      @status_window.contents.blt(@@chastex+tyousei_x+182+2 ,0+tyousei_y,picture,rect)

      for x in 0..$Cardmaxnum
        if $cardset_cha_no[x] == putchano.to_i then
          
          rect = set_card_frame 2,$carda[x] # 攻撃
          @status_window.contents.blt(@@chastex+184+tyousei_x+$output_carda_tyousei_x+2,2+tyousei_y+$output_carda_tyousei_y,picture,rect)
          rect = set_card_frame 3,$cardg[x] # 防御
          @status_window.contents.blt(@@chastex+212+tyousei_x+$output_cardg_tyousei_x+2 ,62+tyousei_y+$output_cardg_tyousei_y,picture,rect)
          rect = Rect.new(0 + 32 * ($cardi[x]), 64, 32, 32) # 流派
          @status_window.contents.blt(@@chastex+198+tyousei_x+$output_cardi_tyousei_x+2 ,32+tyousei_y+$output_cardi_tyousei_y,picture,rect)
          picture = Cache.picture("アイコン")
          #流派が一致かパワーアップフラグがONの時は上アイコン表示
          if $game_actors[$partyc[putchano]].class_id-1 == $cardi[x] || $cha_power_up[putchano] == true || @skill_kiup_flag == true
            #パワーアップ
            rect = Rect.new(32*0, 16, 32, 32)
            @status_window.contents.blt(@@chastex+68-2+tyousei_x,0+tyousei_y,picture,rect)
          end
          #防御力アップ
          if $one_turn_cha_defense_up == true || $cha_defense_up[putchano] == true
            rect = Rect.new(32*1, 16, 32, 32)
            @status_window.contents.blt(@@chastex+96+tyousei_x,0+tyousei_y,picture,rect)
          end
          
          #超能力
          if $cha_stop_num[putchano] > 0
            rect = Rect.new(32*5, 16, 32, 32)
            @status_window.contents.blt(@@chastex+126+tyousei_x,0+tyousei_y,picture,rect)
          end
        end
      end
      
    end
    #=======================================================================
    #敵キャラ能力
    #=======================================================================
    top_name = set_ene_str_no @enedatenum
    picturec = Cache.picture(top_name+"顔敵")
    
    #表示するかチェック
    chk_put_status = true
    if @attackcourse == 0
      chk_put_status = false if @tec_non_attack == true
    end
    if chk_put_status == true
      if @enedatenum < $ene_str_no[1]
        if ($enehp[@enenum].prec_f / $data_enemies[@enedatenum.to_i].maxhp.prec_f * 100).prec_i < $hinshi_hp
          rect = Rect.new(64, (@enedatenum.to_i)*64, 64, 64) # 顔グラ
        else
          rect = Rect.new(0, (@enedatenum.to_i)*64, 64, 64) # 顔グラ
        end
      elsif @enedatenum < $ene_str_no[2]
        if ($enehp[@enenum].prec_f / $data_enemies[@enedatenum.to_i].maxhp.prec_f * 100).prec_i < $hinshi_hp
          rect = Rect.new(64, (@enedatenum-$ene_str_no[1]+1).to_i*64, 64, 64) # 顔グラ
        else
          rect = Rect.new(0, (@enedatenum-$ene_str_no[1]+1).to_i*64, 64, 64) # 顔グラ
        end
      else#if @enedatenum < $ene_str_no[3]
        if ($enehp[@enenum].prec_f / $data_enemies[@enedatenum.to_i].maxhp.prec_f * 100).prec_i < $hinshi_hp
          rect = Rect.new(64, (@enedatenum-$ene_str_no[2]+1).to_i*64, 64, 64) # 顔グラ
        else
          rect = Rect.new(0, (@enedatenum-$ene_str_no[2]+1).to_i*64, 64, 64) # 顔グラ
        end
      #else
      #  if ($enehp[@enenum].prec_f / $data_enemies[@enedatenum.to_i].maxhp.prec_f * 100).prec_i < $hinshi_hp
      #    rect = Rect.new(64, (@enedatenum-$ene_str_no[3]+1).to_i*64, 64, 64) # 顔グラ
      #  else
      #    rect = Rect.new(0, (@enedatenum-$ene_str_no[3]+1).to_i*64, 64, 64) # 顔グラ
      #  end
      end
      

      @status_window.contents.blt(@@enestex+184+tyousei_x ,0+tyousei_y,picturec,rect)
      
      #流派_カード
      picture = Cache.picture("カード関係")
      rect = set_card_frame 4 # 流派枠
      @status_window.contents.blt(@@enestex+184+tyousei_x ,64+tyousei_y,picture,rect)
      rect = Rect.new(32*($data_enemies[@enedatenum].hit-1), 64, 32, 32) # 流派
      @status_window.contents.blt(@@enestex+200+tyousei_x ,64+tyousei_y,picture,rect)
      rect = set_card_frame 0 #カード
      @status_window.contents.blt(@@enestex+16 ,0+tyousei_y,picture,rect)
      #CardsetCha = [0,1,2,3,4,5] #カードをセットしたキャラ
      #p $data_enemies[1].hit
          
      rect = set_card_frame 2,$enecarda[@enenum] # 攻撃
      @status_window.contents.blt(@@enestex+2+tyousei_x+$output_carda_tyousei_x,2+tyousei_y+$output_carda_tyousei_y,picture,rect)
      rect = set_card_frame 3,$enecardg[@enenum] # 防御
      @status_window.contents.blt(@@enestex+30+tyousei_x+$output_cardg_tyousei_x,62+tyousei_y+$output_cardg_tyousei_y,picture,rect)
      rect = Rect.new(0 + 32 * ($enecardi[@enenum]), 64, 32, 32) # 流派
      @status_window.contents.blt(@@enestex+16+tyousei_x+$output_cardi_tyousei_x,32+tyousei_y+$output_cardi_tyousei_y,picture,rect)
      
      if $run_scouter_ene[@enenum] == true
        color = set_skn_color 1 #味方ステータス枠
        @status_window.contents.fill_rect(@@enestex+66+tyousei_x ,0+tyousei_y,118,98,color)
        #ヘッダ
        picture = Cache.picture("数字英語")
        
        #HP
        case $data_enemies[@enedatenum.to_i].maxhp.to_s.size

        when 7..100#(100万)
          #HPなど表示しない
        when 6#(10万)
          rect = Rect.new(0, 16*9, 16, 16)
          @status_window.contents.blt(@@enestex+70+tyousei_x,32+tyousei_y,picture,rect)
        else #1万の桁いない
          #HP
          rect = Rect.new(0, 16, 32, 16)
          @status_window.contents.blt(@@enestex+70+tyousei_x,32+tyousei_y,picture,rect)
        end
        
        #KI(KIだけどHPの桁に合わせて変える)
        case $data_enemies[@enedatenum.to_i].maxhp.to_s.size
        when 7..100#(100万)
          #HPなど表示しない
        when 6#(10万)
          rect = Rect.new(16, 16*9, 16, 16)
          @status_window.contents.blt(@@enestex+70+tyousei_x,64+tyousei_y,picture,rect)
        else #1万の桁いない
          #KI
          rect = Rect.new(32, 16, 32, 16)
          @status_window.contents.blt(@@enestex+70+tyousei_x,64+tyousei_y,picture,rect)
        end


        #picturea = Cache.picture("名前")
        pictureb = Cache.picture("数字英語")
        rect = Rect.new(160, 0, 16, 16) # スラッシュ
        if $data_enemies[@enedatenum.to_i].maxhp.to_s.size < 5 
          #HP
          @status_window.contents.blt(@@enestex+102+tyousei_x,48+tyousei_y,pictureb,rect)
          #KI
          @status_window.contents.blt(@@enestex+102+tyousei_x,80+tyousei_y,pictureb,rect)
        
        elsif $data_enemies[@enedatenum.to_i].maxhp.to_s.size < 7 #10万
          #HP
          @status_window.contents.blt(@@enestex+102+tyousei_x - 16 * ($data_enemies[@enedatenum.to_i].maxhp.to_s.size - 4),48+tyousei_y,pictureb,rect)
          #KI
          @status_window.contents.blt(@@enestex+102+tyousei_x - 16 * ($data_enemies[@enedatenum.to_i].maxhp.to_s.size - 4),80+tyousei_y,pictureb,rect)
        
        end
        
        #HP無限
        if $data_enemies[@enedatenum.to_i].element_ranks[57] == 1
          rect = Rect.new(11*16, 16, 16, 16)
          @status_window.contents.blt(@@enestex+tyousei_x+166-(1-1)*16,32+tyousei_y,pictureb,rect)
          @status_window.contents.blt(@@enestex+tyousei_x+166-(1-1)*16,48+tyousei_y,pictureb,rect)
        else
          for y in 1..$enehp[@enenum].to_s.size #HP
            rect = Rect.new($enehp[@enenum].to_s[-y,1].to_i*16, 0, 16, 16)
            @status_window.contents.blt(@@enestex+tyousei_x+166-(y-1)*16,32+tyousei_y,pictureb,rect)
          end

          for y in 1..$data_enemies[@enedatenum.to_i].maxhp.to_s.size #MHP
            rect = Rect.new($data_enemies[@enedatenum.to_i].maxhp.to_s[-y,1].to_i*16, 0, 16, 16)
            @status_window.contents.blt(@@enestex+tyousei_x+166-(y-1)*16,48+tyousei_y,pictureb,rect)
          end
        end
        
        #KI　ーを表示
        rect = Rect.new(11*16, 16, 16, 16)
        @status_window.contents.blt(@@enestex+tyousei_x+166-(1-1)*16,64+tyousei_y,pictureb,rect)
        @status_window.contents.blt(@@enestex+tyousei_x+166-(1-1)*16,80+tyousei_y,pictureb,rect)
        
        #KIを表示
        #for y in 1..$enemp[@enenum].to_s.size #MP
        #  rect = Rect.new($enemp[@enenum].to_s[-y,1].to_i*16, 0, 16, 16)
        #  @status_window.contents.blt(@@enestex+166-(y-1)*16,64,pictureb,rect)
        #end
        #
        #for y in 1..$data_enemies[@enedatenum.to_i].maxmp.to_s.size #MMP
        #  rect = Rect.new($data_enemies[@enedatenum.to_i].maxmp.to_s[-y,1].to_i*16, 0, 16, 16)
        #  @status_window.contents.blt(@@enestex+166-(y-1)*16,80,pictureb,rect)
        #end
        

        #流派が一致かパワーアップフラグがONの時は上アイコン表示
        picture = Cache.picture("アイコン")
        #パワーアップ
        if $data_enemies[@enedatenum].hit-1 == $enecardi[@enenum] || $ene_power_up[@enenum] == true
          rect = Rect.new(32*0, 16, 32, 32)
          @status_window.contents.blt(@@enestex+tyousei_x+70-2,0+tyousei_y,picture,rect)
        end
        
        #防御力アップ
        if $ene_defense_up == true
          rect = Rect.new(32*1, 16, 32, 32)
          @status_window.contents.blt(@@enestex+tyousei_x+98,0+tyousei_y,picture,rect)
        end
            
        #超能力
        if $ene_stop_num[@enenum] > 0
          rect = Rect.new(32*5, 16, 32, 32)
          @status_window.contents.blt(@@enestex+tyousei_x+128,0+tyousei_y,picture,rect)
        end
      end
    end
  end
  
  #--------------------------------------------------------------------------
  # ● 発動スキル表示
  # type:1:攻撃、防御時の発動スキル　2:ヒットした時の発動スキル
  #-------------------------------------------------------------------------- 
  def output_runskill type=1

    #実行スキルがあれば表示
    #以下条件
    #・表示する最高フレームまで
    #・戦闘テストフラグが立っていない
    #・味方の全体攻撃は初回のみ表示(敵の全体攻撃はすべて(になっているはず))
    #・攻撃ヒットは全体攻撃でもすべて表示
    if (($tmp_run_skill.size > 0 || $tmp_run_hit_skill.size > 0 || $tmp_run_kabau_skill.size > 0) && @runskill_frame <= 60 && $battle_test_flag != true && 
      (@all_attack_count == 1 && @attackcourse == 0 || @attackcourse == 1 || type == 2)) && $game_variables[96] == 0 && @tec_non_attack == false
      waku_ysize = 28
      waku_picture = Cache.picture("戦闘_Sコンボ表示枠")
      waku_rect = Rect.new(0 ,0, 240, waku_ysize)
      put_skillnum = 3 #表示スキル数
      put_skillsraidx = 32 #スキルスライド
      put_skillsraidxmax = 240
      @runskill_frame += 1
      #@runskill_lastput_frame = 999999
      #発動スキルの表示位置(横)
      
      #スキル種別
      if type == 1
        #攻撃防御
        if $tmp_run_skill.size > put_skillnum
          put_loop = put_skillnum
        else
          put_loop = $tmp_run_skill.size - 1
        end
      elsif type == 3
        #かばう時
        if $tmp_run_kabau_skill.size > put_skillnum
          put_loop = put_skillnum
        else
          put_loop = $tmp_run_kabau_skill.size - 1
        end
      else
        #ヒット時
        if $tmp_run_hit_skill.size > put_skillnum
          put_loop = put_skillnum
        else
          put_loop = $tmp_run_hit_skill.size - 1
        end
      end
      #スキル表示
      for y in 0..put_loop
        
        #スキル表示位置を格納
        if @runskill_putx.size != put_loop.size
          @runskill_putx << -put_skillsraidxmax + (y * -48)
        end
        
        #スライド分追加
        if $game_variables[352] == 0
          #スライドする
          @runskill_putx[y] += put_skillsraidx
        else
          #固定位置
          @runskill_putx[y] = 0
        end
        
        #スキル表示位置調整
        if @runskill_putx[y] > 0
          @runskill_putx[y] = 0
        end
        
        mozi = "" #文字変数初期化(殻にする)
        
        #スキル表示か、etc表示か
        if y != put_skillnum
          #スキル名取得
          if type == 1
            #攻撃防御スキル
            mozi += $cha_skill_mozi_set[$tmp_run_skill[y]]
          elsif type == 3
            #かばうスキル
            mozi += $cha_skill_mozi_set[$tmp_run_kabau_skill[y]]
          else
            mozi += $cha_skill_mozi_set[$tmp_run_hit_skill[y]]
          end
        else
          mozi += "ETC"
        end
        output_mozi mozi
        rect = Rect.new(16*0,16*0, 16*mozi.split(//u).size,24)
        
        #色を白に変更
        $tec_mozi.change_tone(255,255,255)
        
        #発動スキル表示
        if $game_variables[351] == 0 || $game_variables[351] == 1 && @attackcourse == 0 ||
          $game_variables[351] == 2 && @attackcourse == 1
          #枠の表示
          @back_window.contents.blt(@runskill_putx[y],waku_ysize*y,waku_picture,waku_rect)
       
          #スキル名表示
          @back_window.contents.blt(16+@runskill_putx[y],waku_ysize*y,$tec_mozi,rect)
        end
      end
    end
          #もしまだ取得してなければ色を変える
          #if $cha_skill_spval[$partyc[@@cursorstate]][tmp_skill_list_put_skill_no[x]] < $cha_skill_get_val[tmp_skill_list_put_skill_no[x]]
          #  $tec_mozi.change_tone(128,128,128)
          #end
          
          #もしまだセットしたことなければ色を変える
          #if $cha_skill_set_flag[$partyc[@@cursorstate]][tmp_skill_list_put_skill_no[x]] == 0 && tmp_skill_list_put_skill_no[x] != 0
          #  $tec_mozi.change_tone(255,255,255)
          #end
  end
  #--------------------------------------------------------------------------
  # ● 除外通常戦闘攻撃をセット
  #-------------------------------------------------------------------------- 
  def set_ok_normalattackpattern
    
    #一応攻撃と防御側両方のスピードを取得しておく
    
    aspd = 0
    abig = false
    gspd = 0
    gbig = false
    
    ok_atk = []
    
    if @attackcourse == 0
      #味方が攻撃
      aspd = $game_actors[$partyc[@chanum]].agi
      #味方の大きさ状態
      abig = true if $cha_bigsize_on[@chanum.to_i] == true
      
      #敵が防御
      gspd = $data_enemies[@enedatenum].agi
      gbig = true if $data_enemies[@enedatenum].element_ranks[23] == 1
    else
      #味方が防御
      gspd = $game_actors[$partyc[@chanum]].agi
      gbig = true if $cha_bigsize_on[@chanum.to_i] == true
      
      #敵が攻撃
      aspd = $data_enemies[@enedatenum].agi
      abig = true if $data_enemies[@enedatenum].element_ranks[23] == 1
    end
    
    if aspd >= 0
      ok_atk = [1,2,3,4]
    end
    
    if aspd >= 25
      ok_atk << 14 #Z1 下がって溜めて攻撃
    end
    
    if aspd >= 30
      ok_atk << 18 #Z1 連打けん制
    end
    
    if aspd >= 35
      ok_atk << 15 #Z1 上下で何度か攻撃
      ok_atk << 16 #Z1 連打3回
    end
    
    if aspd >= 40
      ok_atk << 17 #Z2 連打
    end
    
    if aspd >= 45
      ok_atk << 5 #Z3 下がって攻撃
      ok_atk << 7 #1回ぶつかって攻撃
    end
    
    if aspd >= 55
      ok_atk << 8 #2回ぶつかる
      ok_atk << 10 #その場で連打
    end
      
    if aspd >= 65
      ok_atk << 6 #何度かぶつかる
      ok_atk << 9 #下がって連打
    end
    
    if aspd >= 75
      ok_atk << 11 #連打ぶつかって止め
    end
    
    if aspd >= 85
      ok_atk << 13 #攻撃側が何度か回避後攻撃
    end
    
    if aspd >= 95
      ok_atk << 12 #回避しながら連打
    end
    
    #巨大キャラの場合、戦闘アニメ処理が対応していないので除外する
    if $cha_bigsize_on[@chanum.to_i] == true || $data_enemies[@enedatenum].element_ranks[23] == 1
      #回避アニメが対応していない
      ok_atk.delete(12)
      #移動が下に行き過ぎる
      ok_atk.delete(15)
    end
    
    #ライチーのような打撃グラがないキャラは、攻撃側が回避を除外
    if @attackcourse == 0 && $data_enemies[@enedatenum].element_ranks[52] == 1
      #p 1,$data_enemies[@enedatenum]
      ok_atk.delete(13)
    end
    return ok_atk
  end
  #--------------------------------------------------------------------------
  # ● 戦闘アニメ処理
  #-------------------------------------------------------------------------- 
  def battle_start
    
    $err_run_process_d3 = "戦闘アニメ詳細処理開始"

    if $battle_test_flag == false #戦闘テスト時は実行しない(なぜかSコンボ時にエラーになるため)
      damage_calculation (@attackcourse)
    else
      @attack_hit = true
    end
    
    chpictureb = Cache.picture("戦闘アニメ")
    
    if $cha_bigsize_on[@chanum.to_i] != true
      @charect = Rect.new(0 ,96*0, 96, 96)
    else
      @charect = Rect.new(0 ,192*0, 192, 192)
    end
    #@enerect = Rect.new(0 ,96*0, 96, 96)
    ray_x = 0 #必殺技発動時のエネルギー波の位置(Z2以降使ってる)
    ray_y = 0
    damage_pattern = nil    #攻撃ヒット時のアニメパターン
    avoid_anime_no = 20     #攻撃回避時にアニメパターン
    
    
    #通常攻撃除外パターン用配列
    ok_normalattackpattern = []
    
    
    if @attackcourse == 0
      
      if $cha_set_action[@chanum] < 11
        attackpattern = $cha_set_action[@chanum]
        #attackpattern = rand($attack_pattern_max) + 1 #味方通常攻撃
        
        #対象攻撃を格納
        ok_normalattackpattern = set_ok_normalattackpattern
        
        #通常攻撃をセット
        begin
          $normalattackpattern = rand($attack_pattern_max) + 1 #味方通常攻撃
          #p not_normalattackpattern.index($normalattackpattern),$normalattackpattern
        end until ok_normalattackpattern.index($normalattackpattern) != nil
        
        #$normalattackpattern = rand($attack_pattern_max) + 1 #味方通常攻撃
      else
        attackpattern = $cha_set_action[@chanum] #味方必殺
        if @all_attack_count == 1
          if $battle_test_flag == false #戦闘テスト時は実行しない(なぜかSコンボ時にエラーになるため)
            tec_mp_cost = get_mp_cost $partyc[@chanum],$data_skills[attackpattern - 10].id,1
          else
            tec_mp_cost = 0
          end
          $cha_ki_zero[@chanum] = false
          
          if $full_cha_ki_zero != nil
            $full_cha_ki_zero[$partyc[@chanum]] = false
          end
          
          if @new_tecspark_flag == false #閃き必殺を覚えた際はKiを消費しない
            #戦闘練習中でなければKIを消費する
            if $game_switches[1305] != true
              $game_actors[$partyc[@chanum]].mp -= tec_mp_cost
            end
          else
            #@new_tecspark_flag = false
          end
          #$game_actors[$partyc[@chanum]].mp -= $data_skills[attackpattern - 10].mp_cost
        end
        #$game_actors[$partyc[@@battle_cha_cursor_state]].skills[$MenuCursorState].mp_cost
      end
    elsif ($enecardi[@enenum] == 0 || $enecardi[@enenum] == $data_enemies[@enedatenum].hit-1) && $data_enemies[@enedatenum].actions.size != 0
      attackpattern = @ene_set_action #敵必殺
      
      #p attackpattern,$data_enemies[@enedatenum].actions.size,@enedatenum
    else
      #elsif $enecardi[@enenum] != 0
      #対象攻撃を格納
      ok_normalattackpattern = set_ok_normalattackpattern

      #p @ene_set_action #必だと 0になる
      attackpattern = @ene_set_action
      #attackpattern = rand($attack_pattern_max) + 1   #敵通常攻撃
      
      #通常攻撃をセット
      begin
        $normalattackpattern = rand($attack_pattern_max) + 1 #味方通常攻撃
        #p not_normalattackpattern.index($normalattackpattern),$normalattackpattern
      end until ok_normalattackpattern.index($normalattackpattern) != nil
      #$normalattackpattern = rand($attack_pattern_max) + 1 #敵通常攻撃
    end

    @battle_anime_frame = 0
    
    if @attackcourse == 0 # 戦闘画像用の進行度格納
      chk_scenario_progress $game_variables[40],2   #味方はそのまま進行度を格納
      $btl_progress = $game_variables[40]
    else
      if @enedatenum < $ene_str_no[1] #敵は敵の番号見て格納
        $btl_progress = 0
      elsif @enedatenum < $ene_str_no[2]
        $btl_progress = 1
      else#if @enedatenum < $ene_str_no[3]
        $btl_progress = 2
      end
      #戦闘画像用の進行度格納
      chk_scenario_progress $btl_progress,2
      
    end
    
    #戦闘背景用の進行度格納
    
    if $game_switches[466] != true #戦闘背景を特殊進行度で格納するか
      chk_scenario_progress $game_variables[40],3
    else
      chk_scenario_progress $game_variables[301],3
    end

    
    #かばう戦闘シーンを表示していない
    $battle_kabau_scenesumi = false
    #かばう戦闘シーン実行中
    $battle_kabau_scenerun = false
    
    begin
    input_fast_fps
    input_battle_fast_fps if $game_variables[96] == 0
    @back_window.contents.clear
    output_back attackpattern                       # 背景更新
    
    #発動スキルの表示(かばう用)
    if $battle_kabau_runcha != nil
      output_runskill 3 #引数1で攻撃と判断
    end
    
    #発動スキルの表示
    if $battle_kabau_runcha == nil
      output_runskill 1 #引数1で攻撃と判断
    end
    #巨大キャラの場合は技背景を小さくする
    if $data_enemies[@enedatenum].element_ranks[23] == 1 || $cha_bigsize_on[@chanum] == true
      @tec_back_small = true
    end
    
    #真ん中移動を配列に入れランダム動作にする
    arr_mannakaidouno = [1,5,7,8,11,12,15]
    if @mannakaidouno == 0
      @mannakaidouno = arr_mannakaidouno[rand(arr_mannakaidouno.size)]
    end
    
    
    #1:普通に真ん中に行く
    #5:上下に揺れて
    #7:両者上から下へ
    #8:両者斜めから攻撃上、防御下
    #11:商社斜め上からから登場味方左上、敵、右上
    #12:両者小さいのでぶつかり上へ移動、上から登場して中央へ
    #15:両者小さいので中央に行き通常の状態でセンターへ移動
    
    #けん制を配列に入れランダム動作にする
    arr_keinseino = [13,18,100001]
    if @keinseino == 0
      @keinseino = arr_keinseino[rand(arr_keinseino.size)]
    end
    #13:両者小さいので2回ぶつかり左右から中央へ
    #18:両者小さいのでぶつかり左右へ消える
    #100001:小さいのでけん制しあう

    if @kenseiflag == nil
      if rand(2) == 1
        @kenseiflag = true
      else
        @kenseiflag = false
      end
    end
    #戦闘テストの場合自動的にセット
    if $battle_test_flag == true
      attackpattern = $cha_set_action[0] 
      $normalattackpattern = $test_normalattackpattern
      @mannakaidouno = 15
      #@keinseino = 1
    end
      

    begin #例外検知発動
    
    #かばう戦闘シーンを表示するか
    
    if $battle_kabau_runcha != nil && $battle_kabau_scenesumi == false && $game_switches[884] == false
      $battle_kabau_scenerun = true
      @battle_anime_result = anime_pattern 39
    elsif ($battle_kabau_scenesumi == true || $game_switches[884] == true) && $battle_kabau_runcha != nil
      
      #かばう戦闘アニメが表示し終わったら初期化
      #初期化
      $battle_kabau_runskill = nil
      $battle_kabau_runcha = nil
      $battle_kabawareru_runcha = nil
      
      Graphics.fadeout(10) if $game_switches[884] == false
      output_status
      @status_window.update
      @battle_anime_frame = -1
      @battle_anime_result = 0
      @runskill_frame = -1
      @runskill_putx = []
      Graphics.fadein(10) if $game_switches[884] == false
    else

      case attackpattern
      
      when 0
      
      when 1
        case $normalattackpattern
        when 1 #通常攻撃単純(真ん中へ行って蹴り)
          
          if @battle_anime_result == 0
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 1
            set_def_attack
          elsif @battle_anime_result == 2
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end

        when 2 #通常攻撃単純(両端から出てくる)
          
          if @battle_anime_result == 0
            #両端から見合い
            @battle_anime_result = anime_pattern 2
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern 1
          elsif @battle_anime_result == 2
            set_def_attack
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
          
        when 3 #通常攻撃単純(真ん中へ回転)
          
          if @battle_anime_result == 0
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern 1
          elsif @battle_anime_result == 1
            #ぶつかって斜めへ
            @battle_anime_result = anime_pattern 3
          elsif @battle_anime_result == 2
            #回転
            @battle_anime_result = anime_pattern 4
          elsif @battle_anime_result == 3
            set_def_attack
          elsif @battle_anime_result == 4
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 4 #通常攻撃連打
          if @battle_anime_result == 0
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern 1
          elsif @battle_anime_result == 1
            if @battle_anime_frame == 0
              Audio.se_play("Audio/SE/" + "Z1 打撃")    # 効果音を再生する
            end
            #キック　左
            set_def_attack 1
          elsif @battle_anime_result == 2
            if @battle_anime_frame == 0
              Audio.se_play("Audio/SE/" + "Z1 打撃")    # 効果音を再生する
            end
            #パンチ　右
            set_def_attack 2
          elsif @battle_anime_result == 3
            if @battle_anime_frame == 0
              Audio.se_play("Audio/SE/" + "Z1 打撃")    # 効果音を再生する
            end
            #パンチ　左
            set_def_attack 3
          elsif @battle_anime_result == 4
            #キック　右
            set_def_attack 4
          elsif @battle_anime_result == 5
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 5 #通常攻撃 真ん中へ行ってから攻撃側がさがり打撃
          
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #攻撃側後ろへ下がって前へ
            @battle_anime_result = anime_pattern 6
          elsif @battle_anime_result == 3
            set_def_attack
          elsif @battle_anime_result == 4
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 6 #通常攻撃 真ん中へ行ってから3回ぶつかって攻撃
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result ==1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #攻撃側後ろへ下がって前へ
            @battle_anime_result = anime_pattern 9
          elsif @battle_anime_result == 3
            set_def_attack
          elsif @battle_anime_result == 4
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 7 #通常攻撃 真ん中へ行ってから1回だけぶつかって攻撃
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #ぶつかって斜め
            @battle_anime_result = anime_pattern 10
          elsif @battle_anime_result == 3
            set_def_attack
          elsif @battle_anime_result == 4
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 8 #通常攻撃 真ん中へ行ってから1回ぶつかって、1買い下がって攻撃
          
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #ぶつかって斜め
            @battle_anime_result = anime_pattern 10
          elsif @battle_anime_result == 3
            #攻撃側後ろへ下がって前へ
            @battle_anime_result = anime_pattern 6
          elsif @battle_anime_result == 4
            set_def_attack
          elsif @battle_anime_result == 5
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 9 #通常攻撃 両者小さいので2回ぶつかり左右から中央へ
          
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino #13
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern 8
          elsif @battle_anime_result == 2
            #攻撃が下がって中央連打
            @battle_anime_result = anime_pattern 14
    #      elsif @battle_anime_result == 3
    #        set_def_attack
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 10 #通常攻撃 中央へ行って連打
          
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #攻撃 中央連打
            @battle_anime_result = anime_pattern 16
    #      elsif @battle_anime_result == 3
    #        set_def_attack
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 11 #通常攻撃 中央へ行って連打、1回ぶつかり、止め
          
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #攻撃 中央連打
            @battle_anime_result = anime_pattern 17
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 12 #通常攻撃 中央へ行って、消えながら連打
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #消えながら連打
            @battle_anime_result = anime_pattern 19
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 13 #通常攻撃 回避して近づいて攻撃
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #回避して近づいて攻撃
            @battle_anime_result = anime_pattern 100101
          elsif @battle_anime_result == 3
            set_def_attack
          elsif @battle_anime_result == 4
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 14 #通常攻撃 Z1 後ろに下がって溜めてから攻撃
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #回避して近づいて攻撃
            @battle_anime_result = anime_pattern 100102
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 15 #通常攻撃 Z1中央上下中央で各3回攻撃
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #回避して近づいて攻撃
            @battle_anime_result = anime_pattern 100103
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 16 #通常攻撃 Z1連打3回
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #回避して近づいて攻撃
            @battle_anime_result = anime_pattern 100104
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 17 #通常攻撃 Z2連打
          #けん制フラグによってけん制を飛ばすかどうか
          if @kenseiflag == false && @battle_anime_result == 0
            @battle_anime_result = 1
          end
          if @battle_anime_result == 0
            #けん制
            @battle_anime_result = anime_pattern @keinseino
          elsif @battle_anime_result == 1
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 2
            #回避して近づいて攻撃
            @battle_anime_result = anime_pattern 100105
          elsif @battle_anime_result == 3
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        when 18 #通常攻撃何度か殴ってけん制(真ん中へ行って)
          
          if @battle_anime_result == 0
            #攻撃・防御真ん中へ
            @battle_anime_result = anime_pattern @mannakaidouno
          elsif @battle_anime_result == 1
            #通常攻撃何度か殴ってけん制
            @battle_anime_result = anime_pattern 100106
          elsif @battle_anime_result == 2
            #通常ダメージ
            damage_pattern = 21
            battleanimeend = true
          end
        end
      else
        case $btl_progress
        
        #必殺技
        when 0 #Z1
          case attackpattern
    ##############################################################################
    #
    # Z1必殺技
    #
    ##############################################################################
          when 11 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end

          when 12 #エネルギー波
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 13 #複数エネルギー波
            
          when 14 #太陽拳
            
          when 15 #かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 105
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 16 #界王拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 106
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 17 #界王拳・かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 107
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 28 #元気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 118
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 41 #魔光砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 131
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 42 #連続魔光砲
            
          when 43 #目から怪光線
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 133
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 44 #口から怪光線
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 134
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 45 #爆裂魔光砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 135
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 46 #魔貫光殺砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 136
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 47 #魔激砲
            
          when 48 #魔空波
            
          when 49 #激烈光弾
            
          when 50 #魔空包囲弾
            
          when 56 #魔光砲(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 146
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 57 #魔閃光(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 147
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 61 #大猿変身(悟飯)
            @tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 151
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 71 #エネルギー波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 161
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 72 #カメハメ波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 162
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 73 #拡散エネルギー波(クリリン)
            
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 163
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 74 #気円斬(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 164
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 81 #狼牙風風拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 82 #かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 172
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 83 #繰気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 173
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
              
            end
          when 91 #エネルギー波(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 181
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 92 #四身の拳(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 182
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 93 #気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 183
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 94 #四身の拳気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 184
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 101 #どどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 191
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 102 #超能力
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 192
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 103 #サイコアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 193
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 29
              battleanimeend = true
            end

          when 111 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 112 #ビーム
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 202
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 113 #気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 203
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 114 #超気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 204
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 169 #エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1221
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 170 #強力エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1248
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 171 #爆発波(バーダック)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1249
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 173 #ファイナルリベンジャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1251
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 174 #スピリッツキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1252
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 235 #残像拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 325
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 236 #元祖かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 326
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 238 #萬國驚天掌
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 328
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 73
              battleanimeend = true
            end
          when 239 #MAXパワーかめはめは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 329
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 711 #師弟の絆(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 801
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 714 #ダブル衝撃波(ゴクウとチチ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 804
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 715 #捨て身の攻撃(ゴクウとピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 805
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 716 #かめはめ乱舞(ゴクウとクリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 806
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 717 #操気円斬(クリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 807
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 718 #願いを込めた元気玉(ゴクウとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 808
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 27
              battleanimeend = true
            end
          when 719 #ダブルどどんぱ(天津飯と餃子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 809
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 720 #超能力きこうほう(天津飯と餃子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 810
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 28
              battleanimeend = true
            end
          when 721 #狼鶴相打陣(ヤムチャと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 811
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              #必殺技発動
              @battle_anime_result = anime_pattern 811
            elsif @battle_anime_result == 5
              @battle_anime_result = anime_pattern 182
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 740 #亀仙流かめはめは(悟空クリリンヤムチャ亀仙人
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 830
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 749 #この世で一番強いヤツ(悟空ピッコロゴハンクリリン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 839
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 758 #もしもヤムチャに(悟空ヤムチャ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 848
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              #必殺技発動
              @battle_anime_result = anime_pattern 848
            elsif @battle_anime_result == 5
              if @btl_ani_cha_chg_no != 3 && $super_saiyazin_flag[1] != true || @btl_ani_cha_chg_no != 14 && $super_saiyazin_flag[1] == true
                @chay = STANDARD_CHAY
                @chax = TEC_CENTER_CHAX
              end
              if $super_saiyazin_flag[1] != true
                @btl_ani_cha_chg_no = 3
              else
                @btl_ani_cha_chg_no = 14
              end
              @battle_anime_result = anime_pattern 105
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 761 #ありがとうピッコロさん！(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 851
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 762 #行くぞクリリン(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 852
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 829 #ダブルアイビーム(ピッコロと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 919
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 311 #痺れ液(カイワレマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 401
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 312 #痺れ液(キュウコンマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 401
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 313 #痺れ液(サイバイマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 403
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 314 #自爆(サイバイマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 404
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 315 #エネルギー波(パンプキン系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 405
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 316 #エネルギー波(パンプキン系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 406
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 394 #大猿変身(オニオン)
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 484
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 26
              battleanimeend = true
              
            end
          when 317 #エネルギー波(ジンジャー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 407
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 318 #強力エネルギー波(ジンジャー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 408
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 319 #刀攻撃(ジンジャー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 409
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 320 #エネルギー波(ラディッツ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 410
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 321 #強力エネルギー波(ラディッツ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 411
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 322 #エネルギー波(ナッパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 412
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 323 #爆発波(ナッパ)
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 413
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 324 #口からエネルギー波(ナッパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 414
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 325 #衝撃波(ベジータ)
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
              
            end
          when 326 #エネルギー波(ベジータ)
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 416
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
              
            end
          when 328 #気円斬(ベジータ)
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 418
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
              
            end
          when 329 #爆発波(ベジータ)
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 419
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 330 #ギャリック砲(ベジータ)
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 420
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
              
            end
          when 383 #大猿変身(ベジータ)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 473
            elsif @battle_anime_result == 3
              #光線系ダメージ
              #damage_pattern = 26
              battleanimeend = true
              
            end
          when 595 #エネルギーは(大猿ベジータ)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 685
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 331 #エネルギー波(ニッキー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 407
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 332 #強力エネルギー波(ニッキー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 408
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 333 #刀攻撃(ニッキー系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 409
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 334 #エネルギー波(サンショ系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 424
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 335 #強力エネルギー波(サンショ系)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 425
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 336 #エネルギー弾(ガーリック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 426
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 338 #強力エネルギー波(ガーリック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 428
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 339 #強力エネルギー波(ガーリック巨大化)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 429
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 340 #ブラックホール波(ガーリック巨大化)
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 430
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 469 #キシーメ電磁ムチ(強
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 559
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 472 #エビ氷結攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 562
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 70
              battleanimeend = true
            end
          when 473 #ミソ皮伸び攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 563
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 71
              battleanimeend = true
            end
          when 474 #ミソエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 564
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 475 #ミソ強力エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 565
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 596 #エネルギーは(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 686
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 597 #フォトンストライク(両手エネルギー波(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 687
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 598 #口からエネルギー波(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 688
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 599 #ギガンティックボマー(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 689
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 600 #プラネットゲイザー(Drウィロー)
            @ene_tec_oozaru = true
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 690
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
                
            end
          end


        when 1 #Z2
          case attackpattern
    ##############################################################################
    #
    # Z2必殺技
    #
    ##############################################################################
          when 11 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 12 #エネルギー波(悟空)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 13 #複数エネルギー波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              #@tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2494
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 15 #カメハメ波(悟空)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 16 #界王拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1106
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 17 #界王拳・かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1107
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 28 #元気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1118
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 29 #超元気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1119
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 30 #超元気弾(イベント用)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1120
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 36 #スーパーカメハメ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1126
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              #damage_pattern = 42
              #if $game_variables[40] >= 2
              #  damage_pattern = 42
              #else
              #  damage_pattern = 23
              #end
              battleanimeend = true
            end
          when 41 #魔光砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1131
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 43 #目から怪光線(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1133
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 44 #口から怪光線(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1134
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 45 #爆裂魔光砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1135
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 46 #魔貫光殺砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1136
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 56 #魔光砲(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1146
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 57 #魔閃光(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1147
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 62 #爆裂ラッシュ(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1152
            elsif @battle_anime_result == 3
              #光線系ダメージ
              
              if $btl_progress >= 2
                damage_pattern = 46
              else
                damage_pattern = 24
              end
              battleanimeend = true
            end
          when 71 #エネルギー波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1146
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 72 #カメハメ波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1162
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 73 #拡散エネルギー波(クリリン)
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1163
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 74 #気円斬(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1164
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 81 #狼牙風風拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 82 #カメハメ波(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 83 #繰気弾(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1173
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 91 #エネルギー波(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 92 #四身の拳(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1182
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 93 #気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1183
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 94 #四身の拳気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1184
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 101 #どどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1191
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 102 #超能力
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1192
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 103 #サイコアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 193
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 29
              battleanimeend = true
            end
          when 111 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 112 #ビーム
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1202
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 113 #気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1203
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 114 #超気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1204
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 131 #エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1221
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 133 #爆発波(ベジータ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1223
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 134 #ギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1224
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 151 #エネルギー波(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1131
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 152 #口から怪光線(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1242
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 153 #強力エネルギー波(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1243
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 154 #ナメック戦士(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1244
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 155 #魔貫光殺砲(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_back_color = 1
              #@tec_output_back_no = 3
              @battle_anime_result = anime_pattern 32
              #@tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1245
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 157 #エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1221
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 158 #強力エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1248
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 159 #爆発波(バーダック)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1249
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 161 #ファイナルリベンジャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1251
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 162 #スピリッツキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1252
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 179 #惑星戦士たちとの戦い(イベント用)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1269
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 180 #フリーザとの戦い(イベント用)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1270
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 235 #残像拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 325
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 236 #元祖かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1326
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 238 #萬國驚天掌
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1328
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 73
              battleanimeend = true
            end
          when 239 #MAXパワーかめはめは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1329
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 256,265,275,283 #エネルギーは(トーマ、セリパ、トテッポ、パンブーキン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              damage_pattern = 42 if $cha_bigsize_on[@chanum] == true
              battleanimeend = true
            end
          #連続エネルギー波(全体)
          when 257,266,276,284
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              #@tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2494
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 258,267,277,285 #強力エネルギーは(トーマ、セリパ、トテッポ、パンブーキン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              damage_pattern = 44 if $cha_bigsize_on[@chanum] == true
              battleanimeend = true
            end
          when 259 #トーマ(エネルギーボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1349
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 261,272,280,288 #大猿変身
            @tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1351
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 269 #セリパ(ヒステリックサイヤンレディ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1359
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 278 #トテッポ(アングリーアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1368
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 286 #パンブーキン(マッシブカタパルト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1376
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 711 #師弟の絆(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1801
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 713 #サイヤンアタック(ゴクウとバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1803
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 714 #ダブル衝撃波(ゴクウとチチ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1804
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 715 #捨て身の攻撃(ゴクウとピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1805
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 716 #かめはめ乱舞(ゴクウとクリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1806
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 717 #操気円斬(クリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1807
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 718 #願いを込めた元気玉(ゴクウとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1808
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 27
              battleanimeend = true
            end
          when 719 #ダブルどどんぱ(テンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1809
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 720 #超能力きこうほう(天津飯と餃子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1810
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 28
              battleanimeend = true
            end
          when 721 #狼鶴相打陣(ヤムチャと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1811
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              #@tec_output_back = true
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              #必殺技発動
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1811
            elsif @battle_anime_result == 5
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1182
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 723 #ギャリックかめはめは(ゴクウとベジータ)
            @damage_huttobi = false
            @damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1813
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 724 #どどはめは(ヤムチャとテンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1814
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 732 #気の開放(ゴハンとクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1822
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 735 #アウトサイダーショット(ピッコロとバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2825
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 740 #亀仙流かめはめは(悟空クリリンヤムチャ亀仙人
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1830
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 742 #サイヤンアタック(トーマ＆パンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1832
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 743 #アウトサイダーショット(バーダックとトーマ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1833
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 744 #サイヤンアタック(セリパ＆トテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1834
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 745 #アウトサイダーショット(バーダックとセリパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1835
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 746 #アウトサイダーショット(バーダックとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1836
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 747 #アウトサイダーショット(バーダックとパンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1837
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 749 #この世で一番強いヤツ(悟空ピッコロゴハンクリリン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1839
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 752 #強襲サイヤ人(トーマたち)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              #@tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1842
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 758 #もしもヤムチャに…(悟空とヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1848
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              #@tec_output_back = true
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              #必殺技発動
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1848
            elsif @battle_anime_result == 5
              if @btl_ani_cha_chg_no != 3 && $super_saiyazin_flag[1] != true || @btl_ani_cha_chg_no != 14 && $super_saiyazin_flag[1] == true
                @chay = STANDARD_CHAY
                @chax = TEC_CENTER_CHAX
              end
              if $super_saiyazin_flag[1] != true
                @btl_ani_cha_chg_no = 3
              else
                @btl_ani_cha_chg_no = 14
              end
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          
          when 761 #ありがとうピッコロさん！(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1851
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 762 #行くぞクリリン(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1852
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 766 #油断してやがったな(悟飯とベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1856
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 767 #ありがとうピッコロさん！(若者とゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1857
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 768 #地球の方(若者とクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1858
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 769 #なぜかいきのあう(若者とヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1859
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 78
              battleanimeend = true
            end
          when 775 #アウトサイダーショット(トーマとセリパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1865
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 776 #アウトサイダーショット(トーマとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1866
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 777 #アウトサイダーショット(セリパとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1867
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 778 #アウトサイダーショット(トテッポとパンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1868
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 814 #絶好のチャンス(ゴハンとクリリンとベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1904
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 815 #オレを半殺しにしろ(クリリン、ベジータ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1905
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 816 #超サイヤ人だ孫悟空(悟空、ピッコロ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1906
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 819 #地球丸ごと超決戦
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1909
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 829 #ダブルアイビーム(ピッコロと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1919
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 886 #決死の超元気玉
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1976
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 48
              battleanimeend = true
            end
          when 341 #(ナップル系)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 342 #(グプレー系)ビームガン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 343 #(アプール系)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 344 #(キュイ系)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 345 #キュイ系爆発波
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1435
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 346 #(キュイ系)連続エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1436
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 347 #(ドドリア系)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1437
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 348 #(ドドリア系)口から怪光線
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1438
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 349 #(ドドリア系)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1439
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 350 #(ザーボン系)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1440
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 351 #(ザーボン系)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1441
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 352 #(ザーボン系)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1442
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 353 #(ザーボン変身)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1443
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 354 #(ザーボン変身)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1444
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 355 #(ギニュー)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1445
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 356 #(ギニュー)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1446
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 357 #(ギニュー)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1447
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 359 #(ジース)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1449
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 360 #(ジース)クラッシャーボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1450
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 361 #(バータ)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1451
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 362 #(バータ)スピードアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1452
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 363 #(リクーム)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1453
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 364 #(リクーム)連続エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @tec_back_small = true
              @battle_anime_result = anime_pattern 1454
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 365 #(リクーム)イレイザーガン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1455
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 366 #(グルド)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1456
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 367 #(グルド)タイムストップ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1457
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 368 #(フリーザ)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1458
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 369 #(フリーザ)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1459
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 370 #(フリーザ)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1460
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 371 #(フリーザ1)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1461
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 372 #(フリーザ1)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1462
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 373 #(フリーザ1)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1463
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 374 #(フリーザ2)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1464
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 375 #(フリーザ2)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1465
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 376 #(フリーザ2)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1466
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 377 #(フリーザ3)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1467
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 378 #(フリーザ3)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1468
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 379 #(フリーザ3)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1469
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 634 #(フリーザ3)デスボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1724
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 704 #(フリーザ3)殺されるべきなんだ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1794
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 380 #(超ベジータ)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 381 #(超ベジータ)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1223
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 382 #(超ベジータ)ギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1224
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 705 #(超ベジータ)スーパーギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1795
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 384 #エネルギーは(ターレス
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1474
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 385 #爆発波(ターレス
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1475
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 386 #キルドライバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1476
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 387 #メテオバースト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1477
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 654 #大猿変身(ターレス)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
              @tec_output_back_no = 1 #必殺背景縦
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1744
            elsif @battle_anime_result == 3
              #光線系ダメージ
              #damage_pattern = 26
              battleanimeend = true
            end
          when 388 #エネルギーは(スラッグ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1478
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 389 #爆発波(スラッグ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1479
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 390 #ビッグスマッシャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1480
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 391 #メテオバースト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1481
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 655 #スラッグ巨大化
            @ene_tec_oozaru = true
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1745
            elsif @battle_anime_result == 3
              #光線系ダメージ
              #damage_pattern = 26
              battleanimeend = true
            end
          when 392,393 #(ジース,バータ)パープルコメットクラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1482
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 476 #(惑星戦士1)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 477 #(惑星戦士2)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 478 #(惑星戦士3)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 479 #(惑星戦士4)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          #Z2敵汎用エネルギー波
          when 635,639,642,646,649,656,660,663,667,670
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 636 #アモンド気円斬
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1726
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 637 #アモンドプラネットボム
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1727
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 640 #コズミックアタック(カカオ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1730
            elsif @battle_anime_result == 3
              #コズミックアタックダメージ
              damage_pattern = 80
              battleanimeend = true
            end
          when 643 #爆発波(ダイーズ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1733
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 644 #メテオボール(ダイーズ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1734
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 647,650 #ダブルエネルギー波 レズン、ラカセイ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1740
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 657 #エビルクエーサー アンギラ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1747
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 658 #手が伸びる アンギラ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1748
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 661 #エビルグラビティ ドロダボ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1751
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 664 #エビルコメット メダマッチャ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1754
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 665 #カエル攻撃 メダマッチャ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1755
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25 #23
              battleanimeend = true
            end
          when 668 #エビルインパクト ゼエウン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1758
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 671 #アンギラとメダマッチャ腕伸びるカエル攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1761
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          else
            if $battle_test_flag == true
              damage_pattern = @test_damage_pattern
            else
              damage_pattern = 41
            end
            battleanimeend = true
          end
        when 2 #Z3
          case attackpattern
    ##############################################################################
    #
    # Z3必殺技
    #
    ##############################################################################
          when 11 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 12 #エネルギー波(悟空)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 15 #カメハメ波(悟空)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 16 #界王拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true if $btl_progress >= 2
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1106
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 17 #界王拳・かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true if $btl_progress >= 2
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1107
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 28 #元気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_output_back = false
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
              #@tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              #@tec_output_back_no = 1
              #@tec_output_back = true
              @battle_anime_result = anime_pattern 2118
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 29 #超元気弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_output_back_no = 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2119
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 36 #スーパーカメハメ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1126
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              #damage_pattern = 44
              battleanimeend = true
            end
          when 37 #瞬間移動カメハメ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2127
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              #damage_pattern = 44
              battleanimeend = true
            end
          when 39,69,143,168,195,255 #超サイヤ人変身
            @tec_tyousaiya = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2129
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 41 #魔光砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1131
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 42 #爆裂波(ピッコロ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              #@tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2132
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 43 #目から怪光線(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1133
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 44 #口から怪光線(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1134
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 45 #爆裂魔光砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1135
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 46 #魔貫光殺砲(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @tec_output_back_no = 3
              @battle_anime_result = anime_pattern 32
              @tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2136
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 49 #激烈光弾(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @tec_output_back_no = 0
              @battle_anime_result = anime_pattern 32
              #@tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2139
            elsif @battle_anime_result == 3
              #光線系ダメージ
              
              if $game_variables[96] != 4
                damage_pattern = 42
                battleanimeend = true
              else
                damage_pattern = 49
                battleanimeend = true
              end
            end
          when 50 #魔空包囲弾(ピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @tec_output_back_no = 0
              @battle_anime_result = anime_pattern 32
              #@tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2140
            elsif @battle_anime_result == 3
              #光線系ダメージ
              
              if $game_variables[96] != 3
                damage_pattern = 42
                battleanimeend = true
              else
                damage_pattern = 50
                battleanimeend = true
              end
            end
          when 56 #魔光砲(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1146
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 57 #魔閃光(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2147
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 58 #カメハメ波(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1148
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 62 #爆裂ラッシュ(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1152
            elsif @battle_anime_result == 3
              #光線系ダメージ
                damage_pattern = 46
              battleanimeend = true
            end
          when 63 #激烈ませんこう
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              
              #@tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2153
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              #damage_pattern = 44
              battleanimeend = true
            end
          when 64 #スーパーかめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2154
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              #damage_pattern = 44
              battleanimeend = true
            end
          when 71 #エネルギー波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1146
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 72 #カメハメ波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1162
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 73 #拡散エネルギー波(クリリン)
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2163
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 74 #気円斬(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2164
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 75 #気円烈斬(クリリン)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @tec_output_back_no = 0
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2165
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 81 #狼牙風風拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 82 #カメハメ波(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 83 #繰気弾(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2173
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 84 #超繰気弾(ヤムチャ)
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2174
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 85 #新狼牙風風拳(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2175
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 91 #エネルギー波(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 92 #四身の拳(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2182
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 93 #気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2183
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 94 #四身の拳気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2184
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 46
              battleanimeend = true
            end
          when 95 #新気功砲(テンシンハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2185
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 47
              battleanimeend = true
            end
          when 101 #どどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1191
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 102 #超能力
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2192
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 103 #サイコアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 193
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 29
              battleanimeend = true
            end
          when 104 #超能力(全体)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2194
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 76
              battleanimeend = true
            end
          when 105 #おもいっきりどどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2195
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 111 #衝撃波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1101
            elsif @battle_anime_result == 3
              #衝撃波系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 112 #ビーム
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1202
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 113 #気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1203
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 114 #超気功スラッガー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1204
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 117 #芭蕉扇
            if @all_attack_count >= 2 && @battle_anime_result == 0
              #@tec_output_back = false
              #@chr_cutin = true
              #@chr_cutin_flag = true
              #@chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2207
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 131 #エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1221
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 133 #爆発波(ベジータ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2223
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 134 #ギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1224
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 135 #ビッグバンアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2225
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 140 #ファイナルフラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2230
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 151 #エネルギー波(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1131
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 152 #口から怪光線(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1242
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 153 #強力エネルギー波(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1243
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 154 #ナメック戦士(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1244
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 155 #魔貫光殺砲(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_back_color = 1
              #@tec_output_back_no = 3
              @battle_anime_result = anime_pattern 32
              @tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1245
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 156 #ミスティックフラッシャー(若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_back_color = 1
              #@tec_output_back_no = 3
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
              #@tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2246
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 79
              battleanimeend = true
            end
            
          #バーダック
          when 157 #エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1221
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 158 #強力エネルギーは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1248
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 159 #爆発波(バーダック)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1249
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 161 #ファイナルリベンジャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1251
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 162 #スピリッツキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1252
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 165 #スーパーファイナルリベンジャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2255
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 181 #エネルギー波(トランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1102
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          
          when 182,417,510 #カタナ攻撃(トランクス、サウザー、ゴクア)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2272
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 183 #爆発波(トランクス)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2273
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 184 #ませんこう(トランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2274
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 186 #バーニングアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2276
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          
          when 187 #シャイニングソードアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2277
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
              
            end
          when 188 #ヒートドームアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              #@tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2278
            elsif @battle_anime_result == 3
              #光線系ダメージ
              @tec_output_back_no = 1
              damage_pattern = 72
              battleanimeend = true
            end
          when 191 #フィニッシュバスター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              #@tec_back_color = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2281
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 204 #気円斬(18号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2294
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 208 #エネルギーウェイブ(18号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2298
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 218 #エネルギーウェイブ(17号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2308
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 224 #ロケットパンチ(16号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2314
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 225 #ヘルズフラッシュ(16号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2315
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 227 #自爆(16号
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2317
            elsif @battle_anime_result == 3
            #  #何も起きない
              damage_pattern = 0
              battleanimeend = true
            end
          when 235 #残像拳
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 325
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 236 #元祖かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1326
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 238 #萬國驚天掌
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1328
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 73
              battleanimeend = true
            end
          when 239 #MAXパワーかめはめは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2329
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 240 #魔封波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2330
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 246 #まこうほう(未来悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2336
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 247 #ませんこう
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2337
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 248 #超爆力波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2338
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 250 #魔貫光殺砲(未来悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_back_color = 1
              #@tec_output_back_no = 3
              @battle_anime_result = anime_pattern 32
              @tec_output_back = false
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2340
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 251 #スーパーカメハメ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2341
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 252 #爆裂乱舞
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2342
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 256,265,275,283 #エネルギーは(トーマ、セリパ、トテッポ、パンブーキン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              damage_pattern = 42 if $cha_bigsize_on[@chanum] == true
              battleanimeend = true
            end
          #連続エネルギー波(全体)
          when 257,266,276,284
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              #@tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2494
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 258,267,277,285 #強力エネルギーは(トーマ、セリパ、トテッポ、パンブーキン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              damage_pattern = 44 if $cha_bigsize_on[@chanum] == true
              battleanimeend = true
            end
          when 259 #トーマ(エネルギーボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1349
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 24
              battleanimeend = true
            end
          when 260 #トーマ(フルパワーフレイムバレット
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2350
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 261,272,280,288 #大猿変身
            @tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1351
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 269 #セリパ(ヒステリックサイヤンレディ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1359
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 270 #セリパ(ハンティングアロー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2360
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 278 #トテッポ(アングリーアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1368
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 279 #トテッポ(アングリーキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2369
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 286 #パンブーキン(マッシブカタパルト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1376
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 287 #パンブーキン(マッシブキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2377
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 298 #ダイナマイトキック(イベント用)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2388
            elsif @battle_anime_result == 3
              #何もしないで次へ
              damage_pattern = 40
              battleanimeend = true
            end
          when 711 #師弟の絆(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1801
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 713 #サイヤンアタック(ゴクウとバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1803
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 714 #ダブル衝撃波(ゴクウとチチ)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1804
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 715 #捨て身の攻撃(ゴクウとピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1805
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 716 #かめはめ乱舞(ゴクウとクリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1806
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 717 #操気円斬(クリリンとヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1807
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 718 #願いを込めた元気玉(ゴクウとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1808
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 27
              battleanimeend = true
            end
          when 719 #ダブルどどんぱ(テンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1809
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 720 #超能力きこうほう(天津飯と餃子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1810
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 28
              battleanimeend = true
            end
          when 721 #狼鶴相打陣(ヤムチャと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1811
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              #@tec_output_back = true
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              
              #必殺技発動
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1811
            elsif @battle_anime_result == 5
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1182
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 722 #地球人ストライク(クリリン、ヤムチャ、テンシンハン、チャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2812
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 46
              battleanimeend = true
            end
          when 723 #ギャリックかめはめは(ゴクウとベジータ)
            @damage_huttobi = false
            @damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1813
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 724 #どどはめは(ヤムチャとテンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1814
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 726 #ノンステップバイオレンス(17号と18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2816
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 728 #ヘルズスパイラル(16号と17号と18号)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2818
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 729 #ダブル気円斬(クリリンと18号)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2819
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 730 #ギャリックバスター(ベジータとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2820
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 732 #気の開放(ゴハンとクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1822
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 733 #眠れる力(ごはんと16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2823
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 735 #アウトサイダーショット(ピッコロとバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2825
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 736 #ダブルませんこう(ゴハンとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2826
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 737 #ダブルまかんこうさっぽう(ピッコロと未来ゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2827
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 738 #答えは8だ(クリリンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1828
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 739 #四身の拳・かめはめは(ごくうとテンシンハン)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2829
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 740 #亀仙流かめはめは(悟空クリリンヤムチャ亀仙人
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1830
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 742 #サイヤンアタック(トーマ＆パンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1832
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 743 #アウトサイダーショット(バーダックとトーマ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1833
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 744 #サイヤンアタック(セリパ＆トテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1834
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 745 #アウトサイダーショット(バーダックとセリパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1835
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 746 #アウトサイダーショット(バーダックとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1836
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 747 #アウトサイダーショット(バーダックとパンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1837
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 748 #3大超サイヤ人
            $goku3dai = false
            #ゴクウが通常の時は超サイヤ人に変身する
            @tec_tyousaiya = true if $super_saiyazin_flag[1] != true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2838
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 749 #この世で一番強いヤツ(悟空ピッコロゴハンクリリン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2839
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 750 #メタルクラッシュ(超悟空と超ベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2840
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 74
              battleanimeend = true
            end
          when 751 #あっちいってけろ(ヤムチャチチ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2841
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 752 #強襲サイヤ人(トーマたち)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              #@tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1842
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 753 #アウトサイダーショット(ピッコロと17号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2843
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 754 #よけられるハズだべ・・・(チチかめせんにん
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2844
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 755 #うごきをとめろ(亀仙人とテンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2845
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 756 #ダブル残像拳(ごくうとクリリン)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2846
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 757 #師弟アタック(未来悟飯とトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2847
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 758 #もしもヤムチャに…(悟空とヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1848
            elsif @battle_anime_result == 3
              @btl_ani_cha_chg_no = 7
              #@tec_output_back = true
              @battle_anime_result = anime_pattern 171
            elsif @battle_anime_result == 4
              #必殺技発動
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1848
            elsif @battle_anime_result == 5
              if @btl_ani_cha_chg_no != 3 && $super_saiyazin_flag[1] != true || @btl_ani_cha_chg_no != 14 && $super_saiyazin_flag[1] == true
                @chay = STANDARD_CHAY
                @chax = TEC_CENTER_CHAX
              end
              if $super_saiyazin_flag[1] != true
                @btl_ani_cha_chg_no = 3
              else
                @btl_ani_cha_chg_no = 14
              end
              @tec_output_back = true
              @battle_anime_result = anime_pattern 1105
            elsif @battle_anime_result == 6
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 759 #ダブル残像拳(クリリンと亀仙人)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true if $btl_progress >= 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2846
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 760 #打て！悟飯(ピッコロとゴハンとクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1850
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 761 #ありがとうピッコロさん！(ピッコロとゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1851
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 762 #行くぞクリリン(ピッコロとクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1852
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 764 #お母さんをいじめるな　悟飯とチチ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2854
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 46
              battleanimeend = true
            end
          when 765 #アウトサイダーショット(ピッコロとベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2855
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 766 #油断してやがったな(悟飯とベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1856
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 767 #ピッコロさん！？(若者とゴハン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1857
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 768 #地球の方(若者とクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1858
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 769 #なぜかいきのあう(若者とヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1859
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 78
              battleanimeend = true
            end
          when 770 #ダブルまかんこうさっぽう(ピッコロとわかもの)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2860
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 771 #大師匠と孫弟子(ピッコロとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2861
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 772 #ダブルスラッシュ(トランクスとクリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2862
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 773 #ギャリックかめはめは(ヤムチャとベジータ)
            @damage_huttobi = false
            @damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2863
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 774 #親子かめはめ波(悟空と悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2864
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 775 #アウトサイダーショット(トーマとセリパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1865
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 776 #アウトサイダーショット(トーマとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1866
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 777 #アウトサイダーショット(セリパとトテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1867
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 778 #アウトサイダーショット(トテッポとパンブーキン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1868
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 779 #ダブルまかんこうさっぽう(未来悟飯とわかもの)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2869
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 780 #母さんは俺が守る　未来悟飯とチチ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2870
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 781 #ダブルませんこう(未来ゴハンとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2871
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 782 #トリプルませんこう(悟飯、未来ゴハンとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2872
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 783 #トリプル魔貫光殺法(ピッコロ、未来ゴハンと若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2873
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 784 #アウトサイダーショット(ピッコロと18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2874
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 785 #アウトサイダーショット(ピッコロと16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2875
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 786 #アウトサイダーショット(未来悟飯と18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2876
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 787 #アウトサイダーショット(未来悟飯と17号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2877
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 788 #アウトサイダーショット(未来悟飯と16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2878
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 789 #アウトサイダーショット(未来悟飯とベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2879
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 790 #超爆力魔波(未来悟飯とピッコロ)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2880
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 791 #ダブルアタック(天津飯とトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2881
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 792 #ダブルアタック(チャオズとトランクス)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2882
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 793 #悟飯ちゃんを巻き込む出ねえ(チチとピッコロ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2883
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 794 #悟空さを巻き込む出ねえ(チチとベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2884
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 795 #戦闘民族サイヤ人、バーダック、トーマ、セリパたち
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2885
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 796 #ダブルかめはめ波(悟空)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2886
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 797 #ダブルかめはめ波(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2887
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 798 #ダブルかめはめ波(クリリン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2888
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 799 #ダブルかめはめ波(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2889
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 800 #ダブルかめはめ波(ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2890
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 801 #かめはめ乱舞(親子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2891
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 802 #アンドロイドストライク
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2892
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 803 #あの時の借りを返すよ！(天津飯と18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2893
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 804 #あの時の借りを返すぞ！(天津飯と16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2894
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 805 #借りがあるらしいな！(天津飯と17号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2895
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 806 #あんたも助けるよ！(チャオズと18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2896
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 807 #お前も助けるぞ！(チャオズと16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2897
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 808 #今度は俺が助けてやる(チャオズと17号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2898
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 809 #流派を超えた連携(天津飯と亀仙人)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2899
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 47
              battleanimeend = true
            end
          when 810 #流派を超えた連携(チャオズと亀仙人)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2900
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 811 #ダブル魔封波(ピッコロと亀仙人)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2901
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 812 #ダブル魔封波(若者と亀仙人)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2902
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 813 #スピリッツかめはめ波(悟空とバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2903
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 814 #絶好のチャンス(ゴハンとクリリンとベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1904
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 815 #オレを半殺しにしろ(クリリン、ベジータ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1905
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 816 #超サイヤ人だ孫悟空(悟空、ピッコロ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1906
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 817 #俺たちに不可能はない(超悟空、超ベジータ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2907
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 818 #ダブルロイヤルアタック(超ベジータ、チャオズ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2908
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 819 #地球丸ごと超決戦
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1909
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 820 #やっぱり息の合う二人
            @damage_huttobi = false
            @damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2910
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 821 #足元がお留守だぜ！
            @damage_huttobi = false
            @damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2911
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 822 #オラにパワーをくれ！
            #@damage_huttobi = false
            #@damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2912
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 21
              battleanimeend = true
            end
          when 823 #新狼鶴相打陣
            #@damage_huttobi = false
            #@damage_center = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2913
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 824 #超操気円裂斬
            #@damage_huttobi = false
            #@damage_center = true
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2914
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 825 #烈戦人造人間
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2915
            elsif @battle_anime_result == 3
              #光線系ダメージ
              @damage_huttobi = false
              damage_pattern = 44
              battleanimeend = true
            end
          when 828 #ダブルポコペン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2918
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 829 #ダブルアイビーム(ピッコロと天津飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1919
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 830 #超能力きこうほう改(天津飯と餃子)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2920
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 82
              battleanimeend = true
            end
          when 831 #激烈魔閃光弾
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2921
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 832 #ファイナルバスター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2922
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 833 #ファイナルかめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2923
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 834 #未来のZ戦士
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2924
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 835 #サイコ気円裂斬
            #@damage_huttobi = false
            #@damage_center = true
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2925
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 837 #ダブルエクスプロージョン(ベジータとトランクス)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2927
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 838 #ダブルエクスプロージョン(未来悟飯とトランクス)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2928
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 839 #ダブルエクスプロージョン(ピッコロとトランクス)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2929
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 840 #ダブルエクスプロージョン(ピッコロ、ベジータ)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2930
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 841 #ダブルエクスプロージョン(ベジータ、未来悟飯)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2931
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 842 #ダブルエクスプロージョン(バーダック、ピッコロ)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2932
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 843 #ダブルエクスプロージョン(バーダック、ベジータ)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2933
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 844 #ダブルエクスプロージョン(バーダック、トランクス)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2934
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 845 #ダブルエクスプロージョン(バーダック、未来悟飯)

            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
              @tec_back_small = true
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2935
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 846 #ロイヤルガード(ベ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2936
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 847 #ロイヤルガード(ト)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2937
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 849 #親子乱舞(悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2939
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 850 #親子乱舞(未来悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2940
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 851 #信じる心(クリリンと16号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2941
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 852 #月を破壊する者
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2942
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 853 #フルパワーアウトサイダーショット(バ、トー)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2943
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 854 #フルパワーアウトサイダーショット(バ、セ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2944
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 855 #フルパワーアウトサイダーショット(バ、トテ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2945
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 856 #フルパワーアウトサイダーショット(バ、パ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2946
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 857 #フルパワーアウトサイダーショット(トー、セ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2947
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 858 #フルパワーアウトサイダーショット(トー、トテ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2948
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 859 #フルパワーアウトサイダーショット(トー、パ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2949
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 860 #フルパワーアウトサイダーショット(セ、トテ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2950
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 861 #フルパワーアウトサイダーショット(セ、パ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2951
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 862 #フルパワーアウトサイダーショット(トテ、パ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2952
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 863 #フルパワーアウトサイダーショット(ピ、18)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2953
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 864 #フルパワーアウトサイダーショット(ピ、17)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2954
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 865 #フルパワーアウトサイダーショット(ピ、16)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2955
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 866 #フルパワーアウトサイダーショット(未来悟飯、18)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2956
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 867 #フルパワーアウトサイダーショット(未来悟飯、17)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2957
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 868 #フルパワーアウトサイダーショット(未来悟飯、16)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2958
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 869 #フルパワーアウトサイダーショット(未来悟飯、ベジータ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2959
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 870 #師弟アタック改(ピッコロ、未来悟飯)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2960
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 871 #師弟アタック改(ピッコロ、若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2961
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 872 #弟子コンビアタック(未来悟飯、若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2962
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 873 #オメエもピッコロとおなじけ！(チチ&若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2963
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 874 #あっち行ってけろ改(チチ&ヤムチャ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2964
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 875 #悟空さに近づく出ねえ！(チチ&18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2965
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 876 #悟空さに近づく出ねえ！(チチ&18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2966
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 877 #悟空さに近づく出ねえ！(チチ&18号)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2967
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 878 #だいじょうぶかチチ！？(悟空とチチ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2968
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 879 #世話焼かせるんじゃねえ！(バーダックとチチ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2969
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 880 #カカロットが世話になったらしいな！(亀仙人とバーダック)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2970
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 881 #フルパワーアウトサイダーショット(未来悟飯、トーマ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2971
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 882 #フルパワーアウトサイダーショット(未来悟飯、セリパ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2972
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 883 #フルパワーアウトサイダーショット(未来悟飯、トテッポ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2973
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 884 #フルパワーアウトサイダーショット(未来悟飯、パ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2974
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 885 #師弟アタック？(悟飯、若者)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2975
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 886 #決死の超元気玉
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2976
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 48
              battleanimeend = true
            end
          when 887 #自然を愛する者
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2977
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 889 #スーパーどどはめは(ヤムチャとテンシンハンとチャオズ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true if $btl_progress >= 2
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2979
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 311 #痺れ液(カイワレマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 401
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 312 #痺れ液(キュウコンマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 401
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 313 #痺れ液(サイバイマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 403
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 314 #自爆(サイバイマン)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 404
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 317 #エネルギー波(ジンジャー系)
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 407
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 318 #強力エネルギー波(ジンジャー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 408
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 319 #刀攻撃(ジンジャー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 409
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 618 #刀攻撃(ジンジャー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1708
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 331 #エネルギー波(ニッキー系)
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 407
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 332 #強力エネルギー波(ニッキー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 408
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 333 #刀攻撃(ニッキー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 409
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 619 #刀攻撃(ニッキー系)
            @tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1709
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 334 #エネルギー波(サンショ系)
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 424
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 335 #強力エネルギー波(サンショ系)
            #@tec_back_small = true
            
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 425
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 620 #連続強力エネルギー波(サンショ系)
            #@tec_back_small = true
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @chr_cutin_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1710
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 336 #エネルギー弾(ガーリック)
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 426
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 338 #強力エネルギー波(ガーリック)
            @tec_back_small = true
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 428
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 339 #強力エネルギー波(ガーリック巨大化)
            @tec_back_small = true
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 429
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 340 #ブラックホール波(ガーリック巨大化)
            @tec_back_small = true
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @chr_cutin_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 430
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 345 #キュイ系爆発波
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1435
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 346 #(キュイ系)連続エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1436
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 348 #(ドドリア系)口から怪光線
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1438
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 349 #(ドドリア系)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1439
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 354 #(ザーボン変身)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1444
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 356 #(ギニュー)スーパーエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1446
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 357 #(ギニュー)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1447
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 360 #(ジース)クラッシャーボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1450
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 362 #(バータ)スピードアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1452
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 364 #(リクーム)連続エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1454
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 365 #(リクーム)イレイザーガン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1455
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 367 #(グルド)タイムストップ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1457
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 392,393 #(ジース,バータ)パープルコメットクラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1482
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 621 #デッドゾーン(ガーリック巨大化)
            @tec_back_small = true
            
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @chr_cutin_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              @tec_output_back_no = 1
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1711
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 75
              battleanimeend = true
            end

          when 469 #キシーメ電磁ムチ(強
            if @battle_anime_result == 0
              @chr_cutin_flag = true
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 559
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 471 #エビ氷結攻撃(全体)
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @chr_cutin_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              @chr_cutin_flag = true
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 561
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 70
              battleanimeend = true
            end
          when 472 #エビ氷結攻撃
            if @battle_anime_result == 0
              @chr_cutin_flag = true
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 562
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 70
              battleanimeend = true
            end
          when 473 #ミソ皮伸び攻撃
            if @battle_anime_result == 0
              @chr_cutin_flag = true
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 563
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 71
              battleanimeend = true
            end
          when 474 #ミソエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 564
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 475 #ミソ強力エネルギー波
            if @battle_anime_result == 0
              @chr_cutin_flag = true
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 565
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 596 #エネルギーは(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 686
            elsif @battle_anime_result == 3
              
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 597 #フォトンストライク(両手エネルギー波(Drウィロー)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 687
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 598 #口からエネルギー波(Drウィロー)
            @ene_tec_oozaru = true
            @chr_cutin_flag = true
            if @battle_anime_result == 0
              
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 688
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
              
            end
          when 599 #ギガンティックボマー(Drウィロー)
            @ene_tec_oozaru = true
            @chr_cutin_flag = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 689
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 600 #プラネットゲイザー(Drウィロー)
            @ene_tec_oozaru = true
            @chr_cutin_flag = true
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 690
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
                
            end
          when 385 #爆発波(ターレス
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1475
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 386 #キルドライバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1476
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 387 #メテオバースト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1477
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 654 #大猿変身(ターレス)
            @ene_tec_oozaru = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
              @tec_output_back_no = 1 #必殺背景縦
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1744
            elsif @battle_anime_result == 3
              #光線系ダメージ
              #damage_pattern = 26
              battleanimeend = true
            end
          when 652 #ターレス大猿 エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 653 #ターレス大猿 強力エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 388 #エネルギーは(スラッグ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1478
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 389 #爆発波(スラッグ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1479
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 390 #ビッグスマッシャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1480
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 391 #メテオバースト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1481
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 655 #スラッグ巨大化
            @ene_tec_oozaru = true
            
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1745
            elsif @battle_anime_result == 3
              #光線系ダメージ
              #damage_pattern = 26
              battleanimeend = true
            end
          when 677 #エネルギーは(スラッグ巨大化
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 678 #爆発波(スラッグ巨大化
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2498
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 679 #ビッグスマッシャー(スラッグ巨大化
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          #敵汎用エネルギー波
          when 201,211,221,342,343,344,347,350,353,355,359,361,363,366,384,395..401,406,418,422,426,430,434,438,444,449,455,481,486,491,494,497,502,507,512,518,524,529,531,536,552,560,562,565,567,569,571,574,577,581,589,601,605,609,613,635,635,639,642,646,649,656,660,663,667,670,672,681,687,695
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 402,407,575,587 #フリーザ超能力(全体),ライチー
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 1
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2492
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 403,576,584 #フリーザカッター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 3
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2493
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          #連続エネルギー波(全体)
          when 13,202,212,222,337,404,412,414,416,421,425,427,431,435,439,445,450,456,466,498,503,508,513,519,525,532,537,553,561,564,566,572,578,582,590,602,606,610,614,628,629,630,682,688,696
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              #@tec_output_back_no = 1
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2494
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 405,410,675 #デスボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 1
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2495
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 634 #(フリーザ3)デスボール
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1724
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 704 #(フリーザ3)殺されるべきなんだ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1794
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 380 #(超ベジータ)エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1431
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 381 #(超ベジータ)爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0 
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1223
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 382 #(超ベジータ)ギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1224
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 705 #(超ベジータ)スーパーギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1795
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 408,452,488,539,568,570,573,586,591 #爆発波(クウラ,セル完全体,合体13号,ブロリー,ターレス系,スラッグ系,ゴーストライチー,ハッチヒャック
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              #@tec_output_back_no = 1
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2498
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
            
          #強力エネルギー波
          when 203,213,223,409,419,423,432,460,461,463,464,482,487,492,495,499,504,509,514,520,526,533,538,554,583,592,603,607,611,615,622,674,686,693,697
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 411 #マシーナリーレイン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2501
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 413 #ネイズバインドウェーブ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2503
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 73
              battleanimeend = true
            end
          when 415 #ドーレテリブルラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2505
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 420,424,443,465 #ドレインライフ セルもここに
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2510
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 429,433 #アクセルダンス
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2519
            elsif @battle_anime_result == 3
              #光線系ダメージ
              @tec_output_back_no = 1
              damage_pattern = 24
              battleanimeend = true
            end
          when 462 #サウザーブレードスラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2552
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 440,446,451,457 #(セル１)かめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2530
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 441,458 #(セル１)魔貫光殺砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @tec_output_back = false
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2531
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 442,448,453 #(セル１)太陽拳
           if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2532
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 30
              battleanimeend = true
            end
          when 447 #ビッグバンアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 0
              @tec_back_color = 1
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2537
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 454 #超かめはめは
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2544
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 480 #(ジンコウマン)しびれえき
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              
              #必殺技発動
              @battle_anime_result = anime_pattern 2570
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 483 #13号)サイレントアサシン13
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2573
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 484 #13号)デッドリィアサルト
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2574
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 485 #13号)SSデッドリィボンバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2575
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 489 #合体13号)SSデッドリィボンバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2579
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 490 #合体13号)フルパワーSSデッドリィボンバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2580
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 493 #14号)アンドロイドチャージ14
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2583
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 496 #15号)アンドロイドストライク15
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2586
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 505 #ボーフル)ギャラテクティックタイラント
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2595
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 506 #ボーフル)ギャラテティックバスター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2596
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 511 #ゴクア)ギャラテクアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2601
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 71
              battleanimeend = true
            end
          when 515 #ザンギャ)スカイザッパー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2605
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 516,521,527 #ザンギャビドーブージン超能力

            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2606
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 522 #ビドー)ギャラクティッククラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              #@tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2612
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 528 #ブージン)合体超能力
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2618
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 534 #ブロ超)イレイザーキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2624
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 540 #イレイザーブロウ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2630
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 541 #ブロフル)イレイザーキャノン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2631
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 542 #ブロフル)スローイングブラスター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2632
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 543 #ブロフル)オメガブラスター
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2633
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 545 #アラレ)ウンチ攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2635
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25
              battleanimeend = true
            end
          when 546 #アラレ)キーン
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              #@chr_cutin = true
              #@chr_cutin_flag = true
              #@chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2636
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 547 #アラレ)岩攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @tec_output_back_no = 1
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2637
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 548 #アラレ)ブンブン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2638
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 549 #アラレ)んちゃほう
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2639
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 550 #アラレ)プロレスごっこ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2640
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 555 #オゾ)ミストかめはめ波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2645
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 556 #オゾ)ミストばくれつまこうほう
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2646
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 557 #オゾ)ミストませんこう
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2647
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 558 #オゾ)ミストギャリック砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2648
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 559 #オゾ)ミスト剣攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2649
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 563 #アービー系)パワードレイン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2653
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 579 #ゴッドガ)テイルザンバー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2669
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 580 #ゴッドガ)ガードンクラッシャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2670
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 585 #ライチ)ビッグスマッシャー
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2675
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 41
              battleanimeend = true
            end
          when 588 #ライチ)イレイサーショック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 7
              #@tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2678
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 593 #ハッチ)リベンジャーチャージ
            #@tec_tyousaiya = true
            $battle_ribe_charge = true
            $battle_ribe_charge_turn = true
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@tec_output_back = false
              @tec_output_back_no = 1
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2683
            elsif @battle_anime_result == 3
              battleanimeend = true
            end
          when 594 #ハッチ)リベンジャーカノン
            $battle_ribe_charge = false
            if @all_attack_count >= 2 && @battle_anime_result == 0
              #@tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@tec_back_small = true
              #@chr_cutin_flag = true
              @tec_output_back_no = 1
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2684
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 604 #ガッシュ)ラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2694
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 608 #ビネガー)ラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2698
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 612 #タード)ラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2702
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 616 #ゾルド)ラッシュ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2706
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 617 #タード&ゾルド)ダブルアタック
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_output_back_no = 1
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2707
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 623 #ロボット兵 バルカン砲
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2713
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 624 #メタルクウラコア エネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2714
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 625 #メタルクウラコア 口からエネルギー波
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @tec_back_small = true
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2715
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 626 #メタルクウラコア エネルギー吸収
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              #@chr_cutin = true
              #@chr_cutin_flag = true
              #@chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2716
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 77
              battleanimeend = true
            end
          when 627 #メタルクウラコア スーパービッグノヴァ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              #@chr_cutin = true
              #@chr_cutin_flag = true
              #@chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @tec_output_back_no = 3
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2717
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 631 #タオパイパイ)どどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              #@tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2431 #2721
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 632 #タオパイパイ)スーパーどどんぱ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2499
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 42
              battleanimeend = true
            end
          when 633 #タオパイパイ)カタナ攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2723
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 636 #アモンド気円斬
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1726
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 637 #アモンドプラネットボム
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1727
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
         when 640 #コズミックアタック(カカオ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1730
            elsif @battle_anime_result == 3
              #コズミックアタックダメージ
              damage_pattern = 80
              battleanimeend = true
            end
          when 643 #爆発波(ダイーズ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1733
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 644 #メテオボール(ダイーズ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1734
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 647,650 #ダブルエネルギー波 レズン、ラカセイ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1740
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 657 #エビルクエーサー アンギラ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1747
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 658 #手が伸びる アンギラ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1748
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 661 #エビルグラビティ ドロダボ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1751
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 664 #エビルコメット メダマッチャ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = true
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1754
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 665 #カエル攻撃 メダマッチャ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1755
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 25 #23
              battleanimeend = true
            end
          when 668 #エビルインパクト ゼエウン
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1758
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 671 #アンギラとメダマッチャ腕伸びるカエル攻撃
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 1761
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 673 #チルド爆発波
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2763
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
         when 683 #パイクーハン(超体当たり)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2773
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 685 #パイクーハン(サンダーフラッシュ)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2775
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 689 #かめはめ波 ブウ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2779
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 23
              battleanimeend = true
            end
          when 690 #巻きつき攻撃 ブウ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2780
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 71
              battleanimeend = true
            end
          when 691 #お菓子光線 ブウ
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2781
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 81
              battleanimeend = true
            end
          when 692 #超爆発波 ブウ
            if @all_attack_count >= 2 && @battle_anime_result == 0
              @tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2782
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 698 #ラッシュ オゾット(変身)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2788
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 22
              battleanimeend = true
            end
          when 699,702 #イグナイトビジョン(オゾット、オゾット変身
            if @all_attack_count >= 2 && @battle_anime_result == 0
              #@tec_output_back = false
              @chr_cutin = true
              @chr_cutin_flag = true
              @chr_cutin_mirror_flag = true
              @tec_back_small = true
              @battle_anime_result = 2
            end
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              #@chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2789
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 43
              battleanimeend = true
            end
          when 700 #カオスバースト オゾット(変身)
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2790
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          when 703 #カオスバースト オゾット
            if @battle_anime_result == 0
              #上から左下に移動
              @battle_anime_result = anime_pattern 31
            elsif @battle_anime_result == 1
              #必殺技発動画面へ
              @chr_cutin_flag = true
              @tec_back_small = true
              @battle_anime_result = anime_pattern 32
            elsif @battle_anime_result == 2
              #必殺技発動
              @battle_anime_result = anime_pattern 2793
            elsif @battle_anime_result == 3
              #光線系ダメージ
              damage_pattern = 44
              battleanimeend = true
            end
          else
            if $battle_test_flag == true
              damage_pattern = @test_damage_pattern
            else
              damage_pattern = 22
            end
            battleanimeend = true
          end
        end
      end
    end
    
    rescue => e
    #$err_run_process_d3
    #set_err_run_process_msg
      # 例外が発生したときの処理
      
      p "エラー発生　：" + $err_run_process.to_s,
      "--戦闘シーン情報--",
      "　番号　　　：" + attackpattern.to_s,
      "　進行度　　：" + @battle_anime_result.to_s,
      "　フレーム数：" + @battle_anime_frame.to_s,
      "　攻撃方向　：" + @attackcourse.to_s,
      "　味方キャラ：" + @chanum.to_s + "番目 " + $partyc[@chanum].to_s,
      "　敵キャラ　：" + @enenum.to_s + "番目 " + $battleenemy[@enenum].to_s,
      "--スクリプト情報--",
      "　ErrMsg    ：" + e.message.to_s
      exit #強制終了
    else
      # 例外が発生しなかったときに実行される処理
    ensure
      # 例外の発生有無に関わらず最後に必ず実行する処理
    end
    
    #発動スキルの表示
    #output_runskill 1 #引数1で攻撃と判断
    
    output_cutin attackpattern
      #if @battle_anime_frame == battleanimeend + 30
      #  battleanimeend = true
      #end
      #output_back attackpattern                       # 背景更新
      #@back_window.update 
      #Graphics.update                   # ゲーム画面を更新
      if battleanimeend != true
        
        if $battle_test_flag == true
          text = "フレーム数：" + @battle_anime_frame.to_s
          @back_window.contents.draw_text( 15, 25, 300, 28, text)
        end

      Graphics.update                   # ゲーム画面を更新

      
        if @anime_frame_format == false
          @battle_anime_frame += 1
        else
          @battle_anime_frame = 0
          @anime_frame_format = false
        end
        
        #戦闘途中終了
        Input.update
        #Sコンボチェック
        if @btl_ani_scombo_new_flag != 0
          scombo_new_flag = $game_switches[@btl_ani_scombo_new_flag]
        else
          scombo_new_flag = false
        end
        if (Input.trigger?(Input::B) || (Input.press?(Input::R) and Input.press?(Input::B))) && $game_variables[96] == 0 && @new_tecspark_flag == false && scombo_new_flag == false || ($game_switches[860] == true && $game_switches[883] == true && scombo_new_flag == false) && (Input.trigger?(Input::B) || (Input.press?(Input::R) and Input.press?(Input::B)))
          #必殺技カットイン
          chr_battle_anime_end
          battleanimeend = true
          return
        end
      end
    end while battleanimeend != true
    
    #p @attack_hit,damage_pattern
    #@attack_hit = true
    battleanimeend = false
    @battle_anime_result = 0
    @battle_anime_frame = 0
    
    #発動スキルの表示フレーム数
    @runskill_frame = 0
    
    #必殺技で攻撃する必要があるか
    if @tec_non_attack == true
      battleanimeend = true
    end

    #ヒットか回避か
    begin
      input_fast_fps
      input_battle_fast_fps if $game_variables[96] == 0
      @back_window.contents.clear
      output_back attackpattern                        # 背景更新
      #戦闘途中終了
      Input.update
      #周回プレイ時はイベント戦闘や初回閃きも回避できるように
      if (Input.trigger?(Input::B) || (Input.press?(Input::R) and Input.press?(Input::B))) && $game_variables[96] == 0 && @new_tecspark_flag == false && scombo_new_flag == false || ($game_switches[860] == true && $game_switches[883] == true && scombo_new_flag == false) && (Input.trigger?(Input::B) || (Input.press?(Input::R) and Input.press?(Input::B)))
        chr_battle_anime_end
        battleanimeend = true
        return
      end
      if @battle_anime_result == 0
        if @attack_hit == true
          
          #爆発変化させる場合(仮)
          #if @anime_event == false && $game_switches[463] == true
            
          #end
          
          @battle_anime_result = anime_pattern damage_pattern
        else
          @battle_anime_result = anime_pattern avoid_anime_no
        end
      else
        battleanimeend = true
      end
      if @output_battle_damage_flag == true
        output_battle_damage if $game_variables[96] == 0
      end
      #output_back attackpattern                       # 背景更新
      
      #発動スキルの表示
      
      output_runskill 2 #引数1でヒット用の表示と判断
      
      if $battle_test_flag == true
        text = "フレーム数：" + @battle_anime_frame.to_s
        @back_window.contents.draw_text( 15, 25, 300, 28, text)
      end
      output_cutin attackpattern
      Graphics.update                   # ゲーム画面を更新

      if @anime_frame_format == false
        @battle_anime_frame += 1
      else
        @battle_anime_frame = 0
        @anime_frame_format = false
      end
      
      
    end while battleanimeend != true

    chr_battle_anime_end
  end
  
  def chr_battle_anime_end
    
    @battle_anime_frame = 0
    @anime_frame_format = false
    @battle_anime_result = 0
    @backx = STANDARD_BACKX
    @backy = STANDARD_BACKY
    @back_anime_type = 0
    @back_anime_frame = 0
    @effect_anime_pattern = 0
    @effect_anime_type = 0
    @effect_anime_frame = 0
    @effect_anime_mirror = 255
    @tec_back = 0
    @output_anime_type = 0
    @scombo_cha_anime_frame = 0
    @scombo_cha1 = 0
    @scombo_cha2 = 0
    @scombo_cha3 = 0
    @scombo_cha1_anime_type = 0
    @scombo_cha2_anime_type = 0
    @scombo_cha3_anime_type = 0
    @damage_huttobi = true
    @damage_center = false
    @output_battle_damage_flag = false
    @chay = -200 #キャラ画面範囲外へ
    @eney = -200 #キャラ画面範囲外へ
    @ene_coerce_target_chanum = nil #敵が味方を強制的にターゲットを決める
    Audio.se_stop
    
    #発動スキル表示用の変数初期化
    $tmp_run_skill = []
    $tmp_run_hit_skill = []
    $tmp_run_kabau_skill = []
    
    #発動スキルの表示フレーム数
    @runskill_frame = 0
    #発動スキルの表示位置(横)
    @runskill_putx = []
    #発動スキルの表示が完了したフレーム数
    @runskill_lastput_frame = 9999999
    
    if @all_attack_flag == false
      @tec_output_back_no = 0
      @tec_back_anime_type = 0
      @tec_back_color = 0 #背景色
      @tec_back_small = false
      @tec_output_back = false
      @ray_spd_up_flag = false
      @chr_cutin = false
      @chr_cutin_flag = false
      @chr_cutin_mirror_flag = false
      @output_battle_damage_flag = false
    end
  end
  #--------------------------------------------------------------------------
  # ● カットイン表示
  #--------------------------------------------------------------------------
  def output_cutin attackpattern = 0
    
    #必殺技カットイン
    
    if @chr_cutin_flag == false
      @chr_cutin = false
    end
    
    if @enedatenum < $ene_str_no[1] #敵は敵の番号見て格納
      enecut_top_file_name = "Z1_"
    elsif @enedatenum < $ene_str_no[2]
      enecut_top_file_name = "Z2_"
      mainasu = $ene_str_no[1]
      tyousei = 0
    else#if @enedatenum < $ene_str_no[3]
      enecut_top_file_name = "Z3_"
      mainasu = $ene_str_no[2]
      tyousei = 0
    #else
    #  enecut_top_file_name = "ZG_"
    #  mainasu = $ene_str_no[3]
    #  tyousei = 4
    end

    #カットイン出力するかチェック
    put_cutin = true
    
    #出力しない条件
    #敵がZ1
    #
    if enecut_top_file_name == "Z1_" && @attackcourse == 1 ||
      $game_variables[40] == 0 && @attackcourse == 1 && @chr_cutin_mirror_flag == true
      put_cutin = false
      
    end
    
    if @chr_cutin == true && put_cutin == true
      if $btl_progress == 0
        #$btl_top_file_name = "Z1_"
      elsif $btl_progress == 1 || $btl_progress == 2
        if @attackcourse == 0
          
          if @chr_cutin_mirror_flag == false
            
            rect,picture = set_battle_cutin_name $partyc[@chanum.to_i]
            
            #picture = Cache.picture($btl_top_file_name + "味方カットイン")
            #rect = Rect.new(0, 64*($partyc[@chanum.to_i]-3), 640, 64) # 背景上
          else
            
            if enecut_top_file_name != "Z1_"
              picture = Cache.picture(enecut_top_file_name + "敵カットイン")
              rect = Rect.new(0, 64*($battleenemy[@enenum]-mainasu)+tyousei, 640, 64-tyousei) # 背景上
            end
          end
          
          if enecut_top_file_name != "Z1_" || @chr_cutin_mirror_flag != true
            @back_window.contents.blt(0 , 256+36,picture,rect)
          end
        else
          if @chr_cutin_mirror_flag == false
            if enecut_top_file_name != "Z1_"
              picture = Cache.picture(enecut_top_file_name + "敵カットイン")
              rect = Rect.new(0, 64*($battleenemy[@enenum]-mainasu)+tyousei, 640, 64-tyousei) # 背景上
            end
          else
            
            rect,picture = set_battle_cutin_name $partyc[@chanum.to_i]
          end
          
          if (enecut_top_file_name != "Z1_" || @chr_cutin_mirror_flag != false)
            @back_window.contents.blt(0 , 256+36,picture,rect)
          end
        end
        
      end
=begin
      elsif $btl_progress == 2
        if @attackcourse == 0

          if @chr_cutin_mirror_flag == false
            rect,picture = set_battle_cutin_name $partyc[@chanum.to_i]
            @back_window.contents.blt(0 , 256+36+4,picture,rect)
          else
            if enecut_top_file_name != "Z1_"
              picture = Cache.picture(enecut_top_file_name + "敵カットイン")
              rect = Rect.new(0, 64*($battleenemy[@enenum]-mainasu)+tyousei, 640, 64-tyousei) # 背景上
              @back_window.contents.blt(0 , 256+36+tyousei,picture,rect)
            end
          end
          if enecut_top_file_name != "Z1_" && @chr_cutin_mirror_flag != true
            @back_window.contents.blt(0 , 256+36,picture,rect)
          end
        else
          if @chr_cutin_mirror_flag == false
            if enecut_top_file_name != "Z1_"
              picture = Cache.picture(enecut_top_file_name + "敵カットイン")
              rect = Rect.new(0, 64*($battleenemy[@enenum]-mainasu)+tyousei, 640, 64-tyousei) # 背景上
              @back_window.contents.blt(0 , 256+36+tyousei,picture,rect)
            end
          else
            rect,picture = set_battle_cutin_name $partyc[@chanum.to_i]
            @back_window.contents.blt(0 , 256+36+4,picture,rect)
          end
          
        end
        
      end
=end
    end

  end
  #--------------------------------------------------------------------------
  # ● 背景・色表示
  #--------------------------------------------------------------------------   
  def output_back attackpattern = 0
      #@back_window.contents.clear
        
      if @all_attack_count <= 1
        #背景取得
        picture = Cache.picture($btl_map_top_file_name + "戦闘_背景")
        rect = Rect.new(0, $Battle_MapID*100, 640, 100) # 背景
        
        if @backx <= 320 && @backx >= -320
          @back_window.contents.blt(@backx-320 , @backy,picture,rect)
          @back_window.contents.blt(@backx+320 , @backy,picture,rect)
        elsif @backx >= 320 then
          @back_window.contents.blt(@backx-320 , @backy,picture,rect)
          @back_window.contents.blt(@backx-960 , @backy,picture,rect)
        elsif @backx <= -320 then
          @back_window.contents.blt(@backx+320 , @backy,picture,rect)
          @back_window.contents.blt(@backx+960 , @backy,picture,rect)
        end
      end
      

    if $btl_progress == 0
      #$top_file_name = "Z1_"
    elsif $btl_progress == 1
      if @tec_output_back == true
        case @tec_output_back_no
        
        when 0
          hai_max_size_x = 640
          one_frame_pase = 12
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_上")
          rect = Rect.new(0, 0, hai_max_size_x, 64) # 背景上
          #@back_window.contents.blt(0 , 0,picture,rect)
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 0,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 0,picture,rect)
          end
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_下")
          rect = Rect.new(0, 0, hai_max_size_x, 64) # 背景下
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 256+36,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 256+36,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 256+36,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 256+36,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 256+36,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 256+36,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          if @attackcourse == 0
            @tec_back -= one_frame_pase
          else
            @tec_back += one_frame_pase
          end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
        when 1
          hai_max_size_x = 640
          one_frame_pase = 12
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左")
          rect = Rect.new(0, 0, 64, hai_max_size_x) # 背景左
          #@back_window.contents.blt(0 , 0,picture,rect)

          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(0, @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0, @tec_back+hai_max_size_x/2,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(0 , @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0 , @tec_back-(hai_max_size_x+hai_max_size_x/2),picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(0 , @tec_back+hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0 , @tec_back+hai_max_size_x+hai_max_size_x/2,picture,rect)
          end

          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右")
          rect = Rect.new(0, 0, 92, hai_max_size_x) # 背景右
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(640-64, @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-64, @tec_back+hai_max_size_x/2,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(640-64 , @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-64 , @tec_back-(hai_max_size_x+hai_max_size_x/2),picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(640-64 , @tec_back+hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-64 , @tec_back+hai_max_size_x+hai_max_size_x/2,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          #if @attackcourse == 0
            @tec_back -= one_frame_pase
          #else
          #  @tec_back += one_frame_pase
          #end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
        when 2#左上、右下
          hai_max_size_x = 238
          hai_max_size_y = hai_max_size_x
          #one_frame_pase = 8
          anime_type_max = 2

          picture = Cache.picture("Z3_戦闘_必殺技_背景_左上")
          picture = Cache.picture("Z3_戦闘_必殺技_背景_左上(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景左

          @back_window.contents.blt(0, 0,picture,rect)

          hai_max_size_x = 222
          hai_max_size_y = hai_max_size_x
          picture = Cache.picture("Z3_戦闘_必殺技_背景_右下")
          picture = Cache.picture("Z3_戦闘_必殺技_背景_右下(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景右
          @back_window.contents.blt(640-hai_max_size_x , 480-hai_max_size_y-124,picture,rect)
          #@back_window.contents.blt(0 , 256+36,picture,rect)
          
          if @tec_back_anime_type == anime_type_max
            @tec_back_anime_type = 0
          else
            @tec_back_anime_type += 1
          end
        when 3#右上、左下
          hai_max_size_x = 238
          hai_max_size_y = hai_max_size_x
          #one_frame_pase = 8
          anime_type_max = 2
           
          picture = Cache.picture("Z3_戦闘_必殺技_背景_右上")
          picture = Cache.picture("Z3_戦闘_必殺技_背景_右上(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景左

          @back_window.contents.blt(640-hai_max_size_x, 0,picture,rect)

          hai_max_size_x = 222
          hai_max_size_y = hai_max_size_x
          picture = Cache.picture("Z3_戦闘_必殺技_背景_左下")
          picture = Cache.picture("Z3_戦闘_必殺技_背景_左下(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景右
          @back_window.contents.blt(0 , 480-hai_max_size_y-124,picture,rect)
          #@back_window.contents.blt(0 , 256+36,picture,rect)
          
          if @tec_back_anime_type == anime_type_max
            @tec_back_anime_type = 0
          else
            @tec_back_anime_type += 1
          end
        end
        
      end
    elsif $btl_progress == 2
      if @tec_output_back == true
        
        case @tec_output_back_no
        
        when 0

          hai_max_size_x = 648
          #hai_max_size_y = 110
          one_frame_pase = 8
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_上")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_上(赤)") if @tec_back_color == 1
          rect = Rect.new(0, 0, hai_max_size_x, 110) # 背景上
          rect = Rect.new(0, 0, hai_max_size_x, 64) if @tec_back_small == true #背景上小さい
          #@back_window.contents.blt(0 , 0,picture,rect)
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 0,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 0,picture,rect)
          end
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_下(加工)")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_下(加工)(赤)") if @tec_back_color == 1
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_下")
          #tyousei_y = 30

          if @tec_back_small == false #背景下小さい
            hai_max_size_y = 114
            tyousei_y = 50
            rect = Rect.new(0, 0, hai_max_size_x, hai_max_size_y) # 背景下
          else
            hai_max_size_y = 60
            tyousei_y = -4
            rect = Rect.new(0, 0, hai_max_size_x, hai_max_size_y) # 背景下
          end
          
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 256+36-tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 256+36-tyousei_y,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 256+36-tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 256+36-tyousei_y,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 256+36-tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 256+36-tyousei_y,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          if @attackcourse == 0
            @tec_back -= one_frame_pase
          else
            @tec_back += one_frame_pase
          end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
#=end
        when 1#縦
          hai_max_size_x = 360
          one_frame_pase = 16
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左(加工)")
          
          rect = Rect.new(0, 0, 94, hai_max_size_x) # 背景左
          #@back_window.contents.blt(0 , 0,picture,rect)

          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(0, @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0, @tec_back+hai_max_size_x/2,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(0 , @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0 , @tec_back-(hai_max_size_x+hai_max_size_x/2),picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(0 , @tec_back+hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(0 , @tec_back+hai_max_size_x+hai_max_size_x/2,picture,rect)
          end

          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右(加工)")
          rect = Rect.new(0, 0, 92, hai_max_size_x) # 背景右
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(640-94, @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-94, @tec_back+hai_max_size_x/2,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(640-94 , @tec_back-hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-94 , @tec_back-(hai_max_size_x+hai_max_size_x/2),picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(640-94 , @tec_back+hai_max_size_x/2,picture,rect)
            @back_window.contents.blt(640-94 , @tec_back+hai_max_size_x+hai_max_size_x/2,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          #if @attackcourse == 0
            @tec_back -= one_frame_pase
          #else
          #  @tec_back += one_frame_pase
          #end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end

        when 2#左上、右下
          hai_max_size_x = 238
          hai_max_size_y = hai_max_size_x
          #one_frame_pase = 8
          anime_type_max = 2

          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左上")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左上(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景左

          @back_window.contents.blt(0, 0,picture,rect)

          hai_max_size_x = 222
          hai_max_size_y = hai_max_size_x
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右下")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右下(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景右
          @back_window.contents.blt(640-hai_max_size_x , 480-hai_max_size_y-124,picture,rect)
          #@back_window.contents.blt(0 , 256+36,picture,rect)
          
          if @tec_back_anime_type == anime_type_max
            @tec_back_anime_type = 0
          else
            @tec_back_anime_type += 1
          end
        when 3#右上、左下
          hai_max_size_x = 238
          hai_max_size_y = hai_max_size_x
          #one_frame_pase = 8
          anime_type_max = 2
           
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右上")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_右上(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景左

          @back_window.contents.blt(640-hai_max_size_x, 0,picture,rect)

          hai_max_size_x = 222
          hai_max_size_y = hai_max_size_x
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左下")
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_左下(赤)") if @tec_back_color == 1
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景右
          @back_window.contents.blt(0 , 480-hai_max_size_y-124,picture,rect)
          #@back_window.contents.blt(0 , 256+36,picture,rect)
          
          if @tec_back_anime_type == anime_type_max
            @tec_back_anime_type = 0
          else
            @tec_back_anime_type += 1
          end
        when 4 #左上、右上
          anime_type_max = 2
          hai_max_size_x = 176
          hai_max_size_y = 320
          
          rect = Rect.new(@tec_back_anime_type*hai_max_size_x, 0, hai_max_size_x, hai_max_size_y) # 背景左
          picture = Cache.picture("ZG_戦闘_必殺技_背景_超カメハメ波_左")
          picture = Cache.picture("ZG_戦闘_必殺技_背景_超カメハメ波_左(赤)") if @tec_back_color == 1
          
          @back_window.contents.blt(0, 18,picture,rect)
          
          picture = Cache.picture("ZG_戦闘_必殺技_背景_超カメハメ波_右")
          picture = Cache.picture("ZG_戦闘_必殺技_背景_超カメハメ波_右(赤)") if @tec_back_color == 1
          
          @back_window.contents.blt(640-hai_max_size_x, 18,picture,rect)
          
          if @tec_back_anime_type == anime_type_max
            @tec_back_anime_type = 0
          else
            @tec_back_anime_type += 1
          end
        when 5#2段ファイナルフラッシュ
          hai_max_size_x = 672
          #hai_max_size_y = 110
          one_frame_pase = 8
          picture = Cache.picture("ZG_戦闘_必殺技_背景(赤)")
          rect = Rect.new(0, 0, hai_max_size_x, 46) # 背景上
          #@back_window.contents.blt(0 , 0,picture,rect)
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 0,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 0,picture,rect)
          end
          #picture = Cache.picture("ZG_戦闘_必殺技_背景_細い(赤)")
          #rect = Rect.new(0, 0, hai_max_size_x, 28) # 背景下
          tyousei_y = 46
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 128+tyousei_y,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          end
          rect = Rect.new(0, 0, hai_max_size_x, 42) # 背景下
          tyousei_y = 46*2 + 96
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 128+tyousei_y,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          if @attackcourse == 0
            @tec_back -= one_frame_pase
          else
            @tec_back += one_frame_pase
          end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
        when 6#バーニングアタック
          hai_max_size_x = 672
          #hai_max_size_y = 110
          one_frame_pase = 8
          picture = Cache.picture("ZG_戦闘_必殺技_背景(赤)_バーニングアタック上")
          rect = Rect.new(0, 0, hai_max_size_x, 110) # 背景上
          #@back_window.contents.blt(0 , 0,picture,rect)
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0+4,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 0+4,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 0+4,picture,rect)
          end
          #picture = Cache.picture("ZG_戦闘_必殺技_背景_細い(赤)")
          #rect = Rect.new(0, 0, hai_max_size_x, 28) # 背景下
          tyousei_y = 114
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 128+tyousei_y,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          if @attackcourse == 0
            @tec_back -= one_frame_pase
          else
            @tec_back += one_frame_pase
          end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
        when 7#イレイサーショック
          hai_max_size_x = 672
          #hai_max_size_y = 110
          one_frame_pase = 8
          picture = Cache.picture("ZG_戦闘_必殺技_背景(赤)_イレイサーショック上")
          rect = Rect.new(0, 0, hai_max_size_x, 110) # 背景上
          #@back_window.contents.blt(0 , 0,picture,rect)
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0+4,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 0+4,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 0+4,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 0+4,picture,rect)
          end
          #picture = Cache.picture("ZG_戦闘_必殺技_背景_細い(赤)")
          #rect = Rect.new(0, 0, hai_max_size_x, 28) # 背景下
          tyousei_y = 130
          if @tec_back <= (hai_max_size_x/2) && @tec_back >= -(hai_max_size_x/2)
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          elsif @tec_back >= (hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back-(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back-(hai_max_size_x+(hai_max_size_x/2)) , 128+tyousei_y,picture,rect)
          elsif @tec_back <= -(hai_max_size_x/2) then
            @back_window.contents.blt(@tec_back+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
            @back_window.contents.blt(@tec_back+hai_max_size_x+(hai_max_size_x/2) , 128+tyousei_y,picture,rect)
          end
          #@back_window.contents.blt(0 , 256+36,picture,rect)

          if @attackcourse == 0
            @tec_back -= one_frame_pase
          else
            @tec_back += one_frame_pase
          end
          
          if @tec_back >= hai_max_size_x
            @tec_back -= hai_max_size_x
          elsif @tec_back <= -hai_max_size_x
            @tec_back += hai_max_size_x
          end
        end
      end
    end
    
    #背景スクロール
    if @attackcourse == 0
      @backx -= @back_scroll_speed
    else
      @backx += @back_scroll_speed
    end
    
    if @backx >= 640
      @backx -= 640
    elsif @backx <= -640
      @backx += 640
    end
    
    #フェード時に非表示が気になるのでここでも表示させる
    output_cutin attackpattern
    #ステータス背景色
    #color = set_skn_color 0
    #@back_window.contents.fill_rect(0,356,680,150,color)
  end
  #--------------------------------------------------------------------------
  # ● 戦闘開始前に実行するスキル
  # 同調とか
  #-------------------------------------------------------------------------- 
  #引数　n:0味方:1敵
  def run_battle_start_mae_skill(n)
    @tmp_scom_run_skill = []
    if n == 0 #味方
      
      #味方の攻撃
      for x in 0..$Cardmaxnum
        
        if $cardset_cha_no[x] == @chanum.to_i
          
          if @scombo_flag == false

          else
#=================================================================================
#スキル開始
#=================================================================================
            run_skill = [] #実行されたスキルを表示するための一時退避用
            sum_scom_naibu_maxaup = 0 #Sコン内部的にあがる最大値
            
            #同調
            scom_skillno = [363]#[363,364,696]
            scom_maxa = 0
            scom_maxg = 0
            run_skill = []
            run_doutyou_skill = false
            for y in 0..@btl_ani_scombo_flag_tec.size - 1
              for z in 0..scom_skillno.size - 1
                if chk_skill_learn(scom_skillno[z],@btl_ani_scombo_cha[y])[0] == true
                  run_skill << scom_skillno[z]
                  run_doutyou_skill = true
                end
              end
              
              if run_doutyou_skill == true
                set_cardno = get_chaselcardno @btl_ani_scombo_cha[y]
                scom_maxa = $carda[set_cardno] if scom_maxa < $carda[set_cardno]
                scom_maxg = $cardg[set_cardno] if scom_maxg < $cardg[set_cardno]
              end
            end
            
            #発動スキルに追加
            if chk_run_scomskillno(scom_skillno,run_skill) != nil
              @tmp_scom_run_skill << chk_run_scomskillno(scom_skillno,run_skill)
            end
            
            #発動スキルに追加 ここだけ攻防別で認識させたいので、例外的に個別に指定する
            #if chk_run_scomskillno([363,696],run_skill) != nil
            #  @tmp_scom_run_skill << chk_run_scomskillno([363,696],run_skill)
            #end
            
            #発動スキルに追加 ここだけ攻防別で認識させたいので、例外的に個別に指定する
            #if chk_run_scomskillno([364,696],run_skill) != nil
            #  @tmp_scom_run_skill << chk_run_scomskillno([363,696],run_skill)
            #end
            
            #星調整
            if scom_maxa != 0 || scom_maxg != 0
              for y in 0..@btl_ani_scombo_flag_tec.size - 1
                set_cardno = get_chaselcardno @btl_ani_scombo_cha[y]
                #if run_skill.index(696) != nil || run_skill.index(363) != nil
                $carda[set_cardno] = scom_maxa
                #end
                #if run_skill.index(696) != nil || run_skill.index(364) != nil
                $cardg[set_cardno] = scom_maxg
                #end
              end
            end
            
            #Sコンボ発動で星調整の取得
            #地球育ちのサイヤ人
            scom_skillno = [678,679,680,681,682,683,684,685,686]
            scom_aup = 0
            scom_gup = 0
            run_skill = []
            for y in 0..@btl_ani_scombo_flag_tec.size - 1
              for z in 0..scom_skillno.size - 1
                if chk_skill_learn(scom_skillno[z],@btl_ani_scombo_cha[y])[0] == true
                  run_skill << scom_skillno[z]
                  if scom_aup < $cha_skill_a_hoshi[scom_skillno[z]]
                    scom_aup = $cha_skill_a_hoshi[scom_skillno[z]]
                  end
                  if scom_gup < $cha_skill_g_hoshi[scom_skillno[z]]
                    scom_gup = $cha_skill_g_hoshi[scom_skillno[z]]
                  end
                end
              end
            end
            
            #発動スキルに追加
            if chk_run_scomskillno(scom_skillno,run_skill) != nil
              @tmp_scom_run_skill << chk_run_scomskillno(scom_skillno,run_skill)
            end

            #星調整
            if scom_aup != 0 || scom_gup != 0
              for y in 0..@btl_ani_scombo_flag_tec.size - 1
                @btl_ani_scombo_cha[y]
                #Sコンボ参加者の最大攻撃の星に合わせる
                set_cardno = 0 #キャラクターが選択したカードNoを格納
                #キャラクターが選択したカードNoを取得
                set_cardno = get_chaselcardno @btl_ani_scombo_cha[y]
                $carda[set_cardno] += scom_aup
                $cardg[set_cardno] += scom_gup
                
                $carda[set_cardno] = 7 if $carda[set_cardno] > 7
                $cardg[set_cardno] = 7 if $cardg[set_cardno] > 7
              end
            end
            
#=================================================================================
#スキル終わり
#=================================================================================
          end
        end
      end
    end
  end
  
  #--------------------------------------------------------------------------
  # ● ダメージ計算
  #-------------------------------------------------------------------------- 
  #引数　n:0味方:1敵
  def damage_calculation(n)
    @attack_hit = true
    @tmp_scom_run_skill = []
    if n == 0 #味方
      
      #味方の攻撃
      for x in 0..$Cardmaxnum
        
        if $cardset_cha_no[x] == @chanum.to_i
          
          if $cha_set_action[@chanum] >= 11
            @tec_power = $data_skills[$cha_set_action[@chanum] - 10].base_damage
            
            #熟練度でのダメージ計算
            #p $game_variables[$data_skills[$cha_set_action[@chanum] - 10].id + 100]
            if $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] != 0 && $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] != nil
            #if $game_variables[$data_skills[$cha_set_action[@chanum] - 10].id + 100] != 0
              skill_level = $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id]
              #ダメージ計算最大数に調整する
              skill_level = $cha_add_dmg_skill_level_max if skill_level >= $cha_add_dmg_skill_level_max
              #skill_level = $game_variables[$data_skills[$cha_set_action[@chanum] - 10].id + 100]
              skill_level = skill_level.prec_f
              skill_level = (100+skill_level)
              skill_level = skill_level/100

              #p skill_level
              #p @tec_power = (@tec_power*skill_level).ceil
              @tec_power = (@tec_power*skill_level).ceil
              
              #熟練度が1000を超えていた場合
              if $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] > ($cha_add_dmg_skill_level_max + 1)
                skill_level2 = $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] - $cha_add_dmg_skill_level_max
                skill_level2 = skill_level2.prec_f
                skill_level2 = skill_level2/$cha_add_dmg_atk_ratio
                
                @tec_power = (@tec_power+skill_level2).ceil
              end
              
              #大猿で必殺技の攻撃力アップ技か
              if $cha_bigsize_on[@chanum.to_i] == true
                @tec_power = (@tec_power.to_i * 2).prec_i
              end
            end
          end
          
          if @scombo_flag == false
            
            if $cha_set_action[@chanum] >= 11
              #必殺技
              @battledamage = (($game_actors[$partyc[@chanum.to_i]].atk + @tec_power) * 8 * ($carda[x] + 7 + rand(2) + 1)) / ($data_enemies[@enedatenum].def * ($enecardg[@enenum] + 7)/3)
            else
              #通常攻撃
              #nil対策
              $cha_normal_attack_level[$partyc[@chanum]] = 0 if $cha_normal_attack_level[$partyc[@chanum]] == nil
              
              @tec_power = 3
              
              skill_level = $cha_normal_attack_level[$partyc[@chanum]]
              #ダメージ計算最大数に調整する
              skill_level = $cha_add_dmg_skill_level_max if skill_level >= $cha_add_dmg_skill_level_max
              
              skill_level = skill_level.prec_f
              skill_level = (100+skill_level)
              skill_level = skill_level/100

              @tec_power = (@tec_power*skill_level).ceil
              
              #熟練度が1000を超えていた場合
              if $cha_normal_attack_level[$partyc[@chanum]] > ($cha_add_dmg_skill_level_max + 1)
                skill_level2 = $cha_normal_attack_level[$partyc[@chanum]] - $cha_add_dmg_skill_level_max
                skill_level2 = skill_level2.prec_f
                skill_level2 = skill_level2/$cha_add_dmg_atk_ratio
                
                @tec_power = (@tec_power+skill_level2).ceil
              end
              
              @battledamage = (($game_actors[$partyc[@chanum.to_i]].atk + @tec_power) * 8 * ($carda[x] + 7 + rand(2) + 1)) / ($data_enemies[@enedatenum].def * ($enecardg[@enenum] + 7)/3)
              #p $game_actors[$partyc[@chanum.to_i]].atk,@tec_power,$cha_normal_attack_level[$partyc[@chanum]]
            end
          else
            #スパーキングコンボの場合は全員の攻撃力と技の攻撃力を足してさらに攻撃カードがほしと同じになる
            #さらに、レベル分力をアップ
            chanum_atk = 0
            max_carda = 0 #参加者の最大攻撃星最大値
            #Sコンボのそもそもの攻撃力を追加
            @tec_power = $data_skills[($cha_set_action[@chanum] - 10)].base_damage
            #p @tec_power
       
#=================================================================================
#スキル開始
#=================================================================================
            run_skill = [] #実行されたスキルを表示するための一時退避用
            sum_scom_naibu_maxaup = 0 #Sコン内部的にあがる最大値
            
            #スキルで星の数調整
            #武泰斗の教え
            scom_skillno = [687,688,689,690,691,692,693,694,695]
            scom_max_aup = 0
            run_skill = []
            for y in 0..@btl_ani_scombo_flag_tec.size - 1
              for z in 0..scom_skillno.size - 1
                if chk_skill_learn(scom_skillno[z],@btl_ani_scombo_cha[y])[0] == true
                  run_skill << scom_skillno[z]
                  if scom_max_aup < $cha_skill_a_hoshi[scom_skillno[z]]
                    scom_max_aup = $cha_skill_a_hoshi[scom_skillno[z]]
                  end
                end
              end
            end

            #発動スキルに追加
            if chk_run_scomskillno(scom_skillno,run_skill) != nil
              @tmp_scom_run_skill << chk_run_scomskillno(scom_skillno,run_skill)
            end
            
            #スキルの効果分を加算
            sum_scom_naibu_maxaup += scom_max_aup
            
            #スキルで星の数調整
            #連携
            scom_skillno = [671,672,673,674,675,676,677]
            scom_max_aup = 0
            run_skill = []
            for y in 0..@btl_ani_scombo_flag_tec.size - 1
              for z in 0..scom_skillno.size - 1
                if chk_skill_learn(scom_skillno[z],@btl_ani_scombo_cha[y])[0] == true
                  run_skill << scom_skillno[z]
                  if scom_max_aup < $cha_skill_a_hoshi[scom_skillno[z]]
                    scom_max_aup = $cha_skill_a_hoshi[scom_skillno[z]]
                  end
                end
              end
            end

            #発動スキルに追加
            if chk_run_scomskillno(scom_skillno,run_skill) != nil
              @tmp_scom_run_skill << chk_run_scomskillno(scom_skillno,run_skill)
            end
            
            #スキルの効果分を加算
            sum_scom_naibu_maxaup += scom_max_aup
            
#=================================================================================
#スキル終わり
#=================================================================================

            for y in 0..@btl_ani_scombo_flag_tec.size - 1
              scombo_tec_power = $data_skills[@btl_ani_scombo_flag_tec[y]].base_damage
              if $cha_skill_level[@btl_ani_scombo_flag_tec[y]] != 0 && $cha_skill_level[@btl_ani_scombo_flag_tec[y]] != nil
                skill_level = $cha_skill_level[@btl_ani_scombo_flag_tec[y]]
                #ダメージ計算最大数に調整する
                skill_level = $cha_add_dmg_skill_level_max if skill_level >= $cha_add_dmg_skill_level_max
                skill_level = skill_level.prec_f
                skill_level = (100+skill_level)
                skill_level = skill_level/100
                @tec_power += (scombo_tec_power*skill_level).ceil

                #熟練度が1000を超えていた場合
                if $cha_skill_level[@btl_ani_scombo_flag_tec[y]] > ($cha_add_dmg_skill_level_max + 1)
                  skill_level2 = $cha_skill_level[@btl_ani_scombo_flag_tec[y]] - $cha_add_dmg_skill_level_max
                  skill_level2 = skill_level2.prec_f
                  skill_level2 = skill_level2/$cha_add_dmg_atk_ratio
                  
                  @tec_power = (@tec_power+skill_level2).ceil

                end
                
              else
                @tec_power += scombo_tec_power
                #p @tec_power
              end
              #攻撃力
              chanum_atk += $game_actors[@btl_ani_scombo_cha[y]].atk
              #レベル
              #chanum_atk += ($game_actors[@btl_ani_scombo_cha[y]].level / 2)
              chanum_atk += ($game_actors[@btl_ani_scombo_cha[y]].level)
              #p "味方攻撃力合計" + chanum_atk.to_s,"必殺技攻撃力合計" + @tec_power.to_s
              
              #Sコンボ参加者の最大攻撃の星に合わせる
              set_cardno = 0 #キャラクターが選択したカードNoを格納
              #キャラクターが選択したカードNoを取得
              set_cardno = get_chaselcardno @btl_ani_scombo_cha[y]
              if max_carda < $carda[set_cardno]
                max_carda = $carda[set_cardno]
              end
            end
            
            #Sコンボの使用回数分攻撃力を追加
            if $cha_skill_level[($cha_set_action[@chanum] - 10)] == nil
              $cha_skill_level[($cha_set_action[@chanum] - 10)] = 0
            end
            #回数は人数 / 2 (人数が多いのが損にならないように)
            #人数の係数計算(3人以降は1人に応じて1.2倍ずつ熟練度の効果が増加する)
            tec_size_keisuu = 1.0 
            
            if @btl_ani_scombo_flag_tec.size.to_i > 2
              tec_size_keisuu = 1.0 + ((@btl_ani_scombo_flag_tec.size.to_i - 2) * 0.2)
            end

            @tec_power += ($cha_skill_level[($cha_set_action[@chanum] - 10)].to_f * (@btl_ani_scombo_flag_tec.size.to_i.to_f / 2) * tec_size_keisuu).ceil
            
            #Sコンボの参加人数で星の数調整
            max_carda += (@btl_ani_scombo_flag_tec.size - 2) 
            
            #スキルの効果分を加算(内部処理のみ変えるもの)
            max_carda += sum_scom_naibu_maxaup
            
            #Zを超えていたらZにする
            if max_carda > 7
              max_carda = 7
            end
            
            #ダメージ再集計算
            @battledamage = ((chanum_atk + @tec_power) * 8 * (max_carda + 7 + rand(2) + 1)) / ($data_enemies[@enedatenum].def * ($enecardg[@enenum] + 7)/3)
            
            #常にZ
            #@battledamage = ((chanum_atk + @tec_power) * 8 * (7 + 7 + rand(2) + 1)) / ($data_enemies[@enedatenum].def * ($enecardg[@enenum] + 7)/3)
          end
          
          #スーパーサイヤ人ならばダメージ増加
          #Sコンボ用に参加者もチェックする処理
          temp_cha_no = []
          if $data_skills[$cha_set_action[@chanum]-10].element_set.index(33) != nil
            #使用技がSコンボだった
            #p "Sコンボである"
            temp_cha_no.concat($tmp_btl_ani_scombo_cha)
          else
            #通常攻撃または一人の必殺技だった
            #p "Sコンボじゃない"
            temp_cha_no.concat([$partyc[@chanum.to_i]])
          end
          
          attacksupersaiyairu = false
          for z in 0..temp_cha_no.size - 1
            if $game_actors[temp_cha_no[z]].class_id == 9
              attacksupersaiyairu = true
            end
          end
          
          if attacksupersaiyairu == true
          #if $game_actors[$partyc[@chanum.to_i]].class_id == 9
          ###if $partyc[@chanum.to_i] == 14 || $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 18 || $partyc[@chanum.to_i] == 19
            @battledamage = (@battledamage.to_i * 1.3).prec_i
          end
          
          #大猿ならばダメージ増加
          #if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 27 || $partyc[@chanum.to_i] == 28 || $partyc[@chanum.to_i] == 29 || $partyc[@chanum.to_i] == 30
          
            if $cha_bigsize_on[@chanum.to_i] == true
              @battledamage = (@battledamage.to_i * 1.5).prec_i
            end
          #end
          
          #流派がそろったときの処理
          if $game_actors[$partyc[@chanum.to_i]].class_id-1 == $cardi[x] || $cha_power_up[@chanum] == true || @skill_kiup_flag == true #スキル気をためるが有効になったか
            @battledamage = (@battledamage.to_i * 1.3).prec_i
          end

          if $ene_defense_up == true #防御力がアップしていればダメージ減少
            @battledamage = (@battledamage*0.7).prec_i
          end
          
          #スキルのダメージ調整
          @battledamage = set_damage_add $partyc[@chanum.to_i],@enedatenum,@battledamage,0,$cha_set_action[@chanum],@enenum
          
          #Sコンボのスキル表示を追加
          $tmp_run_skill += @tmp_scom_run_skill
          
          #必殺技でかつダメージなしの技であればダメージを0に
          if $cha_set_action[@chanum] > 10
            if $data_skills[$cha_set_action[@chanum]-10].element_set.index(11) != nil
            #if $cha_set_action[@chanum] == ENE_STOP_TEC #超能力の場合 ダメージなし
              @battledamage = 0
            end
          end
          #p (($data_enemies[@enedatenum].agi * 1.6 + $enecardg[@enenum]) - ($game_actors[$partyc[@chanum.to_i]].agi * 1.1 + $carda[x])).prec_i
          avoid = ((($data_enemies[@enedatenum].agi * 1.2 + $enecardg[@enenum])/3) - (($game_actors[$partyc[@chanum.to_i]].agi * 1.1 + $carda[x])/3)).prec_i
          #p $data_skills[$cha_set_action[@chanum]-10].element_set.index(29),$cha_set_action[@chanum]-10
          if 0 < avoid
            #p (($data_enemies[@enedatenum].agi * 1.2 + $enecardg[@enenum]) - ($game_actors[$partyc[@chanum.to_i]].agi * 1.1 + $carda[x])).prec_i
            #味方の攻撃が必ず当たるフラグがONの場合は必ず当たる　回避優先
            #かつ必中スキルを覚えていない
            if rand(100)+1 < avoid && $game_switches[129] == false && $data_skills[$cha_set_action[@chanum]-10].element_set.index(29) == nil && chk_skill_learn(389,$partyc[@chanum.to_i])[0] == false
              @attack_hit = false
              @battledamage = 0
            end
          end
          
          
          #敵攻撃回避フラグがONの場合は必ず回避
          if $game_switches[18] == true || @event_cha_atc_hit[@chanum] == true
            @attack_hit = false
            @battledamage = 0
          end
          
          #変数味方攻撃力n倍が0以外なら倍率をかける
          @battledamage = (@battledamage * $game_variables[81]).prec_i if $game_variables[81] != 0
        end
      end
      
      #ヒットスキルを取得(味方)
      get_attack_hit_skill @chanum.to_i,@enenum,@attack_hit,@attackcourse,$cha_set_action[@chanum],@battledamage
      
      #@battledamage
    else
      #テキの攻撃
      for x in 0..$Cardmaxnum
        if $cardset_cha_no[x] == @chanum.to_i
          tmp_tec_power = 0
          @tec_power = 0
          if @ene_set_action >= 11
            
            tmp_tec_power = $data_skills[@ene_set_action-10].base_damage
            @tec_power = ($data_enemies[@enedatenum].atk.prec_f * (tmp_tec_power.prec_f / 100)).prec_i - $data_enemies[@enedatenum].atk
            #p @tec_power,$data_enemies[@enedatenum].atk,tmp_tec_power
            #p ($data_enemies[@enedatenum].atk.prec_f * (@tec_power.prec_f / 100)).prec_i,$data_enemies[@enedatenum].atk,@tec_power
          end
          
          #p $data_enemies[@enedatenum].atk,@enedatenum
          #p @tec_power
          @battledamage = (($data_enemies[@enedatenum].atk + @tec_power) * 8 * ($enecarda[@enenum] + 7 + rand(2) + 1)) / ($game_actors[$partyc[@chanum.to_i]].def * ($cardg[x] + 7)/3)
          #流派がそろったときの処理
          if $data_enemies[@enedatenum].hit-1 == $enecardi[@enenum] || $ene_power_up[@enenum] == true
            @battledamage = (@battledamage.to_i * 1.2).prec_i
          end
          
          #p $game_actors[$partyc[@chanum.to_i]]
          #スーパーサイヤ人ならばダメージ減少
          #p $game_actors[$partyc[@chanum.to_i]].class_id
          if $game_actors[$partyc[@chanum.to_i]].class_id == 9
          #if $partyc[@chanum.to_i] == 14 || $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 18 || $partyc[@chanum.to_i] == 19
            @battledamage = (@battledamage*0.85).prec_i
          end
          
          #大猿ならばダメージ減少
          #if $partyc[@chanum.to_i] == 27 || $partyc[@chanum.to_i] == 28 || $partyc[@chanum.to_i] == 29 || $partyc[@chanum.to_i] == 30
          
            if $cha_bigsize_on[@chanum.to_i] == true
              @battledamage = (@battledamage.to_i * 0.7).prec_i
            end
          #end
          
          #防御アップ状態であれば
          if $one_turn_cha_defense_up == true || $cha_defense_up[@chanum.to_i] == true #防御力がアップしていればダメージ減少
            @battledamage = (@battledamage*0.7).prec_i
          end
          
          #スキルのダメージ調整
          @battledamage = set_damage_add $partyc[@chanum.to_i],@enedatenum,@battledamage,1,0,@enenum
          
          #必殺技でかつダメージなしの技であればダメージを0に
          if @ene_set_action > 10
            if $data_skills[@ene_set_action-10].element_set.index(11) != nil
            #if $cha_set_action[@chanum] == ENE_STOP_TEC #超能力の場合 ダメージなし
              @battledamage = 0
            end
          end
          
          #p (($game_actors[$partyc[@chanum.to_i]].agi * 1.6 + $cardg[x]) - ($data_enemies[@enedatenum].agi * 1.1 + $enecarda[@enenum]) ).prec_i
          avoid = ((($game_actors[$partyc[@chanum.to_i]].agi * 1.2 + $cardg[x])/3) - (($data_enemies[@enedatenum].agi * 1.1 + $enecarda[@enenum]))/3).prec_i
          avoid = get_avoid_add $partyc[@chanum.to_i],avoid
          if 0 < avoid
            #p (($game_actors[$partyc[@chanum.to_i]].agi * 1.2 + $cardg[x]) - ($data_enemies[@enedatenum].agi * 1.1 + $enecarda[@enenum]) ).prec_i
            #敵の攻撃が必ず当たるフラグがONの場合は必ず当たる　回避優先
            if rand(100)+1 < avoid && $game_switches[130] == false && $data_skills[@ene_set_action-10].element_set.index(29) == nil
              @attack_hit = false
              #@battledamage = 0
            end
          end
      
          #不惜身命====================================================
          if chk_skill_learn(642,$partyc[@chanum.to_i])[0] == true || #不惜身命9
            chk_skill_learn(641,$partyc[@chanum.to_i])[0] == true || #不惜身命8
            chk_skill_learn(640,$partyc[@chanum.to_i])[0] == true || #不惜身命7
            chk_skill_learn(639,$partyc[@chanum.to_i])[0] == true || #不惜身命6
            chk_skill_learn(638,$partyc[@chanum.to_i])[0] == true || #不惜身命5
            chk_skill_learn(637,$partyc[@chanum.to_i])[0] == true || #不惜身命4
            chk_skill_learn(636,$partyc[@chanum.to_i])[0] == true || #不惜身命3
            chk_skill_learn(635,$partyc[@chanum.to_i])[0] == true || #不惜身命2
            chk_skill_learn(634,$partyc[@chanum.to_i])[0] == true #不惜身命1
            @attack_hit = true
          end
          
          #カードでの回避
          if $cha_kaihi_card_flag[@chanum] == true
            @attack_hit = false
            #@battledamage = 0
          end

          #味方攻撃回避フラグがONの場合は必ず回避
          if $game_switches[17] == true || @event_atc_hit[@enenum] == true
            @attack_hit = false
            #@battledamage = 0
          end
          
          #攻撃回避ならダメージ0
          if @attack_hit == false
            @battledamage = 0
          end
          #変数味方攻撃力n倍が0以外なら倍率をかける
          @battledamage = (@battledamage * $game_variables[82]).prec_i if $game_variables[82] != 0
          #ヒットスキルを取得(敵)
          #get_attack_hit_skill @chanum.to_i,@enenum,@attack_hit,@attackcourse,0
          #敵の攻撃も送るようにしてみる
          get_attack_hit_skill @chanum.to_i,@enenum,@attack_hit,@attackcourse,@ene_set_action,@battledamage
        end
        
      end
      
      

    end
    #強襲サイヤ人ダメージ
    #攻撃力×8×(星の数＋７)＋0.799X))÷((漢数字＋7)×防御側BP×防御力

    @tec_power = 0  #必殺技攻撃力初期化
    
    
    
  end
  
  #--------------------------------------------------------------------------
  # ● 戦闘ダメージ処理(死亡したかも判定)
  #-------------------------------------------------------------------------- 
  def chk_battle_damage
    if @attackcourse == 0
      # 敵がダメージ
      #戦闘練習時以外はHPを減らす
      if $game_switches[1305] != true
        $enehp[@enenum] -= @battledamage
      else
        #1ターンのダメージ計算
        $game_variables[425] += @battledamage
      end
      

      
      #p $enehp[@enenum],@battledamage
      
      #味方攻撃ダメージ合計
      $tmp_cha_attack_damege[$partyc[@chanum.to_i]] = 0 if $tmp_cha_attack_damege[$partyc[@chanum.to_i]] == nil
      $tmp_cha_attack_damege[$partyc[@chanum.to_i]] += @battledamage
      
      #味方攻撃回数
      $tmp_cha_attack_count[$partyc[@chanum.to_i]] = 0 if $tmp_cha_attack_count[$partyc[@chanum.to_i]] == nil
      $tmp_cha_attack_count[$partyc[@chanum.to_i]] += 1
      
      #最高ダメージ、キャラ一時保存
      if $game_variables[205] < @battledamage
        $game_variables[205] = @battledamage
        $game_variables[206] = $partyc[@chanum.to_i]
        $game_variables[215] = $battleenemy[@enenum]
      end
      if $enehp[@enenum] <= 0 #敵死亡判定
        $enedeadchk[@enenum] = true
        $enehp[@enenum] = 0
        $battle_enedead_cha_no[@enenum] = $partyc[@chanum.to_i] #とどめを刺した味方キャラを格納
      end
      if @attack_hit == true
        if $cha_set_action[@chanum] > 10
          if $data_skills[$cha_set_action[@chanum]-10].element_set.index(12) != nil || $data_skills[$cha_set_action[@chanum]-10].element_set.index(13) != nil || $data_skills[$cha_set_action[@chanum]-10].element_set.index(14) != nil
          #if $cha_set_action[@chanum] == ENE_STOP_TEC || $cha_set_action[@chanum] == ENE_STOP_TEC2 || $cha_set_action[@chanum] == ENE_STOP_TEC + 1 
            for x in 0..$Cardmaxnum
              if $cardset_cha_no[x] == @chanum.to_i
                
                #超能力(太陽拳はコメントアウトした)
                if $data_skills[$cha_set_action[@chanum]-10].element_set.index(12) != nil #|| $data_skills[$cha_set_action[@chanum]-10].element_set.index(14) != nil
                  $ene_stop_num[@enenum] += STOP_TURN
                  
                  #流派一致でさらに止める
                  if $game_actors[$partyc[@chanum.to_i]].class_id-1 == $cardi[x]
                    $ene_stop_num[@enenum] += STOP_TURN
                  end
                end
                
                #流派一致で止める技
                if $game_actors[$partyc[@chanum.to_i]].class_id-1 == $cardi[x] && $data_skills[$cha_set_action[@chanum]-10].element_set.index(13) != nil
                  $ene_stop_num[@enenum] += STOP_TURN
                end
                
                #太陽拳
                if $data_skills[$cha_set_action[@chanum]-10].element_set.index(14) != nil
                  $ene_stop_num[@enenum] += STOP_TURN
                end
              end
            end
          end
        end
        
        #大ざる解除用 大猿 シッポ 尻尾 気円斬 刀
        if $data_skills[$cha_set_action[@chanum]-10].element_set.index(25) != nil
          
          #ベジータ
          $battleenemy[@enenum] = 12 if $battleenemy[@enenum] == 26
          
          #ターレス
          $battleenemy[@enenum] = 233 if $battleenemy[@enenum] == 222
          $battleenemy[@enenum] = 59 if $battleenemy[@enenum] == 70
          
        end
      end
      
    else
      # 味方がダメージ
      $game_actors[$partyc[@chanum.to_i]].hp -= @battledamage
      
      #HPが0以下かつ、やせがまんが有効の場合はHPを1にする。
      if $game_actors[$partyc[@chanum.to_i]].hp <= 0 && $btl_yasegaman_on_flag == true
        $game_actors[$partyc[@chanum.to_i]].hp = 1
      end
      
      # ダメージが0以外ならヒットしたと判定
      if @battledamage != 0
        $one_turn_cha_hit_num[$cardset_cha_no.index(@chanum.to_i)] += 1
      end
      #吸収
      if $data_skills[@ene_set_action-10].element_set.index(15) != nil
        $enehp[@enenum] += @battledamage
        
        #最大値を超えたら最大値にあわせる
        $enehp[@enenum] = $data_enemies[@enedatenum].maxhp if $data_enemies[@enedatenum].maxhp < $enehp[@enenum]
      end
      
      if @attack_hit == true
        
        #スキル鋼の意思か慈愛の心を取得していなければ、超能力効果を実行する
        #動きを止める
        if (chk_haganenoishirun($partyc[@chanum]) != true && chk_ziairun($partyc[@chanum]) != true)
          if $data_skills[@ene_set_action-10].element_set.index(12) != nil || $data_skills[@ene_set_action-10].element_set.index(14) != nil
            
            $cha_stop_num[@chanum] += STOP_TURN
            if $full_cha_stop_num == nil || $full_cha_stop_num == [] || $full_cha_stop_num[$partyc[@chanum]] == nil
              $full_cha_stop_num[$partyc[@chanum]] = 0
            end
            $full_cha_stop_num[$partyc[@chanum]] += STOP_TURN
          end
        end
        
        #流派一致で動きを止める
        if (chk_haganenoishirun($partyc[@chanum]) != true && chk_ziairun($partyc[@chanum]) != true)
          if $data_enemies[@enedatenum].hit-1 == $enecardi[@enenum] && $data_skills[@ene_set_action-10].element_set.index(13) != nil
            $cha_stop_num[@chanum] += STOP_TURN
            if $full_cha_stop_num == nil || $full_cha_stop_num == [] || $full_cha_stop_num[$partyc[@chanum]] == nil
              $full_cha_stop_num[$partyc[@chanum]] = 0
            end
            $full_cha_stop_num[$partyc[@chanum]] += STOP_TURN
          end
        end
        
        #尻尾切る
        if $data_skills[@ene_set_action-10].element_set.index(25) != nil
          case $partyc[@chanum]
        
          when 27 #トーマ
            oozarucha = 1
          when 28 #セリパ
            oozarucha = 2
          when 29 #トテッポ
            oozarucha = 3
          when 30 #パンブーキン
            oozarucha = 4
          when 5 #悟飯
            oozarucha = 5
          end
          $cha_bigsize_on[@chanum] = false
          off_oozaru oozarucha
          
        end
        
        #自爆
        if $data_skills[@ene_set_action-10].element_set.index(60) != nil
          $enedeadchk[@enenum] = true
          $eneselfdeadchk[@enenum] = true
          $enehp[@enenum] = 0
        end
      end
      #味方防御ダメージ合計
      $tmp_cha_gard_damege[$partyc[@chanum.to_i]] = 0 if $tmp_cha_gard_damege[$partyc[@chanum.to_i]] == nil
      $tmp_cha_gard_damege[$partyc[@chanum.to_i]] += @battledamage
      
      #味方防御回数
      $tmp_cha_gard_count[$partyc[@chanum.to_i]] = 0 if $tmp_cha_gard_count[$partyc[@chanum.to_i]] == nil
      $tmp_cha_gard_count[$partyc[@chanum.to_i]] += 1
      
      #最高ダメージ、キャラ一時保存
      if $game_variables[209] < @battledamage
        $game_variables[209] = @battledamage
        $game_variables[210] = $battleenemy[@enenum]
        $game_variables[217] = $partyc[@chanum.to_i]
      end
      if $game_actors[$partyc[@chanum.to_i]].hp <= 0 #味方死亡判定
        $chadeadchk[@chanum] = true
      end
    end
    
    #get_attack_hit_skill $partyc[@chanum.to_i],@enenum,@attack_hit,@attackcourse
    #get_attack_hit_skill @chanum.to_i,@enenum,@attack_hit,@attackcourse
  end
  
  #--------------------------------------------------------------------------
  # ● 攻撃アニメ変更
  #-------------------------------------------------------------------------- 
  # 引数：aord:攻撃か防御か n:戦闘アニメNo
  def battle_anime_change aord,n
    
    if aord == 0
      if @attackcourse == 0 then
        if $cha_bigsize_on[@chanum.to_i] != true
          @charect = Rect.new(0 , 0+(96*n), 96, 96)
        else
          @charect = Rect.new(0 ,192*n, 192, 192)
        end
      else
        #@enerect = Rect.new(0 , 0+(96*n), 96, 96)
        #巨大キャラかチェック
        if $data_enemies[@enedatenum].element_ranks[23] != 1
          @enerect = Rect.new(0 ,96*n, 96, 96)
        else
          @enerect = Rect.new(0 ,192*n, 192, 192)
        end
      end 
    else
      if @attackcourse == 0 then
        if $data_enemies[@enedatenum].element_ranks[23] != 1
          @enerect = Rect.new(0 ,96*n, 96, 96)
        else
          @enerect = Rect.new(0 ,192*n, 192, 192)
        end
      else
        #@charect = Rect.new(0 , 0+(96*n), 96, 96)
        if $cha_bigsize_on[@chanum.to_i] != true
          @charect = Rect.new(0 , 0+(96*n), 96, 96)
        else
          @charect = Rect.new(0 ,192*n, 192, 192)
        end
      end       
      
    end
  
  end
  #--------------------------------------------------------------------------
  # ● 状況を見て回避アニメを表示
  # ag:攻撃、防御どっち側を取得する確認 
  #  a:攻撃 g:防御
  # put_x:出力位置x
  # put_y:出力位置y
  #--------------------------------------------------------------------------
  def put_kaihianime ag,put_x,put_y
    
    tyousei_x = 0
    if @attackcourse == 0 && ag == "g" || @attackcourse == 1 && ag == "a"
      
      if ag == "a"
        tyousei_x = -24
      else
        tyousei_x = 24
      end
      
      #敵側取得表示
      if $data_enemies[@enedatenum].element_ranks[23] != 1
        picture = Cache.picture("戦闘アニメ") #ダメージ表示
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(put_x,put_y,picture,rect)
      else
        picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
        rect = Rect.new(0,0, 128, 128)
        @back_window.contents.blt(put_x+tyousei_x,put_y-32,picture,rect)
      end
      
    else
      if ag == "a"
        tyousei_x = 72
      else
        tyousei_x = 72
      end
      #味方側取得表示
      if $cha_bigsize_on[@chanum] != true
        picture = Cache.picture("戦闘アニメ") #ダメージ表示
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(put_x,put_y,picture,rect)
      else
        picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
        rect = Rect.new(0,0, 128, 128)
        #@back_window.contents.blt(@chax+8-64,@chay+16+500-32,picture,rect)
        @back_window.contents.blt(put_x-tyousei_x,put_y-32,picture,rect)
      end
    end
  end
  #--------------------------------------------------------------------------
  # ● 戦闘アニメパターン
  #--------------------------------------------------------------------------
  def anime_pattern n
    
    if @battle_anime_frame == 0 #移動量初期化
      @ax = 0
      @ay = 0
      @gx = 0
      @gy = 0
      @bx = 0
      @by = 0
      @output_anime_type = 0
    end
    
    case n
    
    when 0 #必殺ダメージ吹っ飛び　何も起きない系
      
      if @battle_anime_frame == 0 #初期化
        @output_battle_damage_flag = true
        #battle_anime_change 1,17
        @anime_frame_format = true
        #output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
      
    when 1 #攻撃・防御中心まで移動
      if @battle_anime_frame == 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY

      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 16
        @ax = 18
        @gx = 18
      elsif @battle_anime_frame >= 17
        @chax = CENTER_CHAX
        @enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2 #両端まで見合い
      if @battle_anime_frame == 0 #初期化
        if @attackcourse == 0
          battle_anime_change 0,5
          battle_anime_change 1,8
          @chax = STANDARD_ENEX
          @chay = STANDARD_CHAY + 60
          @enex = STANDARD_CHAX
          @eney = STANDARD_CHAY - 60
        else
          battle_anime_change 1,8
          battle_anime_change 0,5
          @chax = STANDARD_ENEX
          @chay = STANDARD_CHAY - 60
          @enex = STANDARD_CHAX
          @eney = STANDARD_CHAY + 60
        end
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 20
        @ax = -23
        @ay = 0
        @gx = -23
        @gy = 0
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 40
        @ax = -23
        @ay = -3
        @gx = -23
        @gy = 3
      elsif @battle_anime_frame >= 41
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 3 #ぶつかって斜めへ
      if @battle_anime_frame >= 0 && @battle_anime_frame <= 9
        if @battle_anime_frame >= 0 && @battle_anime_frame <= 4
          @effect_anime_pattern = 122
        else
          @effect_anime_pattern = 0
        end
        
        @ax = -20
        @ay = -6
        @gx = -20
        @gy = 6
      elsif @battle_anime_frame >= 10 && @battle_anime_frame <= 19
        @ax = 20
        @ay = 6
        @gx = 20
        @gy = -6
      elsif @battle_anime_frame >= 20
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 4 #回転
      if @battle_anime_frame >= 0 && @battle_anime_frame <= 9
        @ax = 0
        @ay = -14
        @gx = 0
        @gy = 0

      elsif @battle_anime_frame >= 10 && @battle_anime_frame <= 14
        @ax = -12
        @ay = -4

      elsif @battle_anime_frame >= 15 && @battle_anime_frame <= 17
        @ax = -12
        @ay = 0        
      elsif @battle_anime_frame >= 18 && @battle_anime_frame <= 24
        @ax = -12
        @ay = 8

      elsif @battle_anime_frame >= 25 && @battle_anime_frame <= 29
        @ax = 0
        @ay = 4

      elsif @battle_anime_frame >= 30 && @battle_anime_frame <= 34
        @ax = 4
        @ay = 8

      elsif @battle_anime_frame >= 35 && @battle_anime_frame <= 42
        @ax = 8
        @ay = 4

      elsif @battle_anime_frame >= 43 && @battle_anime_frame <= 50
        @ax = 12
        @ay = 2
      elsif @battle_anime_frame >= 51
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 5 #中央へ移動：攻撃・防御上下に揺れて中心まで移動
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY

      when 1..4
        @ax = 18
        @gx = 18
        @ay = -4
        @gy = 4
      when 5..8
        @ax = 18
        @gx = 18
        @ay = 4
        @gy = -4
      when 9..12
        @ax = 18
        @gx = 18
        @ay = 4
        @gy = -4
      when 13..16
        @ax = 18
        @gx = 18
        @ay = -4
        @gy = 4
      when 17
        @chax = CENTER_CHAX
        @enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 6 #攻撃側後ろへ前へ
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..6
        @ax = -24
        @gx = 0
      when 7
        @ax = -16
        @gx = 0
      when 8..13
        @ax = 24
        @gx = 0
      when 14
        @ax = 16
        @gx = 0
      when 15
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 7 #中央へ移動：両者上から下へ行動
      case @battle_anime_frame
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        @chax = CENTER_CHAX
        @enex = CENTER_ENEX
        @chay = -200
        @eney = -200
      when 1..20
        @ay = 16
        @gy = 16
      when 21
        #p @chay,STANDARD_CHAY
        
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 8 #中央へ移動：両者斜めから(攻撃上、防御下)
      
      case @battle_anime_frame
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
        if @attackcourse == 0
          @chay = STANDARD_CHAY - 64#- 32
          @eney = STANDARD_ENEY + 64#+ 32
        else
          @chay = STANDARD_CHAY + 64#+ 32
          @eney = STANDARD_ENEY - 64#- 32
        end
      when 1..16
        @ax = 18
        @gx = 18
        @ay = 4#2
        @gy = -4 #-2
      when 17
        @chax = CENTER_CHAX
        @enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 9 #3回ぶつかる
      case @battle_anime_frame
      
      when 0..5
        if @battle_anime_frame >= 0 && @battle_anime_frame <= 4
          @effect_anime_pattern = 122
        else
          @effect_anime_pattern = 0
        end
        
        @ax = -20
        @ay = -4
        @gx = -20
        @gy = 4
      when 6..11
        @ax = 20
        @ay = 4
        @gx = 20
        @gy = -4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 12..13
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
      when 14..20
        @ax = -24
        @gx = -24
        battle_anime_change 0,16
        battle_anime_change 1,16
        @effect_anime_pattern = 122
      when 21
        @ax = -16
        @gx = -16
      when 22
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @ax = 16
        @gx = 16
      when 23..29
        @ax = 24
        @gx = 24
        battle_anime_change 0,0
        battle_anime_change 1,0
      when 30..31
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
      when 32..38
        @ax = -24
        @gx = -24
        battle_anime_change 0,16
        battle_anime_change 1,16
        @effect_anime_pattern = 122
      when 39
        @ax = -16
        @gx = -16
      when 40
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @ax = 16
        @gx = 16
      when 41..47
        @ax = 24
        @gx = 24
        battle_anime_change 0,0
        battle_anime_change 1,0
      when 48
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 10 #1回だけぶつかる
      case @battle_anime_frame
      
      when 0..5
        if @battle_anime_frame >= 0 && @battle_anime_frame <= 4
          @effect_anime_pattern = 122
        else
          @effect_anime_pattern = 0
        end
        
        @ax = -20
        @ay = -4
        @gx = -20
        @gy = 4
      when 6..11
        @ax = 20
        @ay = 4
        @gx = 20
        @gy = -4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 12
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 11 #中央へ移動：両者斜め上から登場味方左上、敵右上
      case @battle_anime_frame
      
      when 0
          battle_anime_change 0,0
          battle_anime_change 1,0
          @chax = CENTER_CHAX - 460
          @chay = - 202
          @enex = CENTER_ENEX + 460
          @eney = - 202
      when 1..23
        @ax = 20
        @ay = 14
        @gx = 20
        @gy = 14
      when 24
        if @attackcourse == 0
          @chay= STANDARD_CHAY
        else
          @eney= STANDARD_ENEY
        end
        #中心へついたので終了
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 12 #中央へ移動：両者小さいので1回ぶつかり上へ移動後、上から登場中央へ
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,10
        battle_anime_change 1,10
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY-24
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY-24

      when 1..20
        @ax = 18
        @gx = 18
      when 21
        @effect_anime_pattern = 122
        @ax = -2
        @gx = -2
        @ay = -6
        @gy = -4
      when 22..26
        @ax = -2
        @gx = -2
        @ay = -16
        @gy = -14
      when 27..31
        @effect_anime_pattern = 0
        @ax = -4
        @gx = -4
        @ay = -16
        @gy = -14
      when 32..40
        @ax = -6
        @gx = -6
        @ay = -16
        @gy = -14
      when 41
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        @chax = CENTER_CHAX - 80
        @enex = CENTER_ENEX + 80
        @chay = -200
        @eney = -200
        battle_anime_change 0,0
        battle_anime_change 1,0
      when 42..60
        @ax = -4
        @gx = -4
        @ay = 18
        @gy = 14
      when 62..71
        @ax = 16
        @gx = 16
        @ay = -4
        @gy = 4
      when 72
        @effect_anime_pattern = 0
        #p @chax,@chay,CENTER_CHAX
        #@chax = CENTER_CHAX
        #@enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 13 #中央へ移動：両者小さいので2回ぶつかり左右から中央へ
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,10
        battle_anime_change 1,10
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
        if @attackcourse == 0
          @chay = STANDARD_CHAY - 88#- 32
          @eney = STANDARD_ENEY + 12#+ 32
        else
          @chay = STANDARD_CHAY + 12#+ 32
          @eney = STANDARD_ENEY - 88#- 32
        end
      when 1..17
        @ax = 18
        @gx = 18
        @ay = 2
        @gy = -2
      when 18
        @ax = 16
        @gx = 16
        @ay = 2
        @gy = -2
      when 19
        @ax = 14
        @gx = 14
        @ay = 2
        @gy = -2
      when 20
        @ax = 12
        @gx = 12
        @ay = 2
        @gy = -2
      when 21
        @ax = 12
        @gx = 12
        @ay = 4
        @gy = -4
      when 22
        @ax = 6
        @gx = 6
        @ay = 4
        @gy = -4
      when 23..26
        @effect_anime_pattern = 122
        @ax = 0
        @gx = 0
        @ay = 2
        @gy = -2
      when 27
        @ax = -6
        @gx = -6
        @ay = 4
        @gy = -4
      when 28
        @ax = -12
        @gx = -12
        @ay = 4
        @gy = -4
      when 29
        @ax = -12
        @gx = -12
        @ay = 2
        @gy = -2
      when 30
        @effect_anime_pattern = 0
        @ax = -14
        @gx = -14
        @ay = 2
        @gy = -2
      when 31
        @ax = -16
        @gx = -16
        @ay = 2
        @gy = -2
      when 32..48
        @ax = -18
        @gx = -18
        @ay = 2
        @gy = -2
      when 49..65
        @ax = 18
        @gx = 18
        @ay = -2
        @gy = 2
      when 66
        @ax = 16
        @gx = 16
        @ay = -2
        @gy = 2
      when 67
        @ax = 14
        @gx = 14
        @ay = -2
        @gy = 2
      when 68
        @ax = 12
        @gx = 12
        @ay = -2
        @gy = 2
      when 69
        @ax = 12
        @gx = 12
        @ay = -4
        @gy = 4
      when 70
        @ax = 6
        @gx = 6
        @ay = -4
        @gy = 4
      when 71..74
        @effect_anime_pattern = 122
        @ax = 0
        @gx = 0
        @ay = -2
        @gy = 2
      when 75
        @ax = -6
        @gx = -6
        @ay = -4
        @gy = 4
      when 76
        @ax = -12
        @gx = -12
        @ay = -4
        @gy = 4
      when 77
        @ax = -12
        @gx = -12
        @ay = -2
        @gy = 2
      when 78
        @effect_anime_pattern = 0
        @ax = -14
        @gx = -14
        @ay = -2
        @gy = 2
      when 79
        @ax = -16
        @gx = -16
        @ay = -2
        @gy = 2
      when 80..96
        @ax = -18
        @gx = -18
        @ay = -2
        @gy = 2
      when 100
        #p @chax,@chay,CENTER_CHAX
        #@chax = CENTER_CHAX
        #@enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 14 #通常攻撃：攻撃、防御後ろへ行き連打
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..2
        @ax = -24
        @gx = 24
        @ay = 4
        @gy = -4
      when 3..4
        @ax = -24
        @gx = 24
        @ay = 0
        @gy = 0
      when 5..6
        @ax = -24
        @gx = 24
        @ay = -4
        @gy = 4
      when 7
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 8..21
        @ax = 8
        @gx = -8
        
        ray_y = 480/2-90
        ray_x = @enex
        case @battle_anime_frame
        
        when 9
          @effect_anime_pattern = 123

          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        when 13
          @effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 17
          @effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 21
          #Audio.se_stop
          #@effect_anime_pattern = 122
          #Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 11,15,19
          battle_anime_change 0,0
          battle_anime_change 1,0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
        end
      when 22
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 15 #中央へ移動：両者小さいので中央に行き通常の状態でセンターへ移動
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,10
        battle_anime_change 1,10
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY-128
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY-128

      when 1..18
        @ax = 20
        @gx = 18
      when 19..20
        @ax = 0
        @ay = -600
        @gx = 18
      when 21..36
        #@effect_anime_pattern = 118
        @gx = 0
        @ax = 0
        @ay = 0
        #回避エフェクト(攻撃)
        if @attackcourse == 0
          ray_y = STANDARD_CHAY + 24
          ray_x = CENTER_CHAX + 8
        else
          ray_y = STANDARD_ENEY + 24
          ray_x = CENTER_ENEX + 24
        end
        if @battle_anime_frame % 4 == 0
          put_kaihianime "a",ray_x,ray_y
        end
      when 37..53
        @gy = -600
        #if @battle_anime_frame == 37
        #  @effect_anime_pattern = 0
        #else
        #  @effect_anime_pattern = 118
        #end
        #移動後(攻撃)
        if @attackcourse == 0
          battle_anime_change 0,0
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        else
          battle_anime_change 0,0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          #p @enex,@eney
        end
        
        #回避エフェクト(防御)
        if @attackcourse == 0
          ray_y = STANDARD_ENEY + 24
          ray_x = CENTER_ENEX + 24
        else
          ray_y = STANDARD_CHAY + 24
          ray_x = CENTER_CHAX + 8
        end
        
        if @battle_anime_frame % 4 == 0
          put_kaihianime "g",ray_x,ray_y
        end
      when 54
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        @effect_anime_pattern = 0
        #移動後(防御)
        if @attackcourse == 0
          battle_anime_change 1,0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          battle_anime_change 1,0
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
          
        end
      when 55
        #p @chax,@chay,CENTER_CHAX
        #@chax = CENTER_CHAX
        #@enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 16 #通常攻撃：その場で連打(早め)
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..13
        ray_y = 480/2-90
        ray_x = @enex
        case @battle_anime_frame
        
        when 1
          #@effect_anime_pattern = 123

          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 5
          #@effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        when 9
          #@effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 13
          #Audio.se_stop
          #@effect_anime_pattern = 122
          #Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 3,7,11
          battle_anime_change 0,0
          battle_anime_change 1,0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
        end
      when 14
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 17 #通常攻撃：その場で連打(早め)　し、一度斜めへ行ってから再度攻撃
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..13
        ray_y = 480/2-90
        ray_x = @enex
        case @battle_anime_frame
        
        when 1
          #@effect_anime_pattern = 123

          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 5
          #@effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        when 9
          #@effect_anime_pattern = 123
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 13
          #Audio.se_stop
          #@effect_anime_pattern = 122
          #Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 3,7,11
          battle_anime_change 0,0
          battle_anime_change 1,0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
        end
      when 14
        battle_anime_change 0,0
        battle_anime_change 1,0
      when 15..20
        sframe = 15
        ray_y = STANDARD_ENEY + 32
        ray_x = CENTER_ENEX + 16
        
        case (@battle_anime_frame - sframe)
        
        when 0
          battle_anime_change 0,16
          battle_anime_change 1,16
        when 1
          @effect_anime_pattern = 123
        when 4
          @effect_anime_pattern = 0
        end
        
        @ax = -20
        @ay = -4
        @gx = -20
        @gy = 4
      when 21..26
        sframe = 21
        case (@battle_anime_frame - sframe)
        
        when 0
          battle_anime_change 0,0
          battle_anime_change 1,0
        end
        
        @ax = 20
        @ay = 4
        @gx = 20
        @gy = -4
        #@effect_anime_pattern = 0
        #@effect_anime_frame = 0
        #@effect_anime_type = 0
      when 27
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        battle_anime_change 0,rand(4) + 1
      when 28
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 18 #けん制：カーブしながら両者小さいのでぶつかる
      
      ray_y = STANDARD_ENEY - 34
      ray_x = CENTER_ENEX - 10
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,10
        battle_anime_change 1,10
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY - 48
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY - 48
#        if @attackcourse == 0
#          @chay = STANDARD_CHAY - 88#- 32
#          @eney = STANDARD_ENEY + 12#+ 32
#        else
#          @chay = STANDARD_CHAY + 12#+ 32
#          @eney = STANDARD_ENEY - 88#- 32
#        end
      when 1..10
        @ax = 18
        @gx = 18
        @ay = -4
        @gy = -4
      when 11..17
        @ax = 18
        @gx = 18
        @ay = -2
        @gy = -2
      when 18
        @ax = 16
        @gx = 16
        @ay = -2
        @gy = -2
      when 19
        @ax = 14
        @gx = 14
        @ay = -2
        @gy = -2
      when 20
        @ax = 12
        @gx = 12
        @ay = -2
        @gy = -2
      when 21
        @ax = 12
        @gx = 12
        @ay = 0
        @gy = 0
      when 22
        @ax = 6
        @gx = 6
        @ay = 4
        @gy = 4
      when 23
        @effect_anime_pattern = 123
        @ax = -6
        @gx = -6
        @ay = 0
        @gy = 0
      when 24
        @ax = -12
        @gx = -12
        @ay = 2
        @gy = 2
      when 25
        @ax = -12
        @gx = -12
        @ay = 2
        @gy = 2
      when 26
        @effect_anime_pattern = 0
        @ax = -14
        @gx = -14
        @ay = 2
        @gy = 2
      when 27
        @ax = -16
        @gx = -16
        @ay = 4
        @gy = 4
      when 28..44
        @ax = -18
        @gx = -18
        @ay = 4
        @gy = 4
      when 45
        #p @chax,@chay,CENTER_CHAX
        #@chax = CENTER_CHAX
        #@enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 19 #通常攻撃：両者消えながら連打
      
      if @attackcourse == 0
        tyouseix = 192
      else
        tyouseix = -192
      end
      
      ray_y = @eney + 34
      ray_x = @enex - 10

      mikatatyouseix = 72
      kaihityouseiy = 26
      kaihityouseix = 16
      idoux = [CENTER_ENEX,CENTER_ENEX + tyouseix,CENTER_ENEX + tyouseix]
      idouy = [STANDARD_ENEY,STANDARD_ENEY+48,STANDARD_ENEY-112]
      
      case @battle_anime_frame

      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 避ける")    # 効果音を再生する
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy,picture,rect)
        end
        
        @chay = -200
        @eney = -200
      when 1..9
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy,picture,rect)
        end
      when 11..19
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[1]+kaihityouseix-mikatatyouseix,idouy[1]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[1]+kaihityouseix,idouy[1]+kaihityouseiy,picture,rect)
        end
      when 20
        @chax = idoux[1]-mikatatyouseix
        @enex = idoux[1]
        @chay = idouy[1]
        @eney = idouy[1]
      when 21..30
        sframe = 21
        case (@battle_anime_frame - sframe)
        
        when 0
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 2,5,8
          @effect_anime_pattern = 0
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 3
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 6
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 9
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        end
      when 31
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,0
        battle_anime_change 1,0
        Audio.se_play("Audio/SE/" + "Z3 避ける")    # 効果音を再生する
      when 32..40
        @chay = -200
        @eney = -200
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[1]+kaihityouseix-mikatatyouseix,idouy[1]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[1]+kaihityouseix,idouy[1]+kaihityouseiy,picture,rect)
        end
      when 41..49
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[2]+kaihityouseix-mikatatyouseix,idouy[2]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[2]+kaihityouseix,idouy[2]+kaihityouseiy,picture,rect)
        end
      when 50
        @chax = idoux[2]-mikatatyouseix
        @enex = idoux[2]
        @chay = idouy[2]
        @eney = idouy[2]
      when 51..60
        sframe = 51
        case (@battle_anime_frame - sframe)
        
        when 0
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 2,5,8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 3
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 6
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 9
          @effect_anime_pattern = 123
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        end
      when 61
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,0
        battle_anime_change 1,0
        Audio.se_play("Audio/SE/" + "Z3 避ける")    # 効果音を再生する
      when 62..70
        @chay = -200
        @eney = -200
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[2]+kaihityouseix-mikatatyouseix,idouy[2]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[2]+kaihityouseix,idouy[2]+kaihityouseiy,picture,rect)
        end
      when 71..79
        if @effect_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0,48, 64, 64)
          @back_window.contents.blt(idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy,picture,rect)
          @back_window.contents.blt(idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy,picture,rect)
        end
      when 80
        @chax = idoux[0]-mikatatyouseix
        @enex = idoux[0]
        @chay = idouy[0]
        @eney = idouy[0]
      when 81..90
        sframe = 81
        case (@battle_anime_frame - sframe)
        
        when 0
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 SE024")
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 2,5,8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 3
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 6
          @effect_anime_pattern = 123
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 9
          @effect_anime_pattern = 123
          #Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 0,3
          battle_anime_change 1,16
        end
      when 91
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    #けん制や移動系は10000xから開始する
    when 100001 #小さいのでけん制しあう
      #番号使いつくしたので桁を変える
      ray_y = STANDARD_ENEY + 22
      ray_x = CENTER_ENEX - 10
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,10
        battle_anime_change 1,10
        @chax = STANDARD_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
        if @attackcourse == 0
          @chay = STANDARD_CHAY + 48
          @eney = STANDARD_ENEY - 144
        else
          @chay = STANDARD_CHAY - 144
          @eney = STANDARD_ENEY + 48
        end
      when 1..17
        @ax = 18
        @gx = 18
        @ay = -4
        @gy = 4
#      when 11..17
#        @ax = 18
#        @gx = 18
#        @ay = -2
#        @gy = -2
      when 18
        @ax = 16
        @gx = 16
        @ay = -4
        @gy = 4
      when 19
        @ax = 14
        @gx = 14
        @ay = -4
        @gy = 4
      when 20
        @ax = 12
        @gx = 12
        @ay = -4
        @gy = 4
      when 21
        @ax = 12
        @gx = 12
        @ay = -4
        @gy = 4
      when 22
        @ax = 6
        @gx = 6
        @ay = -4
        @gy = 4
      when 23..24
        @effect_anime_pattern = 123
        @effect_anime_frame = 0
        @ax = -6
        @gx = -6
        @ay = 4
        @gy = -4
      when 25..26
        @effect_anime_frame = 0
        @ax = -12
        @gx = -12
        @ay = 0
        @gy = 0
      when 27..28
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @ax = -12
        @gx = -12
        @ay = -4
        @gy = 4
      when 29..30
        @ax = -8
        @gx = -8
        @ay = -6
        @gy = 6
      when 31..32
        @ax = -6
        @gx = -6
        @ay = -8
        @gy = 8
      when 33..34
        @ax = 0
        @gx = 0
        @ay = -8
        @gy = 8
      when 35..36

        @ax = 12
        @gx = 12
        @ay = -8
        @gy = 8
      when 37..38
        
        @ax = 12
        @gx = 12
        @ay = -6
        @gy = 6
      when 39..40

        @ax = 12
        @gx = 12
        @ay = 2
        @gy = -2
      when 41..42
        @ax = 8
        @gx = 8
        @ay = 4
        @gy = -4
      when 43..47
        @ax = 0
        @gx = 0
        @ay = 8
        @gy = -8
      when 48..58
        @effect_anime_pattern = 123
        @effect_anime_frame = 0
        @ax = -12
        @gx = -12
        @ay = -4
        @gy = 4
      when 59..64
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @ax = -12
        @gx = -12
        @ay = 0
        @gy = 0
      when 65..75
        @ax = -12
        @gx = -12
        @ay = 4
        @gy = -4
      when 80
        #p @chax,@chay,CENTER_CHAX
        #@chax = CENTER_CHAX
        #@enex = CENTER_ENEX
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    #攻撃系は10010xから開始する
    when 100101 #消えながら近づき攻撃
      
      if @attackcourse == 0
        tyouseix = -192
      else
        tyouseix = 192
      end
      
      #回避エフェクト
      if @attackcourse == 0
        ray_y = STANDARD_CHAY + 24
        ray_x = CENTER_CHAX + 8
      else
        ray_y = STANDARD_ENEY + 24
        ray_x = CENTER_ENEX + 24
      end

      mikatatyouseix = 72
      kaihityouseiy = 26
      kaihityouseix = 16
      idoux = [CENTER_ENEX,CENTER_ENEX + tyouseix,CENTER_ENEX + tyouseix,CENTER_ENEX + tyouseix]
      idouy = [STANDARD_ENEY,STANDARD_ENEY-112,STANDARD_ENEY+48,STANDARD_ENEY-24]
      
      case @battle_anime_frame

      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 避ける")    # 効果音を再生する
      
        #@back_window.contents.blt(idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy,picture,rect)
        #@back_window.contents.blt(idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy,picture,rect)
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy
          else
            put_kaihianime "a",idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy
          end
        end
        if @attackcourse == 0
          @chay = -200
        else
          @eney = -200
        end
      when 1..12
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy
          else
            put_kaihianime "a",idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy
          end
        end
      when 13..20
        sframe = 13
        case (@battle_anime_frame-sframe)
        
        when 0..8
          @gx = 4
          @gy = -8
          
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[1]+kaihityouseix-mikatatyouseix,idouy[1]+kaihityouseiy
          else
            put_kaihianime "a",idoux[1]+kaihityouseix,idouy[1]+kaihityouseiy
          end
        end
      when 21..28
        sframe = 21
        case (@battle_anime_frame-sframe)
        
        when 0
          @gx = 0
          @gy = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 1,1
          if @attackcourse == 0
            @chax = idoux[1]-mikatatyouseix
            @chay = idouy[1]
          else
            @enex = idoux[1]
            @eney = idouy[1]
          end
        end
        
      when 29..38
        sframe = 29
        case (@battle_anime_frame-sframe)
        
        when 0
          battle_anime_change 1,0
          Audio.se_play("Audio/SE/" + "Z3 避ける")
          if @attackcourse == 0
            @chay = -200
          else
            @eney = -200
          end
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[1]+kaihityouseix-mikatatyouseix,idouy[1]+kaihityouseiy
          else
            put_kaihianime "a",idoux[1]+kaihityouseix,idouy[1]+kaihityouseiy
          end
        end
      when 39..46
        #何もなし
      when 47..54
        sframe = 47
        case (@battle_anime_frame-sframe)
        
        when 0..8
          @gx = 4
          @gy = 8
          
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[2]+kaihityouseix-mikatatyouseix,idouy[2]+kaihityouseiy
          else
            put_kaihianime "a",idoux[2]+kaihityouseix,idouy[2]+kaihityouseiy
          end
        end
      when 55..62
        sframe = 55
        case (@battle_anime_frame-sframe)
        
        when 0
          @gx = 0
          @gy = 0
          Audio.se_play("Audio/SE/" + "Z3 打撃")
          battle_anime_change 1,4
          if @attackcourse == 0
            @chax = idoux[2]-mikatatyouseix
            @chay = idouy[2]
          else
            @enex = idoux[2]
            @eney = idouy[2]
          end
        end
      when 63..70
        sframe = 63
        case (@battle_anime_frame-sframe)
        
        when 0
          battle_anime_change 1,0
          Audio.se_play("Audio/SE/" + "Z3 避ける")
          if @attackcourse == 0
            @chay = -200
          else
            @eney = -200
          end
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[2]+kaihityouseix-mikatatyouseix,idouy[2]+kaihityouseiy
          else
            put_kaihianime "a",idoux[2]+kaihityouseix,idouy[2]+kaihityouseiy
          end
        end
      when 71..74
        #何もなし
      when 75..82
        sframe = 75
        case (@battle_anime_frame-sframe)
        
        when 0..8
          @gx = -8
          #Audio.se_play("Audio/SE/" + "Z3 避ける")
          if @attackcourse == 0
            #@chay = -200
          else
            #@eney = -200
          end
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[3]+kaihityouseix-mikatatyouseix,idouy[3]+kaihityouseiy
          else
            put_kaihianime "a",idoux[3]+kaihityouseix,idouy[3]+kaihityouseiy
          end
        end
      when 83..90
        sframe = 83
        case (@battle_anime_frame-sframe)
        
        when 0
          @gx = 0
          if @attackcourse == 0
            @chax = idoux[3]-mikatatyouseix
            @chay = idouy[3]
          else
            @enex = idoux[3]
            @eney = idouy[3]
          end
        end
      when 91..98
        sframe = 91
        case (@battle_anime_frame-sframe)
        
        when 0
          Audio.se_play("Audio/SE/" + "Z3 避ける")
          if @attackcourse == 0
            @chay = -200
          else
            @eney = -200
          end
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[3]+kaihityouseix-mikatatyouseix,idouy[3]+kaihityouseiy
          else
            put_kaihianime "a",idoux[3]+kaihityouseix,idouy[3]+kaihityouseiy
          end
        end
      when 99..102
        #何もなし
      when 103..110
        sframe = 103
        case (@battle_anime_frame-sframe)
        
        when 0
          #Audio.se_play("Audio/SE/" + "Z3 避ける")
          if @attackcourse == 0
            #@chay = -200
          else
            #@eney = -200
          end
        end
        if @battle_anime_frame % 4 == 0
          if @attackcourse == 0
            put_kaihianime "a",idoux[0]+kaihityouseix-mikatatyouseix,idouy[0]+kaihityouseiy
          else
            put_kaihianime "a",idoux[0]+kaihityouseix,idouy[0]+kaihityouseiy
          end
        end
      when 111
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        if @attackcourse == 0
          @chax = idoux[0]-mikatatyouseix
          @chay = idouy[0]
        else
          @enex = idoux[0]
          @eney = idouy[0]
        end
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 100102 #攻撃側後ろに溜めて
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..18
        @ax = -12
        @gx = 0
      when 19..48
        @ax = 0
        @gx = 0
      when 49..65
        battle_anime_change 0,16
      when 66..74
        @ax = 24
      when 75
        @kyouda_se = true
        battle_anime_change 0,1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 100103 #中央上下中央で各3回攻撃
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..41
        sframe = 1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..7
          battle_anime_change 0,1
          battle_anime_change 1,0
        when 8..15
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 16..23
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 24..31
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 32..39
          battle_anime_change 0,3
          #battle_anime_change 1,0
        when 40
          battle_anime_change 0,0
          battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,16,32
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 42..57
        @ax = -8
        @gx = -8
        @ay = -2
        @gy = -2
      when 58..73
        @ax = 8
        @gx = 8
        @ay = -2
        @gy = -2
      when 74..114
        sframe = 74
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..7
          battle_anime_change 0,4
          battle_anime_change 1,0
        when 8..15
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 16..23
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 24..31
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 32..39
          battle_anime_change 0,1
          #battle_anime_change 1,0
        when 40
          battle_anime_change 0,0
          battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,16,32
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 115..130
        @ax = -8
        @gx = -8
        @ay = 4
        @gy = 4
      when 131..146
        @ax = 8
        @gx = 8
        @ay = 4
        @gy = 4
      when 147..187
        sframe = 147
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..7
          battle_anime_change 0,1
          battle_anime_change 1,0
        when 8..15
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 16..23
          battle_anime_change 0,3
          battle_anime_change 1,0
        when 24..31
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 32..39
          battle_anime_change 0,4
          #battle_anime_change 1,0
        when 40
          battle_anime_change 0,0
          battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,16,32
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 188..203
        @ax = -8
        @gx = -8
        @ay = -2
        @gy = -2
      when 204..219
        @ax = 8
        @gx = 8
        @ay = -2
        @gy = -2
      when 220..252
        sframe = 220
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..7
          battle_anime_change 0,3
          battle_anime_change 1,0
        when 8..15
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 16..23
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 24..31
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 32..39
          battle_anime_change 0,1
          #battle_anime_change 1,0
        when 40
          battle_anime_change 0,0
          battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,16#,32
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 253
        #@kyouda_se = true
        battle_anime_change 0,1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 100104 #連打3回
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..30
        sframe = 1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..5
          battle_anime_change 0,1
          battle_anime_change 1,0
        when 6..11
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 12..17
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 18..23
          battle_anime_change 0,4
          battle_anime_change 1,0
        when 24..29
          battle_anime_change 0,2
          #battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,6,12,18,24
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 31..42
        sframe = 31
        case (@battle_anime_frame-sframe)
        
        when 0..4
          battle_anime_change 0,16
          battle_anime_change 1,16
          @ax = -20
          @gx = -20
          @ay = -4
          @gy = 4
        when 5..12
          @ax = -10
          @gx = -10
          @ay = -2
          @gy = 2
        end
      when 43..72
        battle_anime_change 0,16
        battle_anime_change 1,16
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 73..89
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 10
        @gx = 10
        @ay = 2
        @gy = -2
      when 90
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 91..120
        sframe = 91
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..5
          battle_anime_change 0,4
          battle_anime_change 1,0
        when 6..11
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 12..17
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 18..23
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 24..29
          battle_anime_change 0,3
          #battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,6,12,18,24
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 121..132
        sframe = 121
        case (@battle_anime_frame-sframe)
        
        when 0..4
          battle_anime_change 0,16
          battle_anime_change 1,16
          @ax = -20
          @gx = -20
          @ay = 4
          @gy = -4
        when 5..12
          @ax = -10
          @gx = -10
          @ay = 2
          @gy = -2
        end
      when 133..162
        battle_anime_change 0,16
        battle_anime_change 1,16
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 163..179
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 10
        @gx = 10
        @ay = -2
        @gy = 2
      when 180
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 181..205
        sframe = 181
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..5
          battle_anime_change 0,4
          battle_anime_change 1,0
        when 6..11
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 12..17
          battle_anime_change 0,4
          battle_anime_change 1,16
        when 18..23
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 24#..29
          @kyouda_se = true
          battle_anime_change 0,3
          #battle_anime_change 1,0
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,6,12,18#,24
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 206
        #@kyouda_se = true
        battle_anime_change 0,1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 100105 #Z2 連打
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..71
        sframe = 1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..6
          battle_anime_change 0,1
          battle_anime_change 1,0
        when 7..13
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 14..20
          battle_anime_change 0,2
          battle_anime_change 1,0
        when 21..27
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 28..34
          battle_anime_change 0,3
          #battle_anime_change 1,0
        when 35..41
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 42..48
          battle_anime_change 0,4
          battle_anime_change 1,0
        when 49..55
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 56..62
          battle_anime_change 0,1
          battle_anime_change 1,0  
        when 63..69
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 70#..81
          battle_anime_change 0,2
          battle_anime_change 1,16
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,14,28,42,56#,70
          Audio.se_play("Audio/SE/" + "Z2 SE058")
        end
      when 72
        @kyouda_Z2_se = true
        #battle_anime_change 0,1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 100106 #Z1 連打けん制
      
      case @battle_anime_frame
      
      when 0 #初期化
        battle_anime_change 0,0
        battle_anime_change 1,0
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
      when 1..250
        sframe = 1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        case (@battle_anime_frame-sframe)
        
        when 0..6
          battle_anime_change 0,4
          #battle_anime_change 1,0
        when 7..13
          battle_anime_change 0,0
          battle_anime_change 1,16
        when 14..20
          battle_anime_change 0,1
          #battle_anime_change 1,0
        when 21..27
          battle_anime_change 0,0
        when 28..34
          battle_anime_change 0,3
          battle_anime_change 1,0
        when 35..49
          battle_anime_change 0,0
          battle_anime_change 1,0
          @ax = -8
          @gx = -8
          @ay = 4
          @gy = -4
        when 50
          battle_anime_change 0,5
          battle_anime_change 1,8
          @ay = -8
          @gy = 8
        when 51..61
          battle_anime_change 0,5
          battle_anime_change 1,8
        when 62
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 0
        when 63
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 2
        when 64
          @ax = 2
          @gx = 2
          @ay = -2
          @gy = 2
        when 65
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 0
        when 66
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 2
        when 67
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 68
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 0
        when 69
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 2
        when 70
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 71
          @ax = 2
          @gx = 0
          @ay = 0
          @gy = 0
        when 72
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 73
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 2
        when 74
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 0
        when 75
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 76
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 2
        when 77
          battle_anime_change 0,0
          battle_anime_change 1,0
          @ay = -8
          @gy = 8
        when 78
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 0
        when 79
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 2
        when 79
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 80
          @ax = 2
          @gx = 0
          @ay = 0
          @gy = 0
        when 81
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 2
        when 82
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 83
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 0
        when 84
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 2
        when 85
          @ax = 2
          @gx = 2
          @ay = -2
          @gy = 2
        when 86
          @ax = 0
          @gx = 0
          @ay = -2
          @gy = 0
        when 87
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 2
        when 88
          @ax = 2
          @gx = 0
          @ay = -2
          @gy = 2
        when 89
          @ax = 0
          @gx = 2
          @ay = -2
          @gy = 0
        when 90
          @ax = 2
          @gx = 2
          @ay = -2
          @gy = 2
        when 91..106
          @ax = 6
          @gx = 6
        when 107..113
          battle_anime_change 0,2
          battle_anime_change 1,16
        when 114..120
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 121..127
          battle_anime_change 0,4
          #battle_anime_change 1,0
        when 128..134
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 135..141
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 142..156
          battle_anime_change 0,0
          battle_anime_change 1,0
          @ax = -8
          @gx = -8
          @ay = -4
          @gy = 4
        when 157
          battle_anime_change 0,5
          battle_anime_change 1,8
          @ay = 8
          @gy = -8
        when 158..168
          battle_anime_change 0,5
          battle_anime_change 1,8
        when 169
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = 0
        when 170
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = -2
        when 171
          @ax = 2
          @gx = 2
          @ay = 2
          @gy = -2
        when 172
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = 0
        when 173
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 174
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 175
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = 0
        when 176
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 177
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 178
          @ax = 2
          @gx = 0
          @ay = 0
          @gy = 0
        when 179
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 180
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = -2
        when 181
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = 0
        when 182
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 183
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 184
          battle_anime_change 0,0
          battle_anime_change 1,0
          @ay = 8
          @gy = -8
        when 185
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = 0
        when 186
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 187
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 188
          @ax = 2
          @gx = 0
          @ay = 0
          @gy = 0
        when 189
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = -2
        when 190
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 191
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = 0
        when 192
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = -2
        when 193
          @ax = 2
          @gx = 2
          @ay = 2
          @gy = -2
        when 194
          @ax = 0
          @gx = 0
          @ay = 2
          @gy = 0
        when 195
          @ax = 0
          @gx = 2
          @ay = 2
          @gy = -2
        when 196
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 197
          @ax = 0
          @gx = 2
          @ay = 0
          @gy = 2
        when 198
          @ax = 2
          @gx = 0
          @ay = 2
          @gy = -2
        when 199..214
          @ax = 6
          @gx = 6
        when 215..221
          battle_anime_change 0,1
          battle_anime_change 1,16
        when 222..228
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 229..235
          battle_anime_change 0,2
          #battle_anime_change 1,0
        when 236..242
          battle_anime_change 0,0
          battle_anime_change 1,0
        when 243..249
          battle_anime_change 0,4
          battle_anime_change 1,16
        end
        
        #SE用
        case (@battle_anime_frame-sframe)
        
        when 0,14,28,107,121,135,215,229,243#,70
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 251
        @kyouda_se = true
        #battle_anime_change 0,1
        @ax = 0
        @gx = 0
        @ay = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 20 #回避
      
      if @battle_anime_frame == 0
        Audio.se_play("Audio/SE/" + "Z3 避ける.ogg")    # 効果音を再生する
        #battle_anime_change 1,16
        #@output_battle_damage_flag = true
        @gy = -500
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 20
        @gy = 0
        @effect_anime_pattern = 120
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 50
        #@gx = 0
      elsif @battle_anime_frame == 51
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 21 #通常攻撃吹っ飛び

      if @battle_anime_frame == 0
        
        if @kyouda_Z2_se == true
          Audio.se_play("Audio/SE/" + "Z2 SE058")
        elsif @kyouda_se == false
          Audio.se_play("Audio/SE/" + "Z3 打撃")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
        end
        battle_anime_change 1,16
        @output_battle_damage_flag = true
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 12
        @gx = -18
        
        if @attackcourse == 1 && $cha_bigsize_on[@chanum.to_i] == true || @attackcourse == 0 && $data_enemies[@enedatenum].element_ranks[23] == 1
          @gx = 0 if @battle_anime_frame >= 8
        end
        @effect_anime_pattern = 121
      elsif @battle_anime_frame >= 13 && @battle_anime_frame <= 50
        @gx = 0
      elsif @battle_anime_frame == 51
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
      #ヒットアニメーション等

    when 22 #必殺ダメージ吹っ飛び 衝撃波系
      
      if @battle_anime_frame == 0 #初期化
        
        if @tec_kyouda_se == false
          Audio.se_play("Audio/SE/" + "Z3 跳ね返し")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "ZG 打撃4")    # 効果音を再生する
        end
        @output_battle_damage_flag = true
        battle_anime_change 1,17
        @gx = -20
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 19
        @gx = -20
      elsif @battle_anime_frame == 20
        @gx = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y,@btl_ani_cha_chg_no
        return @battle_anime_result + 1
      end
    when 23 #必殺ダメージ吹っ飛び 爆発系
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
        explosion_eff = 101
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 50
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 24 #必殺ダメージ吹っ飛び 爆発系(縦)
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
        explosion_eff = 101
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 34
        @gy = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 35
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 45
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 25 #超能力ヒットキャラ揺れる
      if @battle_anime_frame == 0 #初期化
        battle_anime_change 1,0
        
        #@ene_set_action = 545
        #p @attackcourse,@ene_set_action
        if @attackcourse == 1 && @ene_set_action == 545
          Audio.se_play("Audio/SE/" + "DB3 SE061")
          @output_battle_damage_flag = true
        else
          Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
        end
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 60
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 60
        @gx = -6
      else
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        Audio.se_stop
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 26 #必殺ダメージ吹っ飛び 爆発系(小人)
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
        explosion_eff = 101
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,11
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 27 #必殺ダメージ吹っ飛び 爆発系(左斜め上)
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
        explosion_eff = 101
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 29
        @gy = -20
        @gx = 20
      elsif @battle_anime_frame == 30
        @gy = -20
        @gx = 20
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @gy = -20
        @gx = 20
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 28 #超能力ヒットキャラ揺れながら爆発
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
        explosion_eff = 101
      end
      
      if @battle_anime_frame == 0 #初期化
        battle_anime_change 1,0
        Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 60
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 60
        @gx = -6
      end
      
      if @battle_anime_frame == 40 #初期化
        Audio.se_stop
        @gx = 0
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 61 && @battle_anime_frame <= 74
        @gy = 20
      elsif @battle_anime_frame == 75
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 85
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 29 #サイコアタックヒットキャラ揺れる
      
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      #rect = Rect.new(0, 5*96,96,96)
      #@back_window.contents.blt(STANDARD_ENEX+74-21*RAY_SPEED,STANDARD_CHAY-8,picture,rect)
      @effect_anime_pattern = 88
      if @battle_anime_frame == 0 #初期化
        @effect_anime_frame = 22
        battle_anime_change 1,0
        @output_battle_damage_flag = true
        Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 60
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 60
        @gx = -6
      else
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        Audio.se_stop
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 30 #必殺ダメージ吹っ飛び 太陽拳系
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
        @output_battle_damage_flag = true
        battle_anime_change 1,16
        @gx = -20
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 19
        @gx = -20
      elsif @battle_anime_frame == 20
        @gx = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 31 #必殺技移動(上から左下右へ)
      #@battle_anime_frame_length

      if @tmp_tec_move[1] != nil
        @tec_move[1] = @tmp_tec_move[1]
      end
      
      #テスト用固定値セット
      #@tec_move[1] = 7

      case @tec_move[1]
      when 1
        if @battle_anime_frame == 0 #初期化
          @output_anime_type = 0
          #上から左下へ移動
          if @attackcourse == 0 
            @chax = 200 #味方側開始基準x
            @chay = -200 #味方側開始基準y
            @enex = 0 #敵側開始基準x
            @eney = -200 #敵側開始基準y
          else
            @chax = 0 #味方側開始基準x
            @chay = -200 #味方側開始基準y
            @enex = 344 #敵側開始基準x
            @eney = -200 #敵側開始基準y
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 29
          @ax = -18
          @ay = 12
        elsif @battle_anime_frame == 30
          #中心へ行く準備
          @output_anime_type = 1
          @ax = 0
          @ay = 0
          if @attackcourse == 0
            @chax = STANDARD_CHAX
            @chay = STANDARD_CHAY
          else
            @enex = STANDARD_ENEX
            @eney = STANDARD_ENEY
          end
        elsif @battle_anime_frame >= 31 && @battle_anime_frame <= 46
          #中心へ
          @ax = 20
        elsif @battle_anime_frame == 47
          if @attackcourse == 0
            @chax= TEC_CENTER_CHAX
          else
            @enex= TEC_CENTER_CHAX
          end
          #中心へついたので終了
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 2 #左から出て上へ
        if @battle_anime_frame == 0 #初期化
          @output_anime_type = 0
          #上から左下へ移動
          if @attackcourse == 0
            @chax = STANDARD_CHAX
            @chay = STANDARD_CHAY
            @eney = -200
          else
            @enex = STANDARD_ENEX
            @eney = STANDARD_ENEY
            @chay = -200
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 30
          @ax = 20
        elsif @battle_anime_frame >= 31 && @battle_anime_frame <= 35
          @ax = 0
          @ay = -20
        elsif @battle_anime_frame >= 36 && @battle_anime_frame <= 50
          @ax = -4
          @ay = -20        
        elsif @battle_anime_frame == 51
          #中心へ行く準備
          @output_anime_type = 1
          @ax = 0
          @ay = 0
          if @attackcourse == 0
            @chax = TEC_CENTER_CHAX
            #@chay = STANDARD_CHAY
          else
            @enex = TEC_CENTER_CHAX
            #@eney = STANDARD_ENEY
          end
        elsif @battle_anime_frame >= 58 && @battle_anime_frame <= 77
          #中心へ
          @ay = 20
        elsif @battle_anime_frame == 78
          if @attackcourse == 0
            @chay= STANDARD_CHAY
          else
            @eney= STANDARD_ENEY
          end
          #中心へついたので終了
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 3 #右からカーブして左から出てくる
        if @battle_anime_frame == 0 #初期化
          if @attackcourse == 0
            battle_anime_change 0,5
            #battle_anime_change 1,8
            @chax = STANDARD_ENEX
            @chay = STANDARD_CHAY
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            #battle_anime_change 1,8
            battle_anime_change 0,5
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = STANDARD_CHAX
            @eney = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 15
          @ax = -23
          @ay = 2
        elsif @battle_anime_frame >= 16 && @battle_anime_frame <= 20
          @ax = -23
        elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 35
          @ax = -23
          @ay = -2
        elsif @battle_anime_frame == 51
          #中心へ行く準備
          @output_anime_type = 1
          battle_anime_change 0,0
          @ax = 0
          @ay = 0
          if @attackcourse == 0
            @chax = STANDARD_CHAX
            @chay = STANDARD_CHAY-34
          else
            @enex = STANDARD_ENEX
            @eney = STANDARD_ENEY-34
          end
        elsif @battle_anime_frame >= 52 && @battle_anime_frame <= 67
          #中心へ
          @ax = 20
          @ay = 2
        elsif @battle_anime_frame == 68
          if @attackcourse == 0
            @chax= TEC_CENTER_CHAX
            @chay = STANDARD_CHAY
          else
            @enex= TEC_CENTER_CHAX
            @eney = STANDARD_ENEY
          end
          #中心へついたので終了
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 4 #V字前から後ろ移動
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = TEC_CENTER_CHAX + 460
            @chay = - 202
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = TEC_CENTER_CHAX - 460
            @eney = -202
          end
        when 1..23
          @ax = -20
          @ay = 14
        when 24..47
          @ax = -20
          @ay = -14
        when 51
          #中心へ行く準備
          @output_anime_type = 1
          @ax = 0
          @ay = 0
          if @attackcourse == 0
            @chax = TEC_CENTER_CHAX
            @chay = 120-400
          else
            @enex = TEC_CENTER_CHAX
            @eney = 120-400
          end
        when 58..77
          #中心へ
          @ay = 20
        when 78
          if @attackcourse == 0
            @chay= STANDARD_CHAY
          else
            @eney= STANDARD_ENEY
          end
          #中心へついたので終了
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 5 #V字後ろから前移動
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = TEC_CENTER_CHAX - 460
            @chay = - 202
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = TEC_CENTER_CHAX + 460
            @eney = -202
          end
        when 1..23
          @ax = 20
          @ay = 14
        when 24..47
          @ax = 20
          @ay = -14
        when 51
          #中心へ行く準備
          @output_anime_type = 1
          @ax = 0
          @ay = 0
          if @attackcourse == 0
            @chax = TEC_CENTER_CHAX
            @chay = 120-400
          else
            @enex = TEC_CENTER_CHAX
            @eney = 120-400
          end
        when 58..77
          #中心へ
          @ay = 20
        when 78
          if @attackcourse == 0
            @chay= STANDARD_CHAY
          else
            @eney= STANDARD_ENEY
          end
          #中心へついたので終了
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 6 #Z字移動後ろから前
        case @battle_anime_frame
        
        when 0
          @output_anime_type = 1
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = -214
            @chay = STANDARD_CHAY - 96
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = 640 + 106
            @eney = STANDARD_CHAY - 96
          end
        when 1..26
          @ax = 24
          
        when 27..32
          @ax = -24
          @ay = 16
        when 33#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 7 #Z字移動前から後ろ
        case @battle_anime_frame
        
        when 0
          @output_anime_type = 1
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = 640 + 106
            @chay = STANDARD_CHAY - 96
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = -214
            @eney = STANDARD_CHAY - 96
          end
        when 1..26
          @ax = -24
          
        when 27..32
          @ax = 24
          @ay = 16
        when 33#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
#シンプルすぎるので必殺技発動としてはボツにした
=begin
      when 4 #単純な横移動のみ
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = -214
            @chay = STANDARD_CHAY
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = 640 + 106
            @eney = STANDARD_CHAY
          end
        when 1..20
          @ax = 24
          
        when 21#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
        

      when 5 #斜め後ろから前へ登場
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = TEC_CENTER_CHAX - 460
            @chay = - 202
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = TEC_CENTER_CHAX + 460
            @eney = -202
          end
        when 1..23
          @ax = 20
          @ay = 14
        when 24#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
      when 6 #斜め前から後ろへ登場
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = TEC_CENTER_CHAX + 460
            @chay = - 202
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = TEC_CENTER_CHAX - 460
            @eney = -202
          end
        when 1..23
          @ax = -20
          @ay = 14
        when 24#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
        
      when 7 #半円上から移動
        case @battle_anime_frame
        
        when 0
          if @attackcourse == 0
            battle_anime_change 0,0
            #battle_anime_change 1,8
            @chax = -214
            @chay = STANDARD_CHAY
            @enex = STANDARD_CHAX
            @eney = - 200
          else
            battle_anime_change 0,0
            @chax = STANDARD_ENEX
            @chay = - 200
            @enex = 640 + 106
            @eney = STANDARD_ENEY
          end
        when 1..11
          @ax = 16
          @ay = -4
        when 12..19
          @ax = 16
          @ay = 0
        when 20..30
          @ax = 16
          @ay = 4
        when 31..32#..34
          @ax = 0
          @ay = 0
          #p @chax,@chay
          #@chax = TEC_CENTER_CHAX
          #@chay = STANDARD_CHAY

          #p @enex,@eney
          #@enex= TEC_CENTER_CHAX
          #@eney = STANDARD_ENEY
          
          @anime_frame_format = true
          output_battle_anime @output_anime_type,@output_anime_type_y
          return @battle_anime_result + 1
        end
=end
      else
        
        
      end

    when 32 #Z1必殺技発動
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 必殺技")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @by = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 79
        @by = 4
        if @battle_anime_frame >= 30
          if @chr_cutin_flag == true
            @chr_cutin = true
          end
          @tec_output_back = true
        end
      elsif @battle_anime_frame == 80
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 33 #Z2必殺技発動
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 必殺技")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @by = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 79
        @by = 4
      elsif @battle_anime_frame == 80
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 39 #かばう
      idougo = 212+24
      idouryou = 16
      case @battle_anime_frame
      when 0
        @chay = -200
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @scombo_cha1 = $partyc[$battle_kabau_runcha]
        @scombo_cha2 = $battle_kabawareru_runcha
      when 1..33
        
        scombo_cha1_x = 0
        scombo_cha1_y = 0
        scombo_cha2_x = 0
        scombo_cha2_y = 0
        
        stframe1 = 25
        tyouseiy1 = 0
        case (@battle_anime_frame - stframe1)
        
        when 0..100
          tyouseiy1 = 12 * (@battle_anime_frame - stframe1)
        end
        
        stframe2 = 25
        tyouseix2 = 0
        case (@battle_anime_frame - stframe2)
        
        when 0..100
          tyouseix2 = 6 * (@battle_anime_frame - stframe2)
        end
        
        back_anime_pattern 115,-200 + (@battle_anime_frame * idouryou),STANDARD_CHAY - 96 + tyouseiy1
        back_anime_pattern 117,CENTER_CHAX - tyouseix2,STANDARD_CHAY

        #p @battle_anime_frame,@battle_anime_frame * idouryou,CENTER_CHAX - tyouseix2
      when 32..91
        back_anime_pattern 115,328,STANDARD_CHAY
        back_anime_pattern 117,192,STANDARD_CHAY
      when 92
        back_anime_pattern 115,328,STANDARD_CHAY
        back_anime_pattern 117,192,STANDARD_CHAY
        $battle_kabau_scenesumi = true
        $battle_kabau_scenerun = false

        return @battle_anime_result + 1
      end
    when 40 #何もしない
      return @battle_anime_result + 1
    when 41 #必殺ダメージ吹っ飛び 爆発系ZD中
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット2"
        explosion_eff = 102
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 42 #必殺ダメージ吹っ飛び 爆発系ZD大
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
        explosion_eff = 103
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 43 #必殺ダメージ吹っ飛び 爆発系Z2大
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z1 爆発1"
        explosion_eff = 104
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 44 #必殺ダメージ吹っ飛び 爆発系Z2特大
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "DB3 大爆発"
        explosion_eff = 105
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 39
        @gx = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 40
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 46 #必殺ダメージ吹っ飛び 爆発系ZD中縦
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット2"
        explosion_eff = 102
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 35
        @gy = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 35
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 45
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 47 #必殺ダメージ吹っ飛び 爆発系ZD大
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
        explosion_eff = 103
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 34
        @gy = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 35
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 45
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 48 #必殺ダメージ吹っ飛び 爆発系Z2特大
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "DB3 大爆発"
        explosion_eff = 105
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 34
        @gy = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 35
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 45
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 49 #必殺ダメージ吹っ飛び 爆発系ZD大(セル吹っ飛びなし)
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
        explosion_eff = 103
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        #battle_anime_change 1,17
      elsif @battle_anime_frame >= 25 && @battle_anime_frame <= 39
        #@gx = -20 if @damage_huttobi == true
        #back_anime_pattern 211
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 20
      elsif @battle_anime_frame >= 40 && @battle_anime_frame <= 100
        @gx = 0
        #@effect_anime_pattern = 103
        
        #back_anime_pattern 211
        #@gy = 0
        #@effect_anime_pattern = 0
      elsif @battle_anime_frame == 101
        @effect_anime_pattern = 0
        #@ax = 0
        #@ay = 0
        #@gx = 0
        #@gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    ### つくりの都合上50の後は70へ飛ぶ####
    when 50 #必殺ダメージ吹っ飛び 爆発系ZD大(17号バリア)
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
        explosion_eff = 103
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        #battle_anime_change 1,17
      elsif @battle_anime_frame >= 25 && @battle_anime_frame <= 39
        #@gx = -20 if @damage_huttobi == true
        back_anime_pattern 211
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 20
      elsif @battle_anime_frame >= 40 && @battle_anime_frame <= 100
        @gx = 0
        #@effect_anime_pattern = 103
        
        back_anime_pattern 211
        #@gy = 0
        #@effect_anime_pattern = 0
      elsif @battle_anime_frame == 101
        @effect_anime_pattern = 0
        #@ax = 0
        #@ay = 0
        #@gx = 0
        #@gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 70 #必殺ダメージ氷結
      
      explosion_se = "Audio/SE/" + "DB3 キラーン"
      explosion_eff = 94
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,16
      elsif @battle_anime_frame >= 25 && @battle_anime_frame <= 39
        @effect_anime_pattern = explosion_eff
        #@gx = -20 if @damage_huttobi == true
        #back_anime_pattern 211
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 20
      elsif @battle_anime_frame >= 40 && @battle_anime_frame <= 100
        @effect_anime_pattern = explosion_eff
        @gx = 0
        #@effect_anime_pattern = 103
        
        #back_anime_pattern 211
        #@gy = 0
        #@effect_anime_pattern = 0
      elsif @battle_anime_frame == 101
        #@effect_anime_pattern = 0
        #@ax = 0
        #@ay = 0
        #@gx = 0
        #@gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 71 #必殺ダメージ吹っ飛び 縦
      
      explosion_se = "Audio/SE/" + "Z3 跳ね返し"
      explosion_eff = 101
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        #@effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 14
        @gy = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 15
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 25
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 72 #必殺ダメージ吹っ飛び 縦
      
      explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
      explosion_eff = 106
      #@damage_center = true
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        
        if @enedatenum == 127
          battle_anime_change 1,20
        else
          battle_anime_change 1,17
        end
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 14
        @gy = -20 if @damage_huttobi == true
      elsif @battle_anime_frame == 15
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 25
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 73 #ヒットキャラ揺れる(痺れ再現)
      if @battle_anime_frame == 0 #初期化
        @output_battle_damage_flag = true
        battle_anime_change 1,0
        Audio.se_play("Audio/SE/" + "DB3 SE091")    # 効果音を再生する
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 100
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 100
        @gx = -6
      else
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        Audio.se_stop
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 74 #必殺ダメージ吹っ飛び 爆発系Z2大(左)
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "Z1 爆発1"
        explosion_eff = 104
      end
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 49
        @gx = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 50
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 75 #必殺ダメージ吹っ飛び 縦上ゆれ　デッドゾーン
      
      explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
      explosion_eff = 106
      #@damage_center = true
      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        
        if @enedatenum == 127
          battle_anime_change 1,20
        else
          battle_anime_change 1,17
        end
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 23
        @gy = -16
        if @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 100
          @gx = 6
        elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 100
          @gx = -6
        end
      elsif @battle_anime_frame == 24
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 25
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 76 #超能力ヒットキャラ揺れる(サイコキネシス)
      if @battle_anime_frame == 0 #初期化
        battle_anime_change 1,0
        @output_battle_damage_flag = true
        #@ene_set_action = 545
        #p @attackcourse,@ene_set_action
        if @attackcourse == 1 && @ene_set_action == 545
          Audio.se_play("Audio/SE/" + "DB3 SE061")
        else
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
        end
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 60
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 60
        @gx = -6
      else
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        Audio.se_stop
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 77 #ヒットキャラ揺れる(巻きつく)
      ray_x = 244
      ray_y = 154
      if @battle_anime_frame == 0 #初期化
        @output_battle_damage_flag = true
        battle_anime_change 1,17
        Audio.se_play("Audio/SE/" + "DB3 SE091")    # 効果音を再生する
        @effect_anime_pattern = 107
        
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 100
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 100
        @gx = -6
      else
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        Audio.se_stop
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 78 #必殺ダメージ吹っ飛び 衝撃波系(縦)
      
      if @battle_anime_frame == 0 #初期化
        
        if @tec_kyouda_se == false
          Audio.se_play("Audio/SE/" + "Z3 跳ね返し")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "ZG 打撃4")    # 効果音を再生する
        end
        @output_battle_damage_flag = true
        battle_anime_change 1,17
        @gy = 20
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 19
        @gy = 20
      elsif @battle_anime_frame == 20
        @gx = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y,@btl_ani_cha_chg_no
        return @battle_anime_result + 1
      end
    when 79 #必殺ダメージ吹っ飛び 爆発系Z2大(左)
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット2"
        explosion_eff = 102
      end

      if @battle_anime_frame == 0 #初期化
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 21 && @battle_anime_frame <= 49
        @gx = 20 if @damage_huttobi == true
      elsif @battle_anime_frame == 50
        @gx = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 80 #カカオ コズミックアタック

      explosion_se = "Audio/SE/" + "Z1 エネルギー波2"
      explosion_eff = ""
      case @battle_anime_frame
      
      when 0 #初期化
        @output_battle_damage_flag = true
        @output_anime_type = 1
        battle_anime_change 0,3
        battle_anime_change 1,17
        Audio.se_play(explosion_se)
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 1..29
        @ax = 24
        @gx = -20
      when 50
        @gx = 0
        @effect_anime_pattern = 0
      when 60
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 81 #お菓子光線ヒット
      #if $game_switches[463] == true && @anime_event == false
      #  explosion_se,explosion_eff = get_explosion
      #else
        explosion_se = "Audio/SE/" + "Z1 爆発1"
        explosion_eff = 104
      #end

      case @battle_anime_frame
      
      when 0
        battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")
      when 1..89
        
        #巨大キャラかどうか
        if $cha_bigsize_on[@chanum.to_i] != true
          back_x = 200
          back_y = 100
          back_anime_pattern 218,back_x,back_y
        else
          back_x = 84
          back_y = 16
          back_anime_pattern 221,back_x,back_y
        end
      when 90
        Audio.se_stop
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        #battle_anime_change 1,17
      when 131..190
        sframe = 131
        #Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる") if @battle_anime_frame == sframe
        @gy -= 400 if @battle_anime_frame == sframe
        picture = Cache.picture("Z3_戦闘_必殺技_お菓子")
        rect = Rect.new(0, 0, 44, 44) #発動側
        if @attackcourse == 0
          ray_x = CENTER_ENEX
          ray_y = STANDARD_ENEY
        else
          ray_x = CENTER_CHAX
          ray_y = STANDARD_ENEY
        end
        @back_window.contents.blt(ray_x + 16,ray_y + 16,picture,rect)
      when 191
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 82 #超能力ヒットキャラ揺れながら爆発
      
      if $game_switches[463] == true && @anime_event == false
        explosion_se,explosion_eff = get_explosion
      else
        explosion_se = "Audio/SE/" + "DB3 大爆発"
        explosion_eff = 105
      end
      
      if @battle_anime_frame == 0 #初期化
        battle_anime_change 1,0
        Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
      elsif @battle_anime_frame % 2 == 0 && @battle_anime_frame <= 60
        @gx = 6
      elsif @battle_anime_frame % 2 == 1 && @battle_anime_frame <= 60
        @gx = -6
      end
      
      if @battle_anime_frame == 40 #初期化
        Audio.se_stop
        @gx = 0
        Audio.se_play(explosion_se)    # 効果音を再生する
        @output_battle_damage_flag = true
        @effect_anime_pattern = explosion_eff
        battle_anime_change 1,17
      elsif @battle_anime_frame >= 61 && @battle_anime_frame <= 74
        @gy = 20
      elsif @battle_anime_frame == 75
        @gy = 0
        @effect_anime_pattern = 0
      elsif @battle_anime_frame == 85
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 51 #キック #左
      if @battle_anime_frame == 0 #初期化
        
      elsif @battle_anime_frame == 5 
        #攻撃側グラ変更&効果音部分
        battle_anime_change 0,3
      elsif @battle_anime_frame >= 6
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 52 #キック #右
      if @battle_anime_frame == 0 #初期化
        
      elsif @battle_anime_frame == 5 
        #攻撃側グラ変更&効果音部分
        battle_anime_change 0,4
      elsif @battle_anime_frame >= 6
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 53 #パンチ #左
      if @battle_anime_frame == 0 #初期化
        
      elsif @battle_anime_frame == 5 
        #攻撃側グラ変更&効果音部分
        battle_anime_change 0,1
      elsif @battle_anime_frame >= 6
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 54 #パンチ #右
      if @battle_anime_frame == 0 #初期化
        
      elsif @battle_anime_frame == 5 
        #攻撃側グラ変更&効果音部分
        battle_anime_change 0,2
      elsif @battle_anime_frame >= 6
        @anime_frame_format = true
        output_battle_anime @output_anime_type,@output_anime_type_y
        return @battle_anime_result + 1
      end
    when 101 #衝撃波

      if @battle_anime_frame == 0 #初期化
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
      elsif @battle_anime_frame == 60
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 61 && @battle_anime_frame <= 119
        back_anime_pattern 1
      elsif @battle_anime_frame == 120
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 102 #エネルギー波
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        
        @effect_anime_pattern = 1
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 105 #カメハメ波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 50
        #@effect_anime_pattern = 2
      elsif @battle_anime_frame == 51
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 2
      elsif @battle_anime_frame == 90
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 100
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 101 && @battle_anime_frame <= 127
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 106 #界王拳
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,6
        @ray_color = 0
      when 1..89
        back_anime_pattern 17
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
      when 91..130
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax + 20,144,picture,rect)
        else
          
        end
      when 131
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      when 132..194
        back_anime_pattern 1
        @effect_anime_pattern = 49
      when 195
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 107 #界王拳・カメハメ波
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,6
        @ray_color = 0
      when 1..89
        back_anime_pattern 17
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,3
        back_anime_pattern 17
      when 91..160
        back_anime_pattern 17
      when 161
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 2
        back_anime_pattern 17
      when 162..219
        back_anime_pattern 17
      when 220
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 230
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 231..257
        @effect_anime_pattern = 48
      when 258
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 118 #元気弾
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
      when 1..119
        back_anime_pattern 2
      when 120 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        back_anime_pattern 7
      when 121..220
        back_anime_pattern 7
      when 221..310
        battle_anime_change 0,8
        back_anime_pattern 11
      when 311
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,9
        @effect_anime_pattern = 20
      when 312..349
        @effect_anime_pattern = 20
      when 350
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 360
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
        @back_anime_type = 0
      when 361..410
        back_anime_pattern 1
        @effect_anime_pattern = 40
      when 411
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 131 #魔光砲(ピッコロ)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 3
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 133 #目から怪光線
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 30 
    
      elsif @battle_anime_frame == 31
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 4
      elsif @battle_anime_frame >= 32 && @battle_anime_frame <= 84
        back_anime_pattern 2
      #  @effect_anime_pattern = 3
      elsif @battle_anime_frame == 85
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 86
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 87 && @battle_anime_frame <= 113
        @effect_anime_pattern = 35
      elsif @battle_anime_frame == 114
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 134 #口から怪光線
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 30 
    
      elsif @battle_anime_frame == 31
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 5
      elsif @battle_anime_frame >= 32 && @battle_anime_frame <= 84
        back_anime_pattern 3
      elsif @battle_anime_frame == 85
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 86
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 87 && @battle_anime_frame <= 113
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 114
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 135 #爆裂魔光砲
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 4
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,6
        @effect_anime_pattern = 6
        back_anime_pattern 4
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        back_anime_pattern 4
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 33
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 136 #魔貫光殺砲
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 30 
        back_anime_pattern 5
      elsif @battle_anime_frame >= 31 && @battle_anime_frame <= 130
        battle_anime_change 0,7
        back_anime_pattern 5
      elsif @battle_anime_frame == 131
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
        battle_anime_change 0,8
        @effect_anime_pattern = 7
        back_anime_pattern 5
      elsif @battle_anime_frame >= 132 && @battle_anime_frame <= 214
        back_anime_pattern 5
      elsif @battle_anime_frame == 215
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 216
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 217 && @battle_anime_frame <= 243
        @effect_anime_pattern = 36
      elsif @battle_anime_frame == 244
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 146 #魔光砲(悟飯)

      if $oozaru_flag[5] == false || $oozaru_flag[5] == nil
        #通常
        if @battle_anime_frame == 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,1
          @ray_color = 0
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
          @effect_anime_pattern = 8
        elsif @battle_anime_frame == 41
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        elsif  @battle_anime_frame == 45
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
          @effect_anime_pattern = 31
        elsif @battle_anime_frame == 73
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        #大猿
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        if @battle_anime_frame == 0
          @chay = -200 #キャラ画面範囲外へ
          @output_anime_type = 0
          battle_anime_change 0,0
          @ray_color = 0
        elsif @battle_anime_frame <= 60
          
          @battle_anime_frame <= 180
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          
        elsif @battle_anime_frame >= 61 && @battle_anime_frame <= 180
          if @battle_anime_frame == 61
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          if @battle_anime_frame == 180
            Audio.se_stop
          end
        elsif @battle_anime_frame >= 181 && @battle_anime_frame <= 240
          if @battle_anime_frame == 181
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          end
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @effect_anime_pattern = 5
        elsif  @battle_anime_frame == 241
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX-30
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX+30
            @chay = STANDARD_CHAY-30
          end
          #battle_anime_change 1,10
        elsif @battle_anime_frame >= 242 && @battle_anime_frame <= 268
          @effect_anime_pattern = 48
        elsif @battle_anime_frame == 269
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 147 #魔閃光
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 6
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 8
        back_anime_pattern 6
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        #back_anime_pattern 6
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 151 #大猿変身
      oozarucha = 5
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 満月")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 200
        @chay = -120 #キャラ画面範囲外へ
        picture = Cache.picture("Z1_戦闘_必殺技_満月") #ダメージ表示用
        mangetu_rect_x = @battle_anime_frame / 8
        mangetu_rect_x = 10 if mangetu_rect_x > 10
        mangetu_rect_y = @battle_anime_frame * 2
        mangetu_rect_y = 48 if mangetu_rect_y > 48
        rect = Rect.new(48*mangetu_rect_x, 0,48,mangetu_rect_y)
        
        hiku_frame = @battle_anime_frame*2
        hiku_frame = 300 if @battle_anime_frame > 150 
        mangetu_x = 596 - hiku_frame
        mangetu_y = 354 - hiku_frame
        @back_window.contents.blt(mangetu_x,mangetu_y,picture,rect)
        
      elsif @battle_anime_frame >= 201 && @battle_anime_frame <= 390
        if @battle_anime_frame == 201
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        if @battle_anime_frame <= 201
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 209
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 217
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 225
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 233
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 241
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 249
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 257
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 265
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame == 266
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 330
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 390
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -200 #キャラ画面範囲外へ
          #on_oozaru oozarucha

        end
      elsif @battle_anime_frame == 391
          anime_pattern_fromat
          return @battle_anime_result + 1
      end
=begin
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 満月")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 200
        @chay = -120 #キャラ画面範囲外へ
        picture = Cache.picture("Z1_戦闘_必殺技_満月") #ダメージ表示用
        mangetu_rect_x = @battle_anime_frame / 8
        mangetu_rect_x = 10 if mangetu_rect_x > 10
        mangetu_rect_y = @battle_anime_frame * 2
        mangetu_rect_y = 48 if mangetu_rect_y > 48
        rect = Rect.new(48*mangetu_rect_x, 0,48,mangetu_rect_y)
        
        hiku_frame = @battle_anime_frame*2
        hiku_frame = 300 if @battle_anime_frame > 150 
        mangetu_x = 596 - hiku_frame
        mangetu_y = 354 - hiku_frame
        @back_window.contents.blt(mangetu_x,mangetu_y,picture,rect)
        
      elsif @battle_anime_frame >= 201 && @battle_anime_frame <= 390
        if @battle_anime_frame == 201
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        if @battle_anime_frame <= 201
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 209
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 217
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 225
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 233
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 241
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 249
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 257
          @chay = STANDARD_CHAY
        elsif @battle_anime_frame <= 265
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame == 266
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 330
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 390
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @chay = -120 #キャラ画面範囲外へ
        end
      elsif @battle_anime_frame >= 391 && @battle_anime_frame <= 510
        if @battle_anime_frame == 391
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        end
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        rect = Rect.new(0, 496,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        if @battle_anime_frame == 510
          Audio.se_stop
        end
      elsif @battle_anime_frame >= 511 && @battle_anime_frame <= 570
        if @battle_anime_frame == 511
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        rect = Rect.new(0, 496,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        @effect_anime_pattern = 5
      elsif  @battle_anime_frame == 571
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX+30
          @chay = STANDARD_CHAY-30
        end
        #battle_anime_change 1,10
      elsif @battle_anime_frame >= 572 && @battle_anime_frame <= 598
        @effect_anime_pattern = 48
      elsif @battle_anime_frame == 599
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=end
    when 161 #エネルギー波(クリリン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,9
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 3#8
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 162 #カメハメ波(クリリン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 50
        #@effect_anime_pattern = 2
      elsif @battle_anime_frame == 51
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @effect_anime_pattern = 2
      elsif @battle_anime_frame == 90
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 100
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 101 && @battle_anime_frame <= 127
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 163 #拡散エネルギー波
      @ray_color = 0
      if @all_attack_count == 1
        if @battle_anime_frame == 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,3
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
          back_anime_pattern 4
        elsif @battle_anime_frame == 61
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,4
          @effect_anime_pattern = 6
          back_anime_pattern 4
        elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
          back_anime_pattern 4
        elsif @battle_anime_frame == 125
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        elsif  @battle_anime_frame == 126
          if @attackcourse == 0
            @chay = -120 #キャラ画面範囲外へ
          else
            @eney = -200 #キャラ画面範囲外へ
          end
        elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
          @effect_anime_pattern = 33
        
        elsif @battle_anime_frame == 154
          @effect_anime_pattern = 0

        elsif @battle_anime_frame == 160
          if @attackcourse == 0
            battle_anime_change 0,5
            @chay = +120 #キャラ画面範囲内へ
          else
            @eney = +120 #キャラ画面範囲内へ
          end
        elsif @battle_anime_frame == 204
          battle_anime_change 0,6
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ブン")    # 効果音を再生する
        elsif @battle_anime_frame == 244
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame == 245
          @effect_anime_pattern = 37
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 246 && @battle_anime_frame <= 270
          @effect_anime_pattern = 37
        elsif @battle_anime_frame == 271
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          @effect_anime_frame = 27
          @effect_anime_pattern = 37
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 37
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 164 #気円斬
      if @battle_anime_frame == 0 #初期化
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
      elsif @battle_anime_frame == 45
        Audio.se_play("Audio/SE/" + "Z1 ブン")    # 効果音を再生する
        battle_anime_change 0,7
        @ray_color = 0
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 130
        @effect_anime_pattern = 9
        
      elsif @battle_anime_frame == 131
        battle_anime_change 0,8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気円斬")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 170
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 171 && @battle_anime_frame <= 217
        @effect_anime_pattern = 38
      elsif @battle_anime_frame == 218
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 171 #狼牙風風拳
      if @battle_anime_frame == 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      elsif @battle_anime_frame == 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
      elsif @battle_anime_frame >= 31 && @battle_anime_frame <= 70
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,144,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          elsif $btl_progress >= 2
            @back_window.contents.blt(@chax + 16,144,picture,rect)
          else
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          end
        else
          
        end
      elsif @battle_anime_frame == 71
        set_chr_display_out
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      elsif @battle_anime_frame >= 72 && @battle_anime_frame <= 163
        back_anime_pattern 1
        @effect_anime_pattern = 39
      elsif @battle_anime_frame == 164
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 172 #カメハメ波(ヤムチャ)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 50
        #@effect_anime_pattern = 2
      elsif @battle_anime_frame == 51
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @effect_anime_pattern = 2
      elsif @battle_anime_frame == 90
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 100
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 101 && @battle_anime_frame <= 127
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 173 #繰気弾
      
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
      when 1..60
        back_anime_pattern 4
      when 61
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        back_anime_pattern 4
      when 62..81
        back_anime_pattern 4
        @effect_anime_pattern = 10
      when 82
         battle_anime_change 0,4
      when 92
         battle_anime_change 0,5
      when 102
         battle_anime_change 0,6
      when 112
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,7
      when 152
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 153..202
        @effect_anime_pattern = 40
      when 203
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 181 #エネルギー波(テンシンハン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 11
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 182 #四身の拳
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 2
      
      when 30
        @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        @effect_anime_pattern = 12
      when 31..190
        @effect_anime_pattern = 12
      
      when 191
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 192
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 193..218
        @effect_anime_pattern = 41
      when 219
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 183 #気功砲
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 160
        back_anime_pattern 7
      elsif  @battle_anime_frame == 161
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 162 && @battle_anime_frame <= 222
        back_anime_pattern 1
      elsif @battle_anime_frame == 223
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 184 #四身の拳・気功砲
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 2
      
      when 30
        @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        @effect_anime_pattern = 13
      when 31..270
        @effect_anime_pattern = 13
      
      when 271
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 272
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 273..298
        back_anime_pattern 9
      when 299
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 191 #どとんぱ
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60
        
      elsif @battle_anime_frame == 61
        battle_anime_change 0,3
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
      elsif @battle_anime_frame >= 70 && @battle_anime_frame <= 99
        @effect_anime_pattern = 2
      elsif @battle_anime_frame == 100
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 101 && @battle_anime_frame <= 127
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 192 #超能力チャオズ
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 125
        back_anime_pattern 10
      elsif  @battle_anime_frame == 126
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        back_anime_pattern 9
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 193 #サイコアタック
        back_x = 218
        back_y = 60
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
      when 31..70
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,154,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax - 2,148,picture,rect)
          else
            @back_window.contents.blt(@chax - 2,148,picture,rect)
          end
        else
          
        end
      when 71
        set_chr_display_out
        @effect_anime_frame = 0
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      when 72..133
        back_anime_pattern 1
        #back_anime_pattern 55
        #@effect_anime_frame += 1
        @effect_anime_pattern = 88
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 93    # 効果音を再生する
        @gx = 2 if @battle_anime_frame == 93
        @gx = -2 if @battle_anime_frame == 95
        @gx = 0 if @battle_anime_frame == 97
      when 134
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 202 #ビーム
      ray_x = 252
      ray_y = 90
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 0
      when 1..60
        
      when 61
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
      when 70..99
        @effect_anime_pattern = 2
      when 100
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 101..127
        @effect_anime_pattern = 31
      when 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 203 #気功スラッガー
      back_x = 236
      back_y = 100
      ray_x = 254
      ray_y = 110
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 6,back_x,back_y
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_type = 0
        @effect_anime_pattern = 8
        back_anime_pattern 6,back_x,back_y
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        #back_anime_pattern 6
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 204 #超気功スラッガー
      ray_x = 254
      ray_y = 110
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      when 1..89
        back_anime_pattern 17
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern 17
      when 91..160
        back_anime_pattern 17
      when 161
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_type = 0
        battle_anime_change 0,3
        @effect_anime_pattern = 2
        back_anime_pattern 17
      when 162..219
        back_anime_pattern 17
      when 220
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 230
        set_chr_display_out
      when 231..257
        @effect_anime_pattern = 48
      when 258
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 325 #残像拳
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
      when 31..70
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,150,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax + 4,150,picture,rect)
          elsif $btl_progress >= 2
            @back_window.contents.blt(@chax + 16,150,picture,rect)
          else
            @back_window.contents.blt(@chax + 4,150,picture,rect)
          end
        else
          
        end
      when 71
        set_chr_display_out
        @tec_output_back = false
        
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @chax = CENTER_CHAX
      when 72..249
        Audio.se_play("Audio/SE/" + "DB3 残像拳") if @battle_anime_frame == 85   # 効果音を再生する
        back_anime_pattern 1
        zanzou = rand(3)+1
        
        case zanzou
        
        when 1
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX
        when 2
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX-48
        when 3
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX-96
        end
        
        
      when 250
        #zanzou = 1
        zanzou = rand(3)+1
        case zanzou
        
        when 1
          @battle_anime_frame = 250
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX
        when 2
          @battle_anime_frame = 600
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX-48
        when 3
          @battle_anime_frame = 900
          @chay = STANDARD_CHAY
          @chax = CENTER_CHAX-96
        end
        Audio.se_stop
      when 251 #残像1
        Audio.se_play("Audio/SE/" + "DB3 SE041")
        battle_anime_change 0,1
      when 259
        Audio.se_play("Audio/SE/" + "DB3 SE041")
        battle_anime_change 0,2
      when 267
        @battle_anime_frame = 1300
        
      when 601 #残像2
        battle_anime_change 0,16
        @ax = -8
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 611
        @ax = 0
      when 641
        @ax = 24
      when 647
        @ax = 0
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 強打")
      when 657
        @battle_anime_frame = 1300
        
      when 901 #残像3
        battle_anime_change 0,16
        @ax = 16
      when 907
        Audio.se_play("Audio/SE/" + "Z1 強打")
        battle_anime_change 0,3
        @ax = 0
      when 915
        @battle_anime_frame = 1300
      when 1301
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 326 #カメハメ波(亀仙人)
      ray_x = 238
      ray_y = 124
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..50
        #@effect_anime_pattern = 2
      when 51
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 2
      when 90
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 100
        set_chr_display_out
      when 101..127
        @effect_anime_pattern = 32
      when 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 328 #萬國驚天掌
      back_x = 234
      back_y = 70
      case @battle_anime_frame
      when 0
        @output_anime_type = 1
        @back_anime_frame = 0
        @ray_color = 1
      when 30..149
        Audio.se_play("Audio/SE/" + "DB3 気を溜める1") if @battle_anime_frame == 30   # 効果音を再生する
        battle_anime_change 0,4
        back_anime_pattern 4,back_x,back_y
      when 150
        battle_anime_change 0,5
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 16
        #back_anime_pattern 101,back_x,back_y
      when 151..188
        #back_anime_pattern 101,back_x,back_y
      when 189
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 199
        set_chr_display_out
      when 200..226
        @effect_anime_pattern = 44
      when 227
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 329 #MAXパワーかめはめは
      ray_x = 238
      ray_y = 124
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,6
        @ray_color = 0
      when 1..89
        back_anime_pattern 17
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern 17
      when 91..160
        back_anime_pattern 17
      when 161
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 2
        back_anime_pattern 17
      when 162..219
        back_anime_pattern 17
      when 220
        #battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 230
        set_chr_display_out
      when 231..257
        @effect_anime_pattern = 48
      when 258
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 801 #師弟の絆
      @ray_color = 0

      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        #@output_anime_type = 1
        #battle_anime_change 0,0
      when 1..59
        back_anime_pattern 46
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 5  #ゴハン
          @ax = 4
          @ax = 2 if @battle_anime_frame >= 24
          @ax = 0 if @battle_anime_frame >= 25
        end
      when 60..100
        @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        back_anime_pattern 47
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 72,STANDARD_CHAY + 26
      when 101..140
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 114,STANDARD_CHAY + 26        
      when 150
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 4
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,2
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,1
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,4
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -120 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
      when 252
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 258
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 268
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
        @effect_anime_frame = 0
      when 274..293
        @gx = -18
        @effect_anime_pattern = 121
        @gx = 0 if @battle_anime_frame == 293
        @eney = -200 if @battle_anime_frame == 293
        @chay = -120 if @battle_anime_frame == 293
        battle_anime_change 1,0 if @battle_anime_frame == 293
        @back_anime_type = 0
        @back_anime_frame = 0
      when 294..353
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == 294
        back_anime_pattern 49
        @back_anime_frame -= 1
        back_anime_pattern 51
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 354..410
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        back_anime_pattern 50
        @effect_anime_pattern = 82
      when 411 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 412..438
        @effect_anime_pattern = 83
      when 439
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 804 #ダブル衝撃波
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..40
          
          @ax = -2
          #back_anime_pattern 1
          @effect_anime_pattern = 50
        when 41
          @ax = 0
        when 71 #初期化
          @ax = 0
          @ray_color = 0
          Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,1
          @effect_anime_pattern = 51
        when 130
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          @effect_anime_pattern = 0
        when 131..189
          back_anime_pattern 1
        when 190
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          @effect_anime_pattern = 0
        when 1..59
          back_anime_pattern 1
        when 60
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 805 #捨て身の攻撃
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        @ax = -4
        @ax = -@ax if $partyc[@chanum.to_i] == 3
        #back_anime_pattern 1
        @effect_anime_pattern = 52
      when 40
        @ax = 0
      when 71 #初期化
        @ax = 0
        @chay = -120 #キャラ画面範囲外へ
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @effect_anime_pattern = 53
      when 110
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @effect_anime_pattern = 54
      when 150
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @effect_anime_pattern = 55
        back_anime_pattern 18
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
      when 151..179
        back_anime_pattern 18
      when 180
        @effect_anime_pattern = 56
        back_anime_pattern 18
      when 181..210
        back_anime_pattern 18
      when 211
        @effect_anime_frame = 0
        @effect_anime_pattern = 31
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 222
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
      when 223
        battle_anime_change 1,16
        @gy = -12
      when 230
        battle_anime_change 1,0
        @gy = 0
      when 240
        @effect_anime_pattern = 58
      when 260
        Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
        @effect_anime_type = 0
        @effect_anime_frame = 0
      when 261..299
        if @battle_anime_frame == 261 || @battle_anime_frame == 262
          @gx = -4
        elsif @battle_anime_frame == 263 || @battle_anime_frame == 264
          @gx = 4
        else
        #  @gx = 0
        end
        @effect_anime_pattern = 0
        back_anime_pattern 19
      when 300
        @eney = -200
        back_anime_pattern 18
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
      when 301..390
        @effect_anime_pattern = 57
        back_anime_pattern 18
      when 391
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 392
        set_chr_display_out
        @effect_anime_frame = 0
        @gx =0
        @back_anime_type = 0
        @back_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
      when 393..419
        @effect_anime_pattern = 36
        back_anime_pattern 20
      when 420
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 806 #カメハメ乱舞
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        @effect_anime_pattern = 60
        if $partyc[@chanum.to_i] == 6  #クリリン
          @ax = -4
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          @ax = 4
        end
      when 41
        
      when 42
        @ax = -2 if $partyc[@chanum.to_i] == 6  #クリリン
      when 43
        @ax = 0 if $partyc[@chanum.to_i] == 6  #クリリン
        
      when 44
        @ax = 2 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 45
        @ax = 0 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 60
        back_anime_pattern 8
        @chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @effect_anime_frame = 0
        @effect_anime_pattern = 61
      when 61..189
        back_anime_pattern 8
      when 190
        back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
      when 191..299
        back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @chay = -120
        @effect_anime_frame = 0
      when 301
        #Audio.se_stop
        #@effect_anime_pattern = 54
        
        #@effect_anime_pattern = 62
      when 302..328
        @effect_anime_pattern = 62
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 807 #操気円斬
      @ray_color = 0
      if @battle_anime_frame > 450
        ray_x = 252-96
        ray_y = 120
      else
        ray_x = 324
        ray_y = 66
      end
        back_x = 330
        back_y = 70
      case @battle_anime_frame
      
      when 0
          @output_anime_type = 1
        battle_anime_change 0,0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        #@output_anime_type = 1
        #battle_anime_change 0,0
      when 1..39
        @effect_anime_pattern = 70
        if $partyc[@chanum.to_i] == 6  #クリリン
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          @ax = 4
          @ax = 0 if @battle_anime_frame >= 25
        end
        
        
      when 41
        
      when 42
        #@ax = -2 if $partyc[@chanum.to_i] == 6  #クリリン
      when 43
        #@ax = 0 if $partyc[@chanum.to_i] == 6  #クリリン
        
      when 44
        #@ax = 2 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 45
        #@ax = 0 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 60
        #back_anime_pattern 8
        @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        back_anime_pattern 21,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 22
        @back_anime_frame -= 1
        back_anime_pattern 27
      when 61..120
        back_anime_pattern 21,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 22
        @back_anime_frame -= 1
        back_anime_pattern 27
      when 121
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        back_anime_pattern 21,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 22
        @back_anime_frame -= 1
        back_anime_pattern 27
      when 122..141
        back_anime_pattern 21,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 22
        @back_anime_frame -= 1
        back_anime_pattern 27
        @effect_anime_pattern = 71
      when 142..151
        back_anime_pattern 23
        back_anime_pattern 27
      when 152..161
        back_anime_pattern 24
        back_anime_pattern 27
        Audio.se_play("Audio/SE/" + "Z1 ザー")  if @battle_anime_frame == 161 # 効果音を再生する
      when 162..171
        back_anime_pattern 25
        
        back_anime_pattern 28
      when 172..221
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 172
        back_anime_pattern 26
        back_anime_pattern 28
      when 222
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        #set_chr_display_out
      when 213..309
        @effect_anime_pattern = 72
        yokeru1_hazimaru = 260
        yokeru1_owaru = 270
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -4 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
        #p @battle_anime_frame
      when 310
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 311..359
        @effect_anime_pattern = 73
        yokeru1_hazimaru = 320
        yokeru1_owaru = 330
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = 6 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = 8 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 360
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 361..389
        @effect_anime_pattern = 74
        yokeru1_hazimaru = 369
        yokeru1_owaru = 379
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -2 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 390
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 391..419
        @effect_anime_pattern = 75
        yokeru1_hazimaru = 394
        yokeru1_owaru = 406
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = 8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -6 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 420
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 421..459
        @effect_anime_pattern = 76
        yokeru1_hazimaru = 428
        yokeru1_owaru = 434
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -2 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = 16 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 460
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @enex = CENTER_ENEX
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z1 ブン")    # 効果音を再生する
      when 461..470
        back_anime_pattern 25
        back_anime_pattern 28
        @effect_anime_pattern = 77
      when 471..480
        back_anime_pattern 25
        back_anime_pattern 28
      when 481..490
        back_anime_pattern 25
        back_anime_pattern 28
      when 491..500
        back_anime_pattern 25
        back_anime_pattern 28
      when 501..510
        back_anime_pattern 25
        back_anime_pattern 28
      when 511..520
        back_anime_pattern 25
        back_anime_pattern 28
      when 521..530
        back_anime_pattern 25
        back_anime_pattern 28
      when 531..569
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")  if @battle_anime_frame == 531   # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気円斬")  if @battle_anime_frame == 531   # 効果音を再生する
        back_anime_pattern 26
        back_anime_pattern 29
        @effect_anime_pattern = 0
      when 570
        set_chr_display_out
        @effect_anime_frame = 0
        @back_anime_frame = 0
      when 571..617
        @effect_anime_pattern = 38
        back_anime_pattern 30
      when 618
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 808 #願いを込めた元気弾
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 5
        @btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..10
          battle_anime_change 0,14
        when 11..20
          battle_anime_change 0,13
        when 21..30
          battle_anime_change 0,12
        when 31..60
          @output_anime_type = 1
          battle_anime_change 0,0
        else
          @btl_ani_tokusyu_flag = true
          #battle_anime_change 0,1
          @btl_ani_cha_chg_no = 3
          @battle_anime_frame = 0
        end
        
        
      else
        case @battle_anime_frame
        when 0
          if @btl_ani_tokusyu_flag == false
            Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
            @output_anime_type = 1
            battle_anime_change 0,7
            @ray_color = 0
            @btl_ani_cha_chg_no = 3
          end
        when 1 #初期化
          if @btl_ani_tokusyu_flag == true
            Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
            @output_anime_type = 1
            battle_anime_change 0,7
            @ray_color = 0
            @btl_ani_cha_chg_no = 3
          end
          #p @chax,@chay
        when 2..119
          back_anime_pattern 2
        when 120 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          back_anime_pattern 7
        when 121..220
          back_anime_pattern 7
        when 221..310
          battle_anime_change 0,8
          back_anime_pattern 11
        when 311
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,9
          @effect_anime_pattern = 20
        when 312..349
          @effect_anime_pattern = 20
        when 350
          #battle_anime_change 0,4
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 360
          set_chr_display_out
          @back_anime_type = 0
          @btl_ani_cha_chg_no = 0

        when 370..400
          back_anime_pattern 1
          @effect_anime_pattern = 40
        when 410
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
          @effect_anime_pattern = 40
        when 411
          battle_anime_change 1,16
          @gy = -12
          @effect_anime_pattern = 40
        when 418
          battle_anime_change 1,0
          @gy = 0
          @effect_anime_pattern = 40
          @btl_ani_cha_chg_no = 5
          @output_anime_type = 1
          battle_anime_change 0,2
        when 451
          @eney = -200 #キャラ画面範囲外へ
          @chay = STANDARD_CHAY
          #battle_anime_change 1,1
          @effect_anime_pattern = 67
        when 481
          @effect_anime_type = 0
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
          battle_anime_change 0,1
          @effect_anime_pattern = 68
        when 510
          @effect_anime_pattern = 0
        when 511
          set_chr_display_out
          @effect_anime_type = 0
          @effect_anime_frame = 0
          ray_x = 640
          ray_y = 228
          @effect_anime_pattern = 69
        when 512..533
          ray_x = 640
          ray_y = 228
        when 534
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 809 #ダブルどどんぱ
      @ray_color = 0

      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        #@output_anime_type = 1
        #battle_anime_change 0,0
      when 1..59
        back_anime_pattern 36
        if $partyc[@chanum.to_i] == 8  #テンシンハン
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          @ax = 4
          @ax = 0 if @battle_anime_frame >= 25
        end
      when 60..120
        @chay = -120
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 60
        @ray_color = 0
        back_anime_pattern 37
      when 121..130
        back_anime_pattern 38
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == 121   # 効果音を再生する
      when 131..159
        back_anime_pattern 38
        @effect_anime_pattern = 80
      when 160
        set_chr_display_out
        @effect_anime_frame = 0
      when 161..187
        @effect_anime_pattern = 81
      when 188
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 810 #超能力きこうほう
      @ray_color = 0
      back_x = 248+94
      back_y = 110
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
      when 1..59
        back_anime_pattern 36
        if $partyc[@chanum.to_i] == 8  #テンシンハン
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          @ax = 4
          @ax = 0 if @battle_anime_frame >= 25
        end
      when 60..180
        @chay = -120
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 60
        Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == 60# 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == 60# 効果音を再生する
        @ray_color = 0
        back_anime_pattern 42
        @back_anime_frame -= 1
        back_anime_pattern 43,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 8
      when 181
        set_chr_display_out
        @effect_anime_frame = 0
      when 182..208
        back_anime_pattern 9
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 811 #狼鶴相打陣
      @ray_color = 0
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 8
        @btl_ani_cha_chg_no = 7
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..10
          battle_anime_change 0,14
        when 11..20
          battle_anime_change 0,13
        when 21..30
          battle_anime_change 0,12
        when 31..60
          @output_anime_type = 1
          battle_anime_change 0,0
        else
          @btl_ani_tokusyu_flag = true
          #battle_anime_change 0,1
          @btl_ani_cha_chg_no = 7
          @battle_anime_frame = 0
          @battle_anime_result += 1
        end
      elsif @btl_ani_tokusyu_flag == true
        case @battle_anime_frame
        when 0..18
        Audio.se_play("Audio/SE/" + "Z3 跳ね返し")  if @battle_anime_frame == 0
        battle_anime_change 1,16
        @gx = -18
        @effect_anime_pattern = 121
        @btl_ani_cha_chg_no = 8
        
        @gx = 0 if @battle_anime_frame == 18
        @eney = -200 if @battle_anime_frame == 18
        @output_anime_type = 1 if @battle_anime_frame == 18
        battle_anime_change 0,0 if @battle_anime_frame == 18
        #@chax = TEC_CENTER_CHAX if @battle_anime_frame == 18
        #@chay = STANDARD_CHAY if @battle_anime_frame == 18
        @output_anime_type = 0 if @battle_anime_frame == 18
        battle_anime_change 1,0 if @battle_anime_frame == 18
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 18
        @battle_anime_result += 1 if @battle_anime_frame == 18
        @effect_anime_pattern = 0 if @battle_anime_frame == 18
        @back_anime_frame = 0 if @battle_anime_frame == 18
        @effect_anime_type = 0 if @battle_anime_frame == 18
        @effect_anime_frame = 0 if @battle_anime_frame == 18
        @battle_anime_frame = -1 if @battle_anime_frame == 18
        end
      else
          #anime_pattern_fromat
          #back_anime_pattern 54
          @output_anime_type = 1
          battle_anime_change 0,0
          @battle_anime_result += 1
          @btl_ani_tokusyu_flag = true
        end
    when 830 #この世で一番強いヤツ
      @ray_color = 0
      
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
      when 1..59
        sframe = 1
        if $partyc[@chanum.to_i] == 3  #悟空
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 18
          @scombo_cha1 = 24
          @scombo_cha2 = 6
          @scombo_cha3 = 7
        elsif $partyc[@chanum.to_i] == 24  #亀仙人
          @ax = 4
          @ax = 0 if @battle_anime_frame >= 19
          @scombo_cha1 = 3
          @scombo_cha2 = 6
          @scombo_cha3 = 7
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @ax = -8
          @ax = 0 if @battle_anime_frame >= 25
          @scombo_cha1 = 3
          @scombo_cha2 = 24
          @scombo_cha3 = 7
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          @ax = 8
          @ax = 0 if @battle_anime_frame >= 25
          @scombo_cha1 = 3
          @scombo_cha2 = 24
          @scombo_cha3 = 6
        end
        
        case @battle_anime_frame - sframe
      
        when 0..10
          type = 14
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 11..20
          type = 13
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 21..30
          type = 12
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 31..40
          type = 0
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        else
          rect = Rect.new(0, 0*96,96,96)
        end
        
        if $partyc[@chanum.to_i] == 3 #悟空
          
          if @battle_anime_frame - sframe < 31
            
            back_anime_pattern 115,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+218,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+218,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        elsif $partyc[@chanum.to_i] == 6 #クリリン
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+220,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        else #ヤムチャ
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX-166,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX-166,STANDARD_CHAY
          end
        end
      when 60..190
        
        if @battle_anime_frame == 60
          @btl_ani_cha_chg_no = 3
          @chax = CENTER_CHAX-42
          @scombo_cha1 = 24
          @scombo_cha2 = 6
          @scombo_cha3 = 7
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,3
          @scombo_cha1_anime_type = 2
          @scombo_cha2_anime_type = 1
          @scombo_cha3_anime_type = 1
        end
      
        back_anime_pattern 116,CENTER_CHAX+96,STANDARD_CHAY #亀仙人
        @back_anime_frame -= 1
        back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY #クリリン
        @back_anime_frame -= 1
        back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY #ヤムチャ
        @back_anime_frame -= 1
        back_anime_pattern 8
        
        if @battle_anime_frame == 190
          
          
          @scombo_cha1_anime_type = 3
          @scombo_cha2_anime_type = 2
          @scombo_cha3_anime_type = 2
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
        end
      when 191..299
        battle_anime_change 0,4
        @effect_anime_pattern = 95
        back_anime_pattern 116,CENTER_CHAX+96,STANDARD_CHAY #亀仙人
        @back_anime_frame -= 1
        back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY #クリリン
        @back_anime_frame -= 1
        back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY #ヤムチャ
        @back_anime_frame -= 1
        back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        
      when 302..326
        @effect_anime_pattern = 48
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 839 #この世で一番強いヤツ
      
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
      when 1..59
        sframe = 1
        if $partyc[@chanum.to_i] == 3  #悟空
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 18
          @scombo_cha1 = 4
          @scombo_cha2 = 5
          @scombo_cha3 = 6
        elsif $partyc[@chanum.to_i] == 4  #ピッコロ
          @ax = 4
          @ax = 0 if @battle_anime_frame >= 19
          @scombo_cha1 = 3
          @scombo_cha2 = 5
          @scombo_cha3 = 6
        elsif $partyc[@chanum.to_i] == 5  #ゴハン
          @ax = -8
          @ax = 0 if @battle_anime_frame >= 25
          @scombo_cha1 = 3
          @scombo_cha2 = 4
          @scombo_cha3 = 6
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @ax = 8
          @ax = 0 if @battle_anime_frame >= 25
          @scombo_cha1 = 3
          @scombo_cha2 = 4
          @scombo_cha3 = 5
        end
        
        case @battle_anime_frame - sframe
      
        when 0..10
          type = 14
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 11..20
          type = 13
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 21..30
          type = 12
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        when 31..40
          type = 0
          @scombo_cha1_anime_type = type
          @scombo_cha2_anime_type = type
          @scombo_cha3_anime_type = type
        else
          rect = Rect.new(0, 0*96,96,96)
        end
        
        if $partyc[@chanum.to_i] == 3 #悟空
          
          if @battle_anime_frame - sframe < 31
            
            back_anime_pattern 115,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+218,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        elsif $partyc[@chanum.to_i] == 4 #ピッコロ
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+218,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX-166,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        elsif $partyc[@chanum.to_i] == 5 #ゴハン
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX+220,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX+218,STANDARD_CHAY
          end
        else #クリリン
          if @battle_anime_frame - sframe < 31
            back_anime_pattern 115,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 117,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 119,CENTER_CHAX-166,STANDARD_CHAY
          else
            back_anime_pattern 116,CENTER_CHAX-42,STANDARD_CHAY
            back_anime_pattern 118,CENTER_CHAX+96,STANDARD_CHAY
            back_anime_pattern 120,CENTER_CHAX-166,STANDARD_CHAY
          end
        end
      when 60..120
        @btl_ani_cha_chg_no = 3
        @chax = CENTER_CHAX-42
        @scombo_cha1 = 4
        @scombo_cha2 = 5
        @scombo_cha3 = 6
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60    # 効果音を再生する
        back_anime_pattern 48,CENTER_CHAX+96+18,STANDARD_CHAY+24 #ピッコロ
        back_anime_pattern 48,CENTER_CHAX-166+18,STANDARD_CHAY+24 #ゴハン
        back_anime_pattern 48,CENTER_CHAX+220+18,STANDARD_CHAY+24 #クリリン
      when 121..137
        @chax += 4
      when 138..139
        @chax = TEC_CENTER_CHAX
      when 140
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
      when 142..259
        back_anime_pattern 2
      when 260 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        back_anime_pattern 7
      when 261..360
        back_anime_pattern 7
      when 361..370
        @chay = -200
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 371
         Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 逃げる")
      when 372..385
        
        sframe = 372
        idoux = 16
        @scombo_cha1_anime_type = 0
        @scombo_cha2_anime_type = 0
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+30
      when 386..391
        sframe = 372
        idoux = 16
        @scombo_cha1_anime_type = 16
        @scombo_cha2_anime_type = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+30
      when 392..398
        sframe = 372
        idoux = 16
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 2
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+30
      when 399..402
        sframe = 399
        idoux = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*27,STANDARD_CHAY+30
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        battle_anime_change 1,16
        @enex += 8
      when 403..406
        idoux = 12
        back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+30
        @enex -= 8
      when 407..459
        sframe = 407
        gohanidouf = 30
        idoux = 12
        gohanidoux = 4
        gohanidouy = 1
        back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        
        if gohanidouf > @battle_anime_frame - sframe
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+30
        else
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27-gohanidoux*(@battle_anime_frame - sframe-gohanidouf),STANDARD_CHAY+30+gohanidouy*(@battle_anime_frame - sframe-gohanidouf)
        end
      when 460 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @btl_ani_cha_chg_no = 4
        @output_anime_type = 1
        battle_anime_change 0,2
        @chay = STANDARD_CHAY
        @ray_color = 1
        @eney = -200
      when 461..490
    
      when 491
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 5
      when 492..580
        back_anime_pattern 3
      when 581..590
        sframe = 581
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          battle_anime_change 0,7
          @chay = -200
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z3 光線系ヒット")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 101
          battle_anime_change 1,16
        end
        idoux = 12
        pikkoroidoux = 12
        @scombo_cha1_anime_type = 16
        @eney = STANDARD_ENEY
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-pikkoroidoux*(@battle_anime_frame - sframe),STANDARD_CHAY-30
        back_anime_pattern 117,192,172
      when 591..630
        sframe = 591
        idoux = 12
        if @battle_anime_frame == sframe
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30
        back_anime_pattern 117,192,172
      when 631..660
        sframe = 631
        idoux = 12
        idouy = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha1_anime_type = 16
          @scombo_cha2_anime_type = 16
          battle_anime_change 1,0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30-idouy*(@battle_anime_frame - sframe)
        back_anime_pattern 117,192,172-idouy*(@battle_anime_frame - sframe)
      when 661..680
        sframe = 661
        idoux = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha3_anime_type = 0
        elsif @battle_anime_frame == sframe + 12
          @scombo_cha3_anime_type = 16
        elsif @battle_anime_frame == sframe + 17
          @scombo_cha3_anime_type = 1
        end
        
        back_anime_pattern 119,STANDARD_CHAX+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 681..685
        sframe = 681
        idoux = -24
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 SE041")
          battle_anime_change 1,1
          @scombo_cha3_anime_type = 16
        end
        
        back_anime_pattern 119,STANDARD_CHAX+320+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 686..720
        back_anime_pattern 119,STANDARD_CHAX+200,STANDARD_CHAY
      when 721..725
        sframe = 721
        idoux = 24
        @scombo_cha3_anime_type = 1
        back_anime_pattern 119,STANDARD_CHAX+200+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 726..770
        sframe = 726
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          battle_anime_change 1,16
        end
        back_anime_pattern 119,STANDARD_CHAX+320,STANDARD_CHAY
        @enex += 20
      when 771..860
        sframe = 771
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        end
        battle_anime_change 0,8
        back_anime_pattern 11
      when 861..919
        sframe = 861
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,9
          @effect_anime_pattern = 20
        end
      when 920..1019
        sframe = 920
        if @battle_anime_frame == sframe
          @chay = -200
          @scombo_cha1_anime_type = 8
          @scombo_cha2_anime_type = 5
          @scombo_cha3_anime_type = 8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        
        idoux = 2
        tyouseikakeru = @battle_anime_frame - sframe
        tyouseikakeru = 34 if tyouseikakeru > 34 
        tyouseix = idoux * tyouseikakeru
        back_anime_pattern 115,CENTER_CHAX-90+tyouseix,STANDARD_CHAY-86
        back_anime_pattern 117,CENTER_CHAX-100+tyouseix,STANDARD_CHAY+36
        back_anime_pattern 119,CENTER_CHAX+200-tyouseix,STANDARD_CHAY+76
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
        
        rect = Rect.new(256, 0,128,128)
        @back_window.contents.blt(254,390-@effect_anime_frame*RAY_SPEED/2,picture,rect)
        @effect_anime_frame += 1
      when 1020
        set_chr_display_out
        @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @back_anime_type = 0
          @back_anime_frame = 0
          battle_anime_change 1,0
      when 1021..1068
        back_anime_pattern 1
        @effect_anime_pattern = 40
      when 1069
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 848 #もしもヤムチャに
      @ray_color = 0
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 3
        @btl_ani_cha_chg_no = 7
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..10
          battle_anime_change 0,14
        when 11..20
          battle_anime_change 0,13
        when 21..30
          battle_anime_change 0,12
        when 31..60
          @output_anime_type = 1
          battle_anime_change 0,0
        else
          @btl_ani_tokusyu_flag = true
          #battle_anime_change 0,1
          @btl_ani_cha_chg_no = 7
          @battle_anime_frame = 0
          @battle_anime_result += 1
        end
      elsif @btl_ani_tokusyu_flag == true
        case @battle_anime_frame
        when 0..18
        Audio.se_play("Audio/SE/" + "Z3 跳ね返し")  if @battle_anime_frame == 0
        battle_anime_change 1,16
        @gx = -18
        @effect_anime_pattern = 121
        @btl_ani_cha_chg_no = 8
        
        @gx = 0 if @battle_anime_frame == 18
        @eney = -200 if @battle_anime_frame == 18
        @output_anime_type = 1 if @battle_anime_frame == 18
        battle_anime_change 0,0 if @battle_anime_frame == 18
        #@chax = TEC_CENTER_CHAX if @battle_anime_frame == 18
        #@chay = STANDARD_CHAY if @battle_anime_frame == 18
        @output_anime_type = 0 if @battle_anime_frame == 18
        battle_anime_change 1,0 if @battle_anime_frame == 18
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 18
        @battle_anime_result += 1 if @battle_anime_frame == 18
        @effect_anime_pattern = 0 if @battle_anime_frame == 18
        @back_anime_frame = 0 if @battle_anime_frame == 18
        @effect_anime_type = 0 if @battle_anime_frame == 18
        @effect_anime_frame = 0 if @battle_anime_frame == 18
        @battle_anime_frame = -1 if @battle_anime_frame == 18
        end
      else
          #anime_pattern_fromat
          #back_anime_pattern 54
          @output_anime_type = 1
          battle_anime_change 0,0
          @battle_anime_result += 1
          @btl_ani_tokusyu_flag = true
        end
    when 851 #ありがとうピッコロさん！
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 4
        @btl_ani_cha_chg_no = 5
        
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..10
          battle_anime_change 0,14
        when 11..20
          battle_anime_change 0,13
        when 21..30
          battle_anime_change 0,12
        when 31..60
          @output_anime_type = 1
          battle_anime_change 0,0
        else
          @btl_ani_tokusyu_flag = true
          #battle_anime_change 0,1
          
          @battle_anime_frame = 0
        end
        
        
      else
        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 4
          @btl_ani_cha_chg_no = 5
          @output_anime_type = 0
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @enex = 640 + 32
          @eney = STANDARD_CHAY
        when 2..24
          result = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 24
          #@scombo_cha1_anime_type = 16 if @battle_anime_frame == 24
          battle_anime_change 0,16 if @battle_anime_frame == 19
          @chax -= 20 if @battle_anime_frame >= 19 and @battle_anime_frame <= 25
          battle_anime_change 1,16 if @battle_anime_frame == 14
          battle_anime_change 1,1 if @battle_anime_frame == 19
          @enex -= 16
          back_anime_pattern 115,0-102 + 16 * (@battle_anime_frame - 2),STANDARD_CHAY
          
          
          
        when 25..89
          @enex += 2 if @battle_anime_frame >= 25 and @battle_anime_frame <= 35
          battle_anime_change 1,0 if @battle_anime_frame == 25
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 25
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 16 if @battle_anime_frame == 70
          back_anime_pattern 115,CENTER_CHAX,STANDARD_CHAY
        when 90..99
          back_anime_pattern 115,CENTER_CHAX + 4 * (@battle_anime_frame - 90),STANDARD_CHAY
        when 100..159
          @scombo_cha1_anime_type = 1 #if @battle_anime_frame == 55
          Audio.se_stop if @battle_anime_frame == 100
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 100
          back_anime_pattern 115,CENTER_CHAX + 40,STANDARD_CHAY
          
          @enex += 20 #if @battle_anime_frame >= 55
          battle_anime_change 1,16 #if @battle_anime_frame == 55
        when 160 #初期化
          @btl_ani_cha_chg_no = 4
          @chax = TEC_CENTER_CHAX
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 1
        when  161..190 
      
        when 191
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,4
          @effect_anime_pattern = 5
        when 192..244
          back_anime_pattern 3
        when 245
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 246
          set_chr_display_out
          battle_anime_change 1,0
          @effect_anime_type = 0
          @effect_anime_frame = 0
        when 247..273
          @effect_anime_pattern = 32
        when 274
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 852 #行くぞクリリン
      @ray_color = 0

      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        #@output_anime_type = 1
        #battle_anime_change 0,0
      when 1..59
        back_anime_pattern 55
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @ax = 4
          @ax = 2 if @battle_anime_frame >= 24
          @ax = 0 if @battle_anime_frame >= 25
        end
      when 60..100
        @scombo_cha1 = 6
        @btl_ani_cha_chg_no = 4
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        back_anime_pattern 116,CENTER_CHAX+120,STANDARD_CHAY
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 72,STANDARD_CHAY + 26
      when 101..140
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 114,STANDARD_CHAY + 26        
      when 150
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 4
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -200 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 6 if @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16+96,STANDARD_CHAY + 26
        #@chay = STANDARD_CHAY if @battle_anime_frame == 246
        #@output_anime_type = 0
        #battle_anime_change 0,0
        @chax += 96 if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 252..293
        @effect_anime_pattern = 125
        ray_x = 350
        ray_y = 158
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 252
        battle_anime_change 0,10
        battle_anime_change 1,16
        @gx = 18
        @gy = 4
        
      #when 274..293
      #  @gx = -18
      #  @effect_anime_pattern = 121
      #  @gx = 0 if @battle_anime_frame == 293
      #  @eney = -200 if @battle_anime_frame == 293
      #  @chay = -120 if @battle_anime_frame == 293
      #  battle_anime_change 1,0 if @battle_anime_frame == 293
      #  @back_anime_type = 0
      #  @back_anime_frame = 0
      
      when 294..353
        @chay = -200
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 294
        back_anime_pattern 56
        @back_anime_frame -= 1
        back_anime_pattern 57
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 354..410
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        back_anime_pattern 58
        @effect_anime_pattern = 99
      when 411 #初期化
        @effect_anime_pattern = 0
        @gy = 0
        @gx = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 412..438
        @effect_anime_pattern = 83
      when 439
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 919 #ダブルアイビーム
      @ray_color = 0

      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        #@output_anime_type = 1
        #battle_anime_change 0,0
      when 1..59
        back_anime_pattern 59
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @ax = -4
          @ax = 0 if @battle_anime_frame >= 24
        elsif $partyc[@chanum.to_i] == 8  #天津飯
          @ax = 4
          @ax = 2 if @battle_anime_frame >= 24
          @ax = 0 if @battle_anime_frame >= 25
        end
      when 60..120
        sframe = 60
        @scombo_cha1 = 8
        @btl_ani_cha_chg_no = 4
        @scombo_cha1_anime_type = 2
        if @battle_anime_frame == sframe   # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 怪光線")
          if $partyc[@chanum.to_i] == 8
            @chax -= 186
          end
        end
        back_anime_pattern 116,CENTER_CHAX+120,STANDARD_CHAY
        @effect_anime_pattern = 370

      when 121 #初期化
        @effect_anime_pattern = 0
        @gy = 0
        @gx = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 130..156
        @effect_anime_pattern = 371
      when 157
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 401 #痺れ液
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
      when 31..70
        battle_anime_change 0,2
        @effect_anime_pattern = 16
      when 71
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 75
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 76..102
        @effect_anime_pattern = 44
      when 103
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 403 #溶解液
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      when 30
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
      when 31..70
        battle_anime_change 0,2
        @effect_anime_pattern = 16
      when 71
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 75
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 76..102
        @effect_anime_pattern = 44
      when 103
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 404 #自爆
      
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 31..98
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 16,150,picture,rect)
        end
      when 99
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 100
        set_chr_display_out
      when 101..120
        sframe = 101
        
        case @battle_anime_frame - sframe
        
        when 1
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 0
          battle_anime_change 0,14
          @eney = (@chay - 48)
          @enex = (@chax + 64)
        when 8
          battle_anime_change 0,13
          @eney += 16
          @enex -= 24
        when 16
          battle_anime_change 0,12
          @eney += 16
          @enex -= 24
        end
      when 121
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 405 #エネルギー波(パンプキン系)
      
      case @battle_anime_frame
      
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 1
      when 20
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 14
      when 81
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 82
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 83..109
        @effect_anime_pattern = 42
      when 110
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 406 #貫光線(パンプキン系)
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 30
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 貫光線")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 17
      when 81
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 82
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 83..109
        @effect_anime_pattern = 45
      when 110
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 484 #大猿変身
      if @battle_anime_frame == 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 1,0
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 190
        if @battle_anime_frame == 1
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_オニオン") #ダメージ表示用
        if @battle_anime_frame <= 1
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 9
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 17
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 25
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 33
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 41
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 49
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 57
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 65
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame == 66
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 130
          rect = Rect.new(0, 496,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 190
          rect = Rect.new(0, 384,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        end
      elsif @battle_anime_frame >= 191 && @battle_anime_frame <= 310
        if @battle_anime_frame == 191
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_オニオン") #ダメージ表示用
        rect = Rect.new(0, 496,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        if @battle_anime_frame == 310
          Audio.se_stop
        end
      elsif @battle_anime_frame >= 311 && @battle_anime_frame <= 370
        if @battle_anime_frame == 311
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_オニオン") #ダメージ表示用
        rect = Rect.new(0, 496,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        @effect_anime_pattern = 5
      elsif  @battle_anime_frame == 371
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX+30
          @chay = STANDARD_CHAY-30
        end
        #battle_anime_change 1,10
      elsif @battle_anime_frame >= 372 && @battle_anime_frame <= 398
        @effect_anime_pattern = 48
      elsif @battle_anime_frame == 399
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 407 #エネルギー波(ジンジャー系)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 3
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 408 #強力エネルギー波(ジンジャー・ニッキー系)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60
        if $btl_progress >= 2
          battle_anime_change 0,11
        end
        back_anime_pattern 4

      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,2
        @effect_anime_pattern = 6
        back_anime_pattern 4
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        back_anime_pattern 4
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 409 #刀攻撃(ジンジャー系)
      
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..60
        if $btl_progress >= 2
          battle_anime_change 0,11
        end
        back_anime_pattern 4
      when 61
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 刀")    # 効果音を再生する
        back_anime_pattern 4
      when 62..89
        battle_anime_change 0,3
        back_anime_pattern 4
      when 90
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
      when 91..100
        battle_anime_change 0,4
      when 101..110
        battle_anime_change 0,5
      when 111..120
        battle_anime_change 0,6
      when 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 126
        if $btl_progress >= 2
          @tec_output_back = false
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 127..208
        back_anime_pattern 1
        @effect_anime_pattern = 46
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 410 #エネルギー波(ラディッツ)
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      when 1..80 
        back_anime_pattern 11
      when 100
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,2
        @effect_anime_pattern = 14
        back_anime_pattern 11
      when 161
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 162
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 163..189
        @effect_anime_pattern = 42
      when 190
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 411 #強力エネルギー波(ラディッツ)
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
      when 1..80 
        back_anime_pattern 12
      when 100
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 15
        back_anime_pattern 12
      when 161
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 162
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 163..189
        @effect_anime_pattern = 43
      when 190
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 412 #エネルギー波(ナッパ)
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 2
      when 1..30
        battle_anime_change 0,1
        back_anime_pattern 14
      when 31..59 
        back_anime_pattern 14
        battle_anime_change 0,2
      when 60
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 14
        back_anime_pattern 14
      when 121
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @ray_color = 0
      when 122
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 123..149
        @effect_anime_pattern = 42
      when 150
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 413 #爆発波
      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 0
        when 1..50
          back_anime_pattern 14
          battle_anime_change 0,4
        when 51..100
          back_anime_pattern 14
          battle_anime_change 0,5
        when 101
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 102..162
          back_anime_pattern 1
        when 163
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 414 #口からエネルギー波(ナッパ)
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,6
        @ray_color = 0
      when 1..30
        battle_anime_change 0,6
        back_anime_pattern 14
      when 31..59 
        back_anime_pattern 14
      when 60
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,7
        @effect_anime_pattern = 5
        back_anime_pattern 15
      when 61..120
        back_anime_pattern 15
      when 121
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @ray_color = 4
      when 122
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 123..149
        @effect_anime_pattern = 47
      when 150
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 416 #エネルギー波(ベジータ)
      
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 19
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 43
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 418 #気円斬(ベジータ)
      if @battle_anime_frame == 0 #初期化
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
      elsif @battle_anime_frame == 45
        Audio.se_play("Audio/SE/" + "Z1 ブン")    # 効果音を再生する
        battle_anime_change 0,3
        @ray_color = 0
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 130
        @effect_anime_pattern = 9
        
      elsif @battle_anime_frame == 131
        battle_anime_change 0,4
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気円斬")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 170
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 171 && @battle_anime_frame <= 197
        @effect_anime_pattern = 38
      elsif @battle_anime_frame == 198
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 419 #爆発波(ベジータ)
      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,5
          @ray_color = 0
        when 1..100
          back_anime_pattern 5
          battle_anime_change 0,5
        when 101
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          back_anime_pattern 2
        when 102..180
          back_anime_pattern 2
          battle_anime_change 0,6
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 420 #ギャリック砲
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40 
        back_anime_pattern 16
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 80
        back_anime_pattern 16
        battle_anime_change 0,8
      elsif @battle_anime_frame == 81
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_pattern = 8
        back_anime_pattern 16
      elsif @battle_anime_frame >= 82 && @battle_anime_frame <= 144
        back_anime_pattern 16
      elsif @battle_anime_frame == 145
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 146
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 147 && @battle_anime_frame <= 173
        @effect_anime_pattern = 48
      elsif @battle_anime_frame == 174
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 473 #大猿変身
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,9
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 80 
        back_anime_pattern 4
      elsif @battle_anime_frame == 81
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        back_anime_pattern 5
        battle_anime_change 0,9
        @effect_anime_pattern = 21
        ray_x = 234
        ray_y = 100
      elsif @battle_anime_frame >= 82 && @battle_anime_frame <= 102
        back_anime_pattern 5
        battle_anime_change 0,9
        ray_x = 234
        ray_y = 100 - (@battle_anime_frame-82)
      #elsif @battle_anime_frame == 81
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #@effect_anime_pattern = 21
        #back_anime_pattern 5
      elsif @battle_anime_frame >= 103 && @battle_anime_frame <= 184
        back_anime_pattern 5
        ray_x = 234
        ray_y = 80
      elsif @battle_anime_frame >= 185 && @battle_anime_frame <= 209
        battle_anime_change 0,10
        ray_x = 226
        ray_y = 88
      elsif @battle_anime_frame == 210
        Audio.se_play("Audio/SE/" + "Z1 繰気弾")    # 効果音を再生する
        battle_anime_change 0,11
        ray_x = 226
        ray_y = 88
        @effect_anime_pattern = 21
      elsif @battle_anime_frame >= 211 && @battle_anime_frame <= 305
        ray_x = 226 - (@battle_anime_frame-211)*4
        ray_y = 88 - (@battle_anime_frame-211)*4
        
        if @battle_anime_frame >= 265
          back_anime_pattern 11
          battle_anime_change 0,12
        end
      elsif @battle_anime_frame == 306
        Audio.se_stop
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 2
      elsif  @battle_anime_frame == 307
        @eney = -200 #キャラ画面範囲外へ
      elsif @battle_anime_frame >= 308 && @battle_anime_frame <= 374
        @effect_anime_pattern = 21
        ray_x = 256
        ray_y = 240 - (@battle_anime_frame-308)*2
        if @battle_anime_frame == 374
          #p ray_y #108
        end
      elsif @battle_anime_frame == 375
        ray_x = 256
        ray_y = 108
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
      elsif @battle_anime_frame >= 375 && @battle_anime_frame <= 439
        ray_x = 256
        ray_y = 108
        
        if @battle_anime_frame <= 383
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 391
          color = Color.new(0,0,0,260)
        elsif @battle_anime_frame <= 399
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 407
          color = Color.new(255,216,160,260)
        elsif @battle_anime_frame <= 415
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 423
          color = Color.new(0,0,0,260)
        elsif @battle_anime_frame <= 431
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 439
          color = Color.new(255,216,160,260)
        end
        @back_window.contents.fill_rect(0,0,680,FLASH_Y_SIZE_CUTIN_OFF,color)
      elsif @battle_anime_frame >= 440 && @battle_anime_frame <= 470
        battle_anime_change 0,0
        @eney = STANDARD_ENEY
        @effect_anime_pattern = 0
      elsif @battle_anime_frame >= 471 && @battle_anime_frame <= 660
        if @battle_anime_frame == 471
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_ベジータ") #ダメージ表示用
        if @battle_anime_frame <= 471
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 479
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 487
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 495
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 503
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 511
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 519
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 527
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 535
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame == 536
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          rect = Rect.new(0, 1360,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 600
          rect = Rect.new(0, 1360,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 660
          rect = Rect.new(0, 1248,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        end
      elsif @battle_anime_frame == 661
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
      when 685 #エネルギー波(べジータ大猿)
      @ray_color = 0
      case @battle_anime_frame
      when 0..120
        if @battle_anime_frame == 0
          @eney = -200 #キャラ画面範囲外へ
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_ベジータ") #ダメージ表示用
        rect = Rect.new(0, 1360,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        if @battle_anime_frame == 120
          Audio.se_stop
        end
      when 121..180
        if @battle_anime_frame == 121
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        picture = Cache.picture("Z1_戦闘_必殺技_敵_ベジータ") #ダメージ表示用
        rect = Rect.new(0, 1360,96,112)
        @back_window.contents.blt(266,118,picture,rect)
        @effect_anime_pattern = 5
      when 181
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX#+30
          @chay = STANDARD_CHAY#-30
        end
        #battle_anime_change 1,0
      when 182..208
        @effect_anime_pattern = 48
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 424 #エネルギー波(サンショ系)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 18
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 425 #強力エネルギー波(サンショ系)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 4
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 18
        back_anime_pattern 4
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        back_anime_pattern 4
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 47
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 426 #エネルギー弾(ガーリック)
      
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 4
      when 1..29
        @effect_anime_pattern = 10
      when 30
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
      when 31..61
        battle_anime_change 0,2
      when 62
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 62..88
        @effect_anime_pattern = 40
      when 89
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 428 #強力エネルギー波(ガーリック)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 4
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 8
        back_anime_pattern 4
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        back_anime_pattern 4
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 32
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 429 #エネルギー波(ガーリック巨大化)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 30 
        back_anime_pattern 2
      elsif @battle_anime_frame == 31
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @ray_color = 0
        battle_anime_change 0,1
        @effect_anime_pattern = 15
      elsif @battle_anime_frame >= 32 && @battle_anime_frame <= 84
        back_anime_pattern 2
      #  @effect_anime_pattern = 3
      elsif @battle_anime_frame == 85
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 86
        if $btl_progress >= 2
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 87 && @battle_anime_frame <= 113
        @effect_anime_pattern = 43
      elsif @battle_anime_frame == 114
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 430 #ブラックホール波
      if $btl_progress >= 2
          @tec_output_back = false
        end
      if @all_attack_count == 1
        
        case @battle_anime_frame
        when 0 #初期化
          
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 0
        when 1..10
          back_anime_pattern 13
          battle_anime_change 0,2
        when 11..20
          back_anime_pattern 13
          battle_anime_change 0,3
        when 21..30
          back_anime_pattern 13
          battle_anime_change 0,2
        when 31..40
          back_anime_pattern 13
          battle_anime_change 0,3
        when 41..50
          back_anime_pattern 13
          battle_anime_change 0,2
        when 51..60
          back_anime_pattern 13
          battle_anime_change 0,3
        when 61..70
          back_anime_pattern 13
          battle_anime_change 0,2
        when 71..100
          back_anime_pattern 13
          battle_anime_change 0,4
        when 101
          if $btl_progress >= 2
            @tec_output_back_no = 0
          end
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 102..162
          back_anime_pattern 1
        when 163
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end

    when 559 #キシーメ電磁ムチ(強
      back_x = 234
      back_y = 50
      case @battle_anime_frame
      when 0
        @output_anime_type = 1
        battle_anime_change 0,1
        @back_anime_frame = 0
        @ray_color = 1
      when 30..149
        Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == 30   # 効果音を再生する
        back_anime_pattern 4,back_x,back_y
        if @effect_anime_frame < 4
          battle_anime_change 0,2
        else
          battle_anime_change 0,3
        end
        @effect_anime_frame += 1
        
        @effect_anime_frame = 0 if @effect_anime_frame == 8
      when 150
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 151..190
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@enex + 20,134,picture,rect)
          end
        else
          
        end
      when 191
        set_chr_display_out
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY+20
          battle_anime_change 0,6
      when 192..202
        
        back_anime_pattern 1
        
        if @effect_anime_frame < 4
          battle_anime_change 0,6
        else
          battle_anime_change 0,9
        end
        @effect_anime_frame += 1
        
        @effect_anime_frame = 0 if @effect_anime_frame == 8
      when 203..213
        
        back_anime_pattern 1
        
        if @effect_anime_frame < 4
          battle_anime_change 0,5
        else
          battle_anime_change 0,8
        end
        @effect_anime_frame += 1
        
        @effect_anime_frame = 0 if @effect_anime_frame == 8
      when 214..224
        @eney = STANDARD_ENEY
        back_anime_pattern 1
        
        if @effect_anime_frame < 4
          battle_anime_change 0,4
        else
          battle_anime_change 0,7
        end
        @effect_anime_frame += 1
        
        @effect_anime_frame = 0 if @effect_anime_frame == 8
      when 225..320
        Audio.se_play("Audio/SE/" + "DB3 SE091") if @battle_anime_frame == 225 
        back_anime_pattern 1
        
        if @effect_anime_frame < 4
          battle_anime_change 0,10
        else
          battle_anime_change 0,11
        end
        @effect_anime_frame += 1
        
        @effect_anime_frame = 0 if @effect_anime_frame == 8
        
        if @battle_anime_frame % 2 == 0
          @chax = CENTER_CHAX
        else
          @chax = CENTER_CHAX - 4
        end
        
      when 321
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 561 #エビ氷結攻撃(全体)
        back_x = 234
        back_y = 70
        ray_x = 246
        ray_y = 120
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
          @output_anime_type = 1
          @ray_color = 3
        when 1..44
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,1
        when 45..89
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,2
        when 90..109
          #Audio.se_stop
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,3
        when 110
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 16
          #back_anime_pattern 101,back_x,back_y
        when 151..194
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,4
        when 195..239
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,5
        when 240..259
          #Audio.se_stop
          back_anime_pattern 4,back_x,back_y
          battle_anime_change 0,6
        when 260
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 16
          
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        when 261..298
          ray_x = 252
          ray_y = 120
          #back_anime_pattern 101,back_x,back_y
        when 299
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 309
          set_chr_display_out
        when 310..336
          @effect_anime_pattern = 44
        when 337
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        case @battle_anime_frame
        when 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          @effect_anime_pattern = 16
        when 1..27
          @effect_anime_pattern = 44
        when 28
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 562 #エビ氷結攻撃
        back_x = 234
        back_y = 70
        ray_x = 238
        ray_y = 128
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
      when 1..44
        back_anime_pattern 4,back_x,back_y
        battle_anime_change 0,1
      when 45..89
        back_anime_pattern 4,back_x,back_y
        battle_anime_change 0,2
      when 90..109
        #Audio.se_stop
        back_anime_pattern 4,back_x,back_y
        battle_anime_change 0,3
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 16
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 44
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 563 #皮伸び攻撃(ミソカッツン
      back_x = 234
      back_y = 60
      case @battle_anime_frame
      when 0
        @output_anime_type = 1
        battle_anime_change 0,0
        @back_anime_frame = 0
        @ray_color = 0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 31..70
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@enex + 20,134,picture,rect)
          end
        else
          
        end
      when 91
        set_chr_display_out
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生するる
          @enex = CENTER_ENEX
          @eney = -180#STANDARD_ENEY
          @output_anime_type = 0
          battle_anime_change 0,0
      when 92..130
        back_anime_pattern 1
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@enex + 20,134+8,picture,rect)
          end
        else
          
        end
      when 131..180
        back_anime_pattern 1
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      #when 161..180
      #  back_anime_pattern 1
        
      when 181..221
        back_anime_pattern 1
        battle_anime_change 1,16
        @chax -= 4
      when 222..230
        back_anime_pattern 1
      when 231..241
        Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == 236
        back_anime_pattern 1
        battle_anime_change 1,3
        @chax += 16
      when 242..245
        back_anime_pattern 1
        @chax += 2
        battle_anime_change 0,15
      when 242..270
        back_anime_pattern 1
        #@chax += 2
        #battle_anime_change 0,15
      when 271..300
        back_anime_pattern 1
        battle_anime_change 0,0
        @chax -= 16
        battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ") if @battle_anime_frame == 271
      when 301..315
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 301
        battle_anime_change 0,16
        @eney -= 16
      when 316
        @chax = 640
        @eney = -270
        @enex = CENTER_CHAX - 8
      when 330..353
        @chax -= 16
        @eney += 16
      when 354
        #@eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 564 #エネルギー波(ミソカッツン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 18
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 31
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 565 #強力エネルギー波(ミソカッツン)
      back_x = 234
      back_y = 60
      ray_x = 250
      ray_y = 104
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
        back_anime_pattern 4,back_x,back_y
      elsif @battle_anime_frame == 61
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,2
        @effect_anime_pattern = 18
        back_anime_pattern 4,back_x,back_y
      elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
        back_anime_pattern 4,back_x,back_y
      elsif @battle_anime_frame == 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 126
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      elsif @battle_anime_frame >= 127 && @battle_anime_frame <= 153
        @effect_anime_pattern = 47
      elsif @battle_anime_frame == 154
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 686 #エネルギー波(Drウィロー)
      @ray_color = 0
      ray_x = 212
      ray_y = 102
      case @battle_anime_frame
      when 0..120
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,1
        end

        if @battle_anime_frame == 120
          Audio.se_stop
        end
      when 121..180
        if @battle_anime_frame == 121
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        @effect_anime_pattern = 5
      when 181
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX#+30
          @chay = STANDARD_CHAY#-30
        end
        #battle_anime_change 1,0
      when 182..208
        @effect_anime_pattern = 43
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 687 #フォトンストライク(Drウィロー)
      @ray_color = 0
      ray_x = 212
      ray_y = 104
      case @battle_anime_frame
      when 0..120
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,3
        end

        if @battle_anime_frame == 120
          Audio.se_stop
        end
      when 121..180
        if @battle_anime_frame == 121
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        @effect_anime_pattern = 97
      when 181
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX#+30
          @chay = STANDARD_CHAY#-30
        end
        #battle_anime_change 1,0
      when 182..208
        @effect_anime_pattern = 98
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 688 #口からエネルギー波(Drウィロー)
      @ray_color = 0
      ray_x = 254
      ray_y = 136
      case @battle_anime_frame
      when 0..120
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,6
          @enex += 6
        end

        if @battle_anime_frame == 120
          Audio.se_stop
        end
        back_anime_pattern 2
      when 121..180
        if @battle_anime_frame == 121
          battle_anime_change 0,7
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        @effect_anime_pattern = 5
        back_anime_pattern 2
      when 181
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX#+30
          @chay = STANDARD_CHAY#-30
        end
        #battle_anime_change 1,0
      when 182..208
        @effect_anime_pattern = 48
      when 209
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 689 #ウィロー)ギガンティックボマー
      @ray_color = 0
      ray_x = 700
      ray_y = 640
      case @battle_anime_frame
      when 0..120
        back_anime_pattern 15
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,5
          
        end
        
        if @battle_anime_frame == 120
          #Audio.se_stop
        end
      when 121..180
        if @battle_anime_frame == 121
          battle_anime_change 0,5
          Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          @eney = -200
        end

        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)

          @back_window.contents.blt(@enex+4,134,picture,rect)
        end
        
        #@effect_anime_pattern = 5
      when 181..280
        #back_anime_pattern 1
        sframe = 181
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
        end
        picture = Cache.picture("Z1_戦闘_必殺技_突進(ウィロー)") #ダメージ表示用
        rect = Rect.new(472*@effect_anime_pattern, 0,472,244)

        
        @effect_anime_frame += 1 
        if @effect_anime_frame == 2
          if @effect_anime_pattern == 0
            @effect_anime_pattern = 1
          else
            @effect_anime_pattern = 0
          end
        end
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),40,picture,rect)
      when 281

        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX-30
          @eney = STANDARD_ENEY-30
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX#+30
          @chay = STANDARD_CHAY#-30
        end
        #battle_anime_change 1,0
      when 282..305
        sframe = 282
        picture = Cache.picture("Z1_戦闘_必殺技_突進(ウィロー)") #ダメージ表示用
        rect = Rect.new(472*@effect_anime_pattern, 0,472,244)

        
        @effect_anime_frame += 1 
        if @effect_anime_frame == 2
          if @effect_anime_pattern == 0
            @effect_anime_pattern = 1
          else
            @effect_anime_pattern = 0
          end
        end
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),40,picture,rect)
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 690 #プラネットゲイザー
      color = Color.new(255,255,255,260)
      color2 = Color.new(255,0,0,260)
      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0..120 #初期化
        sframe = 0
        back_anime_pattern 16
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 怪しい気")    # 効果音を再生する
            @output_anime_type = 1
            battle_anime_change 0,5
            @ray_color = 0
          end
        when 121..180
          sframe = 121
          back_anime_pattern 16
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
            battle_anime_change 0,4
          end
          
          if @battle_anime_frame % 30 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
          elsif @battle_anime_frame % 15 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          back_anime_pattern 1
          if @battle_anime_frame % 12 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
          elsif @battle_anime_frame % 6 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          sframe = 182
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          end
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          set_chr_display_out
          @tec_output_back = true
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          if @battle_anime_frame % 30 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
          elsif @battle_anime_frame % 15 == 0
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
###############################################################################
#
# Z2必殺技
#
###############################################################################
    when 1101 #衝撃波(悟空)
      if @battle_anime_frame == 0 #初期化
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
      elsif @battle_anime_frame == 60
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        set_chr_display_out
        @tec_output_back = false
      elsif @battle_anime_frame >= 61 && @battle_anime_frame <= 119
        back_anime_pattern 1
      elsif @battle_anime_frame == 120
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1102 #エネルギー波(悟空)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 300
        ray_y = 96
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1105 #カメハメ波(悟空)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,3
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @ax = 2 if @battle_anime_frame == 47 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 50 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 53 && $btl_progress >= 2
        @effect_anime_pattern = 203
        ray_x = 340
        if $super_saiyazin_flag[1] == true || $btl_progress == 2 #悟空がスーパーサイヤ人か判定
          ray_y = 132 #スーパーサイヤ人
        else
          ray_y = 124 #通常
        end
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1106 #界王拳

      if $btl_progress == 2
        backhai_no = 201
        back_x = 228
        back_y = 88
      else
        backhai_no = 101
        back_x = 220
        back_y = 32
      end
      
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
        @output_anime_type = 1
        battle_anime_change 0,4 
        battle_anime_change 0,0 if $super_saiyazin_flag[1] == true #超サイヤ人の場合為がないので、変更しない
        
      when 1..89
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 91..130
          #back_x = 220
          #back_y = 32
          back_anime_pattern backhai_no,back_x,back_y
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax + 20,144,picture,rect)

        else
          
        end
        
      when 131
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @ray_color = 0
      when 132..159
        #back_anime_pattern 1
        @effect_anime_pattern = 205
      when 160
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1107 #界王拳・カメハメ波

        ray_x = 340
        
        
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 228
        back_y = 88
        ray_y = 108
      else
        backhai_no = 102
        back_x = 198
        back_y = 32
        ray_y = 92
      end
      case @battle_anime_frame
      when 0 #初期化

        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
        @output_anime_type = 1
        battle_anime_change 0,4
        battle_anime_change 0,0 if $super_saiyazin_flag[1] == true #超サイヤ人の場合為がないので、変更しない
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern backhai_no,back_x,back_y
      when 91..140
        back_anime_pattern backhai_no,back_x,back_y
      when 141
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 206
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
      when 142..179
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
        @ax = 2 if @battle_anime_frame == 142 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 145 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 148 && $btl_progress >= 2
      when 180
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 190
        set_chr_display_out
      when 191..217
        @effect_anime_pattern = 207
      when 218
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1118 #元気弾
        back_x = 190
        back_y = 36
        ray_x = 340
        ray_y = 112
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      when 1..89
        back_anime_pattern 103,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,6
        #back_anime_pattern 103,back_x,back_y
      #when 91..140
        #back_anime_pattern 102,back_x,back_y
      when 111
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 208
        #back_anime_pattern 102,back_x,back_y
      when 112..149
        #back_anime_pattern 102,back_x,back_y
      when 150
        battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 160
        set_chr_display_out
      when 161..187
        @effect_anime_pattern = 209
      when 188
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1119 #超元気弾
        back_x = 180
        back_y = 0
        ray_x = 340
        ray_y = 112
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      when 1..89
        back_anime_pattern 104,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,6
        #back_anime_pattern 103,back_x,back_y
      #when 91..140
        #back_anime_pattern 102,back_x,back_y
      when 111
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 210
        #back_anime_pattern 102,back_x,back_y
      when 112..149
        #back_anime_pattern 102,back_x,back_y
      when 150
        battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 160
        set_chr_display_out
      when 161..187
        @effect_anime_pattern = 211
      when 188
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1120 #超元気弾(イベント用)
     
      back_x = 180 - 302
      back_y = -4
     
      backhai_no = 201
     
      ray_x = 340
      ray_y = 200

      case @battle_anime_frame
      when 0..0
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
        @ray_color = 0
        @scombo_cha1 = 4
        @scombo_cha2 = 5
        @scombo_cha3 = 6
        @btl_ani_cha_chg_no = 3
        @output_anime_type = 1
        battle_anime_change 0,5
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY 
        #@enex = 640 + 32
        #@eney = STANDARD_CHAY
        #@chr_cutin_flag = false
      when 2..160
        back_anime_pattern 129,back_x,back_y
      when 161..250
        sframe = 161
        xframe = sframe + 5
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @enex = 640 + 32
          @eney = STANDARD_CHAY
        end
        
        #味方の移動
        
        case @battle_anime_frame - xframe
        
        when 0..15
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
          
        when 16..20
          @scombo_cha1_anime_type = 4
          back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
        when 21..40
          back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
        when 41..200
          @scombo_cha1_anime_type = 0
          back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
        end
          
        #敵の移動
        case @battle_anime_frame - sframe
        
        when 0..20
          @enex -= 12
        when 21..50
          @enex += 24
          battle_anime_change 1,17
        end
        
        #SE
        case @battle_anime_frame - sframe
        
        when 21 #
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        
        #back_anime_pattern 129,back_x,back_y
      when 251..280
        back_x = 234
        back_y = -18 + 54+ 50

        sframe = 251
        if @battle_anime_frame == sframe
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          @btl_ani_cha_chg_no = 5
          @scombo_cha2 = 6
        end
        @scombo_cha2_anime_type = 2
        battle_anime_change 0,2

        #back_anime_pattern backhai_no,back_x,back_y-50
        #@back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        @chay = STANDARD_CHAY-50
        back_anime_pattern 118,@chax,STANDARD_CHAY+50
      when 281..362
        sframe = 281
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        end
        @effect_anime_pattern = 367
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,@chax,STANDARD_CHAY+50
      when 363#270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 373#280
        #set_chr_display_out
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
        battle_anime_change 1,0
      when 374..398#281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 399..420
        sframe = 399
        
        if @battle_anime_frame == sframe
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 104
          Audio.se_play("Audio/SE/" + "Z1 爆発1")
          battle_anime_change 1,16
        end
        @enex += 16
      when 421
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
        Audio.se_play("Audio/SE/" + "Z1 気を溜める4")
        @effect_anime_pattern = 0
        @ray_color = 0
        @scombo_cha1 = 4
        @scombo_cha2 = 5
        @scombo_cha3 = 6
        @btl_ani_cha_chg_no = 3
        @output_anime_type = 1
        @back_anime_frame = 0
        @back_anime_type = 0
        battle_anime_change 0,5
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY 
        #@enex = 640 + 32
        #@eney = STANDARD_CHAY
        #@chr_cutin_flag = false
      when 422..580
        back_anime_pattern 129,back_x,back_y
      when 581..750
        sframe = 581
        if @battle_anime_frame == sframe
          @chay = -200
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        end
        picture = Cache.picture("FC風_GBZ2 超元気弾発動") #ダメージ表示用
        rect = Rect.new(0, 0,256,124)
        @back_window.contents.blt(176,112,picture,rect)
        
        picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)(超元気玉)") #ダメージ表示用
        rect = Rect.new(0, 0,640,250)
        @back_window.contents.blt(0+(@battle_anime_frame-sframe)*RAY_SPEED/2,-220+(@battle_anime_frame-sframe)*RAY_SPEED/6,picture,rect)

      when 751
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 1126 #スーパーカメハメ波
        @ray_color = 0
        back_x = 164
        back_y = 122
        ray_x = back_x +82
        ray_y = back_y +60
        
        if $game_variables[171] == 1 && $btl_progress == 2
          picture = Cache.picture("Z3_必殺技_超カメハメ波(悟空_ボロボロ)")
        elsif $game_variables[171] == 2 && ($btl_progress == 2 || $btl_progress == 1)
          picture = Cache.picture("Z3_必殺技_超カメハメ波(悟空_さらにボロボロ)")
        elsif $game_variables[171] == 3 && $btl_progress == 2
          picture = Cache.picture("Z3_必殺技_超カメハメ波(悟空_バトルスーツ)")
        else
          picture = Cache.picture("Z3_必殺技_超カメハメ波(悟空)")
        end
      case @battle_anime_frame
      when 0 #初期化
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
        else
          @eney = -200 #キャラ画面範囲外へ
        end
        @tec_output_back = false
        @chr_cutin = false
        @chr_cutin_flag = false
      when 1..30
        
        rect = Rect.new(0, 0,104,180)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        
        if @battle_anime_frame == 30
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        end 
      when 31..120
        rect = Rect.new(0, 0,104,180)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        @effect_anime_pattern = 235
        if @battle_anime_frame == 120
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          @effect_anime_frame = 0
        end 
      when 121..210
        ray_y = 6
        back_x -= (@battle_anime_frame-121)/2
        ray_x -=  (@battle_anime_frame-121)/2
        rect = Rect.new(0, 0,104,180)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        @effect_anime_pattern = 236
      when 211
        @chr_cutin = true
        @chr_cutin_flag = true
        @tec_output_back = true
        set_chr_display_out
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
        #@chr_cutin_mirror_flag = true
        @tec_back_small = true if $btl_progress >= 2
      when 212
        #battle_anime_change 0,1
        #@effect_anime_pattern = 0
        #@effect_anime_frame = 0
        #@effect_anime_type = 0
        
      when 213..239
        #ここでエラーが発生する可能性がある
        
        @effect_anime_pattern = 48
      when 240
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1131 #魔光砲(ピッコロ)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 300
        ray_y = 96
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1133 #目から怪光線(ピッコロ)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 212
        ray_x = 300
        ray_y = 78
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 213
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1134 #口から怪光線(ピッコロ)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 300
        ray_y = 96
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1135 #爆裂魔光砲

        ray_x = 340
        ray_y = 96
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 1
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 206
        back_anime_pattern backhai_no,back_x,back_y
  
      when 91..128
        back_anime_pattern backhai_no,back_x,back_y
        @ax = 2 if @battle_anime_frame == 91 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 94 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 97 && $btl_progress >= 2
      when 129
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 207
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1136 #魔貫光殺砲
        back_x = 190
        back_y = 32
        ray_x = 340
        ray_y = 130
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 1
      when 1..89
        back_anime_pattern 102,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,6
        #back_anime_pattern 103,back_x,back_y
      #when 91..140
        #back_anime_pattern 102,back_x,back_y
      when 101
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
        battle_anime_change 0,6
        @effect_anime_pattern = 214
        #back_anime_pattern 102,back_x,back_y
      when 102..139
        #back_anime_pattern 102,back_x,back_y
      when 140
        battle_anime_change 0,6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 150
        set_chr_display_out
      when 151..177
        @effect_anime_pattern = 215
      when 178
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1146 #魔光砲(ゴハン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 290
        ray_y = 108
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1147 #魔閃光
        back_x = 198
        back_y = 34
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 203
        back_anime_pattern 101,back_x,back_y
      when 91..128
        back_anime_pattern 101,back_x,back_y
      when 129
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 204
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1148 #カメハメ波(悟飯)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,11
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,12
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @effect_anime_pattern = 203
        ray_x = 340
        ray_y = 142
        @ax = 2 if @battle_anime_frame == 47 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 50 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 53 && $btl_progress >= 2
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1152 #爆裂ラッシュ
        #back_x = 198
        #back_y = 34
        #ray_x = 280
        #ray_y = 138
        ray_x = 330
        ray_y = STANDARD_CHAY - 2
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 228
        back_y = 88
      else
        backhai_no = 101
        back_x = 198
        back_y = 34
      end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
        #@output_anime_type = 1
        #battle_anime_change 0,4
        
      when 1..89
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 91..130
          #back_x = 220
          #back_y = 32
          back_anime_pattern backhai_no,back_x,back_y
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax-6,144+2,picture,rect)

        else
          
        end
        
      when 131
        #set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @chax = -200
          @chay = STANDARD_CHAY
          @ray_color = 0
          battle_anime_change 0,16
          @ax = 20
        #set_chr_display_out
      when 140..1166
         hit_efe_x = 346
         hit_efe_y = 154
        case @battle_anime_frame
        when 156..157
          @ax = 0
          battle_anime_change 0,3
          Audio.se_stop if @battle_anime_frame == 156
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 156
          @gx = -8
          battle_anime_change 1,16
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 158..159
          @gx = 8
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 160..163
          @gx = 0
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 164
          @effect_anime_pattern = 0
          @effect_anime_frame = 0 
          battle_anime_change 0,0
          @ax = -12
          @ay = 6
        when 172
          @ax = 0
          @ay = 0
          battle_anime_change 0,16
        when 180
          @ax = 24
          @ay = -12
          
        when 184..200
          @gx = -24
          @gy = -6
          @ax = 0
          @ay = 0
          if $btl_progress >= 2
            battle_anime_change 0,1
          else
            battle_anime_change 0,2
          end
          battle_anime_change 1,17
          Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == 184
          @effect_anime_pattern = 123 if @battle_anime_frame == 184
          ray_x = hit_efe_x
          ray_y = hit_efe_y
          #p @battle_anime_frame
          @effect_anime_pattern = 0 if @battle_anime_frame == 200
        when 201..215
          @effect_anime_frame = 0 
          battle_anime_change 0,16
          @ax = 24
          @ay = -6
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 201
        when 216..225
          @enex = CENTER_ENEX - 24*10 if @battle_anime_frame == 216
          @eney = STANDARD_ENEY + 6*10 if @battle_anime_frame == 216
          battle_anime_change 1,17 if @battle_anime_frame == 216
          battle_anime_change 1,16 if @battle_anime_frame == 221
          @gx = -24
          @gy = -6
        when 226
          @gx = 0
          @gy = 0
          @chax = CENTER_CHAX + 16 - 24*10 if @battle_anime_frame == 226
          @chay = STANDARD_CHAY + 6*10 if @battle_anime_frame == 226
        when 227..236
          @ax = 24
          @ay = -6
        when 237
          @ax = 0
          @ay = 0
        when 241
          @ax = 0
          @gx = -4
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 242..246
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y
          
        when 247
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          #@gx = -4
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 248..250
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y - 14
        when 251
          #@gx = -4
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 252..254
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 255
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @gx = -4
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 256..258
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y - 14
        when 259
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          #@gx = -4
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 260..262
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 263
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          #@gx = -4
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 264..266
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y - 14
        when 267
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          #@gx = -4
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 268..270
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y
        when 271
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          #@gx = -4
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
        when 272..274
          @effect_anime_pattern = 123
          ray_x = hit_efe_x
          ray_y = hit_efe_y - 14
          @gx = 0
          battle_anime_change 0,0
          @ax = -24
        when 275
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
        when 276
          @ax = 48
        when 278
          @ax = 0
          battle_anime_change 0,4
          battle_anime_change 1,17
          Audio.se_play("Audio/SE/" + "Z1 強打")
          @effect_anime_pattern = 121
        when 279..300
          @gx = -24
          if @battle_anime_frame == 289
            battle_anime_change 0,16
            @ay = -24
            Audio.se_play("Audio/SE/" + "Z1 逃げる")
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
          end
        when 301
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @gx = 0
          @ay = -6
          @output_anime_type = 1
          battle_anime_change 0,17
          battle_anime_change 0,18 if $game_switches[445] == true
          @tec_output_back_no = 1
          @chax = CENTER_CHAX + 74
          @chay = (STANDARD_CHAY + 142)
          @chr_cutin_flag = false
        when 340
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          @effect_anime_pattern = 257
          battle_anime_change 0,18
          battle_anime_change 0,19 if $game_switches[445] == true
          #短髪の場合は変更
          
          @ay = 0
          @ray_spd_up_flag = true
        when 341..399  
          @effect_anime_frame = 13 if @effect_anime_frame >= 13
        when 400
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @output_anime_type = 0
          set_chr_display_out
          battle_anime_change 1,16
        when 401..430
          ray_x = 330
          ray_y = -600
          @effect_anime_pattern = 258
        when 431
          @battle_anime_frame = 1166
        end
      when 1167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1162 #カメハメ波(クリリン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,3
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @effect_anime_pattern = 203
        ray_x = 340
        ray_y = 142
        @ax = 2 if @battle_anime_frame == 47 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 50 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 53 && $btl_progress >= 2
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1163 #拡散エネルギー波
      @ray_color = 0
      if @all_attack_count == 1
        back_x = 198
        back_y = 32
        ray_x = 340
        ray_y = 122
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern 101,back_x,back_y
      when 91..140
        back_anime_pattern 101,back_x,back_y
      when 141
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,4
        @effect_anime_pattern = 216
        #back_anime_pattern 101,back_x,back_y
      when 142..179
        #back_anime_pattern 101,back_x,back_y
      when 180
        battle_anime_change 0,4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 190
        set_chr_display_out
      when 191..217
        @effect_anime_pattern = 217
      when 218
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 217
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 217
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1164 #気円斬(クリリン)
      if @battle_anime_frame == 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      elsif @battle_anime_frame == 13
        battle_anime_change 0,6
      elsif @battle_anime_frame == 26
        @ax = -10
        battle_anime_change 0,7
      elsif @battle_anime_frame == 27
        @ax = 0
      elsif @battle_anime_frame == 41 #&& @battle_anime_frame <= 45
        @ax = 10
        battle_anime_change 0,1
      elsif @battle_anime_frame == 42
        @ax = 0
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気円斬")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @effect_anime_pattern = 218
        ray_x = 340
        ray_y = 150
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 219
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1173 #繰気弾(ヤムチャ)
        back_x = 204
        back_y = 32
        ray_x = 325
        ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        
        @ray_color = 0
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,4
      when 100
        battle_anime_change 0,5
      when 110
        battle_anime_change 0,6
      when 120
        battle_anime_change 0,7
      when 130
        battle_anime_change 0,6
      when 140
        battle_anime_change 0,8
      when 150
        battle_anime_change 0,6
      when 160
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,6
        @effect_anime_pattern = 220
        #back_anime_pattern 101,back_x,back_y
      when 161..198
        #back_anime_pattern 101,back_x,back_y
      when 199
        battle_anime_change 0,6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 209
        set_chr_display_out
      when 210..236
        @effect_anime_pattern = 221
      when 237
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1182 #四身の拳
        #back_x = 222
        #back_y = 60
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
        
      when 24
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
      when 25..225
        @chay = -120 #キャラ画面範囲外へ
        @effect_anime_pattern = 222
      when 226
        battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 227
        set_chr_display_out
      when 237..266
        @effect_anime_pattern = 223
      when 267
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1183 #気功砲
        back_x = 222
        back_y = 60
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..89
        back_anime_pattern 105,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        battle_anime_change 0,2
        #@effect_anime_pattern = 203
        #back_anime_pattern 105,back_x,back_y
      when 91..128
        #back_anime_pattern 105,back_x,back_y
      when 129
        battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
        @tec_output_back = false
      when 140..190
        back_anime_pattern 1
      when 191
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1184 #四身の拳・気功砲
        #back_x = 222
        #back_y = 60
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
        
      when 24
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
      when 25..225
        @chay = -120 #キャラ画面範囲外へ
        @effect_anime_pattern = 224
      when 226
        battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 227
        set_chr_display_out
        @tec_output_back = false
        @chr_cutin_flag = false
      when 237..266
        back_anime_pattern 9
      when 267
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1191 #どどんぱ
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 225
        ray_x = 328
        ray_y = 148
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 226
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1192 #超能力
        back_x = 218
        back_y = 60
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..69
        back_anime_pattern 105,back_x,back_y
      when 70
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,3
        #@effect_anime_pattern = 203
        back_anime_pattern 105,back_x,back_y
      when 71..108
        back_anime_pattern 105,back_x,back_y
      when 109
        Audio.se_stop
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        set_chr_display_out
        @tec_output_back = false
        @chr_cutin_flag = false
      when 120..146
        back_anime_pattern 9
      when 147
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1202 #ビーム
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 225
        ray_x = 328
        ray_y = 128
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 226
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1203 #気功スラッガー
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,3
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @ax = 2 if @battle_anime_frame == 47 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 50 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 53 && $btl_progress >= 2
        @effect_anime_pattern = 203
        ray_x = 340
        ray_y = 140
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1204  #超気功スラッガー

        ray_x = 340
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224
        back_y = 88
        ray_y = 96
      else
        backhai_no = 102
        back_x = 194
        back_y = 32
        ray_y = 90
      end
      case @battle_anime_frame
      when 0 #初期化

        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
        @output_anime_type = 1
        battle_anime_change 0,5
        
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern backhai_no,back_x,back_y
      when 91..140
        back_anime_pattern backhai_no,back_x,back_y
      when 141
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 206
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
      when 142..179
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
        @ax = 2 if @battle_anime_frame == 142 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 145 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 148 && $btl_progress >= 2
      when 180
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 190
        set_chr_display_out
      when 191..217
        @effect_anime_pattern = 207
      when 218
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1221 #(ベジータ)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 225
        
        if $partyc[@chanum] != 32 && $partyc[@chanum] != 16
          #ベジータ
          ray_x = 352
          ray_y = 134
        else
          #バーダック
          ray_x = 358
          ray_y = 132
        end
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 72
        @effect_anime_pattern = 226
      elsif @battle_anime_frame == 73
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1223 #爆発波
      @ray_color = 3
      if @attackcourse == 0
      back_x = 210
      back_y = 32
      ray_x = 326
      ray_y = 96
      else
      back_x = 210+24
      back_y = 32
      ray_x = 326-64
      ray_y = 96
      end
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1224 #(ベジータ)ギャリック砲
      if @attackcourse == 0
        if $btl_progress >= 2
          
          back_x = 220
          back_y = 86
          backhai_no = 201
        else
          back_x = 190
          back_y = 32
          backhai_no = 102
        end
        ray_x = 350
        ray_y = 124
      else
      back_x = 190+24
      back_y = 32
      ray_x = 350-128
      ray_y = 124
      backhai_no = 102
      end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,5
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,6
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1242 #口から怪光線(若者)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,12
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 300
        ray_y = 96
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1243 #強力エネルギー波(若者)
        back_x = 214
        back_y = 32
        ray_x = 340
        if $btl_progress >= 2
          ray_y = 94
        else
          ray_y = 88
        end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,11
        @ray_color = 1
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 206
        #back_anime_pattern 101,back_x,back_y
      when 91..128
        #back_anime_pattern 101,back_x,back_y
      when 129
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 207
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1244 #ナメック戦士(若者)
        back_x = 214
        back_y = 32
        ray_x = 340
        ray_y = 94
        if $btl_progress >= 2
          back_x = 224
          back_y = 86
          backhai_no = 201
        else
          back_x = 216
          back_y = 32
          backhai_no = 101
        end
        idougo = 188
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @ray_color = 1
        
      when 1..60 #ナメック戦士現れる
        sframe = 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        sensix = -96 + (@battle_anime_frame-sframe) * 12
        
        sensix = idougo if idougo < sensix #右に行き過ぎないように調整 
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(sensix,STANDARD_ENEY-64,picture,rect)
        
        rect = Rect.new(0, 96*5,96,96) #太
        @back_window.contents.blt(sensix,STANDARD_ENEY+64,picture,rect)
      when 61..150 #気を貯める
        sframe = 61
        if @battle_anime_frame == sframe && $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        elsif @battle_anime_frame == sframe && $btl_progress == 1
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")
        end
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x - 78,back_y - 64
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x - 78,back_y + 64
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        rect = Rect.new(0, 96*5,96,96) #太
        @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
      when 151..190
        sframe = 151
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(idougo + 10,STANDARD_CHAY+64 + 20,picture,rect)
        end
      when 191..250
        sframe = 191
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        @output_anime_type = 1
        battle_anime_change 0,10
        @ax = 18
        @ay = -2
      when 251..280
        sframe = 251
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        #rect = Rect.new(0, 96*4,96,96) #細
        #@back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
      when 281..320
        sframe = 281
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(CENTER_CHAX - 62 ,STANDARD_CHAY + 20,picture,rect)
        end
      when 321..330
        sframe = 321
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*5,96,96) #太
        @back_window.contents.blt(CENTER_CHAX - 62,STANDARD_CHAY,picture,rect)
        @ax = 0
        @ay = 0
      when 331..370
        sframe = 331
        if @battle_anime_frame == sframe + 4
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          battle_anime_change 1,17
        end
        if @battle_anime_frame >= sframe + 4 && @attack_hit == true
          @gx = -24
        elsif @battle_anime_frame >= sframe + 4 && @attack_hit == false
          @battle_anime_frame = 737
        end
        

        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*9,96,96) #太 蹴り
        idoumax = 10
        idoux = 20
        kerix = (@battle_anime_frame-sframe) * idoux
        kerix = idoumax * idoux if kerix > idoumax * idoux
        @back_window.contents.blt(CENTER_CHAX - 62 + kerix,STANDARD_CHAY,picture,rect)
      when 371..410
        sframe = 371
        if @battle_anime_frame == sframe
          @enex = -96
        end
        if @battle_anime_frame <= sframe + 10
          @gx = -16
        elsif @battle_anime_frame <= sframe + 15
          @gx = -14
        elsif @battle_anime_frame <= sframe + 20
          @gx = -12
        elsif @battle_anime_frame <= sframe + 25
          @gx = -10
        elsif @battle_anime_frame <= sframe + 60
          @gx = -8
        end

        if @battle_anime_frame == sframe + 10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") 
          @chay = STANDARD_CHAY - 64
          @chax = -96
          @ax = 20
        end
        
      when 411..430
        sframe = 411
        if @battle_anime_frame == sframe + 10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") 
          @chay = STANDARD_CHAY
          @chax = 640
          #@enex = -96
          @ax = -14
          battle_anime_change 0,16
        end
        @gx = -6
      when 431..440
        sframe = 431
        if @battle_anime_frame == sframe
          @ax = 0
          battle_anime_change 0,18
        end
        
        if @battle_anime_frame < sframe + 4
          @gx = -4
        
        end
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 4
        if @battle_anime_frame <= sframe + 8
          @gx = 0
          @chax += 4
        end
      when 441..460
        
      when 461..520
        sframe = 461
        Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe
        if @battle_anime_frame <= sframe + 4
          @chax -= 12
          battle_anime_change 0,17
        end
        @gx = 18
        @gy = -4
      when 521..540
        sframe = 521
        if @battle_anime_frame == sframe
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
          #battle_anime_change 0,8
          battle_anime_change 0,4
          @enex = 640
          @eney = STANDARD_ENEY
          @gy = 0
        end
        
        @gx = 18
      when 541..580
        sframe = 541
        if @battle_anime_frame == sframe
          battle_anime_change 0,8
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        end
        @gx = -24
      when 581..610
        @gx = 0
        battle_anime_change 0,0
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        rect = Rect.new(0, 96*5,96,96) #太
        @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
      when 611..709
        sframe = 611
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe
        battle_anime_change 0,1
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*6,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        rect = Rect.new(0, 96*7,96,96) #太
        @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
        
        @effect_anime_pattern = 331
      when 710
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @ray_color = 0
      when 711..737
        @effect_anime_pattern = 48
      when 738
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1245 #魔貫光殺砲(若者)
        back_x = 180
        back_y = 0
        ray_x = 358
        ray_y = 124
        
        color = Color.new(255,255,255,260)
    
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,5
        @ray_color = 0
        @chay = -160
        @chr_cutin_flag = false

      when 1..130
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 116
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(若者)") #ダメージ表示用
        rect = Rect.new(0, 0, 648, 64)
        
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 118
        Audio.se_stop if @battle_anime_frame == 130
        @tec_output_back = true if @battle_anime_frame == 130
        @output_anime_type = 1
        battle_anime_change 0,13
      when 131..220
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        
        if @battle_anime_frame == 160
          battle_anime_change 0,14
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 272
        end
      when 221
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 222..247
        ray_y = 134
        @effect_anime_pattern = 255
      when 248
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1248 #(バーダック)強力エネルギーは
      if @attackcourse == 0
        back_x = 218
        back_y = 32
        ray_x = 350
        ray_y = 124
        if $btl_progress >= 2
          back_x = 232
          back_y = 86
          backhai_no = 201
        else
          back_x = 218
          back_y = 32
          backhai_no = 101
        end
      else
        back_x = 190+24
        back_y = 32
        ray_x = 350-128
        ray_y = 124
      end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
      when 1..109
        back_anime_pattern backhai_no,back_x,back_y
      when 110..148
        Audio.se_stop if @battle_anime_frame == 110
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 110
        battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
        ray_x = 358
        ray_y = 118
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1249 #爆発波(バーダック)
      @ray_color = 3
      
      if @attackcourse == 0
        ray_x = 326
        ray_y = 96
        if $btl_progress >= 2
          back_x = 232
          back_y = 86
          backhai_no = 201
        else
          back_x = 218
          back_y = 32
          backhai_no = 101
        end


      else
        back_x = 210+24
        back_y = 32
        ray_x = 326-64
        ray_y = 96
      end
      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          end
          @output_anime_type = 1
          battle_anime_change 0,4
          #@ray_color = 0
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
          battle_anime_change 0,4
        when 101
          @chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          back_anime_pattern 2
        when 102..180
          back_anime_pattern 2
          battle_anime_change 0,5
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1251 #(バーダック)ファイナルリベンジャー
      if @attackcourse == 0
        ray_x = 300
        ray_y = 162
        if $btl_progress >= 2
          back_x = 232
          back_y = 86
          backhai_no = 201
        else
          back_x = 200
          back_y = 32
          backhai_no = 102
        end
      else
        back_x = 190+24
        back_y = 32
        ray_x = 350-128
        ray_y = 124
      end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
      when 1..80
        back_anime_pattern backhai_no,back_x,back_y
        
        #@effect_anime_pattern = 237
      when 81..120
        if @battle_anime_frame == 81
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        end 
        battle_anime_change 0,3
        @ax = 20
        @ay = -2
        #back_anime_pattern 102,back_x,back_y
        #ray_x = 300
        #ray_y = 156
        #@effect_anime_pattern = 235
      when 121..126
        
      when 127
        set_chr_display_out
        @chax = STANDARD_CHAX-40
        @chay = STANDARD_CHAY-26
        @output_anime_type = 1
        battle_anime_change 0,3
      when 128..144
        if @battle_anime_frame == 143
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          battle_anime_change 1,16
        end
        @ax = 20
        @ay = 2
        #@ray_color = 0
        #back_anime_pattern 101,back_x,back_y
      when 145..147
        @ax = 0
        @ay = 0
        @gx = -20
        @effect_anime_pattern = 121
        #back_anime_pattern 101,back_x,back_y
        #ray_x = 330
        #ray_y = 96
      when 148..150
        battle_anime_change 1,0
        @gx = 20
      when 151..160
        @gx = 0
      when 161..170
        @output_anime_type = 0
        battle_anime_change 0,16
        @ax = -20
        @ay = -4
      when 171..175
        @ax = 20
        @ay = 4
      when 176..180
        battle_anime_change 0,2
        @ax = 20
        @ay = 4
      when 181..183
        if @battle_anime_frame == 181
          Audio.se_play("Audio/SE/" + "Z1 打撃")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 121
          @gx = -16
        end
        @ax = 0
        @ay = 0
        
        battle_anime_change 1,16
      when 184..186
        if @battle_anime_frame == 184
         @gx = 16
        end
        battle_anime_change 1,0
      when 187..190
        @gx = 0
      when 191..200
        @output_anime_type = 0
        battle_anime_change 0,16
        @ax = -20
        @ay = 4
      when 201..205
        @ax = 20
        @ay = -4
      when 206..210
        battle_anime_change 0,3
        @ax = 20
        @ay = -4
      when 211..220
        if @battle_anime_frame == 211
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 121
        end
        @ax = 0
        @ay = 0
      when 221..240
        battle_anime_change 1,16
        @gx = -20
        @gy = -4
      when 241..259
        if @battle_anime_frame == 241
          @output_anime_type = 1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        end 
        battle_anime_change 0,3
        @ax = 20
        @ay = -4
      when 260
        #set_chr_display_out
        @chax = STANDARD_CHAX-120
        @chay = STANDARD_CHAY+70
        @enex = STANDARD_CHAX-40
        @eney = STANDARD_CHAY+46
        @output_anime_type = 1
        battle_anime_change 0,3
      when 261..275
        @gx = -20
        @gy = -2
      when 276..280
        @gx = -10
        @gy = -2
        @ax = 40
        @ay = -2
      when 281
        @chay = STANDARD_CHAY
        @eney = STANDARD_CHAY
        @ax = 0
        @ay = 0
        @gx = 0
        @gy = 0
        battle_anime_change 0,7
        Audio.se_play("Audio/SE/" + "ZG 打撃4")    # 効果音を再生する
      when 291..300
        @gx = -4
      when 301..311
        battle_anime_change 0,2
        battle_anime_change 1,17
        @gx = -20
        @gy = 2
      when 301..320
        @gx = -20
        @gy = 2
        @effect_anime_frame = 0
        ray_x = 240
        ray_y = 104
      when 321..339
        if @battle_anime_frame == 321
          @chay = -120
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
        end
        @effect_anime_pattern = 238
        ray_x = 190 + (@effect_anime_frame*20) 
        ray_y = 104 + (@effect_anime_frame*2)
      when 340
        set_chr_display_out
        @gx = 0
        @gy = 0
        @ax = 0
        @ay = 0
        ray_x = STANDARD_CHAX-40
        ray_y = STANDARD_CHAY-26
        @effect_anime_frame = 0
        battle_anime_change 1,16
        @enex = (CENTER_ENEX - 150)
        @eney = (STANDARD_ENEY - 20)
      when 341..355
        ray_x = STANDARD_CHAX-40 + (@effect_anime_frame*20)
        ray_y = STANDARD_CHAY-26 + (@effect_anime_frame*2)
        @gx = -10
        @gy = 2
      when 356
        @gx = 0
        @gy = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1252 #(バーダック)スピリッツキャノン
      if @attackcourse == 0
        back_x = 200
        back_y = 32
        ray_x = 300
        ray_y = 162
      else
        back_x = 190+24
        back_y = 32
        ray_x = 350-128
        ray_y = 124
      end
      barcut_x = 180
      barcut_y = 64
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        if $game_switches[504] == false || $partyc[@chanum] == 32
          battle_anime_change 0,4
        else
          @chr_cutin = false
          @chax = -100
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)スカウター有り")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        end
      when 1..60
        if $game_switches[504] == false || $partyc[@chanum] == 32
          back_anime_pattern 102,back_x,back_y
          @effect_anime_pattern = 237
        else
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)スカウター有り")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        end
      when 61..120
        if $game_switches[504] == false || $partyc[@chanum] == 32
          back_anime_pattern 102,back_x,back_y
          ray_x = 300
          ray_y = 156
          @effect_anime_pattern = 235
        else
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)スカウター有り")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          @chr_cutin = true if @battle_anime_frame == 120
          ray_x = 186
          ray_y = 220
          @effect_anime_pattern = 289
        end
      when 121..170
        @chax = TEC_CENTER_CHAX
        
        ray_x = 276
        ray_y = 140
        battle_anime_change 0,6
        @effect_anime_pattern = 235
      when 171
        Audio.se_stop
        battle_anime_change 0,2
        ray_x = -360
        ray_y = -96
      when 172
        #@ray_color = 0
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 206
        @effect_anime_frame = 0
        ray_x = -360
        ray_y = -96
        #back_anime_pattern 101,back_x,back_y
        
      when 173..210
        #back_anime_pattern 101,back_x,back_y
        @effect_anime_pattern = 206
        ray_x = 360
        if $btl_progress >= 2
          ray_y = 96
        else
          ray_y = 92
        end
      when 211
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 241
        set_chr_display_out
      when 262..288
        @effect_anime_pattern = 207
      when 289
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1269 #惑星戦士たちとの戦い(イベント用)
      if @attackcourse == 0
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      else
      back_x = 190+24
      back_y = 32
      ray_x = 350-128
      ray_y = 124
      end
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
      when 1..40
        if @battle_anime_frame == 1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        end 
        battle_anime_change 0,3
        @ax = 20
      when 41..46
        @ax = 0
      when 47
        @chax = STANDARD_CHAX-40
      when 48..64
        if @battle_anime_frame == 64
          @output_anime_type = 0
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
        end
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士1")
        @back_window.contents.blt(CENTER_ENEX+80,STANDARD_ENEY-48,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士2")
        @back_window.contents.blt(CENTER_ENEX+0,STANDARD_ENEY-68,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士3")
        @back_window.contents.blt(CENTER_ENEX+86,STANDARD_ENEY+48,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士4")
        @back_window.contents.blt(CENTER_ENEX+0,STANDARD_ENEY+68,picture,rect)
        @ax = 20
      when 65..140
        @ax = 0
        s_frame = 65
        y_mainasu = (@battle_anime_frame-s_frame)*16
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == s_frame     # 効果音を再生する
        rect = Rect.new(0, 96*16,96,96)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士1")
        @back_window.contents.blt(CENTER_ENEX+80,STANDARD_ENEY-48-y_mainasu,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士2")
        @back_window.contents.blt(CENTER_ENEX+0,STANDARD_ENEY-68-y_mainasu,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士3")
        @back_window.contents.blt(CENTER_ENEX+86,STANDARD_ENEY+48-y_mainasu,picture,rect)
        picture = Cache.picture("Z2_戦闘_敵_惑星戦士4")
        @back_window.contents.blt(CENTER_ENEX+0,STANDARD_ENEY+68-y_mainasu,picture,rect)
      when 141..180
        @chax = STANDARD_CHAX-40
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士2")
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY,picture,rect)
      when 181..260
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == 181
        rect = Rect.new(0, 96*1,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士2")
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY,picture,rect)
        ray_x = 312
        ray_y = 142
        @effect_anime_pattern = 284
      when 261
        @effect_anime_pattern = 285
        @effect_anime_frame = 0
        @chax = CENTER_CHAX
        battle_anime_change 0,0
      when 262..288
        
      when 289
        @effect_anime_pattern = 0
        Audio.se_stop
      when 290
        explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
        explosion_eff = 286
        Audio.se_play(explosion_se)    # 効果音を再生する
        @effect_anime_pattern = explosion_eff
        @chax = STANDARD_CHAX-24
      when 311..400
      
      when 401..460
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士2")
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY,picture,rect)
        if @battle_anime_frame % 5 == 0
          Audio.se_play("Audio/SE/" + "Z1 スカウター音")
        end
        
        if @battle_anime_frame == 460
          @tec_output_back_no = 1
        end
      when 461..550
        s_frame = 461
        y_mainasu = 0
        rect = Rect.new(0, 96*0,96,96)
        
        
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士2")
        if @battle_anime_frame == s_frame
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") 
          @chax = TEC_CENTER_CHAX-64
          @chay = -96
          @ay = 12
          battle_anime_change 0,16
        elsif @battle_anime_frame == s_frame + 14
          battle_anime_change 0,2
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          rect = Rect.new(0, 96*17,96,96)
          y_mainasu = (@battle_anime_frame-(s_frame+14))*12
        elsif @battle_anime_frame > s_frame + 14
          rect = Rect.new(0, 96*17,96,96)
          y_mainasu = (@battle_anime_frame-(s_frame+14))*12
        end
        if @battle_anime_frame == s_frame + 17
          @ay = 0
          @chay = STANDARD_CHAY
        end
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY+y_mainasu,picture,rect)
        
        if @battle_anime_frame == 550
          @tec_output_back_no = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
        end
      when 551..600
        @chax = STANDARD_CHAX-40
        battle_anime_change 0,0
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士1")
        @back_window.contents.blt(STANDARD_ENEX-96+8,STANDARD_ENEY-48,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士4")
        @back_window.contents.blt(STANDARD_ENEX-96+8,STANDARD_ENEY+48,picture,rect)
        rect = Rect.new(0, 96*2,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX+86,STANDARD_ENEY,picture,rect)
        @back_window.contents.fill_rect(320-2,64,6,228,wake_color)
      when 601..700
        @effect_anime_frame += 1 if @effect_anime_frame <= 10
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == 601
        @chax = STANDARD_CHAX-40
        rect = Rect.new(0, 96*1,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士1")
        @back_window.contents.blt(STANDARD_ENEX-96+8,STANDARD_ENEY-48,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士4")
        @back_window.contents.blt(STANDARD_ENEX-96+8,STANDARD_ENEY+48,picture,rect)
        rect = Rect.new(0, 96*3,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX+86,STANDARD_ENEY,picture,rect)
        
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
        rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(STANDARD_CHAX+96+88,STANDARD_ENEY+12,picture,rect)
        
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(STANDARD_ENEX-28-96-@effect_anime_frame*RAY_SPEED,STANDARD_ENEY-48+16,picture,rect)
        @back_window.contents.blt(STANDARD_ENEX-28-96-@effect_anime_frame*RAY_SPEED,STANDARD_ENEY+48+14,picture,rect)
        @back_window.contents.fill_rect(320-2,64,6,228,wake_color)
      when 701..743
        @chax = CENTER_CHAX
        @effect_anime_frame = 0 if @battle_anime_frame == 701
        @effect_anime_frame += 1 if @effect_anime_frame <= 43
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(-400,STANDARD_ENEY+12,picture,rect)
        rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(936-@effect_anime_frame*RAY_SPEED,STANDARD_ENEY-48+16,picture,rect)
        @back_window.contents.blt(936-@effect_anime_frame*RAY_SPEED,STANDARD_ENEY+48+14,picture,rect)
      when 744..850
        if @battle_anime_frame == 744
          @effect_anime_frame = 0
          @effect_anime_type = 0
          Audio.se_stop
          explosion_se = "Audio/SE/" + "Z1 爆発1" 
          explosion_eff = 287
          Audio.se_play(explosion_se)    # 効果音を再生する
          @effect_anime_pattern = explosion_eff
          @chax = STANDARD_CHAX-24
        end
        @effect_anime_type = 0 if @effect_anime_type == 4
        
        ray_x = 206
        ray_y = 104
      when 851..940
        s_frame = 851
        x_plus = (@battle_anime_frame - s_frame)*4
        @effect_anime_type = 0 if @effect_anime_type == 4
        ray_x = 206 + x_plus * 2
        ray_y = 104
        rect = Rect.new(0, 96*2,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX-40+x_plus,STANDARD_ENEY,picture,rect)
      when 941..1000
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 941
        rect = Rect.new(0, 96*2,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX-40+356,STANDARD_ENEY,picture,rect)
        @effect_anime_pattern = 288
      when 1001..1100
        s_frame = 1001
        x_plus = 0
        x_plus = 4 if @battle_anime_frame % 2 == 0
        if @battle_anime_frame == s_frame
          @effect_anime_pattern = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 強打")
          @chax = STANDARD_CHAX-40+356 -14
          battle_anime_change 0,16
        end
        
        rect = Rect.new(0, 96*2,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX-40+356+x_plus,STANDARD_ENEY,picture,rect)
      when 1101..1160
        @chax = STANDARD_CHAX-24 if @battle_anime_frame == 1101
        rect = Rect.new(0, 96*0,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士1")
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY,picture,rect)
        if @battle_anime_frame % 5 == 0
          Audio.se_play("Audio/SE/" + "Z1 スカウター音")
        end
      when 1161..1240
        if @battle_anime_frame == 1161
          @effect_anime_frame = 0
          @effect_anime_type = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 怪光線")
        end
        rect = Rect.new(0, 96*1,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士1")
        @back_window.contents.blt(TEC_CENTER_CHAX+0,STANDARD_ENEY,picture,rect)
        ray_x = 324
        ray_y = 146
        @effect_anime_pattern = 284
      when 1241..1284
        if @battle_anime_frame == 1241
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #Audio.se_stop 
          explosion_eff = 287
          @effect_anime_pattern = explosion_eff
          @chax = STANDARD_CHAX-24
        end
        @effect_anime_type = 0 if @effect_anime_type == 4
        
        ray_x = 206
        ray_y = 104
        @back_anime_frame += 1 if @back_anime_frame <= 43
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(936-@back_anime_frame*RAY_SPEED,STANDARD_ENEY+36,picture,rect)
      when 1285..1380
        s_frame = 1285
        x_plus = (@battle_anime_frame - s_frame) * 12
        if @battle_anime_frame == s_frame
          @effect_anime_frame = 0
          @effect_anime_type = 0
          Audio.se_stop
          explosion_se = "Audio/SE/" + "Z1 爆発1" 
          explosion_eff = 287
          Audio.se_play(explosion_se)    # 効果音を再生する
          @effect_anime_pattern = explosion_eff
          @chax = STANDARD_CHAX-24
        end
        ray_x = 206
        ray_y = 104
        @effect_anime_type = 0 if @effect_anime_type == 4
        rect = Rect.new(0, 96*4,96,96)
        picture = Cache.picture("Z2_戦闘_必殺技_敵_惑星戦士3")
        @back_window.contents.blt(STANDARD_CHAX-40+356-x_plus,STANDARD_ENEY,picture,rect)
      when 1381
        @effect_anime_pattern = 0
        @chax = STANDARD_CHAX-40+356
        battle_anime_change 0,0
      when 1551
        #@gx = 0
        #@gy = 0
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1270 #フリーザとの戦い(イベント用)
      if @attackcourse == 0
        back_x = 200
        back_y = 32
        ray_x = 300
        ray_y = 162
      else
        back_x = 190+24
        back_y = 32
        ray_x = 350-128
        ray_y = 124
      end
      barcut_x = 180
      barcut_y = 64
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        if $game_switches[504] == false
          battle_anime_change 0,4
        else
          @chr_cutin = false
          @chax = -100
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        end
      when 1..60
        if $game_switches[504] == false
          back_anime_pattern 102,back_x,back_y
          @effect_anime_pattern = 237
        else
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        end
      when 61..120
        if $game_switches[504] == false
          back_anime_pattern 102,back_x,back_y
          ray_x = 300
          ray_y = 156
          @effect_anime_pattern = 235
        else
          picture = Cache.picture("Z2_必殺技_スピリッツキャノン(バーダック)")
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          @chr_cutin = true if @battle_anime_frame == 120
          ray_x = 186
          ray_y = 220
          @effect_anime_pattern = 289
        end
      when 121..170
        @chax = TEC_CENTER_CHAX
        
        ray_x = 276
        ray_y = 140
        battle_anime_change 0,6
        @effect_anime_pattern = 235
      when 171
        Audio.se_stop
        battle_anime_change 0,2
        ray_x = -360
        ray_y = -96
      when 172
        #@ray_color = 0
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 206
        @effect_anime_frame = 0
        ray_x = -360
        ray_y = -96
        #back_anime_pattern 101,back_x,back_y
        
      when 173..210
        #back_anime_pattern 101,back_x,back_y
        @effect_anime_pattern = 206
        ray_x = 360
        ray_y = 92
      when 211
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 241..303
        s_frame = 241
        @back_window.contents.fill_rect(640-(@battle_anime_frame-s_frame)*8,64,6,228,wake_color)
        @ax = -4
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(1020-(@battle_anime_frame-s_frame)*8,@chay,picture,rect)
      when 304..360
        @ax = 0
        @back_window.contents.fill_rect(144,64,6,228,wake_color)
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(1020-496,@chay,picture,rect)
      when 361..400
        @back_window.contents.fill_rect(144,64,6,228,wake_color)
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 1*96,96,96)
        @back_window.contents.blt(1020-496,@chay,picture,rect)
      when 401..600
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾") if @battle_anime_frame == 401
        @back_window.contents.fill_rect(144,64,6,228,wake_color)
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 1*96,96,96)
        @back_window.contents.blt(1020-496,@chay,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        
        case @effect_anime_type
        
        when 0
          @back_window.contents.blt(1020-496-34,@chay-54,picture,rect)
        when 1
          @back_window.contents.blt(1020-496-34,@chay-54-2,picture,rect)
        when 2
          @back_window.contents.blt(1020-496-34,@chay-54-2-6,picture,rect)
        when 3
          @back_window.contents.blt(1020-496-34,@chay-54-2-6-16,picture,rect)
        when 4
          @back_window.contents.blt(1020-496-34,@chay-54-2-6-16-16,picture,rect)
        when 5
          @back_window.contents.blt(1020-496-34,@chay-54-2-6-16-16-16,picture,rect)
        when 6
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(大玉)")
          rect = Rect.new(0, 0,256,256)
          @back_window.contents.blt(1020-496-34-64,@chay-54-2-6-16-16-16-128,picture,rect)
        end
        @effect_anime_frame += 1
        if @effect_anime_frame == 25
          @effect_anime_frame = 0
          @effect_anime_type += 1 if @effect_anime_type <=5
        end
      when 601..650
        s_frame = 601
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @back_window.contents.fill_rect(144,64,6,228,wake_color)
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 1*96,96,96)
        @back_window.contents.blt(1020-496+(@battle_anime_frame-s_frame)*8,@chay,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_デスボール(大玉)")
        rect = Rect.new(0, 0,256,256)
        @back_window.contents.blt(1020-496-34-64+(@battle_anime_frame-s_frame)*8,@chay-54-2-6-16-16-16-128,picture,rect)
      when 651..790
        s_frame = 651
        hanix = (@battle_anime_frame-(s_frame-1))*8
        if hanix > 222
          hanix = 222
        end
        @back_window.contents.fill_rect(144,64,6,228,wake_color)
        picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾3(青)")
        rect = Rect.new(222-hanix, 0,hanix,134)
        if @battle_anime_frame >= 674
          @back_window.contents.blt(150+(@battle_anime_frame-674)*8,92,picture,rect)
        else
          @back_window.contents.blt(150,92,picture,rect)
        end
        
        case @battle_anime_frame
        
        when  671..680 
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉)")
          rect = Rect.new(0, 0,400,512)
          @back_window.contents.blt(640-(@battle_anime_frame-671)*8,-168,picture,rect)
        when 681..1200
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉)")
          rect = Rect.new(0, 0,400,512)
          @back_window.contents.blt(640-80,-168,picture,rect)
        end
        Audio.se_play("Audio/SE/" + "Z1 分身") if @battle_anime_frame == 701
        
        if @battle_anime_frame == 730
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
        end
        if @battle_anime_frame >= 730
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax+64,@chay-16,picture,rect)
        end
      when 791..850
        @chax = -100
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 1*96,96,96)
        @back_window.contents.blt(TEC_CENTER_CHAX,@chay,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)")
        rect = Rect.new(0, 0,512,250)
        @back_window.contents.blt(TEC_CENTER_CHAX-228,@chay-280,picture,rect)
      when 851..900
        s_frame = 851
        Audio.se_play("Audio/SE/" + "Z1 繰気弾") if @battle_anime_frame == s_frame
        hanix = (@battle_anime_frame-(s_frame))*4
        picture = Cache.picture("Z2_戦闘_敵_フリーザ(乗り物)")
        rect = Rect.new(0, 2*96,96,96)
        @back_window.contents.blt(TEC_CENTER_CHAX,@chay,picture,rect)
        picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)")
        rect = Rect.new(0, 0,512,250)
        @back_window.contents.blt(TEC_CENTER_CHAX-228,@chay-280,picture,rect)
        #@back_window.contents.blt(TEC_CENTER_CHAX-228-hanix,@chay-280+hanix/6,picture,rect)
      when 901..1200
        s_frame = 901
        
        case @battle_anime_frame
        
        when s_frame..1100
          #Audio.se_play("Audio/SE/" + "Z1 衝撃波") if @battle_anime_frame == s_frame
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉)")
          rect = Rect.new(0, 0,800,512)
          @back_window.contents.blt(640-(@battle_anime_frame-s_frame)*4,-150,picture,rect)
        else
          wake_color = Color.new(255,255,255,256)
          @back_window.contents.fill_rect(0,0,640,360,wake_color)
        end
      when 1201..1450
        s_frame = 1201
        
        if @battle_anime_frame == s_frame
          @chax = 96
          battle_anime_change 0,0
        end
        @chax = -200
        
        picture = Cache.picture("Z2_戦闘_バーダック")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(96,@chay,picture,rect)
        
        case @battle_anime_frame
        
        when s_frame..1400
          Audio.se_play("Audio/SE/" + "Z1 衝撃波") if @battle_anime_frame == s_frame
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉)")
          rect = Rect.new(0, 0,800,512)
          @back_window.contents.blt(640-(@battle_anime_frame-s_frame)*4,-150,picture,rect)
        else
          wake_color = Color.new(255,255,255,256)
          @back_window.contents.fill_rect(0,0,640,360,wake_color)
        end
        if @battle_anime_frame == 1322
          
          #@output_anime_type = 0
          #@ax = -4
          #battle_anime_change 0,17
        end
        
        
      when 1451
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1326 #カメハメ波(亀仙人)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,3
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @ax = 2 if @battle_anime_frame == 47 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 50 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 53 && $btl_progress >= 2
        @effect_anime_pattern = 203
        ray_x = 340
        ray_y = 140
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 110
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 111
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1328 #萬國驚天掌
      
      
      ray_x = 340
      ray_y = 150
      if $btl_progress == 2
        backhai_no = 201
        back_x = 218
        back_y = 88
      else
        backhai_no = 101
        back_x = 200
        back_y = 32
      end
        
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 1
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        battle_anime_change 0,5
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 283
        #back_anime_pattern 101,back_x,back_y
      when 91..128
        #back_anime_pattern 101,back_x,back_y
      when 129
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 44
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1329 #MAXパワーカメハメ波

        ray_x = 340
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 218
        back_y = 88
        ray_y = 96
      else
        backhai_no = 102
        back_x = 184
        back_y = 32
        ray_y = 90
      end
      case @battle_anime_frame
      when 0 #初期化

        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
        @output_anime_type = 1
        battle_anime_change 0,6
        
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern backhai_no,back_x,back_y
      when 91..140
        back_anime_pattern backhai_no,back_x,back_y
      when 141
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 206
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
      when 142..179
        if $btl_progress == 2
          @ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @ray_color = 0
        @ax = 2 if @battle_anime_frame == 142 && $btl_progress >= 2
        @ax = -2 if @battle_anime_frame == 145 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 148 && $btl_progress >= 2
      when 180
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 190
        set_chr_display_out
      when 191..217
        @effect_anime_pattern = 207
      when 218
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1349 #エネルギーボール

      ray_x = 340
      ray_y = 96
      @ray_color = 3
      if $btl_progress == 2
        backhai_no = 201
        back_x = 213
        back_y = 88
      else
        backhai_no = 101
        back_x = 198
        back_y = 32
      end
      case @battle_anime_frame
      
      when 0
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 1..60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 28
      when 70..84
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
      when 85
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 86..146
        back_anime_pattern 48,TEC_CENTER_CHAX,STANDARD_CHAY + 28
      when 147
        @chay = STANDARD_CHAY
        @chax -= 10
      when 157..569
        sframe = 157
        akifra = 8
        case @battle_anime_frame
        
        when sframe
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when sframe + (akifra * 1 - 1)
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,1
        when sframe + (akifra * 2 - 1)  
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,4
          battle_anime_change 1,17
        when sframe + 53
          @output_anime_type = 1
          battle_anime_change 0,2
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          
        when sframe + 54..sframe + 182
          back_anime_pattern backhai_no,back_x,back_y
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when sframe + 183..sframe + 273
          Audio.se_stop if @battle_anime_frame == sframe + 183
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe + 183
          battle_anime_change 0,3
          
          
          @effect_anime_frame +=1
          
          if @effect_anime_frame >= 9
            @effect_anime_frame = 1
            if @effect_anime_type < 3
              @effect_anime_type += 1
            end
          end
          
          picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)")
          rect = Rect.new(128*@effect_anime_type, 0,128,128)
          @back_window.contents.blt(@chax-4,@chay-84,picture,rect)
        
        when sframe + 274..sframe + 393
          Audio.se_stop if @battle_anime_frame == sframe + 274
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe + 274
          battle_anime_change 0,5
          picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)")
          rect = Rect.new(128*@effect_anime_type, 0,128,128)
          @back_window.contents.blt(@chax-4+12*(@battle_anime_frame-(sframe + 274)),@chay-84-2*(@battle_anime_frame-(sframe + 274)),picture,rect)
          
        when sframe + 394
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 ブン")
        end
        
        if sframe + (akifra * 2 - 1) <= @battle_anime_frame
          @enex += 16
        end
      when 570
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @tec_output_back = false
        battle_anime_change 1,16
      when 581..612
        sframe = 581
        #Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        back_anime_pattern 9
        picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)")
        rect = Rect.new(128*3, 0,128,128)
        @back_window.contents.blt(@enex-8,-128+6*(@battle_anime_frame-sframe),picture,rect)
      when 613
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1351 #大猿変身
      
      case $partyc[@chanum]
      
      when 27 #トーマ
        oozarucha = 1
      when 28 #セリパ
        oozarucha = 2
      when 29 #トテッポ
        oozarucha = 3
      when 30 #パンブーキン
        oozarucha = 4
      end
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 満月")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
        @tec_output_back = false
        @chr_cutin = false
      when 1..200
        @chay = -200 #キャラ画面範囲外へ
        picture = Cache.picture("Z1_戦闘_必殺技_満月") #ダメージ表示用
        mangetu_rect_x = @battle_anime_frame / 8
        mangetu_rect_x = 10 if mangetu_rect_x > 10
        mangetu_rect_y = @battle_anime_frame * 2
        mangetu_rect_y = 48 if mangetu_rect_y > 48
        rect = Rect.new(48*mangetu_rect_x, 0,48,mangetu_rect_y)
        
        hiku_frame = @battle_anime_frame*2
        hiku_frame = 300 if @battle_anime_frame > 150 
        mangetu_x = 596 - hiku_frame
        mangetu_y = 354 - hiku_frame
        @back_window.contents.blt(mangetu_x,mangetu_y,picture,rect)
        #on_oozaru 1
      when 201..390
        battle_anime_change 0,0
        @chay = STANDARD_CHAY
        if @battle_anime_frame == 201
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        if @battle_anime_frame <= 201
          #rect = Rect.new(0, 384,96,112)
          #@back_window.contents.blt(266,118,picture,rect)
          #@chay = -120 #キャラ画面範囲外へ
          
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 209
          #@chay = STANDARD_CHAY
          off_oozaru oozarucha
          $cha_bigsize_on[@chanum] = false
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
        elsif @battle_anime_frame <= 217
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 225
          off_oozaru oozarucha
          $cha_bigsize_on[@chanum] = false
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
        elsif @battle_anime_frame <= 233
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 241
          off_oozaru oozarucha
          $cha_bigsize_on[@chanum] = false
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
        elsif @battle_anime_frame <= 249
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 257
          off_oozaru oozarucha
          $cha_bigsize_on[@chanum] = false
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
        elsif @battle_anime_frame <= 265
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 266
          sframe = 266
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
            on_oozaru oozarucha
            $cha_bigsize_on[@chanum] = true
          end
          battle_anime_change 0,1
          
        elsif @battle_anime_frame <= 330
          
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,1
          @chax = TEC_CENTER_CHAX + 48
        elsif @battle_anime_frame <= 390
          on_oozaru oozarucha
          $cha_bigsize_on[@chanum] = true
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX + 48
        end
      when 391
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1359 #ヒステリックサイヤンレディ
        #back_x = 228
        back_x = 216
        back_y = 88
        ray_x = 320-90
        ray_y = 246-198
        #ray_x = 228
        #ray_y = 134
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      
      case @battle_anime_frame
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 1..40
        #back_anime_pattern 201,back_x,back_y
        #Audio.se_stop if @battle_anime_frame == 128
        @ax = 24
        battle_anime_change 0,6
      when 41..56
        @chax = -120 if @battle_anime_frame == 41
        @enex = CENTER_ENEX if @battle_anime_frame == 41
        @eney = STANDARD_ENEY if @battle_anime_frame == 41
      when 57..150
        
        sframe = 57
        akifra = 12
        
        case @battle_anime_frame
        
        when sframe,sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6
          @ax = 0
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        
        case @battle_anime_frame
        
        when sframe..sframe+1,sframe + akifra * 1..sframe + akifra * 1+1,sframe + akifra * 2..sframe + akifra * 2+1,sframe + akifra * 3..sframe + akifra * 3+1,sframe + akifra * 4..sframe + akifra * 4+1,sframe + akifra * 5..sframe + akifra * 5+1,sframe + akifra * 6..sframe + akifra * 6+1
          @enex += 12
          battle_anime_change 1,16
        when sframe+2..sframe+3,sframe + akifra * 1+2..sframe + akifra * 1+3,sframe + akifra * 2+2..sframe + akifra * 2+3,sframe + akifra * 3+2..sframe + akifra * 3+3,sframe + akifra * 4+2..sframe + akifra * 4+3,sframe + akifra * 5+2..sframe + akifra * 5+3,sframe + akifra * 6+2..sframe + akifra * 6+3
          @enex -= 12
        end
        
      when 151..169
        sframe = 151
        case @battle_anime_frame
        
        when 151
          battle_anime_change 0,6
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @chay -= 12
        when 152..154
          @chay -= 12
        when 155..156
          @chay -= 8
          @chax += 8
        when 157..162
          @chax += 12
        when 163..164
          @chay += 8
          @chax += 8
        when 165..168
          @chay += 12
        when 169
          battle_anime_change 0,7
          Audio.se_play("Audio/SE/" + "ZG 打撃5")
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
      when 170..189
        @chax += 24
        @enex += 24
        battle_anime_change 1,17
      when 190
        @chax = -120
        @enex = -184
      when 191..208
        @chax += 24
        @enex += 24
      when 209
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1368 #アングリーアタック

      ray_x = 340
      ray_y = 96
      @ray_color = 3
      if $btl_progress == 2
        backhai_no = 201
        back_x = 213
        back_y = 88
      else
        backhai_no = 101
        back_x = 198
        back_y = 32
      end
      case @battle_anime_frame
      
      when 0
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 1..60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 28
      when 70..84
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
      when 85
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 86..146
        back_anime_pattern 48,TEC_CENTER_CHAX,STANDARD_CHAY + 28
      when 147
        @chay = STANDARD_CHAY
        @chax -= 10
      when 157..279
        sframe = 157
        akifra = 12
        case @battle_anime_frame
        
        when sframe
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,2
          battle_anime_change 1,16
        when sframe + akifra * 1,sframe + akifra * 4
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,1
        when sframe + akifra * 2 ,sframe + akifra * 5
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,4
        when sframe + akifra * 3,sframe + akifra * 6
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,3
        when sframe + akifra * 7
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          battle_anime_change 0,2
          battle_anime_change 1,17
        end
        
        case @battle_anime_frame
        
        when sframe..sframe+1,sframe + akifra * 1..sframe + akifra * 1+1,sframe + akifra * 2..sframe + akifra * 2+1,sframe + akifra * 3..sframe + akifra * 3+1,sframe + akifra * 4..sframe + akifra * 4+1,sframe + akifra * 5..sframe + akifra * 5+1,sframe + akifra * 6..sframe + akifra * 6+1
          @enex += 12
          battle_anime_change 1,16
        when sframe+2..sframe+3,sframe + akifra * 1+2..sframe + akifra * 1+3,sframe + akifra * 2+2..sframe + akifra * 2+3,sframe + akifra * 3+2..sframe + akifra * 3+3,sframe + akifra * 4+2..sframe + akifra * 4+3,sframe + akifra * 5+2..sframe + akifra * 5+3,sframe + akifra * 6+2..sframe + akifra * 6+3
          @enex -= 12
        when sframe + akifra * 7..sframe + akifra * 10
          @enex += 16
        end
      when 280
        @output_anime_type = 1
        battle_anime_change 0,2
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
      when 281..408
        back_anime_pattern backhai_no,back_x,back_y
        Audio.se_stop if @battle_anime_frame == 408
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 408
      when 409..450
        @tec_kyouda_se = true
        battle_anime_change 0,4
        @chax += 16
      when 460
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @chax = -120
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        battle_anime_change 1,0
      when 470
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
      when 471..493
        @chax += 16
      when 494
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1376 #マッシブカタパルト

      ray_x = 340
      ray_y = 96
      @ray_color = 3
      if $btl_progress == 2
        backhai_no = 201
        back_x = 213
        back_y = 88
      else
        backhai_no = 101
        back_x = 198
        back_y = 32
      end
      case @battle_anime_frame
      
      when 0
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 1..60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 28
      when 70..84
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
      when 85
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
      when 86..146
        back_anime_pattern 48,TEC_CENTER_CHAX,STANDARD_CHAY + 28
      when 147
        @chay = STANDARD_CHAY
        @chax -= 10
      when 157..229
        sframe = 157
        akifra = 4

        case @battle_anime_frame
        
        when sframe
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          @output_anime_type = 1
          battle_anime_change 0,3
          battle_anime_change 1,16
        when sframe + akifra * 2 ,sframe + akifra * 4 ,sframe + akifra * 6 ,sframe + akifra * 8 ,sframe + akifra * 10 ,sframe + akifra * 12 ,sframe + akifra * 14
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          battle_anime_change 0,3
          @chax += 12
        when sframe + akifra * 1 ,sframe + akifra * 3 ,sframe + akifra * 5 ,sframe + akifra * 7 ,sframe + akifra * 9 ,sframe + akifra * 11 ,sframe + akifra * 13
          #Audio.se_play("Audio/SE/" + "ZG 打撃3")
          battle_anime_change 0,6
          @chax -= 12
        when sframe + akifra * 15
          @ax = -16
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 0
          battle_anime_change 0,16
        end

        case @battle_anime_frame
        
        when sframe..sframe+1,sframe + akifra * 2..sframe + akifra * 2+1,sframe + akifra * 4..sframe + akifra * 4+1,sframe + akifra * 6..sframe + akifra * 6+1,sframe + akifra * 8..sframe + akifra * 8+1,sframe + akifra * 10..sframe + akifra * 10+1,sframe + akifra * 12..sframe + akifra * 12+1,sframe + akifra * 14..sframe + akifra * 14+1
          @enex += 12
          battle_anime_change 1,16
        when sframe+2..sframe+3,sframe + akifra * 2+2..sframe + akifra * 2+3,sframe + akifra * 4+2..sframe + akifra * 4+3,sframe + akifra * 6+2..sframe + akifra * 6+3,sframe + akifra * 8+2..sframe + akifra * 8+3,sframe + akifra * 10+2..sframe + akifra * 10+3,sframe + akifra * 12+2..sframe + akifra * 12+3,sframe + akifra * 14+2..sframe + akifra * 14+3
          @enex -= 12
        end
      when 230
        @ax = 0
      when 258
        @ax = 24
        @output_anime_type = 1
        battle_anime_change 0,4
      when 262
        @output_anime_type = 0
        battle_anime_change 0,2
      
      when 266
        @tec_kyouda_se = true
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1801 #師弟の絆
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        @effect_anime_pattern = 84
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18  #ゴハン
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40..59
        @effect_anime_pattern = 85
      when 60..100
        @effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 4
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,2
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,1
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,4
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -120 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 18 if @battle_anime_frame == 225 && ($super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true)
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
      when 252
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 258
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 268
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
        @effect_anime_frame = 0
      when 274..293
        @gx = -18
        @effect_anime_pattern = 121
        @gx = 0 if @battle_anime_frame == 293
        @eney = -200 if @battle_anime_frame == 293
        @chay = -120 if @battle_anime_frame == 293
        battle_anime_change 1,0 if @battle_anime_frame == 293
        @back_anime_type = 0
        @back_anime_frame = 0
      when 294..353
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        back_anime_pattern 52
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        back_anime_pattern 53
        @effect_anime_pattern = 246
      when 415 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 247
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1803 #サイヤンアタック(ゴクウ＆バーダック)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      
      if @btl_ani_tokusyu_flag == false && ($partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32)
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 112
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 3 if @battle_anime_frame == 60
        @btl_ani_cha_chg_no = 14 if @battle_anime_frame == 60 && $super_saiyazin_flag[1] == true
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,4
          battle_anime_change 0,0 if $super_saiyazin_flag[1] == true
          @ray_color = 0
        when 1..89
          back_x = 220
          back_y = 32
          back_anime_pattern 101,back_x,back_y
        when 90
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          @chay = -120
          back_x = 220
          back_y = 32
          back_anime_pattern 101,back_x,back_y
        when 91..130
            back_x = 220
            back_y = 32
            back_anime_pattern 101,back_x,back_y
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(@chax + 20,144,picture,rect)

          else
            
          end
          
        when 131
          #set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
        when 132..159
          #back_anime_pattern 1
          @effect_anime_pattern = 205
        when 160..178
          Audio.se_play("Audio/SE/" + "Z3 跳ね返し")  if @battle_anime_frame == 160
          battle_anime_change 1,16
          @gx = -18
          @effect_anime_pattern = 205
          @effect_anime_frame = 0 if @battle_anime_frame == 178
          #@gx = 0 if @battle_anime_frame == 178
          @enex = -120 if @battle_anime_frame == 178
          
        when 179..198
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 179
          @gx = -18
          battle_anime_change 1,17
          @effect_anime_pattern = 248
        when 199..200
          @effect_anime_pattern = 0
          @output_anime_type = 1
          @gx = -18
        when 201..207
          battle_anime_change 0,8 if @battle_anime_frame == 201
          battle_anime_change 0,11 if @battle_anime_frame == 201 && $super_saiyazin_flag[1] == true
          @chax = STANDARD_ENEX + 10 if @battle_anime_frame == 201
          @chay = STANDARD_CHAY if @battle_anime_frame == 201
          #@chay = STANDARD_CHAY if @battle_anime_frame == 201
          @ax = -18
          @gx = -18
        when 208
          @ax = 0
          @gx = 4
          #@output_anime_type = 1
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
        when 209
          @gx = 0
          @effect_anime_frame = 0
          @output_anime_type = 1
        when 220..270
          @effect_anime_pattern = 87
           Audio.se_play("Audio/SE/" + "Z3 跳ね返し") if @battle_anime_frame == 270
        when 271..298
          battle_anime_change 1,17
          @effect_anime_pattern = 0
          @gx = 18
        when 299
          @chay = -120
          @eney = -200
          @effect_anime_frame = 0
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 16
          @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true
          battle_anime_change 0,4
          @gx = 0
        when 300
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          @output_anime_type = 1
          @ray_color = 3
          @chay = STANDARD_CHAY
          @chax = TEC_CENTER_CHAX
          battle_anime_change 0,4
        when 301..360
          back_anime_pattern 102,back_x,back_y
          @effect_anime_pattern = 237
        when 361..420
          back_anime_pattern 102,back_x,back_y
          ray_x = 300
          ray_y = 156
          @effect_anime_pattern = 235
        when 421..470
          ray_x = 276
          ray_y = 140
          battle_anime_change 0,6
          @effect_anime_pattern = 235
        when 471
          Audio.se_stop
          battle_anime_change 0,2
          ray_x = -360
          ray_y = -96
        when 472
          #@ray_color = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 206
          @effect_anime_frame = 0
          ray_x = -360
          ray_y = -96
          #back_anime_pattern 101,back_x,back_y
          
        when 473..510
          #back_anime_pattern 101,back_x,back_y
          @effect_anime_pattern = 206
          ray_x = 360
          if $btl_progress >= 2
            ray_y = 96
          else
            ray_y = 90
          end
        when 511
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 541
          set_chr_display_out
          @enex = (STANDARD_ENEX - 8) + 18*11
          #@gx = 18
        when 562..588
          @gx = 18
          @effect_anime_pattern = 207
        when 589
          #p CENTER_ENEX,@enex
          #@enex = CENTER_ENEX
          @gx = 0
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 1804 #ダブル衝撃破
        ray_x = 328
        ray_y = 148
        @ray_color = 0
        idougo = 212+24
      idouryou = 8
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
            @scombo_cha1 = 10
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
            back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY + 50
          elsif $partyc[@chanum.to_i] == 10  #チチ
            @scombo_cha1 = 3
            @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = +5
            else
              @ay = 0
            end
            back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY - 50
          end
          
        when 40..59
          if $partyc[@chanum.to_i] == 10 && @battle_anime_frame == 40
            @chay -= 100
          end
          @scombo_cha1 = 10
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 3
          @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
          back_anime_pattern 116,@chax,STANDARD_CHAY + 50
          #back_anime_pattern 40
        when 60
          Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @ray_color = 0
          #back_anime_pattern 41
          @output_anime_type = 1
          battle_anime_change 0,1
          @scombo_cha1_anime_type = 1
          back_anime_pattern 116,@chax,STANDARD_CHAY + 50
        when 61..119
          back_anime_pattern 116,@chax,STANDARD_CHAY + 50
        when 120
          @tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          set_chr_display_out
          @effect_anime_frame = 0
        when 121..179
          back_anime_pattern 1
        when 180
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          @tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          set_chr_display_out
          @effect_anime_pattern = 0
        when 1..59
          back_anime_pattern 1
        when 60
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1805 #捨て身の攻撃
      ray_x = 300
      ray_y = 96
      #@scombo_cha_anime_frame = 0
      #@scombo_cha1_anime_type = 0
      #@scombo_cha2_anime_type = 0
      #@scombo_cha3_anime_type = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @chay = -120
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14
          back_anime_pattern 110
        else
          back_anime_pattern 113
        end
      when 1..39
        @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14
          back_anime_pattern 110
          back_anime_pattern 111
        else
          back_anime_pattern 112
          back_anime_pattern 113
        end
      when 40..70
        back_anime_pattern 110
        back_anime_pattern 111
      when 71 #初期化
        @ax = 0
        @chay = -200 #キャラ画面範囲外へ
        @ray_color = 0
        @scombo_cha1_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @effect_anime_frame = 0
        @effect_anime_pattern = 201
        back_anime_pattern 110
        back_anime_pattern 111
      when 72..109
        back_anime_pattern 110
        back_anime_pattern 111
      when 110
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
        @effect_anime_pattern = 59
        @ray_color = 1
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
        @scombo_cha2_anime_type = 5
      when 111..149
        
        @ray_color = 1
        @effect_anime_pattern = 59
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
      when 150
        @effect_anime_pattern = 0
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        #@effect_anime_pattern = 55
        
        @ray_color = 1
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
      when 151..179
        
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
      when 180
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
      when 181..210
        if $btl_progress == 2
          back_x = 24 + 30
          back_y = 32 + 54
          back_anime_pattern 201,back_x,back_y
        else
          back_x = 24
          back_y = 32
          back_anime_pattern 102,back_x,back_y
        end
        back_anime_pattern 111
      when 211
        @ray_color = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 202
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 232
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
      when 233
        battle_anime_change 1,16
        @gy = -12
      when 240
        battle_anime_change 1,0
        @gy = 0
      when 250
        @effect_anime_pattern = 58
      when 270
        Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
        @effect_anime_type = 0
        @effect_anime_frame = 0
      when 271..299
        if @battle_anime_frame == 271 || @battle_anime_frame == 272
          @gx = -4
        elsif @battle_anime_frame == 273 || @battle_anime_frame == 274
          @gx = 4
        else
        #  @gx = 0
        end
        @effect_anime_pattern = 0
        back_anime_pattern 19
      when 300
        @tec_output_back = true
        @eney = -200
        @ray_color = 1 
        back_anime_pattern 111
        @scombo_cha2_anime_type = 6
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
      when 301..360
        #@effect_anime_pattern = 57
        back_anime_pattern 111
        ray_x = 192
        ray_y = 120
        @effect_anime_pattern = 272#214
      when 361
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 362
        set_chr_display_out
        @effect_anime_frame = 0
        @gx =0
        @back_anime_type = 0
        @back_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
      when 363..389
        ray_y = 140
        @effect_anime_pattern = 255#215
        back_anime_pattern 20
      when 390
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1806 #カメハメ乱舞
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        @effect_anime_pattern = 63
        if $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
        end
      
        
      when 40
          @ax = 0
          @ay = 0
        @effect_anime_pattern = 64
      when 42
        #@ax = -2 if $partyc[@chanum.to_i] == 6  #クリリン
      when 43
        #@ax = 0 if $partyc[@chanum.to_i] == 6  #クリリン
        
      when 44
        #@ax = 2 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 45
        #@ax = 0 if $partyc[@chanum.to_i] == 7  #ヤムチャ
      when 60
        #back_anime_pattern 8
        @chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @effect_anime_frame = 0
        @effect_anime_pattern = 65
      when 61..189
        #back_anime_pattern 8
      when 190
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
      when 191..299
        #back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 302..328
        @effect_anime_pattern = 66
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1807 #操気円斬
        if $btl_progress == 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54
        else
          backhai_no = 101
          back_x = 204
          back_y = -18
        end
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        @effect_anime_pattern = 78
        if $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40
          @ax = 0
          @ay = 0
        if $partyc[@chanum.to_i] == 6
          @btl_ani_cha_chg_no = 7
          @chay = STANDARD_CHAY - 50
        end
        @effect_anime_pattern = 79
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
          @output_anime_type = 1
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
      when 150
        Audio.se_stop
        battle_anime_change 0,4
      when 160
        battle_anime_change 0,5
      when 170
        battle_anime_change 0,6
      when 180
        battle_anime_change 0,7
      when 190
        battle_anime_change 0,6
      when 200
        battle_anime_change 0,8
      when 210
        battle_anime_change 0,6
      when 220
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,6
        @effect_anime_frame = 0
        back_anime_pattern 31
        @effect_anime_pattern = 220
      when 221..261
        back_anime_pattern 31
        #back_anime_pattern 101,back_x,back_y
      when 262
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chay = -120
        #set_chr_display_out
      when 263..349
        @effect_anime_pattern = 72
        yokeru1_hazimaru = 300
        yokeru1_owaru = 310
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -4 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
        #p @battle_anime_frame
      when 350
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 351..399
        @effect_anime_pattern = 73
        yokeru1_hazimaru = 360
        yokeru1_owaru = 370
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = 6 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = 8 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 400
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 401..429
        @effect_anime_pattern = 74
        yokeru1_hazimaru = 409
        yokeru1_owaru = 419
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -2 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 430
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 431..459
        @effect_anime_pattern = 75
        yokeru1_hazimaru = 434
        yokeru1_owaru = 446
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = 8 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = -6 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 460
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 461..499
        @effect_anime_pattern = 76
        yokeru1_hazimaru = 468
        yokeru1_owaru = 474
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == yokeru1_hazimaru
        @gx = -2 if @battle_anime_frame >= yokeru1_hazimaru
        @gy = 16 if @battle_anime_frame >= yokeru1_hazimaru
        @gx = 0 if @battle_anime_frame >= yokeru1_owaru
        @gy = 0 if @battle_anime_frame >= yokeru1_owaru
      when 500
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @enex = CENTER_ENEX
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
      when 501..510
        @chay = STANDARD_CHAY-50
        battle_anime_change 0,5
        back_anime_pattern 32
        #@effect_anime_pattern = 77
      when 511..520
        back_anime_pattern 33
      when 521..540
        back_anime_pattern 34
      when 541..550
        back_anime_pattern 35
        battle_anime_change 0,6
        @effect_anime_frame = 0
      when 551..589
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")  if @battle_anime_frame == 551   # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気円斬")  if @battle_anime_frame == 551  # 効果音を再生する
        back_anime_pattern 35
        battle_anime_change 0,6
        if $btl_progress == 2
          @effect_anime_pattern = 276
        else
          @effect_anime_pattern = 218
        end
      when 590
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
        @back_anime_frame = 0
      when 591..637
        if $btl_progress == 2
          @effect_anime_pattern = 277
        else
          @effect_anime_pattern = 243
        end
        back_anime_pattern 30
      when 638
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1808 #願いを込めた元気弾
        back_x = 190
        back_y = 36
        ray_x = 340
        ray_y = 112
        @ray_color = 0
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 5
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 112
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 3 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
      else
        case @battle_anime_frame
        when 1 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,5
          @ray_color = 0
          @ax = -8
          @btl_ani_cha_chg_no = 3
        when 2..89
          @ax = 0
          back_anime_pattern 103,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          
          battle_anime_change 0,6
          
          #back_anime_pattern 103,back_x,back_y
        #when 91..140
          #back_anime_pattern 102,back_x,back_y
        when 111
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          if $btl_progress == 2
            battle_anime_change 0,13
          else
            battle_anime_change 0,1
          end
          
          @effect_anime_pattern = 208
          #back_anime_pattern 102,back_x,back_y
        when 112..149
          #back_anime_pattern 102,back_x,back_y
        when 150
          if $btl_progress == 2
            battle_anime_change 0,13
          else
            battle_anime_change 0,1
          end
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 160
          set_chr_display_out
        when 161
          @effect_anime_pattern = 209
        when 180
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        when 181
          battle_anime_change 1,16
          @gy = -12
        when 188
          battle_anime_change 1,0
          @gy = 0
          @effect_anime_pattern = 209
          @btl_ani_cha_chg_no = 5
          @output_anime_type = 1
          battle_anime_change 0,4
        when 231
          @chr_cutin = false
          #@chr_cutin_flag = true
          #@chr_cutin_mirror_flag = true
          @tec_output_back = false
          @eney = -200 #キャラ画面範囲外へ
          @chay = STANDARD_CHAY
          #battle_anime_change 1,1
          @effect_anime_frame = 0
          @effect_anime_pattern = 209
        when 246
          battle_anime_change 0,4
        when 252
          battle_anime_change 0,5
        when 254
          
          @effect_anime_type = 0
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
          battle_anime_change 0,5
          ray_x = CENTER_ENEX-92
          ray_y = 112
          @effect_anime_pattern = 69
          @ax = 8
        when 255..279
          #@output_anime_type = 0
          ray_x = CENTER_ENEX-92
          ray_y = 112
          battle_anime_change 0,6
        when 280
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
        when 281..303
          set_chr_display_out
          @effect_anime_type = 0
          #@effect_anime_frame = 0
          ray_x = 640
          ray_y = 228
          @effect_anime_pattern = 69
        when 304
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
   when 1809 #ダブルどどんぱ
        ray_x = 328
        ray_y = 148
        @ray_color = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        back_anime_pattern 39
        if $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay = -120
        @ax = 0
        @ay = 0
        back_anime_pattern 40
      when 60
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @ray_color = 0
        back_anime_pattern 41
      when 61..100
        back_anime_pattern 41
        @effect_anime_pattern = 244
      when 105
        set_chr_display_out
        @effect_anime_frame = 0
      when 106..129
        @effect_anime_pattern = 245
      when 130
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1810 #超能力きこうほう
        ray_x = 328
        ray_y = 148
      case @battle_anime_frame
      
      when 0
        @ray_color = 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        back_anime_pattern 39
        if $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay = -120
        @ax = 0
        @ay = 0
        back_anime_pattern 40
      when 60
        back_anime_pattern 40
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
      when 61..150
        back_anime_pattern 105,222,60-50
        @back_anime_frame -= 1
        back_anime_pattern 105,218,60+50
        @back_anime_frame -= 1
        back_anime_pattern 44
      when 151..198
        Audio.se_stop if @battle_anime_frame == 151
        Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == 151   # 効果音を再生する
        back_anime_pattern 45
      when 199
        set_chr_display_out
        @tec_output_back = false
        @chr_cutin_flag = false
        @effect_anime_frame = 0
      when 200..250
        back_anime_pattern 9
      when 251
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1811 #狼鶴相打陣
     @ray_color = 0
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 8
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 114
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 7 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true
        case @battle_anime_frame
        when 0..18
        Audio.se_play("Audio/SE/" + "Z3 跳ね返し")  if @battle_anime_frame == 0
        battle_anime_change 1,16
        @gx = -18
        @effect_anime_pattern = 121
        @btl_ani_cha_chg_no = 8
        @gx = 0 if @battle_anime_frame == 18
        @eney = -200 if @battle_anime_frame == 18
        @output_anime_type = 1 if @battle_anime_frame == 18
        battle_anime_change 0,0 if @battle_anime_frame == 18
        #@chax = TEC_CENTER_CHAX if @battle_anime_frame == 18
        #@chay = STANDARD_CHAY if @battle_anime_frame == 18
        @output_anime_type = 0 if @battle_anime_frame == 18
        battle_anime_change 1,0 if @battle_anime_frame == 18
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 18
        @battle_anime_result += 1 if @battle_anime_frame == 18
        @effect_anime_pattern = 0 if @battle_anime_frame == 18
        @back_anime_frame = 0 if @battle_anime_frame == 18
        @effect_anime_type = 0 if @battle_anime_frame == 18
        @effect_anime_frame = 0 if @battle_anime_frame == 18
        @battle_anime_frame = -1 if @battle_anime_frame == 18
        end
      else
          #anime_pattern_fromat
          #back_anime_pattern 54
          @output_anime_type = 1
          battle_anime_change 0,0
          @battle_anime_result += 1
          @btl_ani_tokusyu_flag = true
      end
   when 1813 #ギャリックかめはめは(ゴクウとベジータ)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      wake_color = Color.new(188,188,188,256)
      if @btl_ani_tokusyu_flag == false && ($partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19)
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 112
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 3 if @battle_anime_frame == 60
        @btl_ani_cha_chg_no = 14 if @battle_anime_frame == 60 && $super_saiyazin_flag[1] == true
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 86
        else
          backhai_no = 102
          back_x = 198
          back_y = 32
        end
        ray_x = 340
        ray_y = 96
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 3
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          @output_anime_type = 1
          battle_anime_change 0,4 if $super_saiyazin_flag[1] == false
          
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,2
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141..180
          
          back_x -= 12*(@battle_anime_frame-140)
          @ax = -12
          #ray_x -= 2*(@battle_anime_frame-140)
          back_anime_pattern backhai_no,back_x,back_y
          if @battle_anime_frame > 161
            #CENTER_ENEX = 304
            #STANDARD_ENEX = 602
          end
          @back_window.contents.fill_rect(640-16*(@battle_anime_frame-140),64,6,228,wake_color)
        when 181..220
          if @battle_anime_frame == 181
            Audio.se_stop
            if $btl_progress == 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 3
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 3
            end
          end
          @ax = 0
          #if @battle_anime_frame >= 181 && @battle_anime_frame <= 190
          if $btl_progress == 2
            back_x = 678 + 30
          else
            back_x = 678
          end
          back_x -= 12*(@battle_anime_frame-180)
          back_anime_pattern backhai_no,back_x,back_y
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha1_anime_type = 2
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true
          @scombo_cha2_anime_type = 7
          back_x = 730
          back_x -= 12*(@battle_anime_frame-180)
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          #p back_x
          #end
          #TEC_CENTER_CHAX = 266
        when 221..270
          if $btl_progress == 2
            back_x = 198 + 30
          else
            back_x = 198
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 271..360
          if @battle_anime_frame == 271
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          if $btl_progress == 2
            back_x = 198 + 30
          else
            back_x = 198
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 361..469
          if @battle_anime_frame == 361
            Audio.se_stop
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 3
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 3
            end
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          #back_y = 32
          if $btl_progress == 2
            back_x = 198 + 30 + (@battle_anime_frame-360) * 2
          else
            back_x = 198 + (@battle_anime_frame-360) * 2
          end
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          if $btl_progress == 2
            @ray_color = 3
          else
            @ray_color = 0
          end
          #back_y = 32
          if $btl_progress == 2
            back_x = (-220 + 30) + (@battle_anime_frame-360) * 2
            back_y = 32 + 54
          else
            back_x = -220 + (@battle_anime_frame-360) * 2
            back_y = 32
          end
          #back_x = -220 + (@battle_anime_frame-360) * 2
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          if $btl_progress == 2
            @ray_color = 3
          else
            @ray_color = 3
          end
          back_x = -154 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          
          if @battle_anime_frame < 412
            nakasen_x = 4*(@battle_anime_frame-360)
          else
            nakasen_x = 2*(@battle_anime_frame-412) + 4 * 52
          end
          nakasen_x = 320 if nakasen_x >= 320
          
          @back_window.contents.fill_rect(nakasen_x,64,6,228,wake_color)
          #p @battle_anime_frame,nakasen_x
        when 470..520
          @ray_color = 3
          #back_y = 32
          if $btl_progress == 2
            back_x = 418 + 30
          else
            back_x = 418
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          
          #back_y = 32
          if $btl_progress == 2
            back_x = 0 + 30
            back_y = 32 + 54
            @ray_color = 3
          else
            back_x = 0
            back_y = 32
            @ray_color = 0
          end
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 521..600
          if @battle_anime_frame == 521
            @effect_anime_frame = 0
            Audio.se_stop
            #Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          @scombo_cha1_anime_type = 3
          @scombo_cha2_anime_type = 8
          @ray_color = 3
          #back_y = 32
          #back_x = 418
          #back_anime_pattern 102,back_x,back_y
          #@back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          if $btl_progress == 2 && $super_saiyazin_flag[3] != true
            picture = Cache.picture("FC風_GBZ1 戦闘_ベジータ_ギャリック砲")
            
            rect = Rect.new(0, 0, 128, 96)
            @back_window.contents.blt(back_x-30,back_y-0,picture,rect)
          else
            back_anime_pattern 118,back_x,back_y
          end
          @back_anime_frame -= 1
          
          #if $btl_progress == 2
          #  @ray_color = 3
          #else
            @ray_color = 0
          #end
          #back_y = 32
          #back_x = 0
          #back_anime_pattern 102,back_x,back_y
          #@back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          if $btl_progress == 2 && $super_saiyazin_flag[1] != true
            picture = Cache.picture("FC風_GBZ1 戦闘_ゴクウ_カメハメは")
            rect = Rect.new(0, 0, 128, 96)
            @back_window.contents.blt(back_x-20,back_y-0,picture,rect)
          else
            back_anime_pattern 116,back_x,back_y
          end
          @effect_anime_pattern = 249
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 601..679
          if @battle_anime_frame == 601
            @effect_anime_frame = 0
          end
          @effect_anime_pattern = 250
          @back_window.contents.fill_rect(0,156,640,4,wake_color)
        when 680
          set_chr_display_out
          @effect_anime_pattern = 0
          @enex = (CENTER_ENEX - 56)
          @effect_anime_frame = 0
          #@back_anime_frame -= 1
        when 681..703
          @effect_anime_pattern = 251
        when 704
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 1814 #どどはめは
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 8
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #ヤムチャ
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 7
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..189
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 190
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        battle_anime_change 0,3
        @scombo_cha1_anime_type = 5
        @scombo_cha2_anime_type = 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 281
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
      when 191..299
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 302..328
        @effect_anime_pattern = 282
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1822 #気の開放
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #悟飯
          @scombo_cha2 = 6
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 6 && @battle_anime_frame == 40 #クリリン
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        @scombo_cha2 = 6
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 0
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
      when 61..150
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60+50
        
        
      when 151..191
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
         Audio.se_stop if @battle_anime_frame == 151
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 151  # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 200
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        @chax = CENTER_CHAX - 128
        @output_anime_type = 0
        battle_anime_change 0,0
        @scombo_cha2 = 6
      when 210..230
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 210
        back_anime_pattern 48,TEC_CENTER_CHAX - 160,STANDARD_CHAY + 76 - 16
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 160,STANDARD_CHAY + 76 - 100 + 16
        @chay = STANDARD_CHAY-32 if @battle_anime_frame == 230
        back_anime_pattern 117,@chax,STANDARD_CHAY+32 if @battle_anime_frame == 230
      when 231..238
        battle_anime_change 0,16
        @scombo_cha2_anime_type = 16
        @chax += 24
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
      when 239
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 3
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 240..270
        if @battle_anime_frame == 255
          battle_anime_change 0,0
          @scombo_cha2_anime_type = 0
        end
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        battle_anime_change 1,16
        @enex += 24
      when 271
        @output_anime_type = 1
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        back_anime_pattern 118,@chax,STANDARD_CHAY+32
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")
        @ray_spd_up_flag = true
      when 272..299
        @effect_anime_pattern = 279
        back_anime_pattern 118,@chax,STANDARD_CHAY+32
      when 300 #初期化
        @effect_anime_pattern = 0
        battle_anime_change 1,0
        set_chr_display_out
        @effect_anime_frame = 0
        #back_anime_pattern 118,@chax,STANDARD_CHAY+32+6
      when 301..328
        @effect_anime_pattern = 280
        
      when 329
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1828 #答えは8だ
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha2 = 9
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          @scombo_cha2 = 6
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 9 && @battle_anime_frame == 40 #クリリン
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 6
        @scombo_cha2 = 9
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60 # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 110
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 6
        @chax = CENTER_CHAX+16
        @output_anime_type = 0
        battle_anime_change 0,0
        @scombo_cha2 =9
      when 120..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 120
        back_anime_pattern 48,TEC_CENTER_CHAX - 0,STANDARD_CHAY + 76 - 16
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 0,STANDARD_CHAY + 76 - 100 + 16
        @chay = STANDARD_CHAY-32 if @battle_anime_frame == 180
        back_anime_pattern 117,@chax,STANDARD_CHAY+32 if @battle_anime_frame == 180
      
      when 181..260
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        if @battle_anime_frame >= 220
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ") if @battle_anime_frame == 220
          picture = Cache.picture("戦闘アニメ_吹き出し")
          rect = Rect.new(128, 0, 128, 32)
          @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,picture,rect)
          
          mozi = chg_fc_mozi_tikan("　9-1是！？")
          output_mozi mozi
          rect = Rect.new(16*0,16*0, 16*mozi.split(//u).size,24)
          @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,$tec_mozi,rect)
          
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(CENTER_ENEX+40,STANDARD_ENEY-16,picture,rect)
          @enex += 4 if @battle_anime_frame == 221
          @enex -= 4 if @battle_anime_frame == 222
        end
      when 261..320
        @output_anime_type = 0
        battle_anime_change 0,16
        @scombo_cha2_anime_type = 16
        @chax -= 6 if @battle_anime_frame <= 290
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        picture = Cache.picture("戦闘アニメ_吹き出し")
        rect = Rect.new(128, 0, 128, 32)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,picture,rect)
        rect = Rect.new(128, 32, 128, 32)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY+48+74,picture,rect)
        
        mozi = chg_fc_mozi_tikan("　回答就是…")
        output_mozi mozi
        rect = Rect.new(16*0,16*0, 16*mozi.split(//u).size,24)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,$tec_mozi,rect)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY+48+74,$tec_mozi,rect)
      when 321..327
        @chax += 24
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 1
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        picture = Cache.picture("戦闘アニメ_吹き出し")
        rect = Rect.new(128, 0, 128, 32)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,picture,rect)
        rect = Rect.new(128, 32, 128, 32)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY+48+74,picture,rect)
        
        mozi = chg_fc_mozi_tikan("　　8　！！")
        output_mozi mozi
        rect = Rect.new(16*0,16*0, 16*mozi.split(//u).size,24)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY-48,$tec_mozi,rect)
        @back_window.contents.blt(@chax-96,STANDARD_CHAY+48+74,$tec_mozi,rect)
      when 328
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        @chay = -160
        @tec_kyouda_se = true
        #Audio.se_play("Audio/SE/" + "ZG 打撃4")
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=begin
      when 331
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 1
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 332..370
        if @battle_anime_frame == 255
          battle_anime_change 0,0
          @scombo_cha2_anime_type = 0
        end
        back_anime_pattern 117,@chax,STANDARD_CHAY+32
        battle_anime_change 1,16
        @enex += 24
      when 371
        @output_anime_type = 1
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,@chax,STANDARD_CHAY+32
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")
        @ray_spd_up_flag = true
      when 372..399
        @effect_anime_pattern = 279
        back_anime_pattern 118,@chax,STANDARD_CHAY+32
      when 400 #初期化
        @effect_anime_pattern = 0
        battle_anime_change 1,0
        set_chr_display_out
        @effect_anime_frame = 0
        #back_anime_pattern 118,@chax,STANDARD_CHAY+32+6
      when 401..428
        @effect_anime_pattern = 280
        
      when 429
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=end
    when 1830 #亀仙流かめはめは
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
          if @battle_anime_frame < 25
            @ay = -2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 6
          @scombo_cha2 = 24
          @scombo_cha3 = 7
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
          
          #back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
        elsif $partyc[@chanum.to_i] == 6  #クリリン(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ax = -3
            @ay = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 24
          @scombo_cha3 = 7
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 24  #亀仙人(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 6
          @scombo_cha3 = 7
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #ヤムチャ
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 6
          @scombo_cha3 = 24
          if @battle_anime_frame < 25
            @ax = -3
            @ay = +3
          else
            @ax = 0
            @ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 48
        @btl_ani_cha_chg_no = 3
        @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
        @scombo_cha1 = 6
        @scombo_cha2 = 24
        @scombo_cha3 = 7
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #亀仙人
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #ヤムチャ
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
          battle_anime_change 0,2
          @scombo_cha1_anime_type = 2
          @scombo_cha2_anime_type = 2
          @scombo_cha3_anime_type = 2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #亀仙人
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #ヤムチャ
      when 61..189
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #亀仙人
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #ヤムチャ
      when 190
        Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          
          @scombo_cha1_anime_type = 3
          @scombo_cha2_anime_type = 3
          @scombo_cha3_anime_type = 3
          
        @effect_anime_pattern = 96
        
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #亀仙人
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #ヤムチャ
      when 191..299
        battle_anime_change 0,3
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #亀仙人
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #ヤムチャ
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 48
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1832 #サイヤンアタックトーマパンブーキン
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
        if @battle_anime_frame <= 300 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 348
        ray_y = 96
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 27  #トーマ
          @scombo_cha2 = 30
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 30  #パンブーキン
          @scombo_cha2 = 27
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 30 && @battle_anime_frame == 40 #パンブーキン
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 27
        @scombo_cha2 = 30
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..150
        @output_anime_type = 1
        battle_anime_change 0,2
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60+50
        
        
      when 151..199
        #@effect_anime_pattern = 86
         #@chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
         Audio.se_stop if @battle_anime_frame == 151
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 151  # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 200
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chay = -200
        @chax = CENTER_CHAX - 160
      when 210..230
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 210
        back_anime_pattern 48,TEC_CENTER_CHAX - 144,STANDARD_CHAY + 30
        back_anime_pattern 117,@chax,STANDARD_CHAY if @battle_anime_frame == 230
      when 231..238
        battle_anime_change 0,16
        @scombo_cha2_anime_type = 16
        @chax += 24
        back_anime_pattern 117,@chax,STANDARD_CHAY
      when 239
        @scombo_cha2_anime_type = 5
        back_anime_pattern 118,@chax,STANDARD_CHAY
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 240..269
        #if @battle_anime_frame == 255
        #  battle_anime_change 0,0
        #  @scombo_cha2_anime_type = 0
        #end
        back_anime_pattern 118,@chax,STANDARD_CHAY
        @enex += 24
        battle_anime_change 1,16
      when 270
        @chax = 266
        @chay = STANDARD_CHAY
        #back_anime_pattern backhai_no,back_x,back_y
      when 301
        @ray_color = 3
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_pattern = 239
        
        #@effect_anime_pattern
      when 360 #初期化
        @effect_anime_pattern = 0
        battle_anime_change 1,16
        set_chr_display_out
        @effect_anime_frame = 0
        #back_anime_pattern 118,@chax,STANDARD_CHAY+32+6
      when 361..388
        @effect_anime_pattern = 240
        
      when 389
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1833 #アウトサイダーショット(バーダック＆トーマ)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha2 = 27
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s #バーダック
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,4
        @scombo_cha2_anime_type = 2
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 310
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1834 #サイヤンアタックセリパトテッポ
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
        if @battle_anime_frame <= 300 
        ray_x = 330
        ray_y = 70
        else
        ray_x = 348
        ray_y = 96
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 28  #セリパ
          @scombo_cha2 = 29
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 29  #トテッポ
          @scombo_cha2 = 28
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 29 && @battle_anime_frame == 40 #トテッポ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 28
        @scombo_cha2 = 29
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..150
        @output_anime_type = 1
        @effect_anime_pattern = 0
        #battle_anime_change 0,0
        @scombo_cha2_anime_type = 2
        #back_anime_pattern 116,@chax,@chay
        #@back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        back_anime_pattern 118,@chax,@chay+100
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x+10,back_y+50
        #back_anime_pattern 105,218,60+50
      when 151..199
        sframe = 151
        battle_anime_change 0,6
        @scombo_cha2_anime_type = 4
        #back_anime_pattern 116,@chax,@chay
        
        @chax += 20
        back_anime_pattern 118,@chax,@chay+100
        #@effect_anime_pattern = 86
         #@chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
         Audio.se_stop if @battle_anime_frame == sframe
        #back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe  # 効果音を再生する
        #back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 200
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chay += 14
        @chax =  -300
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 210..238
        @chax += 20
        back_anime_pattern 118,@chax-40,@chay+72
      when 239
        back_anime_pattern 118,@chax-40,@chay+72
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 240..269
        #if @battle_anime_frame == 255
        #  battle_anime_change 0,0
        #  @scombo_cha2_anime_type = 0
        #end
        back_anime_pattern 118,@chax-40,@chay+72
        @enex += 24
        battle_anime_change 1,16
      when 270..300
        battle_anime_change 0,0
        @scombo_cha2_anime_type = 0
        back_anime_pattern 118,@chax,@chay+80
        #@chax = 266
        #@chay = STANDARD_CHAY
        #back_anime_pattern backhai_no,back_x,back_y
      when 301
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        back_anime_pattern 118,@chax,@chay+80
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @effect_anime_pattern = 309
        
        #@effect_anime_pattern
      when 302..359
        back_anime_pattern 118,@chax,@chay+80
      when 360 #初期化
        @effect_anime_pattern = 0
        battle_anime_change 1,16
        set_chr_display_out
        @effect_anime_frame = 0
        #back_anime_pattern 118,@chax,STANDARD_CHAY+32+6
      when 361..388
        @effect_anime_pattern = 299
        
      when 389
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1835 #アウトサイダーショット(バーダック＆セリパ)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha2 = 28
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s #バーダック
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,4
        @scombo_cha2_anime_type = 0
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 311
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1836 #アウトサイダーショット(バーダック＆トテッポ)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s #バーダック
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,4
        @scombo_cha2_anime_type = 2
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 312
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1837 #アウトサイダーショット(バーダック＆パンブーキン)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s #バーダック
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,4
        @scombo_cha2_anime_type = 4
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 313
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 2
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    
    when 1839 #この世で一番強いヤツZ2
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 340
      ray_y = 112
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3  #悟空
          if @battle_anime_frame < 25
            @ay = -2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 5
          @scombo_cha2 = 4
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
          
          #back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
        elsif $partyc[@chanum.to_i] == 5  #ゴハン(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ax = -3
            @ay = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha2 = 4
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 4  #ピッコロ(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha2 = 5
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #クリリン
          @scombo_cha1 = 3
          @scombo_cha2 = 5
          @scombo_cha3 = 4
          if @battle_anime_frame < 25
            @ax = -3
            @ay = +3
          else
            @ax = 0
            @ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 48
        @btl_ani_cha_chg_no = 3
        @scombo_cha1 = 5
        @scombo_cha2 = 4
        @scombo_cha3 = 6
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ゴハン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #ピッコロ
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #クリリン
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ゴハン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #ピッコロ
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #クリリン
      when 61..120
        back_anime_pattern 48,idougo,STANDARD_CHAY - 72 +24 #ゴハン
        back_anime_pattern 48,@chax+8 ,STANDARD_CHAY + 48+16 #ピッコロ
        back_anime_pattern 48,idougo,STANDARD_CHAY + 72 +24 #クリリン
      when 121..132
        @chay += 4
      when 133..139
        @chay = STANDARD_CHAY
      when 140 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
        #@ax = -8
      when 141..228
        @ax = 0
        back_anime_pattern 103,back_x,back_y
      when 229 #初期化
        Audio.se_stop
      when 231..240
        @chay = -200
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @scombo_cha1 = 4
        @scombo_cha2 = 5
      when 241
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 逃げる")
      when 242..255
        
        sframe = 242
        idoux = 16
        @scombo_cha1_anime_type = 0
        @scombo_cha2_anime_type = 0
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 256..261
        sframe = 242
        idoux = 16
        @scombo_cha1_anime_type = 16
        @scombo_cha2_anime_type = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 262..268
        sframe = 242
        idoux = 16
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 2
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 269..272
        sframe = 269
        idoux = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*27,STANDARD_CHAY+34
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        battle_anime_change 1,16
        @enex += 8
      when 273..276
        idoux = 12
        back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+34
        @enex -= 8
      when 277..329
        sframe = 277
        gohanidouf = 30
        pikkoroidouf = 40
        idoux = 12
        gohanidoux = 4
        gohanidouy = 1
        pikkoroidouy = 2
        
        
        if gohanidouf > @battle_anime_frame - sframe
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+34
        else
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27-gohanidoux*(@battle_anime_frame - sframe-gohanidouf),STANDARD_CHAY+34+gohanidouy*(@battle_anime_frame - sframe-gohanidouf)
        end
        
        if pikkoroidouf > @battle_anime_frame - sframe
          back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        else
          pikkoroidouy = pikkoroidouy * (@battle_anime_frame - sframe-pikkoroidouf)
          back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + pikkoroidouy
          
        end
        
      when 330 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @scombo_cha1_anime_type = 4
        
        idoux = 12
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 331..420
        idoux = 12
        @effect_anime_pattern = 237
        @ray_color = 1
        ray_x = STANDARD_CHAX+idoux*27 + 58
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 421
        idoux = 12
        @ray_color = 1
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        ray_x = STANDARD_CHAX+idoux*27 + 58
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 422..425
        sframe = 422
        @ray_color = 1
        idoux = 12
        ray_x = STANDARD_CHAX+idoux*27 + 58 + 2*(@battle_anime_frame - sframe + 1)
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 426..435
        sframe = 426
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          battle_anime_change 0,7
          @chay = -200
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z3 光線系ヒット")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 101
          battle_anime_change 1,16
        end
        idoux = 12
        pikkoroidoux = 12
        @scombo_cha1_anime_type = 16
        @eney = STANDARD_ENEY
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-pikkoroidoux*(@battle_anime_frame - sframe),STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 436..475
        sframe = 436
        idoux = 12
        if @battle_anime_frame == sframe
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
          @effect_anime_pattern = 0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 476..505
        sframe = 476
        idoux = 12
        idouy = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha1_anime_type = 16
          @scombo_cha2_anime_type = 16
          battle_anime_change 1,0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30 + 24 -idouy*(@battle_anime_frame - sframe)
        back_anime_pattern 117,192,176-idouy*(@battle_anime_frame - sframe)
      when 506..525
        sframe = 506
        idoux = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha3_anime_type = 0
        elsif @battle_anime_frame == sframe + 12
          @scombo_cha3_anime_type = 16
        elsif @battle_anime_frame == sframe + 17
          @scombo_cha3_anime_type = 1
        end
        
        back_anime_pattern 119,STANDARD_CHAX+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 526..530
        sframe = 526
        idoux = -24
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 SE041")
          battle_anime_change 1,1
          @scombo_cha3_anime_type = 16
        end
        
        back_anime_pattern 119,STANDARD_CHAX+320+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 531..565
        back_anime_pattern 119,STANDARD_CHAX+200,STANDARD_CHAY
      when 566..570
        sframe = 566
        idoux = 24
        @scombo_cha3_anime_type = 1
        back_anime_pattern 119,STANDARD_CHAX+200+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 571..615
        sframe = 571
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          battle_anime_change 1,16
        end
        back_anime_pattern 119,STANDARD_CHAX+320,STANDARD_CHAY
        @enex += 20
      when 616..665
        sframe = 616
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY
          Audio.se_stop
        end
        battle_anime_change 0,6
      when 666..704
        sframe = 666
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,1
          @effect_anime_pattern = 208
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
      when 705
        battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 1
      when 706..805
        sframe = 706
        if @battle_anime_frame == sframe
          @chay = -200
          @scombo_cha1_anime_type = 8
          @scombo_cha2_anime_type = 5
          @scombo_cha3_anime_type = 8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        
        idoux = 2
        tyouseikakeru = @battle_anime_frame - sframe
        tyouseikakeru = 34 if tyouseikakeru > 34 
        tyouseix = idoux * tyouseikakeru
        back_anime_pattern 115,CENTER_CHAX-90+tyouseix,STANDARD_CHAY-86
        back_anime_pattern 117,CENTER_CHAX-100+tyouseix,STANDARD_CHAY+36
        back_anime_pattern 119,CENTER_CHAX+200-tyouseix,STANDARD_CHAY+70
        
        
        @effect_anime_type = 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾")
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(254,390-@effect_anime_frame*RAY_SPEED/2,picture,rect)
        @effect_anime_frame += 1
      when 806
        set_chr_display_out
        @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @back_anime_type = 0
          @back_anime_frame = 0
          battle_anime_change 1,0
          @tec_output_back_no = 0
      when 807..832
        @effect_anime_pattern = 209
      when 833
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1842 #強襲サイヤ人
        ray_x = 328
        ray_y = 120
        @ray_color = 3
        idougo = 212+24
      idouryou = 12
      wake_color = Color.new(188,188,188,256)
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..40
          sframe = 1
          @chay = -200
          
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トーマ(大猿)96×96")
          rect = Rect.new(0, 0*192 + 24,192,56)
          @back_window.contents.blt(640-(@battle_anime_frame-sframe)*idouryou,64,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_セリパ(大猿)96×96")
          rect = Rect.new(0, 0*192 + 22,192,56)
          @back_window.contents.blt(640-(@battle_anime_frame-sframe)*idouryou,122,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トテッポ(大猿)96×96")
          rect = Rect.new(0, 0*192 + 24,192,56)
          @back_window.contents.blt(640-(@battle_anime_frame-sframe)*idouryou,180,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_パンブーキン(大猿)96×96")
          rect = Rect.new(0, 0*192 + 24,192,54)
          @back_window.contents.blt(640-(@battle_anime_frame-sframe)*idouryou,238,picture,rect)
          
          @back_window.contents.fill_rect(0,120,672,2,wake_color)
          @back_window.contents.fill_rect(0,178,672,2,wake_color)
          @back_window.contents.fill_rect(0,236,672,2,wake_color)
          
          #p 640-(@battle_anime_frame-sframe)*idouryou if @battle_anime_frame == 40
        when 41..100
          cx = 172
          cyani = 0
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トーマ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,56)
          @back_window.contents.blt(cx,64,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_セリパ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 22,192,56)
          @back_window.contents.blt(cx,122,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トテッポ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,56)
          @back_window.contents.blt(cx,180,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_パンブーキン(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,54)
          @back_window.contents.blt(cx,238,picture,rect)
          
          @back_window.contents.fill_rect(0,120,672,2,wake_color)
          @back_window.contents.fill_rect(0,178,672,2,wake_color)
          @back_window.contents.fill_rect(0,236,672,2,wake_color)
        when 101..199
          sframe = 101
          
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "DB3 大猿")
          end
          cx = 172
          cyani = 1
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トーマ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,56)
          @back_window.contents.blt(cx,64,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_セリパ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 22,192,56)
          @back_window.contents.blt(cx,122,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_トテッポ(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,56)
          @back_window.contents.blt(cx,180,picture,rect)
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_パンブーキン(大猿)96×96")
          rect = Rect.new(0, cyani*192 + 24,192,54)
          @back_window.contents.blt(cx,238,picture,rect)
          
          @back_window.contents.fill_rect(0,120,672,2,wake_color)
          @back_window.contents.fill_rect(0,178,672,2,wake_color)
          @back_window.contents.fill_rect(0,236,672,2,wake_color)
          
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用

      
          rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,40)
          @back_window.contents.blt(310,80,picture,rect)
          
          rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
          @back_window.contents.blt(306,130,picture,rect)
          
          rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,38)
          @back_window.contents.blt(310,198,picture,rect)
          
          rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
          @back_window.contents.blt(306,242,picture,rect)
          
          @effect_anime_frame += 1
        
        when 200
          set_chr_display_out
          @effect_anime_frame = 0
        when 201..226
          @effect_anime_pattern = 240
        when 227
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "DB3 大猿")
        when 1..26
          @effect_anime_pattern = 240
        when 27
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
   
   when 1848 #もしもヤムチャに
     @ray_color = 0
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 3 || @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 14
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 114
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 7 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true
        case @battle_anime_frame
        when 0..18
        Audio.se_play("Audio/SE/" + "Z3 跳ね返し")  if @battle_anime_frame == 0
        battle_anime_change 1,16
        @gx = -18
        @effect_anime_pattern = 121
        @btl_ani_cha_chg_no = 8
        @gx = 0 if @battle_anime_frame == 18
        @eney = -200 if @battle_anime_frame == 18
        @output_anime_type = 1 if @battle_anime_frame == 18
        battle_anime_change 0,0 if @battle_anime_frame == 18
        #@chax = TEC_CENTER_CHAX if @battle_anime_frame == 18
        #@chay = STANDARD_CHAY if @battle_anime_frame == 18
        @output_anime_type = 0 if @battle_anime_frame == 18
        battle_anime_change 1,0 if @battle_anime_frame == 18
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 18
        @battle_anime_result += 1 if @battle_anime_frame == 18
        @effect_anime_pattern = 0 if @battle_anime_frame == 18
        @back_anime_frame = 0 if @battle_anime_frame == 18
        @effect_anime_type = 0 if @battle_anime_frame == 18
        @effect_anime_frame = 0 if @battle_anime_frame == 18
        @battle_anime_frame = -1 if @battle_anime_frame == 18
        end
      else
          #anime_pattern_fromat
          #back_anime_pattern 54
          @output_anime_type = 1
          battle_anime_change 0,0
          @battle_anime_result += 1
          @btl_ani_tokusyu_flag = true
        end
    when 1850 #打て！悟飯
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 4
          @scombo_cha2 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 4
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #ピッコロ
          @scombo_cha1 = 6
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 4
          @scombo_cha1 = 6
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..109
        #back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @chay = -200
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @back_anime_frame -= 1
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 61  # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 16,STANDARD_CHAY + 32
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 32,STANDARD_CHAY - 32
        #back_anime_pattern 8
      when 110
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 4
        @chax = CENTER_CHAX - 128
        @output_anime_type = 0
        battle_anime_change 0,0
        @scombo_cha2 = 6
      when 120..140
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 120
        back_anime_pattern 48,TEC_CENTER_CHAX - 160,STANDARD_CHAY + 76 - 16
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX - 160,STANDARD_CHAY + 76 - 100 + 16
        @chay = STANDARD_CHAY-32 if @battle_anime_frame == 140
        back_anime_pattern 115,@chax,STANDARD_CHAY+32 if @battle_anime_frame == 140
      when 141..148
        battle_anime_change 0,16
        @scombo_cha1_anime_type = 16
        @chax += 24
        back_anime_pattern 115,@chax,STANDARD_CHAY+32
      when 149
        battle_anime_change 0,2
        @scombo_cha1_anime_type = 3
        back_anime_pattern 115,@chax,STANDARD_CHAY+32
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 150..180
        if @battle_anime_frame == 255
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 0
        end
        back_anime_pattern 115,@chax,STANDARD_CHAY+32
        battle_anime_change 1,16
        @enex += 24
      when 181..239
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 181
        back_anime_pattern 115,@chax,STANDARD_CHAY+32 - 16 * (@battle_anime_frame - 181)
        @chay -= 16 
        @scombo_cha1_anime_type = 16
        battle_anime_change 0,16
      when 240
        @enex = -100
        @eney = STANDARD_ENEY
        @chax = 788
        @scombo_cha1_anime_type = 14
        @scombo_cha2 = 4
        @scombo_cha2_anime_type = 21
        
        @output_anime_type = 1
        battle_anime_change 0,21
      when 241..264
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 241
        #@chay = STANDARD_CHAY-24
        @chax -= 16
        back_anime_pattern 116,@chax,STANDARD_CHAY+10
        back_anime_pattern 118,@chax-16,STANDARD_CHAY-10#28
        @enex += 20
        
        
      when 265..319
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 265
        @scombo_cha1_anime_type = 15
        #battle_anime_change 0,22
        @scombo_cha2_anime_type = 22
        back_anime_pattern 116,@chax,STANDARD_CHAY+10
        back_anime_pattern 118,@chax-16,STANDARD_CHAY-10#28
        
        battle_anime_change 1,0
        
        if @battle_anime_frame == 265 || @battle_anime_frame == 266
          @gx = -4
        elsif @battle_anime_frame == 267 || @battle_anime_frame == 268
          @gx = 4
        else
          #  @gx = 0
        end
      when 320
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY
        @eney = -200
        @output_anime_type = 1
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "Z3 変身")
        
      when 321..447
        #@ray_color = 3
        back_x = 228
        back_y = 88
        back_anime_pattern 201,back_x,back_y
      when 448..549
        #@ray_color = 3
        Audio.se_stop if @battle_anime_frame == 448
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 448
        battle_anime_change 0,3
        @effect_anime_pattern = 256
        ray_x = @chax + 64
        ray_y = @chay - 18
      when 550
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 551..576
        #@ray_color = 3
        @effect_anime_pattern = 265
        ray_y = 102
        back_anime_pattern 116,338,STANDARD_CHAY+10
        back_anime_pattern 118,338-16,STANDARD_CHAY-10
      when 577
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1851 #ありがとうピッコロさん！
     
     if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 4
        #@btl_ani_cha_chg_no = 5
        @scombo_cha1 = 5
        @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
      else
        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 4
          @btl_ani_cha_chg_no = 5
          @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true

          @output_anime_type = 0
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          @enex = 640 + 32
          @eney = STANDARD_CHAY
        when 2..24
          result = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 24
          #@scombo_cha1_anime_type = 16 if @battle_anime_frame == 24
          battle_anime_change 0,16 if @battle_anime_frame == 19
          @chax -= 20 if @battle_anime_frame >= 19 and @battle_anime_frame <= 25
          battle_anime_change 1,16 if @battle_anime_frame == 14
          battle_anime_change 1,1 if @battle_anime_frame == 19
          @enex -= 16
          back_anime_pattern 115,0-102 + 16 * (@battle_anime_frame - 2),STANDARD_CHAY
          
          
          
        when 25..89
          @enex += 2 if @battle_anime_frame >= 25 and @battle_anime_frame <= 35
          battle_anime_change 1,0 if @battle_anime_frame == 25
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 25
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 16 if @battle_anime_frame == 70
          back_anime_pattern 115,CENTER_CHAX,STANDARD_CHAY
        when 90..99
          back_anime_pattern 115,CENTER_CHAX + 4 * (@battle_anime_frame - 90),STANDARD_CHAY
        when 100..159
          @scombo_cha1_anime_type = 1 #if @battle_anime_frame == 55
          Audio.se_stop if @battle_anime_frame == 100
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 100
          back_anime_pattern 115,CENTER_CHAX + 40,STANDARD_CHAY
          
          @enex += 20 #if @battle_anime_frame >= 55
          battle_anime_change 1,16 #if @battle_anime_frame == 55
        when 160 #初期化
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,4
          @ray_color = 1
          @scombo_cha1_anime_type = 4
          back_anime_pattern 116,CENTER_CHAX + 40,STANDARD_CHAY
        when 161..200
          back_anime_pattern 116,CENTER_CHAX + 40,STANDARD_CHAY
          @effect_anime_pattern = 201
          ray_x = 300 + 40
          ray_y = 96
        when 201
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 205
          battle_anime_change 1,0
          set_chr_display_out
        when 206..235
          @effect_anime_pattern = 202
        when 236
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1852 #行くぞクリリン
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @scombo_cha2 = 6
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = 5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay -= 100 if $partyc[@chanum.to_i] == 6 && @battle_anime_frame == 40
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 6
        @effect_anime_pattern = 92
      when 60..100
        @effect_anime_pattern = 92
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100# 効果音を再生する
        
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 4
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -200 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 6 if @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16+96,STANDARD_CHAY + 26
        @chax += 96 if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 252..293
        @effect_anime_pattern = 125
        ray_x = 350
        ray_y = 158
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 252
        if $btl_progress == 1
          battle_anime_change 0,9
        else
          battle_anime_change 0,16
        end
        battle_anime_change 1,16
        @gx = 18
        @gy = 4
      when 294..353
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        battle_anime_change 0,2
        @btl_ani_cha_chg_no = 4
        @scombo_cha2_anime_type = 2
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        #back_anime_pattern 52
        
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        @effect_anime_pattern = 320
      when 415 #初期化
        @gy = 0
        @gx = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 247
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1856 #油断してやがったな
      if $btl_progress >= 2
        back_x = 220
        back_y = 86
        backhai_no = 201
      else
        back_x = 190
        back_y = 32
        backhai_no = 102
      end
      ray_x = 350
      ray_y = 124
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 12 || @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 19
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 5
          @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true
          
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 12
          @scombo_cha1 = 19 if $super_saiyazin_flag[3] == true
          @btl_ani_cha_chg_no = 5
          @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true
          @output_anime_type = 0
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          @enex = 640 + 32
          @eney = STANDARD_CHAY
        when 2..24
          result = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 24
          #@scombo_cha1_anime_type = 16 if @battle_anime_frame == 24
          
          #@chax -= 16 if @battle_anime_frame >= 19
          battle_anime_change 1,16 if @battle_anime_frame == 14
          battle_anime_change 1,1 if @battle_anime_frame == 19
          @enex -= 16
          #back_anime_pattern 115,0-102 + 16 * (@battle_anime_frame - 2),STANDARD_CHAY
        when 25..59
          @chax -= 16
          battle_anime_change 0,17
        when 60
          @ray_color = 3
          
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        when 61..86
          @effect_anime_pattern = 226
        when 87
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 101
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z3 光線系ヒット")
          battle_anime_change 1,16
        when 88..119
          @enex += 16
          
        when 120 #初期化
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          @btl_ani_cha_chg_no = 12
          @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          @output_anime_type = 1
          @ray_color = 3
          battle_anime_change 0,5
        when 121..209
          back_anime_pattern backhai_no,back_x,back_y
        when 210
          Audio.se_stop
          battle_anime_change 0,6
        when 230
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 233
          #back_anime_pattern 101,back_x,back_y
        when 231..268
          #back_anime_pattern 101,back_x,back_y
        when 269
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 279
          set_chr_display_out
        when 280..306
          @effect_anime_pattern = 234
        when 307
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
          @btl_ani_tokusyu_flag = true
      end
    when 1857 #ピッコロさん！？
     
     if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 15
        #@btl_ani_cha_chg_no = 5
        @scombo_cha1 = 5
        @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 5 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
      else
        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 15
          @btl_ani_cha_chg_no = 5
          @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @output_anime_type = 0
          battle_anime_change 0,0
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          @enex = 640 + 32
          @eney = STANDARD_CHAY
        when 2..24
          result = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 24
          #@scombo_cha1_anime_type = 16 if @battle_anime_frame == 24
          battle_anime_change 0,16 if @battle_anime_frame == 19
          @chax -= 20 if @battle_anime_frame >= 19 and @battle_anime_frame <= 25
          battle_anime_change 1,16 if @battle_anime_frame == 14
          battle_anime_change 1,1 if @battle_anime_frame == 19
          @enex -= 16
          back_anime_pattern 115,0-102 + 16 * (@battle_anime_frame - 2),STANDARD_CHAY
          
          
          
        when 25..89
          @enex += 2 if @battle_anime_frame >= 25 and @battle_anime_frame <= 35
          battle_anime_change 1,0 if @battle_anime_frame == 25
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 25
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 16 if @battle_anime_frame == 70
          back_anime_pattern 115,CENTER_CHAX,STANDARD_CHAY
        when 90..99
          back_anime_pattern 115,CENTER_CHAX + 4 * (@battle_anime_frame - 90),STANDARD_CHAY
        when 100..159
          @scombo_cha1_anime_type = 1 #if @battle_anime_frame == 55
          Audio.se_stop if @battle_anime_frame == 100
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 100
          back_anime_pattern 115,CENTER_CHAX + 40,STANDARD_CHAY
          
          @enex += 20 #if @battle_anime_frame >= 55
          battle_anime_change 1,16 #if @battle_anime_frame == 55
        when 160 #初期化
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,4
          @ray_color = 1
          @scombo_cha1_anime_type = 12
          back_anime_pattern 116,CENTER_CHAX + 40,STANDARD_CHAY
        when 161..200
          back_anime_pattern 116,CENTER_CHAX + 40,STANDARD_CHAY
          @effect_anime_pattern = 201
          ray_x = 300 + 40
          ray_y = 96
        when 201
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 205
          battle_anime_change 1,0
          set_chr_display_out
        when 206..235
          @effect_anime_pattern = 202
        when 236
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1858 #地球の方
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 15  #若者
          @scombo_cha2 = 6
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha2 = 15
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = 5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay -= 100 if $partyc[@chanum.to_i] == 6 && @battle_anime_frame == 40
        @btl_ani_cha_chg_no = 15
        @scombo_cha2 = 6
        @effect_anime_pattern = 92
      when 60..100
        @effect_anime_pattern = 92
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100# 効果音を再生する
        
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 15
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -200 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 6 if @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16+96,STANDARD_CHAY + 26
        @chax += 96 if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 252..293
        @effect_anime_pattern = 125
        ray_x = 350
        ray_y = 158
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 252
        if $btl_progress == 1
          battle_anime_change 0,9
        else
          battle_anime_change 0,16
        end
        battle_anime_change 1,16
        @gx = 18
        @gy = 4
      when 294..353
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        battle_anime_change 0,11
        @btl_ani_cha_chg_no = 15
        @scombo_cha2_anime_type = 2
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        #back_anime_pattern 52
        
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        @effect_anime_pattern = 320
      when 415 #初期化
        @gy = 0
        @gx = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 247
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1859 #何故か息の合う
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 7  #ヤムチャ
          @scombo_cha2 = 15
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 15  #わかもの
          @scombo_cha2 = 7
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 15 && @battle_anime_frame == 40 #ヤムチャ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 7
        @scombo_cha2 = 15
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60 # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76 - 100
      when 110
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 7
        @chax = CENTER_CHAX+16
        @output_anime_type = 0
        battle_anime_change 0,0
        @scombo_cha2 =15
        @scombo_cha2_anime_type = 19
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        set_chr_display_out
      when 111..202
        @effect_anime_pattern = 332
        #back_anime_pattern 48,TEC_CENTER_CHAX - 0,STANDARD_CHAY + 16
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 126,STANDARD_CHAY + 16
        #@chay = STANDARD_CHAY if @battle_anime_frame == 180
        #back_anime_pattern 118,@chax + 126 ,STANDARD_CHAY if @battle_anime_frame == 180
      when 203
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        @chay = -160
        @tec_kyouda_se = true
        #Audio.se_play("Audio/SE/" + "ZG 打撃4")
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 1865 #アウトサイダーショット(トーマとセリパ)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 27
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha2 = 28
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 #トーマ
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 0
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 334
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1866 #アウトサイダーショット(トーマとトテッポ)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 27
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 #トーマ
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 2
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 335
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1867 #アウトサイダーショット(セリパとパンブーキン)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 28
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 #トーマ
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,0
        @scombo_cha2_anime_type = 4
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 336
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1868 #アウトサイダーショット(トテッポとパンブーキン)
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      ray_x = 340
      ray_y = 200
      tcha1 = 29
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 #トーマ
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s  #トーマ
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40 #トーマ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 4
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 337
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 1904 #絶好のチャンス
      idouryou = 8
      color = Color.new(255,255,255,260)
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      #if @battle_anime_frame <= 500 
      #ray_x = 325
      #ray_y = 70
      #else
      #ray_x = 340
      #ray_y = 200
      #end
      
      ray_x = 340
      ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #悟飯
          @scombo_cha2 = 6
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha3 = 12
          @scombo_cha3 = 19 if $super_saiyazin_flag[3] == true
          @ax = -16

          @scombo_cha1 = 5
          @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @scombo_cha2 = 6
          
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY - 50 
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY + 50

          
        end
      when 40..59
        @ax = 0
        if $partyc[@chanum.to_i] == 6 && @battle_anime_frame == 40 #クリリン
          @chay -= 100
        end
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        @scombo_cha2 = 6

        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 0
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end
      when 61..150
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50

      when 151..191
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
         Audio.se_stop if @battle_anime_frame == 151
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 151  # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 200
        @effect_anime_frame = 0
      when 210..230
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 210  # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 231..260
        sframe = 231
        if @battle_anime_frame == sframe
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
        end
        @scombo_cha2_anime_type = 2
        battle_anime_change 0,2

        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        @chay = STANDARD_CHAY-50
        back_anime_pattern 118,@chax,STANDARD_CHAY+50
      when 261..342
        sframe = 261
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        end
        @effect_anime_pattern = 367
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,@chax,STANDARD_CHAY+50
      when 343#270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 353#280
        set_chr_display_out
      when 354..378#281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
        
        if @attack_hit == false
          @battle_anime_frame = 530
        end
        

      when 379..400
        sframe = 379
        
        if @battle_anime_frame == sframe
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 104
          Audio.se_play("Audio/SE/" + "Z1 爆発1")
          battle_anime_change 1,17
        end
        @enex += 16
      when 401..432
        sframe = 401
        if @battle_anime_frame == sframe
          @enex = -208 #CENTER_ENEX
          @effect_anime_pattern = 0 
        end
        @enex += 16
        #p @battle_anime_frame,@enex,CENTER_ENEX
      when 433..440
        sframe = 433
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
          battle_anime_change 1,16
        elsif @battle_anime_frame == sframe + 4
          battle_anime_change 1,0
        end
      when 460..480
        sframe = 460
        case @battle_anime_frame - sframe
        
        when 0
          @btl_ani_cha_chg_no = 12
          @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @chax = 830
          @chay = STANDARD_CHAY-42
          @output_anime_type = 1
          if $btl_progress >= 2
            battle_anime_change 0,22
          else
            battle_anime_change 0,13
          end
          
        when 16
          Audio.se_play("Audio/SE/" + "DB3 刀")
          if $btl_progress >= 2
            battle_anime_change 0,23
          else
            battle_anime_change 0,10
          end
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          
        when 17
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          battle_anime_change 1,16
        end

        @chax -= 28
        @chay += 2
      when 481..490
        sframe = 481
        if @battle_anime_frame == sframe + 6
          battle_anime_change 0,0
          if $btl_progress >= 2
            @chax += 12
          else
            @chax += 6
          end
        end
      when 491..530
        sframe = 491
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,1
          @ray_color = 3
          @effect_anime_pattern = 225
        end
        if $btl_progress >= 2
          ray_x = 330
          ray_y = 136
        else
          ray_x = 334
          ray_y = 132
        end
      when 531
        #back_anime_pattern 117,@chax,STANDARD_CHAY+32
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 1905 #オレを半殺しにしろ
      ray_x = 0
      ray_y = 118
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      idouryou = 8

      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234 - 176
        back_y = -18 + 54+ 50
        ray_x = 182 + 9 * 8
        ray_y = 142
      else
        backhai_no = 105
        back_x = 218 - 160
        back_y = 60
        ray_x = 174 + 9 * 8
        ray_y = 148
        #@chax-144 - 50,STANDARD_CHAY - 56
      end

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha1 = 6
          
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          @scombo_cha1 = 12
          @scombo_cha1 = 19 if $super_saiyazin_flag[3] == true
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 6 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 12
        @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true
        @scombo_cha1 = 6
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #@ray_color = 0
        #back_anime_pattern 41
        #@output_anime_type = 1
        #battle_anime_change 0,11
        #@scombo_cha1_anime_type = 0
        #back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
      when 61..150
        sframe = 61
        if @battle_anime_frame == sframe
          @chax -= 16
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
          @output_anime_type = 1
          if $btl_progress >= 2
            battle_anime_change 0,22
          else
            battle_anime_change 0,13
          end
        end

        back_anime_pattern 116,@chax-144,STANDARD_CHAY
        picture = Cache.picture("戦闘アニメ_吹き出し")
        rect = Rect.new(256, 96, 224, 32)
        @back_window.contents.blt(@chax-96+168,STANDARD_CHAY-48+28,picture,rect)
        mozi = chg_fc_mozi_tikan("　快把我打个半死！")
        output_mozi mozi
        rect = Rect.new(16*0,16*0, 16*mozi.split(//u).size,24)
        @back_window.contents.blt(@chax-96+168,STANDARD_CHAY-48+28,$tec_mozi,rect)
        
        if @battle_anime_frame >= sframe + 30
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-144 + 40,STANDARD_CHAY-16+28,picture,rect)
        end
        
     when 151..240
        sframe = 151
        if @battle_anime_frame == sframe
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          @ray_color = 0
        end
 
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-144,STANDARD_CHAY
      when 241..250
        sframe = 241
        
        tmp_frame = @battle_anime_frame - sframe 
        back_anime_pattern 116,@chax-144 + tmp_frame * 8 ,STANDARD_CHAY
      when 251..340
        sframe = 251

        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
          @output_anime_type = 1
          @scombo_cha1_anime_type = 1
          if $btl_progress >= 2
            battle_anime_change 0,28
          else
            battle_anime_change 0,15
          end
          @ray_color = 0
          @effect_anime_pattern = 225
        end
        back_anime_pattern 116,178,STANDARD_CHAY
        @chax += 14
      when 341
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 350
        set_chr_display_out
        @chax = -96
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        if $btl_progress >= 2
          battle_anime_change 0,28
        else
          battle_anime_change 0,15
        end
      when 351..377
        @chax += 14
        @effect_anime_pattern = 226
      when 378
        @chay = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 1906 #超サイヤ人だ孫悟空
      ray_x = 0
      ray_y = 118
      #@ray_color = 0
      idougo = 212+24
      idouryou = 8
      idouryou = 8

      if $btl_progress >= 2
        #backhai_no = 201
        #back_x = 234 - 176
        #back_y = -18 + 54+ 50
        backhai_no = 105
        backhai_no2 = 101
        backhai_no3 = 102
        back_x = 218 - 156
        back_y = 60
        #ray_x = 182 + 9 * 8
        #ray_y = 142
      else
        backhai_no = 105
        backhai_no2 = 101
        backhai_no3 = 102
        back_x = 218 - 156
        back_y = 60
        #ray_x = 174 + 9 * 8
        #ray_y = 148
        #@chax-144 - 50,STANDARD_CHAY - 56
      end

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
          @scombo_cha1 = 4
          
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 4  #ピッコロ
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 4 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 3
        @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
        @scombo_cha1 = 4
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #@ray_color = 0
        #back_anime_pattern 41
        #@output_anime_type = 1
        #battle_anime_change 0,11
        #@scombo_cha1_anime_type = 0
        #back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
      when 61..240
        sframe = 61
        if @battle_anime_frame == sframe
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          
        end
        @ray_color = 1
        @scombo_cha1_anime_type = 0
        
        case @battle_anime_frame - sframe
        
        when 0..60
          back_anime_pattern backhai_no,back_x,back_y
        when 61..120
          back_anime_pattern backhai_no2,back_x-16,back_y-32
        when 121..180
          back_anime_pattern backhai_no3,back_x-36,back_y-32
        end
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 241..270
        sframe = 241
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
        end
        @scombo_cha1_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no3,back_x-36,back_y-32
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 271..480
        sframe = 271
        if @battle_anime_frame == sframe
          Audio.se_stop
          #if $btl_progress >= 2
          #  Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #else
          #  Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          #end
          #Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")    # 効果音を再生する
        end
        @ray_color = 1
        case @battle_anime_frame - sframe
        
        when 0..60
          back_anime_pattern backhai_no3,back_x-36,back_y-32 #ピッコロ
          @back_anime_frame -= 1
          back_anime_pattern backhai_no,back_x+166,back_y #悟空
        when 61..120
          back_anime_pattern backhai_no2,back_x-16,back_y-32 #ピッコロ
          @back_anime_frame -= 1
          back_anime_pattern backhai_no2,back_x-16+166,back_y-32 #悟空
        when 121..180
          back_anime_pattern backhai_no,back_x,back_y #ピッコロ
          @back_anime_frame -= 1
          back_anime_pattern backhai_no3,back_x-36+166,back_y-32 #悟空
        when 181..210
          back_anime_pattern backhai_no3,back_x-36+166,back_y-32 #悟空
        end
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 481..540
        sframe = 481
        
        back_anime_pattern backhai_no3,back_x-36+166,back_y-32 #悟空
        @back_anime_frame -= 1
        
        if @battle_anime_frame == sframe
          Audio.se_stop
          @scombo_cha1_anime_type = 16
          Audio.se_play("Audio/SE/" + "Z1 死亡1")    # 効果音を再生する
        end
        
        case @battle_anime_frame - sframe
        
        when 0..20
          tmpx = 4*(@battle_anime_frame - sframe)
          tmpy = 4*(@battle_anime_frame - sframe)
          back_anime_pattern 115,@chax-160-tmpx,STANDARD_CHAY+tmpy
        when 21..120
          @scombo_cha1_anime_type = 17
          tmpx = 2*(@battle_anime_frame - sframe)
          tmpy = 4*(@battle_anime_frame - sframe)
          back_anime_pattern 115,@chax-160-tmpx,STANDARD_CHAY+tmpy
        end
      when 541..660
        sframe = 541
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        end
        
        back_anime_pattern 213,@chax-276,STANDARD_CHAY-140
      when 661..780
        sframe = 661
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          @effect_anime_pattern = 368
          @chay = -200
        end
        
        shake_dot = 8
        shake_x,shake_y= pic_shake_cal shake_dot
        
        case @battle_anime_frame - sframe
          
        when 0..60
          ray_x = 148
          ray_y = 108
          tmpx = 24 * (@battle_anime_frame - sframe)
          tmpy = 0 * (@battle_anime_frame - sframe)
        when 61..360
          ray_x = -200
          ray_y = 108
          tmpx = 36 * (@battle_anime_frame - sframe - 60)
          tmpy = 0 * (@battle_anime_frame - sframe - 60)
        end
        
        ray_x += tmpx + shake_x
        ray_y += tmpy + shake_y
        back_anime_pattern 213,ray_x-152,ray_y-138
      when 781
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 790
        set_chr_display_out
      when 791..804
        sframe = 791
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          @effect_anime_pattern = 368
          #@chay = -200
        end
        shake_dot = 8
        shake_x,shake_y= pic_shake_cal shake_dot
        
        ray_x = -200
        ray_y = 108
        tmpx = 24 * (@battle_anime_frame - sframe)
        tmpy = 0 * (@battle_anime_frame - sframe)
        
        ray_x += tmpx + shake_x
        ray_y += tmpy + shake_y
        back_anime_pattern 213,ray_x-152,ray_y-138
      when 805..864
        sframe = 805
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          @effect_anime_pattern = 368
          #@chay = -200
          battle_anime_change 1,16
        end
        
        case @battle_anime_frame % 8
        
        when 0
          Audio.se_play("Audio/SE/" + "Z2 SE058")
        end
        shake_dot = 16
        shake_x,shake_y= pic_shake_cal shake_dot
        
        ray_x = 136
        ray_y = 108

        ray_x += shake_x
        ray_y += shake_y
        back_anime_pattern 213,ray_x-152,ray_y-138
        @enex = CENTER_ENEX + shake_x
        @eney = STANDARD_ENEY + shake_y
      when 865..895
        sframe = 865
        if @battle_anime_frame == sframe
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          Audio.se_play("Audio/SE/" + "Z2 SE058")
          @effect_anime_pattern = 368
          #@chay = -200
          battle_anime_change 1,17
        end
        shake_dot = 16
        shake_x,shake_y= pic_shake_cal shake_dot
        
        ray_x = 152
        ray_y = 108
        tmpx = 72 * (@battle_anime_frame - sframe)
        tmpy = 0 * (@battle_anime_frame - sframe)
        
        ray_x += tmpx + shake_x
        ray_y += tmpy + shake_y
        back_anime_pattern 213,ray_x-152,ray_y-138
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 896
        @chay = - 200
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1909 #地球丸ごと超決戦
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
          if @battle_anime_frame < 24
            #@ay = -2
            @ax = -4
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 8
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          if @battle_anime_frame < 25
            #@ax = -3
            @ay = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 8
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 8  #天津飯
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame < 25
            @ay = -3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 8
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #チャオズ
          if @battle_anime_frame < 25
            @ay = 3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 8
          @scombo_cha4 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX - 92
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = 3
        @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
        @scombo_cha1 = 7
        @scombo_cha2 = 8
        @scombo_cha3 = 6
        @scombo_cha4 = 9
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
        battle_anime_change 0,2
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 0
        @scombo_cha3_anime_type = 2
        @scombo_cha4_anime_type = 0
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 61..189
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 190
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        battle_anime_change 0,3
        @scombo_cha1_anime_type = 3
        @scombo_cha2_anime_type = 2
        @scombo_cha3_anime_type = 3
        @scombo_cha4_anime_type = 1
        
        @effect_anime_pattern = 96
        
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 191..299
        #battle_anime_change 0,3
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 48
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1919 #ダブルアイビーム(ピッコロ、天津飯)
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      ray_x = 340
      ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 8
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 8  #天津飯
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        sframe = 40
        if @battle_anime_frame == sframe && $partyc[@chanum.to_i] == 8 #天津飯
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 8
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..120
        sframe = 60
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_type = 1
          @effect_anime_frame = 0
          battle_anime_change 0,4
          @scombo_cha2_anime_type = 0
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        #ピッコロ
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(270+(@battle_anime_frame-sframe)*RAY_SPEED,28,picture,rect)
        #天津飯
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
        @back_window.contents.blt(250+(@battle_anime_frame-sframe)*RAY_SPEED,128,picture,rect)
      when 121
        set_chr_display_out
      when 131..159
        sframe = 131
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
        @back_window.contents.blt(-128+(@battle_anime_frame-sframe)*RAY_SPEED,96,picture,rect)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
        @back_window.contents.blt(-128+(@battle_anime_frame-sframe)*RAY_SPEED,120,picture,rect)
      when 160
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1976 #決死の超元気玉
     
      back_x = 180 - 302
      back_y = -4
     
      backhai_no = 201
     
      ray_x = 340
      ray_y = 200

     if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] != 3
        #@btl_ani_cha_chg_no = 5
        @scombo_cha1 = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 3 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
      else
        case @battle_anime_frame
        when 0..1
          sframe = 0
          if @battle_anime_frame == sframe + 1
            Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
          end
          @ray_color = 0
          @scombo_cha1 = 4
          @scombo_cha2 = 5
          @scombo_cha3 = 6
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          battle_anime_change 0,5
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
          #@chr_cutin_flag = false
        when 2..160
          back_anime_pattern 129,back_x,back_y
        when 161..250
          sframe = 161
          xframe = sframe + 5
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 逃げる")
            @enex = 640 + 32
            @eney = STANDARD_CHAY
          end
          
          #味方の移動
          
          case @battle_anime_frame - xframe
          
          when 0..15
            @scombo_cha1_anime_type = 16
            back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
            
          when 16..20
            @scombo_cha1_anime_type = 4
            back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
          when 21..40
            back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
          when 41..200
            @scombo_cha1_anime_type = 0
            back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
          end
            
          #敵の移動
          case @battle_anime_frame - sframe
          
          when 0..20
            @enex -= 12
          when 21..50
            @enex += 24
            battle_anime_change 1,17
          end
          
          #SE
          case @battle_anime_frame - sframe
          
          when 21 #
            Audio.se_play("Audio/SE/" + "Z1 強打")
          end
          
          #back_anime_pattern 129,back_x,back_y
        when 251..280
          back_x = 234
          back_y = -18 + 54+ 50

          sframe = 251
          if @battle_anime_frame == sframe
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 0
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 0
            end
            @btl_ani_cha_chg_no = 5
            @scombo_cha2 = 6
          end
          @scombo_cha2_anime_type = 2
          battle_anime_change 0,2

          #back_anime_pattern backhai_no,back_x,back_y-50
          #@back_anime_frame -= 1
          #back_anime_pattern backhai_no,back_x,back_y+50
          #@back_anime_frame -= 1
          @chay = STANDARD_CHAY-50
          back_anime_pattern 118,@chax,STANDARD_CHAY+50
        when 281..362
          sframe = 281
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          end
          @effect_anime_pattern = 367
          battle_anime_change 0,3
          @scombo_cha2_anime_type = 3
          back_anime_pattern 118,@chax,STANDARD_CHAY+50
        when 363#270
          @chay = -120
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 373#280
          #set_chr_display_out
          @eney = STANDARD_ENEY
          @enex = CENTER_ENEX
          battle_anime_change 1,0
        when 374..398#281..305
          ray_y = 110
          @ray_color = 0
          @effect_anime_pattern = 48
        when 399..420
          sframe = 399
          
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @effect_anime_pattern = 104
            Audio.se_play("Audio/SE/" + "Z1 爆発1")
            battle_anime_change 1,16
          end
          @enex += 16
        when 421
          Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")
          @effect_anime_pattern = 0
          @ray_color = 0
          @scombo_cha1 = 4
          @scombo_cha2 = 5
          @scombo_cha3 = 6
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          @back_anime_frame = 0
          @back_anime_type = 0
          battle_anime_change 0,5
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
          #@chr_cutin_flag = false
        when 422..580
          back_anime_pattern 129,back_x,back_y
        when 581..610
          sframe = 581
          
          if @battle_anime_frame == sframe
            battle_anime_change 0,6
          end
        when 611..750
          sframe = 611
          
          if @battle_anime_frame == sframe
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)(超元気玉)") #ダメージ表示用
          rect = Rect.new(0, 0,640,250)
          @back_window.contents.blt(0+(@battle_anime_frame-sframe)*RAY_SPEED/2,-220+(@battle_anime_frame-sframe)*RAY_SPEED/6,picture,rect)
        when 751
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          
        when 754
          @tec_output_back_no = 1 #縦に変更
        when 755
          battle_anime_change 1,0
          set_chr_display_out
        when 756..820
          sframe = 756
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)(超元気玉)") #ダメージ表示用
          rect = Rect.new(0, 0,640,250)
          @back_window.contents.blt(0,-250+(@battle_anime_frame-sframe)*RAY_SPEED/6,picture,rect)
        when 821
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1431 #(敵汎用)エネルギー波
        case @enedatenum #敵キャラによって光線の位置を変える
        
        when 37..39,62 #アプール系
          ray_x = 312
          ray_y = 142
        when 63 #惑星戦士3
          ray_x = 308
          ray_y = 144
        when 64 #惑星戦士4
          ray_x = 316
          ray_y = 142
        else
          ray_x = 328
          ray_y = 148
        end
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 1435 #キュイ 爆発波
      @ray_color = 3
      
      if $btl_progress >= 2
        back_x = 256
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 240
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1436 #(キュイ系)連続エネルギー波
        if $btl_progress >= 2
          back_x = 256
          back_y = 86
          backhai_no = 201
          se_name = "Z3 変身"
        else
          back_x = 240
          back_y = 32
          backhai_no = 101
          se_name = "Z2 気を溜める"
        end
        ray_x = 224
        ray_y = 110
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 100
        battle_anime_change 0,4
      when 110
        battle_anime_change 0,1
      when 120
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 231
        #back_anime_pattern 101,back_x,back_y
      when 121..158
        #back_anime_pattern 101,back_x,back_y
      when 159
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 169
        set_chr_display_out
      when 170..196
        @effect_anime_pattern = 232
      when 197
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1437 #(ドドリア系)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 324
        ray_y = 154
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1438 #(ドドリア系)口から怪光線
      ray_x = 238
      ray_y = 128
      if $btl_progress >= 2
        back_x = 248
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 232
        back_y = 36
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        if $btl_progress >= 2
          @ray_color = 3
        else
          @ray_color = 4
        end
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        @ray_color = 4
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1439 #爆発波(ドドリア)
      if $btl_progress >= 2
        back_x = 248
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 232
        back_y = 36
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          if $btl_progress >= 2
          @ray_color = 3
        else
          @ray_color = 4
        end
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          @ray_color = 4
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1440 #(ザーボン系)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 328
        ray_y = 148
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1441 #(ザーボン系)スーパーエネルギー波
        back_x = 233
        back_y = 36
        ray_x = 232
        ray_y = 122
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1442 #爆発波(ザーボン)
      @ray_color = 3
      back_x = 233
      back_y = 36
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1443 #(ザーボン変身)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 328
        ray_y = 142
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1444 #(ザーボン系)スーパーエネルギー波
      ray_x = 214
      ray_y = 116
      
      if $btl_progress >= 2
        back_x = 250
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 216
        back_y = 36
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,4
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1445 #(ギニュー)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 316
        ray_y = 144
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1446 #(ギニュー)スーパーエネルギー波
        
        if $btl_progress >= 2
          back_x = 242
          back_y = 86
          backhai_no = 201
          se_name = "Z3 変身"
        else
          back_x = 224
          back_y = 32
          backhai_no = 101
          se_name = "Z2 気を溜める"
        end
        ray_x = 218
        ray_y = 114
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1447 #爆発波(ギニュー)
      @ray_color = 3
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 224
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1449 #(ジース)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 316
        ray_y = 144
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1450 #クラッシャーボール(ジース)
        if $btl_progress >= 2
          back_x = 248
          back_y = 86
          backhai_no = 201
          se_name = "Z3 変身"
        else
          back_x = 232
          back_y = 32
          backhai_no = 101
          se_name = "Z2 気を溜める"
        end
        ray_x = 210
        ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,4-2
      when 100
        battle_anime_change 0,5-2
      when 110
        battle_anime_change 0,6-2
      when 120
        battle_anime_change 0,7-2
      when 130
        battle_anime_change 0,6-2
      when 140
        battle_anime_change 0,8-2
      when 150
        battle_anime_change 0,6-2
      when 160
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,6
        @effect_anime_pattern = 220
        #back_anime_pattern 101,back_x,back_y
      when 161..198
        #back_anime_pattern 101,back_x,back_y
      when 199
        battle_anime_change 0,6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 209
        set_chr_display_out
      when 210..236
        @effect_anime_pattern = 221
      when 237
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1451 #(バータ)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 1
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 308
        ray_y = 144
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1452 #スピードアタック(バータ)
      if $btl_progress >= 2
        back_x = 236
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
        @ray_color = 3
      else
        back_x = 220
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
        @ray_color = 1
      end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        
      when 1..89
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200 #キャラ画面範囲外へ
        @chax = CENTER_CHAX+20
        
      when 91..130
          #back_x = 220
          #back_y = 32
          back_anime_pattern backhai_no,back_x,back_y
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax + 20,144,picture,rect)
        else
          
        end
      when 131
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
      when 132..159
        #back_anime_pattern 1
        @effect_anime_pattern = 205
      when 160
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1453 #(リクーム)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 4
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 316
        ray_y = 140
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1454 #(リクーム系)連続エネルギー波
        
        if $btl_progress >= 2
          back_x = 246
          back_y = 86
          backhai_no = 201
          se_name = "Z3 変身"
        else
          back_x = 230
          back_y = 32
          backhai_no = 101
          se_name = "Z2 気を溜める"
        end
        ray_x = 226
        ray_y = 104
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        if $btl_progress >= 2
          @ray_color = 3
        else
          @ray_color = 4
        end
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 100
        battle_anime_change 0,4
      when 110
        battle_anime_change 0,2
      when 120
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 231
        @ray_color = 4
        #back_anime_pattern 101,back_x,back_y
      when 121..158
        #back_anime_pattern 101,back_x,back_y
      when 159
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 169
        set_chr_display_out
      when 170..196
        @effect_anime_pattern = 232
      when 197
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1455 #(リクーム)イレイザーガン
        
        if $btl_progress >= 2
          back_x = 246
          back_y = 86
          backhai_no = 201
          se_name = "Z3 変身"
        else
          back_x = 230
          back_y = 32
          backhai_no = 101
          se_name = "Z2 気を溜める"
        end
        ray_x = 220
        ray_y = 116
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress >= 2
          @ray_color = 3
        else
          @ray_color = 4
        end
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        @ray_color = 4
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1456 #(グルド)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 336
        ray_y = 160
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1457 #(グルド)タイムストップ
        back_x = 260
        back_y = 60
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 3
      when 1..69
        back_anime_pattern 105,back_x,back_y
      when 70
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,3
        #@effect_anime_pattern = 203
        back_anime_pattern 105,back_x,back_y
      when 71..108
        back_anime_pattern 105,back_x,back_y
      when 109
        Audio.se_stop
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        set_chr_display_out
        @tec_output_back = false
        @chr_cutin_flag = false
      when 120..146
        back_anime_pattern 9
      when 147
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1458 #(フリーザ)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 312
        ray_y = 144
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1459 #爆発波(フリーザ)
      @ray_color = 3
        back_x = 230
        back_y = 32
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,2
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,4
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,4
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1460 #(フリーザ)スーパーエネルギー波
        back_x = 230
        back_y = 32
        ray_x = 218
        ray_y = 130
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1461 #(フリーザ1)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 300
        ray_y = 142
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1462 #爆発波(フリーザ1)
      @ray_color = 3
        back_x = 230
        back_y = 32
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1463 #(フリーザ1)スーパーエネルギー波
        back_x = 230
        back_y = 32
        ray_x = 210
        ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1464 #(フリーザ2)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 300
        ray_y = 142
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1465 #爆発波(フリーザ2)
      @ray_color = 3
        back_x = 230
        back_y = 32
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1466 #(フリーザ2)スーパーエネルギー波
        back_x = 230
        back_y = 32
        ray_x = 210
        ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1467 #(フリーザ3)エネルギー波
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        ray_x = 300
        ray_y = 142
        if @enedatenum == 57 #フルパワー
          ray_x = 320
          ray_y = 146
        end
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1468 #爆発波(フリーザ3)
      @ray_color = 3
        back_x = 230
        back_y = 32
      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 101,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 101,back_x,back_y
        when 91..140
          back_anime_pattern 101,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          battle_anime_change 0,2
          if @enedatenum == 57 #フルパワー
            battle_anime_change 0,5
          end
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          battle_anime_change 0,2
          if @enedatenum == 57 #フルパワー
            battle_anime_change 0,5
          end
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1469 #(フリーザ3)スーパーエネルギー波
        back_x = 204
        back_y = 32
        ray_x = 116
        ray_y = 96
        if @enedatenum == 57 #フルパワー
          ray_x = 142
          ray_y = 102
        end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern 102,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
        if @enedatenum == 57 #フルパワー
          battle_anime_change 0,6
        end
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        if @enedatenum == 57 #フルパワー
          battle_anime_change 0,6
        end
        @effect_anime_pattern = 239
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 240
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 1724 #フリーザデスボール
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..128
        back_x = 204
        back_y = 32
        back_anime_pattern 102,back_x,back_y
      when 129..429
        @chr_cutin = false
        @ray_color = 0
        sframe = 129
        kitamefra = 30
        @tec_output_back_no = 1
        kien_x = 256
        kien_y = 4
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
        @eney = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z2_必殺技_デスボール(フリーザフルパワー)一枚絵")
        if @enedatenum == 57 || @enedatenum == 279 #フルパワー
          picture = Cache.picture("Z2_必殺技_デスボール(フリーザフルパワー100)一枚絵")
        end
        rect = Rect.new(0, 0, 108, 240)
        @back_window.contents.blt(264,78,picture,rect)
        #picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        #rect = Rect.new(0, 30*0, 126, 30)
        
        case @battle_anime_frame
        
        when (sframe + 15 + kitamefra * 1)..(sframe + 15 + kitamefra * 2 - 1)
          @ray_anime_type = 1
           
        when (sframe + 15 + kitamefra * 2)..(sframe + 15 + kitamefra * 3 - 1)
          @ray_anime_type = 2
          
        when (sframe + 15 + kitamefra * 3)..(sframe + 15 + kitamefra * 4 - 1)
          @ray_anime_type = 3
          
        when (sframe + 15 + kitamefra * 4)..(sframe + 15 + kitamefra * 5 - 1)
          @ray_anime_type = 4
          
        when (sframe + 15 + kitamefra * 5)..(sframe + 15 + kitamefra * 6 - 1)
          @ray_anime_type = 4
          kien_y -= (6 + 16 + 16 + 16)
        when (sframe + 15 + kitamefra * 6)..(sframe + 15 + kitamefra * 11 - 1)
          Audio.se_stop if @battle_anime_frame == sframe + 15 + kitamefra * 6
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe + 15 + kitamefra * 6
          @ray_anime_type = 4
          kien_y -= (6 + 16 + 16 + 16 + 4 * (@battle_anime_frame-(sframe + 15 + kitamefra * 6))) 
        end
        
        if @battle_anime_frame < sframe + 15 + kitamefra * 5
          if @battle_anime_frame % 12 == 0 #|| @battle_anime_frame % 8 == 0
            @ray_anime_type -= 1
          end
          
          case @ray_anime_type
          
          when 1
            kien_y -= 6
          when 2
            kien_y -= (6 + 16)
          when 3
            kien_y -= (6 + 16 + 16)
          when 4
            kien_y -= (6 + 16 + 16 + 16)
          end
        end
        
        
        
        
        if @battle_anime_frame-sframe > 15
          picture = Cache.picture("Z3_戦闘_必殺技_繰気弾")
          rect = Rect.new(@ray_anime_type*128, 0,128,128)
        
          @back_window.contents.blt(kien_x,kien_y,picture,rect)
          
          
        end
        
      when 430
        @tec_back_small = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
      when 431..455
        
        #ray_x = 346
        #ray_y = 136
        @effect_anime_pattern = 294
      when 456
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1794 #俺に殺されるべきなんだ
        back_x = 228
        back_y = 88
        ray_x = 0#0346
        ray_y = 158#66

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,15
      when 1..128
        eframe = 128
        back_x = 204
        back_y = 32
        back_anime_pattern 102,back_x,back_y
        if @battle_anime_frame == eframe
          @tec_output_back_no = 2
          @eney = -200
          @chr_cutin = false
        end
      when 129..300
        kien_x = 214
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z2_必殺技_オレに殺されるべきなんだ(フリーザ)_一枚絵")
        bezikat_x = 226
        bezikat_y = 80
        rect = Rect.new(0, 0, 150, 198)
  
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x += 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x += 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x += 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x += 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x += 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..230
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 140
            ray_x = 260
            ray_y = 228
          
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336
        ray_y = 112
        #@effect_anime_pattern = 265
        #@effect_anime_pattern = 266
        @effect_anime_pattern = 48
      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1795 #スーパーギャリック砲
        back_x = 228
        back_y = 88
        ray_x = 0#0346
        ray_y = 158#66

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,5
      when 1..128
        eframe = 128
        back_x = 204
        back_y = 32
        back_anime_pattern 102,back_x,back_y
        if @battle_anime_frame == eframe
          @tec_output_back_no = 2
          @eney = -200
          @chr_cutin = false
        end
      when 129..250
        sframe = 129
        eframe = 250
        kien_x = 214
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == sframe
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z2_必殺技_超ベジータギャリック砲")
        bezikat_x = 106
        bezikat_y = 40
        rect = Rect.new(0, 0, 360, 282)
        
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when sframe..250
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
          ray_x = 278
          ray_y = 66
          @effect_anime_pattern = 235
        end
        
        if @battle_anime_frame == eframe
          @chr_cutin = true
          @tec_output_back_no = 0
        end
      when 251..300
        sframe = 251
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_pattern = 295
          battle_anime_change 0,6
          @eney = STANDARD_ENEY
        end
        
        ray_x = 86
        ray_y = 68
      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336
        ray_y = 112
        #@effect_anime_pattern = 265
        #@effect_anime_pattern = 266
        @effect_anime_pattern = 48
      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1474 #(ターレス)エネルギー波
        ray_x = 314
        ray_y = 144
      case @battle_anime_frame

      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 3
      when 1..40
        @effect_anime_pattern = 227
      when 1..41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 45
        set_chr_display_out
      when 46..75
        @effect_anime_pattern = 228
      when 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1475 #爆発波(ターレス)
      @ray_color = 3
      if $btl_progress >= 2
        back_x = 246
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 226
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end

      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          #@ray_color = 0
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
        when 101
          @chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          back_anime_pattern 2
        when 102..180
          back_anime_pattern 2
          @output_anime_type = 1
          battle_anime_change 0,4
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1476 #(ターレス)キルドライバー

      ray_x = 216
      ray_y = 118
      if $btl_progress >= 2
        back_x = 246
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 204
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1477 #(ターレス)メテオバースト
      if $btl_progress >= 2
        back_x = 246
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 204
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
        
      ray_x = 210
      ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        battle_anime_change 0,3
      when 91..119
        @ax = 16
      
      when 126
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 127..133
        @ax = 16
      when 134..140
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,16
      when 141..147
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,3
      when 148..180
        if @battle_anime_frame == 148
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        @ax = 0
        @ay = 0
        @gx = -16
        battle_anime_change 1,16
        @effect_anime_pattern = 121
      when 181
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @gx = 0
        @output_anime_type = 1
        battle_anime_change 0,3
      when 182..219
        @ax = 16
      when 226
        @ax = 0
        set_chr_display_out
        @chax = STANDARD_ENEX-100
        @enex = STANDARD_ENEX+40
        @eney = STANDARD_ENEY
      when 227..233
        @ax = 16
        @gx = -10
      when 234..240
        @ax = 16
        #@output_anime_type = 0
        #battle_anime_change 0,16
      when 241..247
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,2
      when 248..280
        if @battle_anime_frame == 248
          Audio.se_play("Audio/SE/" + "ZG 打撃2")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        @ax = 0
        @ay = 0
        @gx = -15
        battle_anime_change 1,17
        @effect_anime_pattern = 121
      when 281
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 282..300
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        else
          
        end
      when 306
        @ax = 0
        @gx = 0
        set_chr_display_out
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @eney = -200
      when 307..325
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        else
          
        end
      when 326
        @eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        
      when 327..340
        ray_x = CENTER_ENEX-4
        ray_y = STANDARD_ENEY+32
        @ray_color = 3
        @effect_anime_pattern = 237
      when 341..400
        ray_x = CENTER_ENEX-20
        ray_y = STANDARD_ENEY+24
        @ray_color = 3
        @effect_anime_pattern = 235
      when 401
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1744 #大猿変身(ターレス)
      if @battle_anime_frame == 0 #初期化
        #@tec_output_back_no = 1 #必殺背景縦
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
        #back_anime_pattern 2
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 80 
        back_anime_pattern 4
      elsif @battle_anime_frame == 81
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        back_anime_pattern 4#5
        battle_anime_change 0,7
        @effect_anime_pattern = 21
        ray_x = 234
        ray_y = 100
      elsif @battle_anime_frame >= 82 && @battle_anime_frame <= 102
        back_anime_pattern 4#5
        battle_anime_change 0,7
        ray_x = 234
        ray_y = 100 - (@battle_anime_frame-82)
      #elsif @battle_anime_frame == 81
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #@effect_anime_pattern = 21
        #back_anime_pattern 5
      elsif @battle_anime_frame >= 103 && @battle_anime_frame <= 184
        back_anime_pattern 4#5
        ray_x = 234
        ray_y = 80
      elsif @battle_anime_frame >= 185 && @battle_anime_frame <= 209
        battle_anime_change 0,8
        ray_x = 226
        ray_y = 88
      elsif @battle_anime_frame == 210
        Audio.se_play("Audio/SE/" + "Z1 繰気弾")    # 効果音を再生する
        battle_anime_change 0,9
        ray_x = 226
        ray_y = 88
        @effect_anime_pattern = 21
      elsif @battle_anime_frame >= 211 && @battle_anime_frame <= 305
        ray_x = 226 - (@battle_anime_frame-211)*4
        ray_y = 88 - (@battle_anime_frame-211)*4
        
        if @battle_anime_frame >= 265
          back_anime_pattern 11
          battle_anime_change 0,10
        end
      elsif @battle_anime_frame == 306
        Audio.se_stop
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 2
      elsif  @battle_anime_frame == 307
        @eney = -200 #キャラ画面範囲外へ
      elsif @battle_anime_frame >= 308 && @battle_anime_frame <= 374
        @effect_anime_pattern = 21
        ray_x = 256
        ray_y = 240 - (@battle_anime_frame-308)*2
        if @battle_anime_frame == 374
          #p ray_y #108
        end
      elsif @battle_anime_frame == 375
        ray_x = 256
        ray_y = 108
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
      elsif @battle_anime_frame >= 375 && @battle_anime_frame <= 439
        ray_x = 256
        ray_y = 108
        
        if @battle_anime_frame <= 383
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 391
          color = Color.new(0,0,0,260)
        elsif @battle_anime_frame <= 399
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 407
          color = Color.new(255,216,160,260)
        elsif @battle_anime_frame <= 415
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 423
          color = Color.new(0,0,0,260)
        elsif @battle_anime_frame <= 431
          color = Color.new(255,255,255,260)
        elsif @battle_anime_frame <= 439
          color = Color.new(255,216,160,260)
        end
        @back_window.contents.fill_rect(0,0,680,FLASH_Y_SIZE_CUTIN_OFF,color)
      elsif @battle_anime_frame >= 440 && @battle_anime_frame <= 470
        battle_anime_change 0,0
        @eney = STANDARD_ENEY
        @effect_anime_pattern = 0
      elsif @battle_anime_frame >= 471 && @battle_anime_frame <= 660
        if @battle_anime_frame == 471
          Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
        end
        picture = Cache.picture("Z2_戦闘_必殺技_敵_ターレス") #ダメージ表示用
        if @battle_anime_frame <= 471
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 479
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 487
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 495
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 503
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 511
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 519
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 527
          @eney = STANDARD_ENEY
        elsif @battle_anime_frame <= 535
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame == 536
          Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
          rect = Rect.new(0, 1168,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 600
          rect = Rect.new(0, 1168,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        elsif @battle_anime_frame <= 660
          rect = Rect.new(0, 1056,96,112)
          @back_window.contents.blt(266,118,picture,rect)
          @eney = -200 #キャラ画面範囲外へ
        end
      elsif @battle_anime_frame == 661
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 1478 #(スラッグ)エネルギー波
        ray_x = 308
        ray_y = 138
        @ray_color = 1
      case @battle_anime_frame

      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        #@ray_color = 3
      when 1..40
        @effect_anime_pattern = 227
      when 41..41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 45
        set_chr_display_out
      when 46..75
        @effect_anime_pattern = 228
      when 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1479 #爆発波(スラッグ)
      @ray_color = 1
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 226
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end

      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          #@ray_color = 0
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
        when 101
          @chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          back_anime_pattern 2
        when 102..180
          back_anime_pattern 2
          @output_anime_type = 1
          battle_anime_change 0,4
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1480 #(スラッグ)ビッグスマッシャー
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
        ray_x = 120
        ray_y = 106
      else
        back_x = 208
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
        ray_x = 120
        ray_y = 106
      end
      
      @ray_color = 1
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,1
      when 110
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 239
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 240
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1481 #(スラッグ)メテオバースト
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 208
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
        
        ray_x = 214
        ray_y = 120
        @ray_color = 1
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        battle_anime_change 0,3
      when 91..119
        @ax = 16
      
      when 126
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 127..133
        @ax = 16
      when 134..140
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,16
      when 141..147
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,2
      when 148..150
        if @battle_anime_frame == 148
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        @ax = 0
        @ay = 0
        @gx = -16
        battle_anime_change 1,16
        @effect_anime_pattern = 121
      when 151..153
        @gx = 16
      when 154
        @gx = 0
        @output_anime_type = 1
        battle_anime_change 0,2
        @effect_anime_pattern = 0
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "ZG 打撃4")    # 効果音を再生する
      when 155..164
        battle_anime_change 0,2
        @gx = 8
      when 165..174
        battle_anime_change 0,5
        @gx = -8
      when 175..184
        battle_anime_change 0,2
        @gx = 8
      when 185..194
        battle_anime_change 0,5
        @gx = -8
      when 195..204
        battle_anime_change 0,2
        @gx = 8
      when 205..214
        battle_anime_change 0,5
        @gx = -8
      when 215..224
        battle_anime_change 0,2
        @gx = 8
      when 225..234
        battle_anime_change 0,5
        @gx = -8
      when 235
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
        battle_anime_change 0,2
        battle_anime_change 1,17
        @gx = -16
      when 245
        battle_anime_change 0,0
      when 260
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
      when 261..300
        ray_x = 214-4
        ray_y = 120-10
        battle_anime_change 0,1
        @effect_anime_pattern = 233
      when 301
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 305
        set_chr_display_out
        @chax = (STANDARD_ENEX - 50)
        @gx = -10
      when 306..335
        @effect_anime_pattern = 234
      when 336
        @gx  = 0
        @chax = CENTER_CHAX
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1745 #スラッグ巨大化
      
      small_enenum = 0
      big_enenum = 0
      
      if $battleenemy[@enenum] == 255 #ZGスラッグ
        small_enenum = 255
        big_enenum = 223
      else #Z2スラッグ
        small_enenum = 60
        big_enenum = 71
      end
      #p $battleenemy[@enenum]
      case @battle_anime_frame
      
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z1 満月")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        #battle_anime_change 0,0
        @ray_color = 0
        #@tec_output_back = false
        #@chr_cutin = false
      when 1..190
        sframe = 1
        #battle_anime_change 0,0
        @eney = STANDARD_ENEY
        if @battle_anime_frame == sframe
          #Audio.se_play("Audio/SE/" + "Z1 パワーアップ")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める5")
        end
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") #ダメージ表示用
        if @battle_anime_frame <= sframe
          #rect = Rect.new(0, 384,96,112)
          #@back_window.contents.blt(266,118,picture,rect)
          #@chay = -120 #キャラ画面範囲外へ
          
          @enedatenum = big_enenum
          @enex = TEC_CENTER_CHAX# + 48
        elsif @battle_anime_frame <= sframe + 8
          @enedatenum = small_enenum
          @enex = TEC_CENTER_CHAX
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 16
          @enedatenum = big_enenum
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 24
          @enedatenum = small_enenum
          @enex = TEC_CENTER_CHAX
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 32
          @enedatenum = big_enenum
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 40
          @enedatenum = small_enenum
          @enex = TEC_CENTER_CHAX
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 48
          @enedatenum = big_enenum
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 56
          @enedatenum = small_enenum
          @enex = TEC_CENTER_CHAX
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 64
          @enedatenum = big_enenum
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 65
          #sframe = 266
          #if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 パワーアップ")
            @enedatenum = big_enenum
          #end
          
        elsif @battle_anime_frame <= sframe + 129
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        elsif @battle_anime_frame <= sframe + 189
          @enex = TEC_CENTER_CHAX# + 48
          battle_anime_change 0,0
        end
      when 200
        #@eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1482 #(ジース,バータ)パープルコメットクラッシュ
        ray_x = 236
        ray_y = 122
      case @battle_anime_frame

      when 0 #初期化
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        #back_anime_pattern 102
      when 1..89
        if $battleenemy[@enenum] == 49 || $battleenemy[@enenum] == 248
          #ジース溜め
          @ray_color = 4
          back_x = 262
          back_y = 114
        else
          #バータ溜め
          @ray_color = 3
          back_x = 256
          back_y = 114
        end
        back_anime_pattern 107,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        #battle_anime_change 0,1
      when 91..179
        if $battleenemy[@enenum] == 49 || $battleenemy[@enenum] == 248
          #バータ溜め
          @ray_color = 3
          back_x = 256
          back_y = 114
        else
          #ジース溜め
          @ray_color = 4
          back_x = 262
          back_y = 114
        end
        back_anime_pattern 107,back_x,back_y
      when 180
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める4")    # 効果音を再生する
        @back_anime_frame = 0
        @ray_anime_type = 0
        @ray_anime_frame = 0
      when 181..217
        back_anime_pattern 108
      when 218..299
        back_anime_pattern 109
      when 300..300
        back_anime_pattern 109
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
      when 301..340
        back_anime_pattern 109
        @effect_anime_pattern = 241
      when 341..341
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 345
        set_chr_display_out
      when 346..372
        @effect_anime_pattern = 242
      when 373
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1726 #気円斬(アモンド)
      
      if $btl_progress >= 2
        back_x = 256
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 240
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,0
      when 91..150
        sframe = 91
        Audio.se_play("Audio/SE/" + "Z1 ブン") if sframe == @battle_anime_frame
        battle_anime_change 0,2
        @effect_anime_pattern = 218
        @effect_anime_frame = 0
        ray_x = 290
        ray_y = 86
      when 151..179
        sframe = 151
        Audio.se_play("Audio/SE/" + "Z1 気円斬") if sframe == @battle_anime_frame
        @effect_anime_pattern = 218
        battle_anime_change 0,3
        ray_x = 184
        ray_y = 140
      when 180
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 181
        set_chr_display_out
      when 182..211
        @effect_anime_pattern = 219
      when 212
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1727 #プラネットボム(アモンド)
      
      if $btl_progress >= 2
        back_x = 256
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 220
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
      @ray_color = 3
      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          #@ray_color = 0
          @output_anime_type = 1
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
          battle_anime_change 0,4
        when 101
          #@chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #back_anime_pattern 2
          
        when 102..180
          #back_anime_pattern 2
          back_anime_pattern 1
          battle_anime_change 0,5
        when 181
          set_chr_display_out
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1730 #コズミックアタック(カカオ)
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 212
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
      ray_x = 170
      ray_y = 130
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,3
      when 91..148
        @enex -= 20
      when 149
        #@chax = CENTER_CHAX
        #@chay = STANDARD_CHAY
        #
        #@enex = CENTER_ENEX
        #
        set_chr_display_out
        @enex = 640
        @eney = STANDARD_ENEY
      when 150..166
        @enex -= 20
      when 167..200
        sframe = 167
        Audio.se_stop if sframe == @battle_anime_frame
        @output_anime_type = 0
        battle_anime_change 1,16

        case (@battle_anime_frame - sframe) 
        
        when 0,16
          #@attack_hit = false
          if @attack_hit == false
            @battle_anime_frame = 390
          else
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 打撃")
          end
        when 4,20
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when 8,24
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when 12,28
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when 32
          battle_anime_change 0,0
        end
        
        case (@battle_anime_frame - sframe)
        
        when 0..1,4..5,8..9,12..13,16..17,20..21,24..25,28..29
          @chax -= 4
        when 2..3,6..7,10..11,14..15,18..19,22..23,26..27,30..31
          @chax += 4
        end
      when 201..240
        sframe = 201
        @chay = -200 
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if sframe == @battle_anime_frame

        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax,144+2,picture,rect)

        else
          
        end
      when 241..319
        sframe = 241
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if sframe == @battle_anime_frame
        @output_anime_type = 1
        battle_anime_change 0,5
        @enex += 24
        @eney -= 6
      when 320
        @enex = -190
        @eney = 240
      when 321..340
        @enex += 24
        @eney -= 6
      when 341
        Audio.se_stop
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
      when 351..380
        sframe = 351
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if sframe == @battle_anime_frame
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax,144+2,picture,rect)

        else
          
        end
      when 381
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        battle_anime_change 1,0
      when 391
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1733 #爆発波(ダイーズ)
      @ray_color = 3
      
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 226
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end

      ray_x = 326-80
      ray_y = 96

      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          #@ray_color = 0
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
        when 101
          @chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          back_anime_pattern 2
        when 102..180
          back_anime_pattern 2
          @output_anime_type = 1
          battle_anime_change 0,4
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1734 #メテオボール(ダイーズ)
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 212
        back_y = 32
        backhai_no = 102
        se_name = "Z2 気を溜める"
      end
      ray_x = 170
      ray_y = 130
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 110
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_pattern = 203
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 204
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1740 #ダブルエネルギー波(レズン、ラカセイ
      if $btl_progress >= 2
        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 242
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 256
      ray_y = 206
      case @battle_anime_frame
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..39
        
        if @enedatenum == 68 || @enedatenum == 220
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)
          
          tyouseix = @battle_anime_frame - 1
          @back_window.contents.blt(640+90-8*tyouseix,STANDARD_ENEY + 50,picture,rect)
        else
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)
          tyouseix = @battle_anime_frame - 1
          @back_window.contents.blt(640+90-8*tyouseix,STANDARD_ENEY - 50,picture,rect)

        end
      when 40..59
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)
          tyouseix = @battle_anime_frame - 1
          if @enedatenum == 68 || @enedatenum == 220
            @back_window.contents.blt(640+90-8*tyouseix,STANDARD_ENEY + 50,picture,rect)
          else
            @back_window.contents.blt(640+90-8*tyouseix,STANDARD_ENEY - 50,picture,rect)
          end
      when 60
        @eney = STANDARD_ENEY - 50
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(@enex,STANDARD_ENEY + 50,picture,rect)
      when 61
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        #@effect_anime_pattern = 203
        picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
        rect = Rect.new(0, 96*1,96,96)
        @back_window.contents.blt(@enex,STANDARD_ENEY + 50,picture,rect)
        battle_anime_change 0,2
      when 62..99
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
        rect = Rect.new(0, 96*1,96,96)
        @back_window.contents.blt(@enex,STANDARD_ENEY + 50,picture,rect)
        @effect_anime_pattern = 338
      when 100..109
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
          picture = Cache.picture("Z2_戦闘_必殺技_敵_レズン") #ダメージ表示用
        rect = Rect.new(0, 96*1,96,96)
        @back_window.contents.blt(@enex,STANDARD_ENEY + 50,picture,rect)
      when 110
        set_chr_display_out
      when 111..136
        @effect_anime_pattern = 339
      when 137
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1747 #エビルクエーサー アンギラ
      if $btl_progress >= 2
        back_x = 250
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 234
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 250
      ray_y = 120
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,2
      when 110
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1748 #手が伸びる＆エビルクエーサー アンギラ
      if $btl_progress >= 2
        back_x = 250
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 234
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 280
      ray_y = 154
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
        @back_anime_frame = 0
      when 110
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ")    # 効果音を再生する
        back_anime_pattern 216,ray_x,ray_y
      when 111..148
        back_anime_pattern 216,ray_x,ray_y
      when 149..158
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
      when 159
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @back_anime_frame = 0
      when 160..186
        ray_x = 640
        #@effect_anime_pattern = 340
        back_anime_pattern 216,ray_x,ray_y
      when 187..219
        ray_x = 640
        sframe = 187
        @back_anime_frame -= 1
        if @attack_hit == false
          @battle_anime_frame = 294
        else
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
          
        end
        back_anime_pattern 216,ray_x,ray_y
        battle_anime_change 1,16
        case (@battle_anime_frame - sframe)
        #battle_anime_change 1,16
        when 0..3
          @chax -= 8
        when 4..7
          @chax += 8
        end
      when 220..229
        sframe = 220
        ray_x = 280 + 38
        @chax = -200
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
      when 230..267
        sframe = 230
        ray_x = 280 + 38
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
        battle_anime_change 0,9
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe
        ray_x = 292
        ray_y = 120
        @effect_anime_pattern = 233
      when 268..294
        sframe = 268
        @back_anime_frame -= 1 if @battle_anime_frame == sframe
        @chax = CENTER_CHAX if @battle_anime_frame == sframe
        @chay = STANDARD_CHAY if @battle_anime_frame == sframe
        @eney = -200
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        ray_x = 640
        back_anime_pattern 216,ray_x,ray_y
        battle_anime_change 1,16
        @back_anime_frame -= 1
        ray_x = 250
        ray_y = 120
        @effect_anime_pattern = 234
      when 295
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1751 #エビルグラビティ ドロダボ
      if $btl_progress >= 2
        back_x = 246
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 230
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 212
      ray_y = 120
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,3
      when 110
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 111..148
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 159
        set_chr_display_out
      when 160..186
        @effect_anime_pattern = 234
      when 187
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1754 #エビルコメット(メダマッチャ)
      @ray_color = 3
      
      if $btl_progress >= 2
        back_x = 256
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 240
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end

      ray_x = 326
      ray_y = 96

      if @all_attack_count == 1  
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)
          #@ray_color = 0
        when 1..100
          back_anime_pattern backhai_no,back_x,back_y
        when 101
          #@chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          back_anime_pattern 2
          @output_anime_type = 1
          battle_anime_change 0,2
        when 102..309
          #@ray_color = 0
          sframe = 102
          back_anime_pattern 2
          
          case (@battle_anime_frame - sframe)
          
          when 19
            battle_anime_change 0,3
          when 39
            battle_anime_change 0,4
          when 47,87,127,167
            battle_anime_change 0,5
          when 55,95,135,175
            battle_anime_change 0,6 #放つ
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 エネルギー波")
            @effect_anime_frame = 0
            @effect_anime_type = 1
            @effect_anime_pattern = 16 #18
            
          when 63,103,143,183
            battle_anime_change 0,9  
          when 71,111,151,191
            battle_anime_change 0,7  
          when 79,119,159,199
            battle_anime_change 0,8 #放つ
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 エネルギー波")
            @effect_anime_frame = 0
            @effect_anime_type = 1
            @effect_anime_pattern = 18 #16
          end
          
          if @effect_anime_pattern == 16
            ray_x = 220
            ray_y = 98
          end
          
          if @effect_anime_pattern == 18
            ray_x = 278
            ray_y = 98
          end
          
        when 310
          @tec_output_back = true
          set_chr_display_out
          @effect_anime_frame = 0
          @effect_anime_type = 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        when 311..337
          ray_y = 160
          @effect_anime_pattern = 340
        when 338
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          @tec_output_back = true
          set_chr_display_out
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 1..27
          ray_y = 160
          @effect_anime_pattern = 340
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        when 28
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 1755 #カエル攻撃 メダマッチャ
      @ray_color = 3
      
      if $btl_progress >= 2
        back_x = 256
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 240
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end

      ray_x = 212
      ray_y = 120
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,0
      when 110..250
        sframe = 110
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        rect = Rect.new(0, 96*11,96,96)
        
        #@back_window.contents.blt(@enex-8,@eney-34-kaerufre*2,picture,rect)
        
        case (@battle_anime_frame - sframe)
        
        when 0,30,60,90
          @back_anime_frame = 0
          Audio.se_play("Audio/SE/" + "DB3 SE061")
        when 1..7
          @back_window.contents.blt(@enex-8+@back_anime_frame*2,@eney-34-@back_anime_frame*2,picture,rect)
          @back_anime_frame += 1
        when 31..37
          @back_window.contents.blt(@enex-16,@eney-42-@back_anime_frame*2,picture,rect)
          @back_anime_frame += 1
        when 61..67
          @back_window.contents.blt(@enex-32,@eney-42-@back_anime_frame*2,picture,rect)
          @back_anime_frame += 1
        when 91..97
          @back_window.contents.blt(@enex-40-@back_anime_frame*2,@eney-34-@back_anime_frame*2,picture,rect)
          @back_anime_frame += 1
        end
        
        if @battle_anime_frame - sframe > 7
          @back_window.contents.blt(@enex-8+7*2,@eney-34-7*2,picture,rect)
        end
        
        if @battle_anime_frame - sframe > 37
          @back_window.contents.blt(@enex-16,@eney-42-7*2,picture,rect)
        end
        if @battle_anime_frame - sframe > 67
          @back_window.contents.blt(@enex-32,@eney-42-7*2,picture,rect)
        end
        if @battle_anime_frame - sframe > 97
          @back_window.contents.blt(@enex-40-7*2,@eney-34-7*2,picture,rect)
        end
      when 251..298
        sframe = 251
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        kaerutyousei = @battle_anime_frame - sframe
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        rect = Rect.new(0, 96*12,96,96)
        kx = kaerutyousei * 16
        ky = kaerutyousei * 2
        @back_window.contents.blt(@enex-8+7*2-kx,@eney-34-7*2-ky,picture,rect)
        @back_window.contents.blt(@enex-16-kx,@eney-42-7*2-ky,picture,rect)
        @back_window.contents.blt(@enex-32-kx,@eney-42-7*2-ky,picture,rect)
        @back_window.contents.blt(@enex-40-7*2-kx,@eney-34-7*2-ky,picture,rect)
      when 299
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 309
        set_chr_display_out
        #@eney = STANDARD_ENEY
        #@eney += 16
        #@enex = 740
      when 310..366
        sframe = 310
        @effect_anime_pattern = 341
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        @battle_anime_frame = 366 if @attack_hit == false && @battle_anime_frame == sframe + 25
          
        Audio.se_play("Audio/SE/" + "DB3 SE061") if @battle_anime_frame == sframe + 26
=begin
        kaerutyousei = @battle_anime_frame - sframe

        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        
        if (@battle_anime_frame - sframe) < 16
          rect = Rect.new(0, 96*12,96,96)
        else
          rect = Rect.new(0, 96*11,96,96)
        end
        kx = kaerutyousei * 16
        ky = -kaerutyousei * 2
        kkx = 640
        kky = 80
        @back_window.contents.blt(kkx-8+7*2-kx,kky-34-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-16-kx,kky-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-32-kx,kky-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-40-7*2-kx,kky-34-7*2-ky,picture,rect)
=end
      when 367
        #@eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1758 #エビルインパクト ゼエウン
      if $btl_progress >= 2
        back_x = 246
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 230
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 212
      ray_y = 120
      @ray_color = 3
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        battle_anime_change 0,0
      when 110
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,2
        @enex -= 20
        @eney += 16
        #@chr_cutin = false
        @tec_output_back = false
        back_anime_pattern 1
      when 111..148
        @enex -= 20
        back_anime_pattern 1
        #back_anime_pattern 101,back_x,back_y
      when 149
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        back_anime_pattern 1
      when 159
        set_chr_display_out
        @enex = 760
        @eney = STANDARD_ENEY
        @eney += 16
      when 160..186
        @enex -= 20
        back_anime_pattern 1
        
      when 187
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1761 #腕伸びるカエル攻撃 アンギラ、メダマッチャ
      if $btl_progress >= 2
        back_x = 250
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
      else
        back_x = 234
        back_y = 32
        backhai_no = 101
        se_name = "Z2 気を溜める"
      end
      ray_x = 280
      ray_y = 154
      @ray_color = 3
      case @battle_anime_frame
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..39
        
        if @enedatenum == 72 || @enedatenum == 224
          picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)
          
          tyouseix = @battle_anime_frame - 1
          @back_window.contents.blt(740-8*tyouseix,STANDARD_ENEY,picture,rect)
        else
          picture = Cache.picture("Z2_戦闘_必殺技_敵_アンギラ") #ダメージ表示用
          rect = Rect.new(0, 0,96,96)
          
          tyouseix = @battle_anime_frame - 1
          @back_window.contents.blt(734-12*tyouseix,STANDARD_ENEY,picture,rect)
          #p @enex 266
          @enex += 8 
          
          if @enex > 428
            @enex = 428
          end

        end
      when 40..59
          
          tyouseix = 39
          if @enedatenum == 72 || @enedatenum == 224
            picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
            rect = Rect.new(0, 0,96,96)
            @back_window.contents.blt(740-8*tyouseix,STANDARD_ENEY,picture,rect)
          else
            picture = Cache.picture("Z2_戦闘_必殺技_敵_アンギラ") #ダメージ表示用
            rect = Rect.new(0, 0,96,96)
            @back_window.contents.blt(734-12*tyouseix,STANDARD_ENEY,picture,rect)
          end
      when 60
        if @enedatenum == 74
          @enedatenum = 72
          @enex -= 162
        elsif @enedatenum == 226
          @enedatenum = 224
          @enex -= 162
        end
        #@eney = STANDARD_ENEY - 50
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
        Audio.se_play("Audio/SE/" + se_name)
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x+170,back_y
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 150
        Audio.se_stop
        battle_anime_change 0,3
        @back_anime_frame = 0
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 151..169
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 170
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ")    # 効果音を再生する
        back_anime_pattern 216,ray_x,ray_y
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 171..208
        back_anime_pattern 216,ray_x,ray_y
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 209..218
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 219
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @back_anime_frame = 0
      when 220..246
        ray_x = 640
        #@effect_anime_pattern = 340
        back_anime_pattern 216,ray_x,ray_y
      when 247..279
        ray_x = 640
        sframe = 247
        @back_anime_frame -= 1
        if @attack_hit == false
          @battle_anime_frame = 354
        else
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
          
        end
        back_anime_pattern 216,ray_x,ray_y
        battle_anime_change 1,16
        case (@battle_anime_frame - sframe)
        #battle_anime_change 1,16
        when 0..3
          @chax -= 8
        when 4..7
          @chax += 8
        end
      when 280..289
        sframe = 280
        #ray_x = 280 + 38
        @chax = -200
        @enex = TEC_CENTER_CHAX #CENTER_ENEX
        @eney = STANDARD_ENEY
        
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
        
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
      when 290..430
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
        
        sframe = 290
        
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
        
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        rect = Rect.new(0, 96*11,96,96)
        
        #@back_window.contents.blt(@enex-8,@eney-34-kaerufre*2,picture,rect)
        
        kaerux = @enex + 166
        case (@battle_anime_frame - sframe)
        
        when 0,30,60,90
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "DB3 SE061")
        when 1..7
          @back_window.contents.blt(kaerux-8+@effect_anime_frame*2,@eney-34-@effect_anime_frame*2,picture,rect)
          @effect_anime_frame += 1
        when 31..37
          @back_window.contents.blt(kaerux-16,@eney-42-@effect_anime_frame*2,picture,rect)
          @effect_anime_frame += 1
        when 61..67
          @back_window.contents.blt(kaerux-32,@eney-42-@effect_anime_frame*2,picture,rect)
          @effect_anime_frame += 1
        when 91..97
          @back_window.contents.blt(kaerux-40-@effect_anime_frame*2,@eney-34-@effect_anime_frame*2,picture,rect)
          @effect_anime_frame += 1
        end
        
        if @battle_anime_frame - sframe > 7
          @back_window.contents.blt(kaerux-8+7*2,@eney-34-7*2,picture,rect)
        end
        
        if @battle_anime_frame - sframe > 37
          @back_window.contents.blt(kaerux-16,@eney-42-7*2,picture,rect)
        end
        if @battle_anime_frame - sframe > 67
          @back_window.contents.blt(kaerux-32,@eney-42-7*2,picture,rect)
        end
        if @battle_anime_frame - sframe > 97
          @back_window.contents.blt(kaerux-40-7*2,@eney-34-7*2,picture,rect)
        end
      when 431..478
        sframe = 431
        @back_anime_frame -= 1
        back_anime_pattern 216,ray_x,ray_y
        
        kaerux = @enex + 166
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ")
        rect = Rect.new(0, 0,96,96)
        @back_window.contents.blt(740-8*39,STANDARD_ENEY,picture,rect)
        
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        kaerutyousei = @battle_anime_frame - sframe
        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        rect = Rect.new(0, 96*12,96,96)
        kx = kaerutyousei * 16
        ky = kaerutyousei * 2
        @back_window.contents.blt(kaerux-8+7*2-kx,@eney-34-7*2-ky,picture,rect)
        @back_window.contents.blt(kaerux-16-kx,@eney-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kaerux-32-kx,@eney-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kaerux-40-7*2-kx,@eney-34-7*2-ky,picture,rect)
        #battle_anime_change 0,1

      when 479
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 480..536
        sframe = 480
        @effect_anime_pattern = 341
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        @battle_anime_frame = 536 if @attack_hit == false && @battle_anime_frame == sframe + 25
          
        Audio.se_play("Audio/SE/" + "DB3 SE061") if @battle_anime_frame == sframe + 26
        @back_anime_frame = 27
        @back_anime_frame -= 1
        ray_x = 640
        back_anime_pattern 216,ray_x,ray_y
=begin
        kaerutyousei = @battle_anime_frame - sframe

        picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
        
        if (@battle_anime_frame - sframe) < 16
          rect = Rect.new(0, 96*12,96,96)
        else
          rect = Rect.new(0, 96*11,96,96)
        end
        kx = kaerutyousei * 16
        ky = -kaerutyousei * 2
        kkx = 640
        kky = 80
        @back_window.contents.blt(kkx-8+7*2-kx,kky-34-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-16-kx,kky-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-32-kx,kky-42-7*2-ky,picture,rect)
        @back_window.contents.blt(kkx-40-7*2-kx,kky-34-7*2-ky,picture,rect)
=end
      when 537..597
        sframe = 537
        Audio.se_play("Audio/SE/" + "Z3 超能力") if @battle_anime_frame == sframe
        
        if @battle_anime_frame % 2 == 0
          @gx = 6
        elsif @battle_anime_frame % 2 == 1
          @gx = -6
        end
        @back_anime_frame = 27
        @back_anime_frame -= 1
        ray_x = 640
        back_anime_pattern 216,ray_x,ray_y
      when 598..624
        sframe = 598
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe
        @gx = 0 if @battle_anime_frame == sframe
        @back_anime_frame = 27
        @back_anime_frame -= 1
        #@back_anime_frame -= 1 if @battle_anime_frame == sframe
        #@chax = CENTER_CHAX if @battle_anime_frame == sframe
        #@chay = STANDARD_CHAY if @battle_anime_frame == sframe
        #@eney = -200
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        ray_x = 640
        back_anime_pattern 216,ray_x,ray_y
        #battle_anime_change 1,16
        
        ray_x = 250
        ray_y = 120
        @effect_anime_pattern = 234
      when 625
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

###############################################################################
#
# Z3必殺技
#
###############################################################################

    when 2118 #元気弾
        back_x = 190
        back_y = 36
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 40
        @genkitama_kanri_spdup = 20
        @genkityuushin_x = 316
        @genkityuushin_y = 60
        @genkitama_kanri_frame = [0,0,0,0,0,0]
      when 1..320
        ray_x = @genkityuushin_x - 12
        ray_y = @genkityuushin_y - 12
        tame_end = 250
        
        if @battle_anime_frame == tame_end
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        elsif @battle_anime_frame >= tame_end
          
        else
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          rect = Rect.new(0, 0, 8, 10)
          @back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              
              case i

              when 0 #左
                idou_x = 4
                idou_y = 2

              when 1 #左下
                idou_x = 2
                idou_y = 4

              when 2 #左足元
                idou_x = 4
                idou_y = 4
                
              when 3 #右足元
                idou_x = -2
                idou_y = 4
                
              when 4 #右下
                idou_x = -4
                idou_y = 4
              when 5 #右
                idou_x = -4
                idou_y = 2
              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(4) == 0
              end
              
            end
          end
        
        end
      
        if @battle_anime_frame >= 60
          
          if @battle_anime_frame <= 120
            if @battle_anime_frame % 4 == 0
              @effect_anime_pattern = 235
            else

              if @effect_anime_frame >= 7
                @effect_anime_pattern = 0
                @effect_anime_frame = 0
              end
            end
          elsif @battle_anime_frame <= 180

            if @battle_anime_frame % 6 == 0
              @effect_anime_pattern = 252
            else
              if @effect_anime_frame >= 3

                @effect_anime_pattern = 235
                @effect_anime_frame = 0
              end
            end
            
            if @effect_anime_pattern == 252
              ray_x = @genkityuushin_x - (12 + 16)
              ray_y = @genkityuushin_y - (12 + 16)
            elsif @effect_anime_pattern == 235
              ray_x = @genkityuushin_x - 12
              ray_y = @genkityuushin_y - 12
            end
          elsif @battle_anime_frame <= tame_end
            #p @battle_anime_frame,@effect_anime_pattern
            ray_x = @genkityuushin_x - (12 + 16)
            ray_y = @genkityuushin_y - (12 + 16)
            @effect_anime_pattern = 252
          else #@battle_anime_frame <= 400
            #p @battle_anime_frame,@effect_anime_pattern
            ray_x = @genkityuushin_x - (12 + 16) #- (@battle_anime_frame-400)*2
            ray_y = @genkityuushin_y - (12 + 16) - (@battle_anime_frame-tame_end)*2
            @effect_anime_pattern = 252
          end
        end
      when 321
        #ray_x = @genkityuushin_x - (12 + 16) #- (@battle_anime_frame-400)*2
        #ray_y = @genkityuushin_y - (12 + 16) - (@battle_anime_frame-tame_end)*2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @tec_output_back_no = 0
      when 322..348
        @effect_anime_pattern = 209
      when 349
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2119 #超元気弾
        back_x = 180
        back_y = 0
        ray_x = (640-246)
        ray_y = 0
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 気を溜める(超元気玉)")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,5
        @ray_color = 0
        @chay = -160 
        @chr_cutin_flag = false
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 40
        @genkitama_kanri_spdup = 25
        @genkityuushin_x = 484
        @genkityuushin_y = 60
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 1..350
        if $game_variables[171] == 1
          picture = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：ボロボロ)") #ダメージ表示用
        elsif $game_variables[171] == 2
          picture = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：ボロボロ)") #ダメージ表示用
        elsif $game_variables[171] == 3
          picture = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：戦闘服)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_超元気玉(ゴクウ)") #ダメージ表示用
        end
        
        rect = Rect.new(0, 0, 168, 198)
        @back_window.contents.blt(270,90,picture,rect)

        
        #ray_x = @genkityuushin_x - 12
        #ray_y = @genkityuushin_y - 12
        tame_end = 300
        
        if @battle_anime_frame == tame_end
          
        elsif @battle_anime_frame >= tame_end
          
        else
          #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          #rect = Rect.new(0, 0, 8, 10)
          #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              #idou_x_moto = 4
              #idou_y_moto = 2
              case i

              when 0 #左
                idou_x = 4
                idou_y = 2

              when 1 #左下
                idou_x = 2
                idou_y = 4

              when 2 #左足元
                idou_x = 4
                idou_y = 4
                
              when 3 #右足元
                idou_x = -2
                idou_y = 4
                
              when 4 #右下
                idou_x = -4
                idou_y = 4
              when 5 #右
                idou_x = -4
                idou_y = 2
              when 6 #左上
                idou_x = 4
                idou_y = 0
              when 7 #左上
                idou_x = 4
                idou_y = -2
              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(4) == 0
              end
              
            end
          end
          if @battle_anime_frame == 60
            @effect_anime_pattern = 253
          end
        end
 
      when 351
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @tec_output_back_no = 0
        @tec_back_small = true
      when 352..378
        @effect_anime_pattern = 211
      when 379
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2127 #瞬間移動かめはめは
      color = Color.new(255,255,255,260)
        ray_x = 340
        ray_y = 96
        
        backhai_no = 201
        back_x = 228
        back_y = 88
      case @battle_anime_frame
      when 0 #初期化


        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @ray_color = 3

        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90 #初期化
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,2
        back_anime_pattern backhai_no,back_x,back_y
      when 91..150
        back_anime_pattern backhai_no,back_x,back_y
      when 151..270
        sframe = 151
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y
        ray_x = 284
        ray_y = 160
        @ray_color = 0
        @effect_anime_pattern = 237
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe + 80
      when 271..350
        sframe = 271
        
        ray_x = 284-8
        ray_y = 160-8
        @effect_anime_pattern = 235
        @effect_anime_pattern = 0 if @battle_anime_frame == 350
      when 351..410
        sframe = 351
        @chay = -200
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(TEC_CENTER_CHAX+12,STANDARD_CHAY+20,picture,rect)
        end
        
      when 420
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chax -= 48
      when 451..480
        sframe = 451
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(TEC_CENTER_CHAX+12-48,STANDARD_CHAY+20,picture,rect)
        end
      when 481..540
        sframe = 481
        ray_x = 284-8-48
        ray_y = 160-8
        @effect_anime_pattern = 235
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe
        @chay = STANDARD_CHAY
        @tec_output_back_no = 4 if @battle_anime_frame == sframe + 59
      when 541..650
        sframe = 541
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG SE053") if @battle_anime_frame == sframe
        @chr_cutin = false
        @eney = -200
        @chay = -200
        itix = 258
        itiy = 46
        ray_x = itix + 16
        ray_y = itiy + 86
        if $game_variables[171] == 1
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_ボロボロ)")
        elsif $game_variables[171] == 2
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_さらにボロボロ)")
        elsif $game_variables[171] == 3
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_バトルスーツ)")
        else
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空)") #ダメージ表示用
        end
        
        rect = Rect.new(0, 0,122,212)
        @back_window.contents.blt(itix,itiy,picture,rect)
      when 651..719
        sframe = 651
        
        
        itix = 258
        itiy = 46
        ray_x = itix + 16
        ray_y = itiy + 86
        @effect_anime_pattern = 0
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG SE040") if @battle_anime_frame == sframe
        if $game_variables[171] == 1
          picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_ボロボロ)")
        elsif $game_variables[171] == 2
          picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_さらにボロボロ)")
        elsif $game_variables[171] == 3
          picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_バトルスーツ)")
        else
          picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空)") #ダメージ表示用
        end
        rect = Rect.new(0, 0,122,212)
        @back_window.contents.blt(itix,itiy,picture,rect)
        picture = Cache.picture("ZG_必殺技_光線_大")
        rect = Rect.new(0, 0,316,158)
        @back_window.contents.blt(162,itiy+134,picture,rect)
        case @battle_anime_frame 
        
        when sframe..sframe+7
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
        @tec_output_back_no = 0 if @battle_anime_frame == 719
      when 720
        @chr_cutin = true
        set_chr_display_out
        @tec_output_back_no = 0
        @output_anime_type = 1
        @chay = STANDARD_CHAY
      when 721..820
        sframe = 721
        @eney = -200
        ray_x = 308
        ray_y = 96
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        battle_anime_change 0,3
        @effect_anime_pattern = 256
      when 821
        @eney = STANDARD_ENEY
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2129 #超サイヤ人変身
      #@ray_color = 3
      color1 = set_skn_color 0
      color2 = Color.new(0,0,0,256)
      blacksize = 224
      backsize = 128
      backyure = 8
      case $partyc[@chanum.to_i]
          
      when 3#,14
        schanum = 1
      when 5#,18
        schanum = 2
      when 12#,19
        schanum = 3
      when 17#,20
        schanum = 4
      when 18
        schanum = 5
      when 25
        schanum = 6
      when 16
        schanum = 7
      end
        
      case schanum
      when 1 #悟空
        chg_cha=3
        chg_cha_spr=14
        backki = "Z3_スーパーサイヤ人_悟空_気"
        backkix = 178
        backkiy = 128
        backkisizex = 286
        backkisizey = 224
        chax = backkix
        chay = backkiy
        chasizex = backkisizex#286
        chasizey = backkisizey#224
        if $game_variables[171] == 1
          chafname1 = "Z3_スーパーサイヤ人悟空(道着ボロボロ)1"
          chafname2 = "Z3_スーパーサイヤ人悟空(道着ボロボロ)2"
        elsif $game_variables[171] == 2
          chafname1 = "Z3_スーパーサイヤ人悟空(道着さらにボロボロ)1"
          chafname2 = "Z3_スーパーサイヤ人悟空(道着さらにボロボロ)2"
        elsif $game_variables[171] == 3
          chafname1 = "Z3_スーパーサイヤ人悟空(バトルスーツ)1"
          chafname2 = "Z3_スーパーサイヤ人悟空(バトルスーツ)2"
        else
          chafname1 = "Z3_スーパーサイヤ人悟空1"
          chafname2 = "Z3_スーパーサイヤ人悟空2"
        end
      when 2 #悟飯(超1)
        chg_cha=5
        chg_cha_spr=18
        backki = "Z3_スーパーサイヤ人_ベジータ_気"
        backkix = 178
        backkiy = 128
        backkisizex = 284
        backkisizey = 224
        chax = (backkix - 90)
        chay = backkiy
        chasizex = 512
        chasizey = backkisizey
        if $game_variables[172] == 2
          chafname1 = "Z3_スーパーサイヤ人_ゴハン1_赤道着"
          chafname2 = "Z3_スーパーサイヤ人_ゴハン2_赤道着"
        else
          chafname1 = "Z3_スーパーサイヤ人_ゴハン1"
          chafname2 = "Z3_スーパーサイヤ人_ゴハン2"
        end
      when 3 #ベジータ
        chg_cha=12
        chg_cha_spr=19
        backki = "Z3_スーパーサイヤ人_ベジータ_気"
        backkix = 178
        backkiy = 128
        backkisizex = 284
        backkisizey = 224
        chax = backkix
        chay = backkiy
        chasizex = 282
        chasizey = backkisizey
        chafname1 = "Z3_スーパーサイヤ人ベジータ1"
        chafname2 = "Z3_スーパーサイヤ人ベジータ2"
      when 4 #トランクス
        chg_cha=17
        chg_cha_spr=20
        backki = "Z3_スーパーサイヤ人_トランクス_気"
        backkix = 178
        backkiy = 128
        backkisizex = 302
        backkisizey = 224
        chax = backkix
        chay = backkiy
        chasizex = 302
        chasizey = backkisizey
        if $game_variables[173] == 1
          chasizex = 512
          chax -= 146
          chafname1 = "Z3_スーパーサイヤ人トランクス（戦闘服・髪結）_01"
          chafname2 = "Z3_スーパーサイヤ人トランクス（戦闘服・髪結）_02"
        elsif $game_variables[173] == 2
          chasizex = 512
          chax -= 146
          chafname1 = "Z3_スーパーサイヤ人トランクス（剣なし・タンクトップ）_01"
          chafname2 = "Z3_スーパーサイヤ人トランクス（剣なし・タンクトップ）_02"
        elsif $game_variables[173] == 3
          chasizex = 512
          chax -= 146
          chafname1 = "Z3_スーパーサイヤ人トランクス（剣なし・タンクトップ・ロンゲ）_01"
          chafname2 = "Z3_スーパーサイヤ人トランクス（剣なし・タンクトップ・ロンゲ）_02"
        elsif $game_variables[173] == 4
          chasizex = 512
          chax -= 146
          chafname1 = "Z3_スーパーサイヤ人トランクス（剣あり・袖なし・ロンゲ）_01"
          chafname2 = "Z3_スーパーサイヤ人トランクス（剣あり・袖なし・ロンゲ）_02"
        else
          chafname1 = "Z3_スーパーサイヤ人トランクス1"
          chafname2 = "Z3_スーパーサイヤ人トランクス2"
        end
      when 5 #悟飯(超2)使わないかも
        chg_cha=18
        chg_cha_spr=18
        backki = "Z3_スーパーサイヤ人_ベジータ_気"
        backkix = 178
        backkiy = 128
        backkisizex = 284
        backkisizey = 224
        chax = (backkix - 90)
        chay = backkiy
        chasizex = 512
        chasizey = backkisizey
        if $game_variables[172] == 2
          chafname1 = "Z3_スーパーサイヤ人_ゴハン2_赤道着"
          chafname2 = "Z3_スーパーサイヤ人_ゴハン3_赤道着"
        else
          chafname1 = "Z3_スーパーサイヤ人_ゴハン2"
          chafname2 = "Z3_スーパーサイヤ人_ゴハン3"
        end
      when 6 #未来悟飯
        chg_cha=25
        chg_cha_spr=26
        backki = "Z3_スーパーサイヤ人_悟空_気"
        backkix = 178
        backkiy = 128
        backkisizex = 286
        backkisizey = 224
        chax = backkix
        chay = backkiy
        chasizex = backkisizex#286
        chasizey = backkisizey#224
        chafname1 = "Z3_スーパーサイヤ人未来悟飯1"
        chafname2 = "Z3_スーパーサイヤ人未来悟飯2"
      when 7 #バーダック
        chg_cha=25
        chg_cha_spr=26
        backki = "Z3_スーパーサイヤ人_トランクス_気"
        backkix = 178
        backkiy = 128
        backkisizex = 302
        backkisizey = 224
        chax = 30#backkix
        chay = backkiy
        chasizex = 512#backkisizex#286
        chasizey = 224#backkisizey#224
        chafname1 = "Z3_スーパーサイヤ人バーダック1"
        chafname2 = "Z3_スーパーサイヤ人バーダック2"
      end
      
      
      case @battle_anime_frame
      
      when 0..605
        if @battle_anime_frame == 0
          @chr_cutin = false
          @chay = -200
          @status_window.visible = false
        end
        Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == 91
        #画面揺れ管理
        if @battle_anime_frame >= 91 && @battle_anime_frame <= 354
          
          
          if (@battle_anime_frame - 90) % 4 == 0
            if @tyosaiyachgyureue == false
              @tyosaiyachgyureue = true
            else
              @tyosaiyachgyureue = false
            end
            
          end
        else
          
        end
        
        #気の切り替え管理
        if @battle_anime_frame >= 92 && @battle_anime_frame <= 600
          @back_anime_frame += 1
          
          if @back_anime_frame == 5
            @back_anime_frame = 1
            if @back_anime_type != 2
              @back_anime_type += 1
            else
              @back_anime_type = 0
            end
          end
        end
        
        if @battle_anime_frame >= 211 && @battle_anime_frame <= 274
          @effect_anime_frame += 1
          if @effect_anime_frame >= 9
            @effect_anime_frame = 1
            if @effect_anime_type == 0
              @effect_anime_type += 1
            else
              @effect_anime_type = 0
            end
          end
        elsif @battle_anime_frame >= 275 && @battle_anime_frame <= 354
          @effect_anime_frame += 1
          if @effect_anime_frame >= 5
            @effect_anime_frame = 1
            if @effect_anime_type == 0
              @effect_anime_type += 1
            else
              @effect_anime_type = 0
            end
          end
        elsif @battle_anime_frame >= 355 && @battle_anime_frame <= 600
          @effect_anime_type = 1
        end
        
        if @effect_anime_type == 0
          chafname = chafname1
        else
          chafname = chafname2
        end
        
        #揺れの位置調整
        if @tyosaiyachgyureue == true
          backsize -= backyure
          backkiy -= backyure
          chay -= backyure
        end
        @back_window.contents.fill_rect(0,0,640,480,color1)
        @back_window.contents.fill_rect(0,backsize,640,blacksize,color2)
        
        if @battle_anime_frame >= 92 && @battle_anime_frame <= 600
          #気の出力
          picture = Cache.picture(backki + (@back_anime_type + 1).to_s)
          rect = Rect.new(0, 0,backkisizex,backkisizey)
          @back_window.contents.blt(backkix,backkiy,picture,rect)
        end
        
        #キャラの出力
        picture = Cache.picture(chafname)
        rect = Rect.new(0, 0,chasizex,chasizey)
        @back_window.contents.blt(chax,chay,picture,rect)
        
        Graphics.fadeout(10) if @battle_anime_frame == 595
          
      when 606
        
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=begin
      back_x = 228
      back_y = 100
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "ZG 気をためる")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,4
          #@ray_color = 0
        when 1..300
          back_anime_pattern 202,back_x,back_y
          
          case $partyc[@chanum.to_i]
          
          when 3,14
            schanum = 1
          when 5,18
            schanum = 2
          when 12,19
            schanum = 3
          when 17,20
            schanum = 4
          end
          
          case schanum
          when 1 #悟空
            chg_cha=3
            chg_cha_spr=14
          when 2 #悟飯(超1)
            chg_cha=5
            chg_cha_spr=18
          when 3 #ベジータ
            chg_cha=12
            chg_cha_spr=19
          when 4 #トランクス
            chg_cha=17
            chg_cha_spr=20
          when 5 #悟飯(超2)使わないかも
            
          else
              puts "Good evening !"
          end
          
            case @battle_anime_frame
            
            #on
            when 60,80,100,120,132,144,156,168,176,184,192,198,202,206,210,214
              $partyc[$partyc.index(chg_cha)] = chg_cha_spr if $partyc.index(chg_cha) != nil
              #on_super_saiyazin schanum
            when 64,84,104,124,136,148,160,172,180,188,196,200,204,208,212
              $partyc[$partyc.index(chg_cha_spr)] = chg_cha if $partyc.index(chg_cha_spr) != nil
              #off_super_saiyazin schanum
            end

        when 301
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
=end
    when 2132 #爆裂波(ピッコロ)
      @ray_color = 3
      
      back_x = 228
      back_y = 88
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,4
          #@ray_color = 0
        when 1..89
          back_anime_pattern 201,back_x,back_y
          
          #battle_anime_change 0,4
        when 90
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          @chay = -120 #キャラ画面範囲外へ
          back_anime_pattern 2
          #picture = Cache.picture("FC風_GBZ1 戦闘_ピッコロ_爆裂波") #ダメージ表示用
          #rect = Rect.new(0, 0, 128, 96)
          #@back_window.contents.blt(260,100,picture,rect)
          picture = Cache.picture("FC風_GBZ1 戦闘_ピッコロ_爆裂波2") #ダメージ表示用
          rect = Rect.new(0, 0, 160, 292)
          @back_window.contents.blt(248,-32,picture,rect)
          @tec_output_back = false
          
        when 91..180
          back_anime_pattern 2
          battle_anime_change 0,5
          picture = Cache.picture("FC風_GBZ1 戦闘_ピッコロ_爆裂波2") #ダメージ表示用
          rect = Rect.new(0, 0, 160, 292)
          @back_window.contents.blt(248,-32,picture,rect)
        when 181
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 182..242
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 243
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2136 #魔貫光殺砲
        back_x = 180
        back_y = 0
        ray_x = (640-246-16)
        ray_y = 180
        color = Color.new(255,255,255,260)
    
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,5
        @ray_color = 0
        @chay = -160
        @chr_cutin_flag = false

      when 1..130
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 116
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(ピッコロ)") #ダメージ表示用
        rect = Rect.new(0, 0, 648, 64)
        
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 118
        Audio.se_stop if @battle_anime_frame == 130
        @tec_output_back = true if @battle_anime_frame == 130
      when 131..260
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14

        picture = Cache.picture("Z3_必殺技_魔貫光殺砲(ピッコロ)")
        rect = Rect.new(0, 0, 124, 172)
        @back_window.contents.blt(260,80,picture,rect)
        
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        
        if @battle_anime_frame == 160
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 254
        end
      when 261
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 262..287
        ray_y = 134
        @effect_anime_pattern = 255
      when 288
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2139 #激烈光弾

        ray_x = 350
        ray_y = 114
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,13
        @ray_color = 1
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90..250
        
        picture = Cache.picture("Z3_必殺技_激烈光弾(ピッコロ)")
        rect = Rect.new(0, 0, 218, 230)
        @back_window.contents.blt(190,66,picture,rect)
        if @battle_anime_frame == 90
          @chay = -160
          
          @tec_back_small = true
          #@chr_cutin_flag = false
          Audio.se_stop
          
        end
        if @battle_anime_frame >= 180
          @effect_anime_pattern = 252
          ray_x = 322-16
          ray_y = 164-16
          @ray_anime_type = 0 if @battle_anime_frame == 180
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        elsif @battle_anime_frame >= 120
          @effect_anime_pattern = 235
          ray_x = 322
          ray_y = 164
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 120   # 効果音を再生する
        end
        
      when 251
        Audio.se_stop
        @tec_back_small = false
        #@chr_cutin_flag = true
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,14
        @effect_anime_pattern = 256
        @chay = STANDARD_CHAY
        back_anime_pattern backhai_no,back_x,back_y

      when 279
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 289
        set_chr_display_out
      when 290..316
        @effect_anime_pattern = 265
      when 317
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2140 #魔空包囲弾

        ray_x = 340
        ray_y = 96
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      case @battle_anime_frame
      when 0 #初期化
        @ray_spd_up_flag = true
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 1
        @genkitama_kanri_frame = []
        #@genkitama_kanri_maxflame = 40
        #@genkitama_kanri_spdup = 25
        @genkityuushin_x = []
        @genkityuushin_y = []
        @genkitama_kanri_x = [0,0,0,0,0,0,0,0]
        @genkitama_kanri_y = [0,0,0,0,0,0,0,0]
        @genkitama_kanri_frame = []
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 121..135
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 121 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 121
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80
      when 136..150
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 136
        @effect_anime_frame = 0 if @battle_anime_frame == 136
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104
      when 151
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 181..195
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 181 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 181
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140
      when 196..210
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 196 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 196
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116
      when 211
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 241..255
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 241 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 241
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80
      when 256..270
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 256
        @effect_anime_frame = 0 if @battle_anime_frame == 256
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104
      when 271
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 301..315
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 301 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 301
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140
      when 316..330
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 316 # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == 316
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116

      when 360
        
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @tec_back_small = true
        @tec_output_back = false
        @chr_cutin_flag = false
      #when 1091..1128
      #  back_anime_pattern backhai_no,back_x,back_y
      #  @ax = 2 if @battle_anime_frame == 91 && $btl_progress >= 2
      #  @ax = -2 if @battle_anime_frame == 94 && $btl_progress >= 2
      #  @ax = 0 if @battle_anime_frame == 97 && $btl_progress >= 2
      #when 1129
      #  battle_anime_change 0,3
      #  @effect_anime_pattern = 0
      #  @effect_anime_frame = 0
      #  @effect_anime_type = 0
        
      #when 1139
      #  set_chr_display_out
      when 401..671
        @genkitama_kanri_maxflame = 28
        tame_end = 300
        for i in 0..(@genkitama_kanri_frame.size - 1)
          #if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
            #@genkitama_kanri_frame[i] = 0
          if @genkitama_kanri_frame[i] > 0
            picture = Cache.picture("ZG_戦闘_必殺技_魔空包囲弾") #ダメージ表示用
            
            idou_moto = 8
            #idou_y_moto = 4
            case i

            when 0 #左上
              idou_x = idou_moto
              idou_y = -idou_moto

            when 1 #下
              idou_x = 0
              idou_y = idou_moto

            when 2 #右上
              idou_x = -idou_moto
              idou_y = -idou_moto
              
            when 3 #左
              idou_x = idou_moto
              idou_y = 0
              
            when 4 #右
              idou_x = -idou_moto
              idou_y = 0
              
            when 5 #左下
              idou_x = idou_moto
              idou_y = idou_moto
              
            when 6 #上
              idou_x = 0
              idou_y = -idou_moto
              
            when 7 #右下
              idou_x = -idou_moto
              idou_y = idou_moto
            end
            
            if @battle_anime_frame > 570 && @battle_anime_frame < 660
              Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == 571
              if @battle_anime_frame % 2 == 0
                #p i,@genkitama_kanri_y[i],@genkitama_kanri_x[i]
                if @genkitama_kanri_x[i] == 0 #揺れ方向チェック
                  
                  if rand(2) == 1
                    @genkitama_kanri_y[i] = 2
                    @genkitama_kanri_x[i] = 1 #揺れ始め方向セット
                  else
                    @genkitama_kanri_y[i] = -2
                    @genkitama_kanri_x[i] = -1 #揺れ始め方向セット
                  end
                
                elsif @genkitama_kanri_y[i] == 0
                  @genkitama_kanri_y[i] = 2 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -2 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 2
                  @genkitama_kanri_y[i] = 4 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 4
                  @genkitama_kanri_y[i] = 2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                elsif @genkitama_kanri_y[i] == -2
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -4 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == -4
                  @genkitama_kanri_y[i] = -2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                end
              end
            end

            idou_x_goukei = idou_x*@genkitama_kanri_maxflame
            idou_y_goukei = idou_y*@genkitama_kanri_maxflame
            kakechk = (@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y
            if kakechk < 356
              if 356-kakechk >= 32
                rect = Rect.new(0, 0, 32,32)
              else
                rect = Rect.new(0, 0, 32, 356-kakechk)
              end
              
              if @battle_anime_frame < 660
                @back_window.contents.blt((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i],picture,rect)
              else
                
                center_frame = 16
                
                
                tyousei_x = ((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)
                
                #if tyousei_x >= CENTER_ENEX + 48
                #  tyousei_x = -tyousei_x
                #  
                #end
                #p tyousei_x
                tyousei_x = ((CENTER_ENEX + 48) - tyousei_x)/ center_frame
                #p tyousei_x
                tyousei_x = tyousei_x*(@battle_anime_frame-660)
                #p tyousei_x
                tyousei_y = (((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])
                
                #if tyousei_y >= STANDARD_ENEY + 48
                #  tyousei_y = -tyousei_y
                #end
                tyousei_y = (STANDARD_ENEY + 48 -(tyousei_y))/ center_frame
                tyousei_y = tyousei_y*(@battle_anime_frame-660)
                
                @back_window.contents.blt(((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)+tyousei_x,(((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])+tyousei_y,picture,rect)
              end
            end
            if  @genkitama_kanri_maxflame > @genkitama_kanri_frame[i]
              @genkitama_kanri_frame[i] += 1
            end
            
          else

          end
            
        end
        
        case @battle_anime_frame
        
        when 401 #左上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          #p @genkitama_kanri_frame.size
          @genkitama_kanri_frame[0] = 1
          @genkityuushin_x[0] = 220
          @genkityuushin_y[0] = 90
        when 421 #下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 280
        when 438 #右上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 472
          @genkityuushin_y[@genkityuushin_y.size] = 90
        when 460 #左
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 190
          @genkityuushin_y[@genkityuushin_y.size] = 164
        when 482 #右
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 520
          @genkityuushin_y[@genkityuushin_y.size] = 170
        when 500 #左下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 224
          @genkityuushin_y[@genkityuushin_y.size] = 260
        when 518 #上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 60
        when 540 #右下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 470
          @genkityuushin_y[@genkityuushin_y.size] = 274
        end
        
        #@effect_anime_pattern = 207
      when 672
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2147 #魔閃光
        back_x = 228
        back_y = 88
        ray_x = 326
        ray_y = 196
        masenkou = 228
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129..219
        Audio.se_stop if @battle_anime_frame == 129
        
        #悟飯超サイヤ人慣れない間は一枚絵表示
        if $game_switches[445] == false
          @chay = -160
          picture = Cache.picture("Z3_必殺技_魔閃光(ゴハン)")
          picture = Cache.picture("Z3_必殺技_魔閃光(ゴハン：戦闘服)") if $game_variables[172] == 1 
          rect = Rect.new(0, 0, 132, 112)
          
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          #battle_anime_change 0,3
          @effect_anime_pattern = 235 if @battle_anime_frame == 145
          
          if @battle_anime_frame == 146 || @battle_anime_frame == 147 || @battle_anime_frame == 148  || @battle_anime_frame == 149 
            ray_x += 6 * (@battle_anime_frame-145)
            ray_y -= 6 * (@battle_anime_frame-145)
          end
          if @battle_anime_frame >= 150
            ray_x = 336
            ray_y = 112
            
            if @battle_anime_frame >= 170
              ray_x -= 12 * (@battle_anime_frame - 170)
              masenkou -= 12 * (@battle_anime_frame - 170)
              if masenkou < 26
                masenkou = 26
                ray_x = masenkou + 98 
              end
              #@chax -= 4 * (@battle_anime_frame - 170)
            end
          end
          @back_window.contents.blt(masenkou,130,picture,rect)
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 146
          @effect_anime_pattern = 256 if @battle_anime_frame == 150
        else
          battle_anime_change 0,3
          @effect_anime_pattern = 239
          ray_x = 326
          ray_y = 120
          @ray_color = 0
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 129
        end

        #back_anime_pattern 101,back_x,back_y
      #when 91..128
        #back_anime_pattern 101,back_x,back_y
      #when 129
        #battle_anime_change 0,3
        #@effect_anime_pattern = 0
        #@effect_anime_frame = 0
        #@effect_anime_type = 0
      when 220
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 221..246
        @effect_anime_pattern = 33
      when 247
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2153 #激烈ませんこう
        color1 = Color.new(127,127,127,260)
        color2 = Color.new(188,188,188,260)
        color3 = Color.new(255,255,255,260)
        ray_x = 350
        ray_y = 114

          backhai_no = 201
          back_x = 228
          back_y = 88

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 1
      when 1..127
        back_anime_pattern backhai_no,back_x,back_y
      when 128..328
        sframe = 128
        @chr_cutin = false
        @tec_output_back_no = 1
        iwax=[166,230,260,364,420,480,200,440,400]
        iway=[560,540,480,480,480,500,580,600,520]
        iwabig = [1,0,1,1,0,1,0,1,0]
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG SE057") if @battle_anime_frame == sframe + 30
        @chay = -200
        itix = 280
        itiy = 72
        yure = rand(3)
        
        if yure == 2
          itix += 2
        elsif yure == 1
          itix -= 2
        end
        
        if $game_variables[172] == 2
          picture = Cache.picture("ZG_必殺技_激烈魔閃光1(悟飯)_赤道着")
        else
          picture = Cache.picture("ZG_必殺技_激烈魔閃光1(悟飯)")
        end
        rect = Rect.new(0, 0, 80, 176)
        @back_window.contents.blt(itix,itiy,picture,rect)
        
        picture = Cache.picture("ZG_必殺技_岩")
        for x in 0..iwax.size - 1
          if iwabig[x] == 1
            iway[x] -= 4 * (@battle_anime_frame-sframe)
            rect = Rect.new(16, 0, 28, 20)
          else
            iway[x] -= 2 * (@battle_anime_frame-sframe)
            rect = Rect.new(0, 0, 16, 14)
          end
          @back_window.contents.blt(iwax[x],iway[x],picture,rect)
        end
        
        
        case @battle_anime_frame
        
        when sframe+156..sframe+159
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color1)
        when sframe+160..sframe+163
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
        when sframe+164..sframe+200
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color3)
        end
        
        
        
      when 329..428
        sframe = 329
        itix = 280
        itiy = 72
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG SE040") if @battle_anime_frame == sframe
        if $game_variables[172] == 2
          picture = Cache.picture("ZG_必殺技_激烈魔閃光2(悟飯)_赤道着")
        else
          picture = Cache.picture("ZG_必殺技_激烈魔閃光2(悟飯)")
        end
        rect = Rect.new(0, 0, 80, 176)
        @back_window.contents.blt(itix,itiy,picture,rect)
        picture = Cache.picture("ZG_必殺技_光線_大(緑)")
        rect = Rect.new(0, 0,316,158)
        @back_window.contents.blt(162,itiy+126,picture,rect)
      when 429
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "ZG 光線1")
      when 430..456
        @effect_anime_pattern = 265
      when 457
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2154 #スーパーかめはめ波(悟飯)
        color1 = Color.new(127,127,127,260)
        color2 = Color.new(188,188,188,260)
        color3 = Color.new(255,255,255,260)
        ray_x = 230
        ray_y = 118

          backhai_no = 201
          back_x = 228
          back_y = 88

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..127
        back_anime_pattern backhai_no,back_x,back_y
      when 128..300
        sframe = 128
        #Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == sframe + 90
        @output_anime_type = 1
        battle_anime_change 0,17
        back_anime_pattern backhai_no,back_x,back_y
        @effect_anime_pattern = 237 if @battle_anime_frame == sframe
        ray_x = 276 if @battle_anime_frame < sframe + 90
        ray_y = 164 if @battle_anime_frame < sframe + 90
        
        @effect_anime_pattern = 235 if @battle_anime_frame == sframe + 90
        ray_x = 268 if @battle_anime_frame >= sframe + 90
        ray_y = 156 if @battle_anime_frame >= sframe + 90
      when 301..398
        @ray_color = 0
        sframe = 301
        @chr_cutin = false
        @tec_output_back_no = 4 #1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        @chay = -200
        itix = 278
        itiy = 122
        
        if $game_variables[172] == 2
          picture = Cache.picture("Z3_必殺技_親子カメハメ波(ゴハンのみ)_赤道着")
        else
          picture = Cache.picture("Z3_必殺技_親子カメハメ波(ゴハンのみ)")
        end
        rect = Rect.new(0, 0, 114, 184)
        @back_window.contents.blt(itix,itiy,picture,rect)
        @effect_anime_pattern = 333
      when 399
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "ZG 光線1")
      when 400..426
        #@effect_anime_pattern = 265
        @effect_anime_pattern = 48
      when 427
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2163 #拡散エネルギー波

        ray_x = 316
        ray_y = 102
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          @output_anime_type = 1
          #battle_anime_change 0,2
          @ray_color = 0
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,4
          @effect_anime_pattern = 252
          @tec_output_back_no = 2
          #back_anime_pattern backhai_no,back_x,back_y
    
        when 91..110
          #back_anime_pattern backhai_no,back_x,back_y
          @ax = 2 if @battle_anime_frame == 91 && $btl_progress >= 2
          @ax = -2 if @battle_anime_frame == 94 && $btl_progress >= 2
          @ax = 0 if @battle_anime_frame == 97 && $btl_progress >= 2
          @ay = 2 if @battle_anime_frame == 91 && $btl_progress >= 2
          @ay = -2 if @battle_anime_frame == 94 && $btl_progress >= 2
          @ay = 0 if @battle_anime_frame == 97 && $btl_progress >= 2
          ray_x += 8 * (@battle_anime_frame - 91)
          ray_y += -8 * (@battle_anime_frame - 91)
        
        when 111
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散")
        when 112..116
          color = Color.new(255,255,255,255) #味方ステータス枠
          @back_window.contents.fill_rect(0 ,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        when 124..128
          color = Color.new(255,255,255,255) #味方ステータス枠
          @back_window.contents.fill_rect(0 ,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)

          #battle_anime_change 0,3
          #@effect_anime_pattern = 0
          #@effect_anime_frame = 0
          #@effect_anime_type = 0
          
        when 139
          #set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          @chay = -160
          @tec_output_back_no = 1
          @genkitama_kanri_frame = []
          center_tama = 304
          @genkityuushin_x = []
          @genkityuushin_y = []
          @genkitama_kanri_x = [center_tama,center_tama,center_tama,center_tama]
          @genkitama_kanri_y = [0,0,0,0]
          @genkitama_kanri_frame = []
        when 140..210
          picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)") #ダメージ表示用
          
          #p @genkitama_kanri_y[0]
          if @genkitama_kanri_y[0] >= 356 - 64
            rect = Rect.new(0, 0, 0, 0)
          elsif @genkitama_kanri_y[0] >= 356-32 -64
            rect = Rect.new(0, 0, 32, 356-64-@genkitama_kanri_y[0])
          else
            rect = Rect.new(0, 0, 32, 32)
          end
          
          for i in 0..(@genkitama_kanri_x.size - 1)
            @back_window.contents.blt(@genkitama_kanri_x[i],@genkitama_kanri_y[i],picture,rect)

            if @battle_anime_frame < 150
              @genkitama_kanri_y[i] += 2

            elsif @battle_anime_frame < 160
              @genkitama_kanri_y[i] += 4
              #@genkitama_kanri_x[0] += 2
              #@genkitama_kanri_x[1] += 4
              #@genkitama_kanri_x[2] -= 2
              #@genkitama_kanri_x[3] -= 2
            elsif @battle_anime_frame < 170
              @genkitama_kanri_y[i] += 8
            elsif @battle_anime_frame < 180
              @genkitama_kanri_y[i] += 16
            end
            
          end
          
          if @battle_anime_frame < 160
            @genkitama_kanri_x[0] += 2
            @genkitama_kanri_x[1] += 4
            @genkitama_kanri_x[2] -= 2
            @genkitama_kanri_x[3] -= 4
          else
            @genkitama_kanri_x[0] += 2
            @genkitama_kanri_x[1] += 6
            @genkitama_kanri_x[2] -= 2
            @genkitama_kanri_x[3] -= 6
          end

        when 215
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
        when 216..234
          @effect_anime_pattern = 259
          ray_x = 354
          ray_y = 0 #+ 8*(@battle_anime_frame-211)
        when 235
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
          when 0
            Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
            if @attackcourse == 0
              @output_anime_type = 0
              @chay = -120 #キャラ画面範囲外へ
              @enex = CENTER_ENEX
              @eney = STANDARD_ENEY
            else
              @eney = -200 #キャラ画面範囲外へ
              @chax = CENTER_CHAX
              @chay = STANDARD_CHAY
            end
          
        when 1..19
          @effect_anime_pattern = 259
          ray_x = 354
          ray_y = 0
        when 20
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2164 #気円斬
        back_x = 228
        back_y = 88
        ray_x = 326
        ray_y = 196
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129..249
        kien_x = 220
        kien_y = 80
        @tec_output_back_no = 1
        Audio.se_stop if @battle_anime_frame == 129
        @chay = -160
        kienkizyunframe = 160
        picture = Cache.picture("Z3_必殺技_気円斬(クリリン)")
        rect = Rect.new(0, 0, 116, 144)
        @back_window.contents.blt(262,130,picture,rect)
        picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        rect = Rect.new(0, 30*0, 126, 30)
        
        rect = Rect.new(0, 30*1, 126, 30) if @battle_anime_frame >= kienkizyunframe - 15
        rect = Rect.new(0, 30*4, 126, 30) if @battle_anime_frame >= kienkizyunframe + 15
        if @battle_anime_frame >= kienkizyunframe
          
          
          kien_kizyun_x = 6
          kien_kizyun_y = 2
          kien_mawarikata = 0
          case @battle_anime_frame
          
          when kienkizyunframe +10,kienkizyunframe +26
            kien_mawarikata = 1
          when kienkizyunframe +11,kienkizyunframe +27
            kien_mawarikata = 2
          when kienkizyunframe +12,kienkizyunframe +28
            kien_mawarikata = 3
          when kienkizyunframe +13,kienkizyunframe +29
            kien_mawarikata = 4
          when kienkizyunframe +14,kienkizyunframe +30
            kien_mawarikata = 5
          when kienkizyunframe +15,kienkizyunframe +31
            kien_mawarikata = 6
          when kienkizyunframe +16,kienkizyunframe +32
            kien_mawarikata = 7
          when kienkizyunframe +17,kienkizyunframe +33
            kien_mawarikata = 8
          when kienkizyunframe +18,kienkizyunframe +34
            kien_mawarikata = 9
          when kienkizyunframe +19,kienkizyunframe +35
            kien_mawarikata = 10
          when kienkizyunframe +20,kienkizyunframe +36
            kien_mawarikata = 11
          when kienkizyunframe +21,kienkizyunframe +37
            kien_mawarikata = 12
          when kienkizyunframe +22,kienkizyunframe +38
            kien_mawarikata = 13
          when kienkizyunframe +23,kienkizyunframe +39
            kien_mawarikata = 14
          when kienkizyunframe +24,kienkizyunframe +40
            kien_mawarikata = 15
          else
            kien_mawarikata = 0
          end
          
          case kien_mawarikata
          
          when 0 #下
            kien_x = 220
            kien_y = 80
          when 1
            kien_x = 220 + kien_kizyun_x * 4
            kien_y = 80 - kien_kizyun_y * 1
          when 2
            kien_x = 220 + kien_kizyun_x * 7
            kien_y = 80 - kien_kizyun_y * 3
          when 3
            kien_x = 220 + kien_kizyun_x * 9
            kien_y = 80 - kien_kizyun_y * 6
          when 4 #右
            kien_x = 220 + kien_kizyun_x * 10
            kien_y = 80 - kien_kizyun_y * 10
          when 5
            kien_x = 220 + kien_kizyun_x * 9
            kien_y = 80 - kien_kizyun_y * 14
          when 6
            kien_x = 220 + kien_kizyun_x * 7
            kien_y = 80 - kien_kizyun_y * 17
          when 7 
            kien_x = 220 + kien_kizyun_x * 4
            kien_y = 80 - kien_kizyun_y * 19
          when 8 #上
            kien_x = 220 + kien_kizyun_x * 0
            kien_y = 80 - kien_kizyun_y * 20
          when 9
            kien_x = 220 - kien_kizyun_x * 4
            kien_y = 80 - kien_kizyun_y * 19
          when 10 
            kien_x = 220 - kien_kizyun_x * 7
            kien_y = 80 - kien_kizyun_y * 17
          when 11
            kien_x = 220 - kien_kizyun_x * 9
            kien_y = 80 - kien_kizyun_y * 14
          when 12 #左
            kien_x = 220 - kien_kizyun_x * 10
            kien_y = 80 - kien_kizyun_y * 10
          when 13
            kien_x = 220 - kien_kizyun_x * 9
            kien_y = 80 - kien_kizyun_y * 6
          when 14 
            kien_x = 220 - kien_kizyun_x * 7
            kien_y = 80 - kien_kizyun_y * 3
          when 15
            kien_x = 220 - kien_kizyun_x * 4
            kien_y = 80 - kien_kizyun_y * 1
          end
          
        end
        
        if @battle_anime_frame >= kienkizyunframe + 50
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == kienkizyunframe + 50
          kien_y = 80 - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
          #p kien_x,kien_y
        end
        
        @back_window.contents.blt(kien_x,kien_y,picture,rect)
      when 250
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
      when 251..281
        @effect_anime_pattern = 260
      when 282
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2165 #気円烈斬
        back_x = 228
        back_y = 88
        ray_x = 326
        ray_y = 196
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
          #@chr_cutin_flag = false if @battle_anime_frame == 128
        when 129..220
          start_frame = 129
          Audio.se_stop if @battle_anime_frame == start_frame
          @output_anime_type = 1
          
          ray_x = 224
          ray_y = 96
          
          @back_anime_frame = 0   if @battle_anime_frame == start_frame
          @back_anime_type = 54   if @battle_anime_frame == start_frame
          battle_anime_change 0,5 if @battle_anime_frame == start_frame
          
          @effect_anime_pattern = 330 if @battle_anime_frame == (start_frame + 30)
          Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == (start_frame + 30)

          battle_anime_change 0,6 if @battle_anime_frame == (start_frame + 40)
          battle_anime_change 0,7 if @battle_anime_frame == (start_frame + 50)
          battle_anime_change 0,5 if @battle_anime_frame == (start_frame + 60)
          battle_anime_change 0,6 if @battle_anime_frame == (start_frame + 70)
          battle_anime_change 0,7 if @battle_anime_frame == (start_frame + 80)
          #battle_anime_change 0,5 if @battle_anime_frame == 189
          case @back_anime_type
            when 5,56,54 #動かない
              ray_x += 0
              ray_y += 0
            when 6 #右
              ray_x += 8
              ray_y += 2
            when 4 #左
              ray_x -= 8
              ray_y -= 2
            when 2 #下
              
            when 8 #上
          end
            
          @back_anime_frame += 1
          
          if @back_anime_frame >= 3
            @back_anime_frame = 0
            case @back_anime_type
                    
              when 54 #左から右
                @back_anime_type = 6
              when 56 #右から左
                @back_anime_type = 4
              when 6 #右
                @back_anime_type = 56
              when 4 #左
                @back_anime_type = 54
              when 2 #下
                
              when 8 #上
              
            end
          end
        when 221..280
          start_frame = 221
          end_frame = 59 + start_frame
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == start_frame
          battle_anime_change 0,9
          ray_x = 224
          ray_y = 96
          ray_x += 16 * (@battle_anime_frame - start_frame)
          ray_y += 2 * (@battle_anime_frame - start_frame)
          if @battle_anime_frame == end_frame
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
          end
        when 281..370
          start_frame = 281
          #Audio.se_stop if @battle_anime_frame == start_frame
          @output_anime_type = 1
          
          ray_x = 256
          ray_y = 96
          
          @back_anime_frame = 0   if @battle_anime_frame == start_frame
          @back_anime_type = 54   if @battle_anime_frame == start_frame
          battle_anime_change 0,11 if @battle_anime_frame == start_frame
          
          @effect_anime_pattern = 330 if @battle_anime_frame == (start_frame + 30)
          Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == (start_frame + 30)

          battle_anime_change 0,13 if @battle_anime_frame == (start_frame + 40)
          battle_anime_change 0,12 if @battle_anime_frame == (start_frame + 50)
          battle_anime_change 0,11 if @battle_anime_frame == (start_frame + 60)
          battle_anime_change 0,13 if @battle_anime_frame == (start_frame + 70)
          battle_anime_change 0,12 if @battle_anime_frame == (start_frame + 80)
          #battle_anime_change 0,5 if @battle_anime_frame == 189
          case @back_anime_type
            when 5,56,54 #動かない
              ray_x += 0
              ray_y += 0
            when 6 #右
              ray_x += 8
              ray_y += 2
            when 4 #左
              ray_x -= 8
              ray_y -= 2
            when 2 #下
              
            when 8 #上
          end
            
          @back_anime_frame += 1
          
          if @back_anime_frame >= 3
            @back_anime_frame = 0
            case @back_anime_type
                    
              when 54 #左から右
                @back_anime_type = 6
              when 56 #右から左
                @back_anime_type = 4
              when 6 #右
                @back_anime_type = 56
              when 4 #左
                @back_anime_type = 54
              when 2 #下
                
              when 8 #上
              
            end
          end
        when 371..430
          start_frame = 371
          end_frame = 59 + start_frame
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == start_frame
          battle_anime_change 0,10
          ray_x = 256
          ray_y = 96
          ray_x += 16 * (@battle_anime_frame - start_frame)
          ray_y += 2 * (@battle_anime_frame - start_frame)
          if @battle_anime_frame == end_frame
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @chr_cutin_flag = false
          end
        when 431..551
          
          @chr_cutin_flag = true if @battle_anime_frame == 551
          start_frame = 431
          kien_x = 250
          kien_y = 80
          
          kien_x_base = kien_x
          kien_y_base = kien_y
          
          @tec_output_back_no = 2
          Audio.se_stop if @battle_anime_frame == start_frame
          @chay = -160
          kienkizyunframe = 31 + start_frame
          picture = Cache.picture("Z3_必殺技_気円烈斬(クリリン)")
          rect = Rect.new(0, 0, 130, 168)
          @back_window.contents.blt(182,130,picture,rect)
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 30*0, 126, 30)
          
          rect = Rect.new(0, 30*1, 126, 30) if @battle_anime_frame >= kienkizyunframe - 15
          rect = Rect.new(0, 30*4, 126, 30) if @battle_anime_frame >= kienkizyunframe + 15
          if @battle_anime_frame >= kienkizyunframe
            
            
            kien_kizyun_x = 6
            kien_kizyun_y = 2
            kien_mawarikata = 0
            case @battle_anime_frame
            
            when kienkizyunframe +10,kienkizyunframe +26
              kien_mawarikata = 1
            when kienkizyunframe +11,kienkizyunframe +27
              kien_mawarikata = 2
            when kienkizyunframe +12,kienkizyunframe +28
              kien_mawarikata = 3
            when kienkizyunframe +13,kienkizyunframe +29
              kien_mawarikata = 4
            when kienkizyunframe +14,kienkizyunframe +30
              kien_mawarikata = 5
            when kienkizyunframe +15,kienkizyunframe +31
              kien_mawarikata = 6
            when kienkizyunframe +16,kienkizyunframe +32
              kien_mawarikata = 7
            when kienkizyunframe +17,kienkizyunframe +33
              kien_mawarikata = 8
            when kienkizyunframe +18,kienkizyunframe +34
              kien_mawarikata = 9
            when kienkizyunframe +19,kienkizyunframe +35
              kien_mawarikata = 10
            when kienkizyunframe +20,kienkizyunframe +36
              kien_mawarikata = 11
            when kienkizyunframe +21,kienkizyunframe +37
              kien_mawarikata = 12
            when kienkizyunframe +22,kienkizyunframe +38
              kien_mawarikata = 13
            when kienkizyunframe +23,kienkizyunframe +39
              kien_mawarikata = 14
            when kienkizyunframe +24,kienkizyunframe +40
              kien_mawarikata = 15
            else
              kien_mawarikata = 0
            end

            
            case kien_mawarikata
            
            when 0 #下
              kien_x = kien_x_base
              kien_y = kien_y_base
            when 1
              kien_x = kien_x_base + kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 1
            when 2
              kien_x = kien_x_base + kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 3
            when 3
              kien_x = kien_x_base + kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 6
            when 4 #右
              kien_x = kien_x_base + kien_kizyun_x * 10
              kien_y = kien_y_base - kien_kizyun_y * 10
            when 5
              kien_x = kien_x_base + kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 14
            when 6
              kien_x = kien_x_base + kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 17
            when 7 
              kien_x = kien_x_base + kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 19
            when 8 #上
              kien_x = kien_x_base + kien_kizyun_x * 0
              kien_y = kien_y_base - kien_kizyun_y * 20
            when 9
              kien_x = kien_x_base - kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 19
            when 10 
              kien_x = kien_x_base - kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 17
            when 11
              kien_x = kien_x_base - kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 14
            when 12 #左
              kien_x = kien_x_base - kien_kizyun_x * 10
              kien_y = kien_y_base - kien_kizyun_y * 10
            when 13
              kien_x = kien_x_base - kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 6
            when 14 
              kien_x = kien_x_base - kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 3
            when 15
              kien_x = kien_x_base - kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 1
            end
            
          end
          
          if @battle_anime_frame >= kienkizyunframe + 50
            Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == kienkizyunframe + 50
            kien_y = 80 - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
            kien_x += 12 * (@battle_anime_frame-(kienkizyunframe + 50))
            #p kien_x,kien_y
          end
          
          @back_window.contents.blt(kien_x,kien_y,picture,rect)
        when 552
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          @chr_cutin = true
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        when 562..592
          @effect_anime_pattern = 260
        when 593
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          @chr_cutin = true
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        when 1..31
          @effect_anime_pattern = 260
        when 32
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end 
    when 2173 #繰気弾
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129..259
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z3_必殺技_繰気弾(ヤムチャ)")
        rect = Rect.new(0, 0, 182, 124)
        @back_window.contents.blt(228,118,picture,rect)
        #picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        #rect = Rect.new(0, 30*0, 126, 30)

        if @battle_anime_frame >= 140
          
          @effect_anime_pattern = 261 if @battle_anime_frame == 140
          @effect_anime_pattern = 252 if @battle_anime_frame == kienkizyunframe
          @ray_anime_type =0 if @battle_anime_frame == 140
          @ray_anime_type =1 if @battle_anime_frame == 141
          @ray_anime_type =2 if @battle_anime_frame == 157
          @ray_anime_type =3 if @battle_anime_frame == 173
          case @battle_anime_frame
          
          when kienkizyunframe +20
            kiptan = 1
          when kienkizyunframe +21
            kiptan = 2
          when kienkizyunframe +22, kienkizyunframe +23
            kiptan = 3
          when kienkizyunframe +24
            kiptan = 2
          when kienkizyunframe +25
            kiptan = 1
          when kienkizyunframe +26
            kiptan = 0
          when kienkizyunframe +27
            kiptan = 4
          when kienkizyunframe +28
            kiptan = 5
          when kienkizyunframe +29,kienkizyunframe +30
            kiptan = 6
          when kienkizyunframe +31
            kiptan = 5
          when kienkizyunframe +32
            kiptan = 4
          when kienkizyunframe +33
            kiptan = 0
          when kienkizyunframe +34
            kiptan = 1
          when kienkizyunframe +35
            kiptan = 2
          when kienkizyunframe +36, kienkizyunframe +37
            kiptan = 3
          when kienkizyunframe +38
            kiptan = 2
          when kienkizyunframe +39
            kiptan = 1
          when kienkizyunframe +40
            kiptan = 0
          when kienkizyunframe +41
            kiptan = 4
          when kienkizyunframe +42
            kiptan = 5
          when kienkizyunframe +43,kienkizyunframe +44
            kiptan = 6
          when kienkizyunframe +45
            kiptan = 5
          when kienkizyunframe +46
            kiptan = 4
          when kienkizyunframe +47
            kiptan = 0
          when kienkizyunframe +48
            kiptan = 1
          when kienkizyunframe +49
            kiptan = 2
          when kienkizyunframe +50, kienkizyunframe +51
            kiptan = 3
          when kienkizyunframe +52
            kiptan = 2
          when kienkizyunframe +53
            kiptan = 1
          when kienkizyunframe +54
            kiptan = 0

          else
            #kiptan = 0
            
          end
          
          case kiptan
          when 0
            ray_y += 4*0
          when 1
            ray_y += 4*1
          when 2
            ray_y += 4*2
          when 3
            ray_y += 4*2 - 2*1
          when 4
            ray_y -= 4*1
          when 5
            ray_y -= 4*2
          when 6
            ray_y -= 4*2 + 2*1
          else
            #kiptan = 0
            
          end
          
          if @battle_anime_frame >= kienkizyunframe + 54
            Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == kienkizyunframe + 54
            ray_y -= 6*(@battle_anime_frame-(kienkizyunframe + 54))
          end
        end
        #if @battle_anime_frame >= kienkizyunframe + 50
        #  Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == kienkizyunframe + 50
        #  kien_y = 80 - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
        #  #p kien_x,kien_y
        #end
        
      when 260
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
      when 261..297
        
        #ray_x = 346
        ray_y = 136
        @effect_anime_pattern = 262
      when 298
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2174 #超繰気弾
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
        when 129..459
          sframe = 129
          kitamefra = 30
          @tec_output_back_no = 1
          kien_x = 220
          kien_y = 70
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("FC風_ZSSD_必殺技_繰気弾(ヤムチャ)2")
          rect = Rect.new(0, 0, 124, 156)
          @back_window.contents.blt(258,138,picture,rect)
          #picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          #rect = Rect.new(0, 30*0, 126, 30)
          
          case @battle_anime_frame
          
          when (sframe + 45 + kitamefra * 1)..(sframe + 45 + kitamefra * 2 - 1)
            @ray_anime_type = 1
             
          when (sframe + 45 + kitamefra * 2)..(sframe + 45 + kitamefra * 3 - 1)
            @ray_anime_type = 2
            
          when (sframe + 45 + kitamefra * 3)..(sframe + 45 + kitamefra * 4 - 1)
            @ray_anime_type = 3
            
          when (sframe + 45 + kitamefra * 4)..(sframe + 45 + kitamefra * 5 - 1)
            @ray_anime_type = 4
            
          when (sframe + 45 + kitamefra * 5)..(sframe + 45 + kitamefra * 6 - 1)
            @ray_anime_type = 4
            kien_y -= (6 + 16 + 16 + 16)
          when (sframe + 45 + kitamefra * 6)..(sframe + 45 + kitamefra * 11 - 1)
            Audio.se_play("Audio/SE/" + "Z1 繰気弾") if @battle_anime_frame == sframe + 45 + kitamefra * 6
            @ray_anime_type = 4
            kien_y -= (6 + 16 + 16 + 16 + 4 * (@battle_anime_frame-(sframe + 45 + kitamefra * 6))) 
          end
          
          if @battle_anime_frame < sframe + 45 + kitamefra * 5
            if @battle_anime_frame % 12 == 0 #|| @battle_anime_frame % 8 == 0
              @ray_anime_type -= 1
            end
            
            case @ray_anime_type
            
            when 1
              kien_y -= 6
            when 2
              kien_y -= (6 + 16)
            when 3
              kien_y -= (6 + 16 + 16)
            when 4
              kien_y -= (6 + 16 + 16 + 16)
            end
          end
          
          
          
          
          if @battle_anime_frame-sframe > 45
            picture = Cache.picture("Z3_戦闘_必殺技_繰気弾")
            rect = Rect.new(@ray_anime_type*128, 0,128,128)
          
            @back_window.contents.blt(kien_x,kien_y,picture,rect)
            
            
          end
          
        when 460
          @tec_back_small = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        when 461..485
          
          #ray_x = 346
          #ray_y = 136
          @effect_anime_pattern = 294
        when 486
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
        @ray_color = 0
        @tec_back_small = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        
        when 1..25
          @effect_anime_pattern = 294
        when 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2175 #新狼牙風風拳
      back_x = 206
      back_y = 88
      ray_x = 316
      ray_y = 102
      case @battle_anime_frame
      
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -200
      when 31..70
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,144,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          elsif $btl_progress >= 2
            @back_window.contents.blt(@chax + 16,144,picture,rect)
          else
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          end
        else
          
        end
      when 71
        @chax -= 26
        #set_chr_display_out
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      when 72..163
        back_anime_pattern 1
        @effect_anime_pattern = 39
        
      when 164..379
        sframe = 164
        rframe = 124
        akifra = 4
        back_anime_pattern 1
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 1,16
        end
        case (@battle_anime_frame-sframe)
        
        when 0..9
          @gx = -16
        when 10..19
          @gx = 16
        when 20
          @gx = 0
          battle_anime_change 1,0
          
        when 50
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "DB3 狼牙風風拳")
          battle_anime_change 0,0
        when 51..120
          if @battle_anime_frame % 2 == 0
            picture = Cache.picture("DB3_ヤムチャ(Z3化)")
            rect = Rect.new(0, 0, 64, 64)
            @back_window.contents.blt(@chax + 16,STANDARD_CHAY + 24,picture,rect)
            @chay = -200
          else
            @chay = STANDARD_CHAY
          end
        when 121
          @chay = STANDARD_CHAY
        when rframe + akifra*0,rframe + akifra*6,rframe + akifra*8
          @output_anime_type = 0
          battle_anime_change 1,16
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*1,rframe + akifra*5,rframe + akifra*10,rframe + akifra*12
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*2,rframe + akifra*4,rframe + akifra*9,rframe + akifra*13
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*3,rframe + akifra*7,rframe + akifra*11
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when rframe + akifra*14..rframe + akifra*20
          @output_anime_type = 1
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if (@battle_anime_frame-sframe) == rframe + akifra*14
          @gx = -16
          battle_anime_change 1,17
        end
        
        case (@battle_anime_frame-sframe)
        
        when rframe + akifra*0+0..rframe + akifra*0+1,rframe + akifra*1+0..rframe + akifra*1+1,rframe + akifra*2+0..rframe + akifra*2+1,rframe + akifra*3+0..rframe + akifra*3+1,rframe + akifra*4+0..rframe + akifra*4+1,rframe + akifra*5+0..rframe + akifra*5+1,rframe + akifra*6+0..rframe + akifra*6+1,rframe + akifra*7+0..rframe + akifra*7+1,rframe + akifra*8+0..rframe + akifra*8+1,rframe + akifra*9+0..rframe + akifra*9+1,rframe + akifra*10+0..rframe + akifra*10+1,rframe + akifra*11+0..rframe + akifra*11+1,rframe + akifra*12+0..rframe + akifra*12+1,rframe + akifra*13+0..rframe + akifra*13+1
          @gx = -8
        when rframe + akifra*0+2..rframe + akifra*0+3,rframe + akifra*1+2..rframe + akifra*1+3,rframe + akifra*2+2..rframe + akifra*2+3,rframe + akifra*3+2..rframe + akifra*3+3,rframe + akifra*4+2..rframe + akifra*4+3,rframe + akifra*5+2..rframe + akifra*5+3,rframe + akifra*6+2..rframe + akifra*6+3,rframe + akifra*7+2..rframe + akifra*7+3,rframe + akifra*8+2..rframe + akifra*8+3,rframe + akifra*9+2..rframe + akifra*9+3,rframe + akifra*10+2..rframe + akifra*10+3,rframe + akifra*11+2..rframe + akifra*11+3,rframe + akifra*12+2..rframe + akifra*12+3,rframe + akifra*13+2..rframe + akifra*13+3
          @gx = 8

        end
      when 380
        
        @tec_output_back = true
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z3 変身")
        
      when 381..508
        sframe = 381
        back_anime_pattern 201,back_x,back_y
        
        ray_x = 264
        ray_y = 160
        case (@battle_anime_frame-sframe)
        when 30..74
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
          battle_anime_change 0,2
          @effect_anime_pattern = 237
        when 75..130
          ray_x -= 8
          ray_y -= 8
          @effect_anime_pattern = 235
        end
      when 509
        ray_x = 264
        ray_y = 160
        ray_x -= 8
        ray_y -= 8
        #@effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 510..550
        sframe = 510
        ray_x = 316
        ray_y = 102
        Audio.se_stop if (@battle_anime_frame-sframe) == 0
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if (@battle_anime_frame-sframe) == 0
        battle_anime_change 0,3
        @effect_anime_pattern = 206
      when 560
        @chay = -200
        set_chr_display_out
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        battle_anime_change 1,0
        @gx = 0
      when 561..587
        ray_y = 96
        @effect_anime_pattern = 207
      when 588
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2182 #四身の拳
        #back_x = 222
        #back_y = 60
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
        
      when 24
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z3 四身の拳")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      when 25..255
        @chay = -120 #キャラ画面範囲外へ
        @effect_anime_pattern = 263
        Audio.se_play("Audio/SE/" + "Z3 四身の拳") if @battle_anime_frame == 25
      when 256
        @tec_output_back = false
        battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 257..340
        picture = Cache.picture("Z3_味方カットイン")
        rect = Rect.new(0, 64*5, 640, 64)
        sisinkizyun = 257
        akizyouge = 26
        akinaka = 16
        kat_haitiiti = akizyouge
        if @battle_anime_frame <= sisinkizyun + 20
          @back_window.contents.blt(-640+32*(@battle_anime_frame-sisinkizyun),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 20
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end        end
        
        kat_haitiiti = akizyouge+64*1+akinaka*1
        if @battle_anime_frame >= sisinkizyun + 21 && @battle_anime_frame <= sisinkizyun + 40
          @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*1)),kat_haitiiti,picture,rect)
        elsif
          if @battle_anime_frame >= sisinkizyun + 40
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end
        end
        
        kat_haitiiti = akizyouge+64*2+akinaka*2
        if @battle_anime_frame >= sisinkizyun + 41 && @battle_anime_frame <= sisinkizyun + 60
          @back_window.contents.blt(-640+32*(@battle_anime_frame-(sisinkizyun+20*2)),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 60
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end        end
        
        kat_haitiiti = akizyouge+64*3+akinaka*3
        if @battle_anime_frame >= sisinkizyun + 61 && @battle_anime_frame <= sisinkizyun + 80
          @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*3)),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 80
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end
        end
      when 341
        set_chr_display_out
      when 351..381
        @effect_anime_pattern = 223
      when 382
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2183 #気功砲
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 2 if @battle_anime_frame == 128
      when 129..229
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z3_必殺技_気功砲(テンシンハン)")
        rect = Rect.new(0, 0, 210, 140)
        @back_window.contents.blt(228,118,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 170..173,210..213
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210
        end

        
        
      when 230
        @tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 241..290
        
        #ray_x = 346
        #ray_y = 136
        back_anime_pattern 1
      when 291
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2184 #四身の拳気功砲
        back_x = 238
        back_y = 88
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
        #@tec_output_back_no = 2 if @battle_anime_frame == 128
        Audio.se_stop if @battle_anime_frame == 128
        #battle_anime_change 0,3 if @battle_anime_frame == 128
      when 139..369
        @chay = -120 #キャラ画面範囲外へ
        @effect_anime_pattern = 263
        Audio.se_play("Audio/SE/" + "Z3 四身の拳") if @battle_anime_frame == 139
      when 370..489
        kien_x = 220
        kien_y = 80
        @tec_output_back = false if @battle_anime_frame == 370
        @chr_cutin_flag = false if @battle_anime_frame == 370
        @chay = -160
        #kienkizyunframe = 370
        #kiptan = 0
        
        
        rect = Rect.new(0, 0, 210, 140)
        sisinkizyun = 370
        akizyouge = 28
        akinaka = 16
        kat_haitiiti = akizyouge
        picture = Cache.picture("Z3_必殺技_気功砲(テンシンハン)")
        if @battle_anime_frame <= sisinkizyun + 15
          @back_window.contents.blt(-210+14*(@battle_anime_frame-sisinkizyun),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 15
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end
        end
        
        picture = Cache.picture("Z3_必殺技_気功砲(テンシンハン)_反転")
        kat_haitiiti = akizyouge#+64*1+akinaka*1
        if @battle_anime_frame >= sisinkizyun + 16 && @battle_anime_frame <= sisinkizyun + 30
          @back_window.contents.blt(640-14*(@battle_anime_frame-(sisinkizyun+15*1)),kat_haitiiti,picture,rect)
        elsif
          if @battle_anime_frame >= sisinkizyun + 30
            @back_window.contents.blt(640-210,kat_haitiiti,picture,rect)
          end
        end
        
        picture = Cache.picture("Z3_必殺技_気功砲(テンシンハン)")
        kat_haitiiti = akizyouge+64*2+akinaka*2
        if @battle_anime_frame >= sisinkizyun + 31 && @battle_anime_frame <= sisinkizyun + 45
          @back_window.contents.blt(-210+14*(@battle_anime_frame-(sisinkizyun+15*2)),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 45
            @back_window.contents.blt(0,kat_haitiiti,picture,rect)
          end
        end
        
        picture = Cache.picture("Z3_必殺技_気功砲(テンシンハン)_反転")
        kat_haitiiti = akizyouge+64*2+akinaka*2
        if @battle_anime_frame >= sisinkizyun + 46 && @battle_anime_frame <= sisinkizyun + 60
          @back_window.contents.blt(640-14*(@battle_anime_frame-(sisinkizyun+15*3)),kat_haitiiti,picture,rect)
        else
          if @battle_anime_frame >= sisinkizyun + 60
            @back_window.contents.blt(640-210,kat_haitiiti,picture,rect)
          end
        end
        
        case @battle_anime_frame
        
        when 450..453,460..463,470..473,480..483
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          
        end
        
        case @battle_anime_frame
 
        when 450,460,470,480
          Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散")
        
        end
      when 490
        @tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 2
        #@chr_cutin = true
        set_chr_display_out
        
        Audio.se_play("Audio/SE/" + "Z1 ザー")
        Audio.se_play("Audio/SE/" + "Z1 ゴー")
      when 491..540
        
        #ray_x = 346
        #ray_y = 136
        back_anime_pattern 9
      when 541
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2185 #新気功砲
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 3 if @battle_anime_frame == 128
      when 129..329
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129 || @battle_anime_frame == 170
        Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if @battle_anime_frame == 129
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
        rect = Rect.new(0, 0, 170, 160)
        @back_window.contents.blt(208,98,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 170..173,210..213,250..253,290..293
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
        end
        
      when 330
        Audio.se_stop
        @tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 ザー")
        Audio.se_play("Audio/SE/" + "Z1 ゴー")
      when 341..550
        
        #ray_x = 346
        #ray_y = 136
        back_anime_pattern 9
        case @battle_anime_frame
        when 370..373,410..413,450..453,490..493
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 370 || @battle_anime_frame == 410 || @battle_anime_frame == 450 || @battle_anime_frame == 490
        end
      when 551
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 2192 #超能力
        back_x = 228
        back_y = 88
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      when 1..108
        #back_anime_pattern 201,back_x,back_y
      when 109
        Audio.se_stop
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        set_chr_display_out
        #@tec_output_back = false
        #@chr_cutin_flag = false
        @tec_output_back_no = 1
      when 120..146
        #back_anime_pattern 9
        
      when 147
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2194 #超能力(全体)
        back_x = 228
        back_y = 88
        ray_x = 325
        ray_y = 138
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
        when 129
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @chay = -160
        when 130..220
          @tec_output_back_no = 3
          picture = Cache.picture("Z3_必殺技_超能力(チャオズ)")
          rect = Rect.new(0, 0, 88, 116)
          @back_window.contents.blt(280,110,picture,rect)
          
          case @battle_anime_frame
          
          when 140..143,160..163,180..183,200..203
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            
          end
          
          case @battle_anime_frame
   
          when 140
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          
          end
        when 221
          
          @tec_output_back_no = 1
          set_chr_display_out
        when 230
          
          
          #@tec_output_back = false
          #@chr_cutin_flag = false
        when 231..257
          #back_anime_pattern 9
        when 258
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
          set_chr_display_out
        when 1..27

        when 28
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2195 #おもいっきりどどんぱ
      back_x = 228
      back_y = 88
      ray_x = 306
      ray_y = 94
      color = Color.new(255,255,255,260)
      #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..199
        sframe = 1
        back_anime_pattern 201,back_x,back_y
        
        ray_x = 290
        ray_y = 132

        case (@battle_anime_frame-sframe)
        when 30..74
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
          battle_anime_change 0,7
          @effect_anime_pattern = 237
        when 75..200
          ray_x -= 8
          ray_y -= 16
          @effect_anime_pattern = 235
        end
      when 200
        Audio.se_stop
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chay = -200
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
      when 201..310
        #@tec_output_back_no = 3
        picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
        rect = Rect.new(0, 0, 192, 168)
        @back_window.contents.blt(120,90,picture,rect)
        
        @effect_anime_pattern = 295
      when 311
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 320
        
        
        #@tec_output_back = false
        #@chr_cutin_flag = false
      when 321..347
        ray_y = 132
        @effect_anime_pattern = 297
        #back_anime_pattern 9
      when 348
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2207 #芭蕉扇
      color = Color.new(255,255,255,260)

      backhai_no = 201
      back_x = 224
      back_y = 88

      @nCenterX = 200 #回転する位置横
      @nCenterY = 90  #回転する位置縦
      @nRadiusX = 100 #回転する量横に伸ばす
      @nRadiusY = 10 #回転する量縦に伸ばす      
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化

          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 3
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          @output_anime_type = 1
          battle_anime_change 0,5

          @nRadian = 0 #回転スピード
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 刀")    # 効果音を再生する
          battle_anime_change 0,9
        when 120..180
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 120
          @chax -= 26 if @battle_anime_frame == 120
          battle_anime_change 0,10
          @chax -= 4
          @chay -= 1
          
        when 210..225
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == 210
          battle_anime_change 0,11 if @battle_anime_frame == 220
          @chax += 26 if @battle_anime_frame == 220
          @chax += 16
          @chay += 4
          
        when 240
          @chay = -180
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        when 241..340
          @chr_cutin_flag = false
          @tec_output_back_no = 3
          picture = Cache.picture("Z3_必殺技_芭蕉扇(チチ)")
          rect = Rect.new(0, 0, 236, 180)
          @back_window.contents.blt(220,90,picture,rect)
          if @battle_anime_frame >= 241 && @battle_anime_frame <= 244
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 341
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          @tec_output_back_no = 1
          
        when 350
          if @attack_hit == false
            @battle_anime_frame = 550
          end
          @temp_enex = @enex
          @temp_eney = @eney
          #@tec_output_back_no = 1
        when 351..499
          if @battle_anime_frame >= 351 && @battle_anime_frame <= 354
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")  if @battle_anime_frame == 351
          battle_anime_change 1,16
          @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
          @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
          #@temp_enex += 0.5
          @nRadian += (0.1 + 0.0025 * (@battle_anime_frame - 351))
          @temp_eney -= 2
        when 500
          @enex = CENTER_ENEX
          @eney = -180
          battle_anime_change 1,17
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 501..560
          @eney += 24
        when 561
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        case @battle_anime_frame
        when 0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          @tec_output_back_no = 1
          @tec_output_back = true
          @nRadian = 0 #回転スピード
        when 9
          if @attack_hit == false
            @battle_anime_frame = 221
          end
          @temp_enex = @enex
          @temp_eney = @eney
          #@tec_output_back_no = 1
        when 11..158
          if @battle_anime_frame >= 11 && @battle_anime_frame <= 14
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")  if @battle_anime_frame == 11
          battle_anime_change 1,16
          @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
          @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
          #@temp_enex += 0.5
          @nRadian += (0.1 + 0.0025 * (@battle_anime_frame - 11))
          @temp_eney -= 2
        when 159
          @enex = CENTER_ENEX
          @eney = -180
          battle_anime_change 1,17
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 160..210
          @eney += 24
        when 211
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end

    when 2223 #爆発波
      @ray_color = 3
      if @attackcourse == 0
      back_x = 228
      back_y = 88
      ray_x = 326
      ray_y = 96
      else
      back_x = 210+24
      back_y = 32
      ray_x = 326-64
      ray_y = 96
      end
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 201,back_x,back_y
        when 90 #初期化
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 201,back_x,back_y
        when 91..127
          back_anime_pattern 201,back_x,back_y
        when 128
          @tec_output_back = false
          @chr_cutin = false
          @chax  += 16
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,2
          #back_anime_pattern 2
        when 129..208
          back_anime_pattern 2

          #back_anime_pattern 101,back_x,back_y
        when 209
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 220
          @chr_cutin = true
          set_chr_display_out
        when 221..281
          back_anime_pattern 1
        when 282
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        case @battle_anime_frame
        when 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #@effect_anime_frame = 27
          @output_anime_type = 0
          @tec_back = false
          set_chr_display_out
        when 1..60
          back_anime_pattern 1
        when 61
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2225 #ビッグバンアタック
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
        
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        if $super_saiyazin_flag[3] == true
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック(超ベジータ)")
          bezikat_x = 190
          bezikat_y = 40
          rect = Rect.new(0, 0, 178, 248)
        else
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック(ベジータ)")
          bezikat_x = 270
          bezikat_y = 100
          rect = Rect.new(0, 0, 110, 208)
        end
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x -= 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x -= 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x -= 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..230
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 140
          if $super_saiyazin_flag[3] == true
            ray_x = 368
            ray_y = 220
          else
            ray_x = 344
            ray_y = 180
          end
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336

        if $super_saiyazin_flag[3] == true
          ray_y = 112
          @effect_anime_pattern = 265

        else
          ray_y = 112
          @effect_anime_pattern = 266
        end

      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2230 #ファイナルフラッシュ
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,12
        @ray_color = 3
        
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 5 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..340
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6") if @battle_anime_frame == 130
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("ZG_必殺技_ファイナルフラッシュ(溜め)_ベジータ")
        bezikat_x = 130
        bezikat_y = 220
        rect = Rect.new(0, 0, 382, 96)
        
        picture1 = Cache.picture("ZG_必殺技_ファイナルフラッシュ(溜め)_ベジータ(気)")
        
        if @battle_anime_frame > 160
          @back_window.contents.blt(bezikat_x,bezikat_y,picture1,rect)
        end
        
        if @battle_anime_frame >= 140 && @battle_anime_frame <= 180
          if @battle_anime_frame % 2 == 1
            bezikat_x -= 2
          else
            bezikat_x += 2
          end
        end
        

        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 180..210
          
            ray_x = 276+24
            ray_y = 284-16
          @effect_anime_pattern = 278
        when 211..340
          @effect_anime_pattern = 0
          picture = Cache.picture("ZG_戦闘_必殺技_ファイナルフラッシュ弾")
          rect = Rect.new(0, 32, 64, 64)
          tama_x = 276+10
          tama_y = 284-32
          @back_window.contents.blt(tama_x,tama_y,picture,rect)
          if @battle_anime_frame > 230
            Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == 231
            picture = Cache.picture("ZG_必殺技_ファイナルフラッシュ(発動)_ベジータ")
            bezikat_x = 640
            bezikat_y = 46
            tyousei_x = (@battle_anime_frame-231)*16
            
            if tyousei_x > 500
              tyousei_x = 500
            end
            rect = Rect.new(0, 0, 204, 128)
            @back_window.contents.blt(bezikat_x-tyousei_x,bezikat_y,picture,rect)
            picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(青)")
            bezikat_x = 640+204-4
            bezikat_y = 46
            rect = Rect.new(0, 0, 700, 128)
            @back_window.contents.blt(bezikat_x-tyousei_x,bezikat_y,picture,rect)
          end
        end
      when 341
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 351..376

          ray_y = 112
          @effect_anime_pattern = 265

      when 377
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2246 #ミスティックフラッシャー(若者)

        ray_x = 350
        ray_y = 114
        
          backhai_no = 201
          back_x = 228
          back_y = 88
 
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,11
        @ray_color = 1
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90..130
        startflame = 90
        if @battle_anime_frame == startflame
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,10
          
        end
        @chax += 20
      when 131..152
        startflame = 131
        if @battle_anime_frame == startflame
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,10
          @chax = -192
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        end
        
        @chax += 20
      when 153..219
        startflame = 153
        if @battle_anime_frame == startflame
          battle_anime_change 1,16
          #Audio.se_play("Audio/SE/" + "ZG 打撃1")
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          
        end
        #味方戦闘アニメとSE用
        case @battle_anime_frame
        when startflame
          @output_anime_type = 0
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
        when startflame + 8
          @output_anime_type = 0
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
        when startflame + 16..startflame + 31
          battle_anime_change 0,16
          @chax -= 12
          @chay -= 2
        when startflame + 35..startflame + 42
          @chax += 24
          @chay += 4
          #@output_anime_type = 0
          #battle_anime_change 0,1
          if @battle_anime_frame == startflame + 42
            Audio.se_play("Audio/SE/" + "ZG 打撃4")
            battle_anime_change 0,1
          end
        end

        #敵戦闘アニメ用
        case @battle_anime_frame
        when startflame..startflame + 3,startflame + 8..startflame + 11
          @enex += 12
        when startflame + 4..startflame + 7,startflame + 12..startflame + 15
          @enex -= 12
        when startflame + 42..startflame + 500
          battle_anime_change 1,17
          @enex += 16
          @eney += 4
        
        #when startflame..startflame + 3,startflame + 15..startflame + 18
        #  @enex += 12
        #when startflame + 8..startflame + 11,startflame + 23..startflame + 26
        #  @enex -= 12
        end
      when 220
        battle_anime_change 1,17
        set_chr_display_out
        @enex = -194
        @chax = CENTER_CHAX
        @chay = - 192
      when 221..247
        startflame = 221
        
        if @battle_anime_frame == startflame
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 1
          battle_anime_change 0,10
          
        end        
        
        if @enex < CENTER_ENEX
          @enex += 20
        else
          @enex = CENTER_ENEX
        end
        
        if @chay < STANDARD_CHAY #247で追いつく
          case @battle_anime_frame
          
          when startflame..startflame+200
            @chax += 6
            @chay += 12
          end
        else
          @chay = STANDARD_CHAY
        end
        
        #敵起き上がり
        if @battle_anime_frame == startflame + 12
          battle_anime_change 1,16
        end
        
        if @battle_anime_frame == startflame + 24
          battle_anime_change 1,0
        end

      when 248
        battle_anime_change 0,27
      when 268
        startflame = 268
        if @battle_anime_frame == startflame
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        end
        battle_anime_change 0,28
      when 287
        @chr_cutin_flag = false
        @tec_output_back = false
      when 288..360
        startflame = 288
        if @battle_anime_frame == startflame
          @chay = -192
          @eney = -192
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          @effect_anime_mirror = 1
        end 
        picture = Cache.picture("Z3_必殺技_ミスティックフラッシャー(若者)")
        rect = Rect.new(0, 0, 230, 156)
        @back_window.contents.blt(220,104,picture,rect)
        @ray_color = 3
        back_anime_pattern 106,0,0,1
        #ray_x +=  (@battle_anime_frame-141)/2 - @effect_anime_frame*RAY_SPEED
        ray_x = 278
        ray_y = 6
        ray_x += 0 - @effect_anime_frame*RAY_SPEED
        @effect_anime_pattern = 236
      when 361..397
        startflame = 361
        ray_x = 404
        ray_y = 98
        if @battle_anime_frame == startflame
          
          @effect_anime_mirror = 1
          @effect_anime_pattern = 256
          @effect_anime_frame = 0
          @chay = STANDARD_CHAY
          @eney = STANDARD_ENEY
          @chr_cutin = true
          @chr_cutin_flag = true
          @chr_cutin_mirror_flag = true
          @tec_output_back = true
        end
      when 398
        
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2255 #(バーダック)スーパーファイナルリベンジャー
      back_x = 232
      back_y = 86
      backhai_no = 201
      barcut_x = 180
      barcut_y = 64
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
      when 1..80
        back_anime_pattern backhai_no,back_x,back_y
        
        #@effect_anime_pattern = 237
      when 81..99
        sframe = 81
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        @chay = -200 if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,144,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          elsif $btl_progress >= 2
            @back_window.contents.blt(@chax + 16,144,picture,rect)
          else
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          end
        else
          
        end
      when 100
        #set_chr_display_out
        @output_anime_type = 0
        @chay = -200 #キャラ画面範囲外へ
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        #@chax = STANDARD_CHAX-40
        #@chay = STANDARD_CHAY-26
        @output_anime_type = 1
        #battle_anime_change 0,3
        @chax -= 16
        
      when 101..119
        sframe = 101
        #Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        @chay = -200 if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if $btl_progress == 0
            @back_window.contents.blt(@chax + 20,144,picture,rect)
          elsif $btl_progress == 1
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          elsif $btl_progress >= 2
            @back_window.contents.blt(@chax + 16,144,picture,rect)
          else
            @back_window.contents.blt(@chax + 4,144,picture,rect)
          end
        else
          
        end
      when 120..124
        @chay = STANDARD_CHAY
      when 125..130
        sframe = 125
        battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        battle_anime_change 0,12
        
        case @battle_anime_frame
        
          when sframe + 1..sframe + 2
            @enex += 8
          when sframe + 3..sframe + 4
            @enex -= 8
        end
      when 131..190
        sframe = 131

        case @battle_anime_frame
          when sframe + 1..sframe + 8
            battle_anime_change 0,12
            @eney -= 8
            #@enex -= 8
          when sframe + 9..sframe + 12
            Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 9
            battle_anime_change 0,13 if @battle_anime_frame == sframe + 11
            battle_anime_change 1,17
            @eney += 16
            @enex -= 30
          when sframe + 13..sframe + 22
          when sframe + 23..sframe + 30
            battle_anime_change 0,13
            battle_anime_change 1,16
            @eney -= 8
          when sframe + 31..sframe + 34
            Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 31
            battle_anime_change 0,12 if @battle_anime_frame == sframe + 33
            battle_anime_change 1,17
            @eney += 12
            @enex += 30
          when sframe + 35..sframe + 999
            battle_anime_change 1,17
            @enex += 20
            @eney += 2
            @chax += 30 if @battle_anime_frame >= sframe + 46
            @chay += 2 if @battle_anime_frame >= sframe + 46
            battle_anime_change 0,3 if @battle_anime_frame == sframe + 46
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 46
          #when sframe + 7..sframe + 12
          #  battle_anime_change 0,5
          #  @eney -= 2
          #  @enex -= 16
          #when sframe + 13..sframe + 18
          #  battle_anime_change 0,13
          #  @eney += 8
          #  @enex -= 4
          end
      when 191
        @chay = STANDARD_CHAY
        @eney = STANDARD_CHAY
        @enex = -100
        @chax = -300
      when 192..235
        sframe = 192
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        case @battle_anime_frame
          when sframe + 1..sframe + 17
            @enex += 20
            @chax += 30
            battle_anime_change 0,8 if @battle_anime_frame == sframe + 13
          when sframe + 18..sframe + 21
            battle_anime_change 0,8
            Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == sframe + 18
            @enex += 30
            #battle_anime_change 1,16
          when sframe + 22..sframe + 25
            @enex -= 30
            @chay -= 16
            @chax += 12
            battle_anime_change 0,3
          when sframe + 26..sframe + 27
            battle_anime_change 0,9
            @chay += 24
            Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 27
          when sframe + 28..sframe + 35
            @chay += 16
            @eney += 16
          when sframe + 36..sframe + 43
            @chay -= 16
            @eney -= 18
            @enex += 8

            
        end
      when 236..289
        sframe = 236
        case @battle_anime_frame
          when sframe
            Audio.bgs_play("Audio/BGS/" + "Z1 大地が揺れる")
            battle_anime_change 0,12
            battle_anime_change 1,16
          when sframe + 1..sframe + 10
            battle_anime_change 0,13
            battle_anime_change 1,16
            @enex -= 8
          when sframe + 11..sframe + 20
            battle_anime_change 0,12
            @enex += 8
          when sframe + 21..sframe + 25
            battle_anime_change 0,13
            @enex -= 16
          when sframe + 26..sframe + 30
            battle_anime_change 0,12
            @enex += 16
          when sframe + 31..sframe + 33
            battle_anime_change 0,13
            @enex -= 32
          when sframe + 34..sframe + 36
            battle_anime_change 0,12
            @enex += 32
          when sframe + 37..sframe + 38
            battle_anime_change 0,13
            @enex -= 48
          when sframe + 39..sframe + 40
            battle_anime_change 0,12
            @enex += 48
          when sframe + 41..sframe + 41
            battle_anime_change 0,13
            @enex -= 96
          when sframe + 42..sframe + 42
            battle_anime_change 0,2
            battle_anime_change 1,17
            @enex += 96
            Audio.bgs_stop
            Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
          when sframe + 43..sframe + 999
            @enex += 48
        end
          
      when 290..349
        sframe = 291
        case @battle_anime_frame
          when sframe
            @chay = STANDARD_CHAY
            @eney = STANDARD_CHAY
            @enex = -100
            @chax = 680
            battle_anime_change 1,16
          when sframe + 1..sframe + 10
            @enex += 32
          when sframe + 11..sframe + 18
            @enex += 32
            @chax -= 24
            battle_anime_change 0,11
            
            Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 18
          when sframe + 19..sframe + 29
            @enex -= 32
            battle_anime_change 1,17
            if @battle_anime_frame >= sframe + 25
              battle_anime_change 0,14
              @chax -= 72
              @chay -= 16
              #Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 25
              Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 25
            end
          when sframe + 30..sframe + 30
            @chay = STANDARD_CHAY
            @chax = @enex - 40
            battle_anime_change 0,10
            
            Audio.se_play("Audio/SE/" + "ZG 打撃2")
          when sframe + 31..sframe + 999
            @enex += 32
            @eney -= 16
          end
=begin
      if @attackcourse == 0
        back_x = 200
        back_y = 32
        ray_x = 300
        ray_y = 162
      else
        back_x = 190+24
        back_y = 32
        ray_x = 350-128
        ray_y = 124
      end
      
=end
      when 350 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        @chr_cutin = false
        @chax = -200
        
        if $game_variables[175] == 0 #バーダックの衣装
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
        else
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
        end
        rect = Rect.new(0, 26,274,228)
        @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
        ray_x = 202
        ray_y = 236
        @effect_anime_pattern = 235
      when 351..410
        if $game_variables[175] == 0 #バーダックの衣装
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
        else
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
        end
        rect = Rect.new(0, 26,274,228)
        @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
        ray_x = 202
        ray_y = 236
        @effect_anime_pattern = 235
      when 411..470
        if $game_variables[175] == 0 #バーダックの衣装
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
        else
          picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
        end
        rect = Rect.new(0, 26,274,228)
        @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
        @chr_cutin = true if @battle_anime_frame == 470
        ray_x = 186
        ray_y = 220
        @effect_anime_pattern = 289
      when 471..520
        @chax = TEC_CENTER_CHAX
        
        ray_x = 276
        ray_y = 140
        battle_anime_change 0,6
        @effect_anime_pattern = 235
      when 521
        Audio.se_stop
        battle_anime_change 0,2
        ray_x = -360
        ray_y = -96
      when 522
        #@ray_color = 0
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 206
        @effect_anime_frame = 0
        ray_x = -360
        ray_y = -96
        #back_anime_pattern 101,back_x,back_y
        
      when 523..560
        #back_anime_pattern 101,back_x,back_y
        @effect_anime_pattern = 206
        ray_x = 360
        if $btl_progress >= 2
          ray_y = 96
        else
          ray_y = 92
        end
      when 561
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 591
        set_chr_display_out
      when 612..638
        @effect_anime_pattern = 207
      when 639
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2272 #剣攻撃
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 剣攻撃")    # 効果音を再生する
        @output_anime_type = 1
        
        if @attackcourse == 1 && @enedatenum == 144
          battle_anime_change 0,4
        else
          battle_anime_change 0,2
          @chax -=14
          @enex +=14
        end
        
        @ray_color = 0
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 267
        ray_x = 228
        ray_y = 134
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        #@effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 2273 #爆発波(トランクス)
      @ray_color = 3
      if @attackcourse == 0
      back_x = 228
      back_y = 88
      ray_x = 326
      ray_y = 96
      else
      back_x = 210+24
      back_y = 32
      ray_x = 326-64
      ray_y = 96
      end
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..89
          back_anime_pattern 201,back_x,back_y
        when 90 #初期化
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,0
          back_anime_pattern 201,back_x,back_y
        when 91..127
          back_anime_pattern 201,back_x,back_y
        when 128
          @tec_output_back = false
          @chr_cutin = false
          @chax  += 16
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,9
          battle_anime_change 0,2 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3
          #back_anime_pattern 2
        when 129..208
          back_anime_pattern 2

          #back_anime_pattern 101,back_x,back_y
        when 209
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 220
          @chr_cutin = true
          set_chr_display_out
        when 221..281
          back_anime_pattern 1
        when 282
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        case @battle_anime_frame
        when 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #@effect_anime_frame = 27
          @output_anime_type = 0
          @tec_back = false
          set_chr_display_out
        when 1..60
          back_anime_pattern 1
        when 61
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2274 #ませんこう

        ray_x = 340
        ray_y = 96
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,10
        battle_anime_change 0,3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,11
        battle_anime_change 0,13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        @effect_anime_pattern = 206
        back_anime_pattern backhai_no,back_x,back_y
  
      when 91..128
        back_anime_pattern backhai_no,back_x,back_y
      when 129
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 207
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2276 #バーニングアタック
      
      if $game_variables[173] == 0 || $game_variables[173] == 4
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
          
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 3 if @battle_anime_frame == 128
          #@tec_back_color = 0 if @battle_anime_frame == 128
          @chr_cutin = false if @battle_anime_frame == 128
        when 129..300
          #kien_x = 220
          #kien_y = 80
          Audio.se_stop if @battle_anime_frame == 129
          
          @chay = -160
          #kienkizyunframe = 175
          #kiptan = 0
          
          if $game_variables[173] == 4
            if $super_saiyazin_flag[4] == true
              picture = Cache.picture("Z3_必殺技_バーニングアタック(超トランクス(剣持ち長髪))")
            else
              picture = Cache.picture("Z3_必殺技_バーニングアタック(トランクス(剣持ち長髪))")
            end
          else
            if $super_saiyazin_flag[4] == true
              picture = Cache.picture("Z3_必殺技_バーニングアタック(超トランクス)")
            else
              picture = Cache.picture("Z3_必殺技_バーニングアタック(トランクス)")
            end
          end
          bezikat_x = 272
          bezikat_y = 82
          rect = Rect.new(0, 0, 158, 184)
          
          if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
            bezikat_x -= 2
            bezikat_y -= 2
          elsif @battle_anime_frame == 232
            bezikat_x -= 4
            bezikat_y -= 4
          elsif @battle_anime_frame == 233
            bezikat_x -= 6
            bezikat_y -= 6
          elsif @battle_anime_frame == 234
            bezikat_x -= 4
            bezikat_y -= 4
          elsif @battle_anime_frame == 235
            bezikat_x -= 2
            bezikat_y -= 2
          end
          @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
          
          case @battle_anime_frame
          
          when 1
            
          when 140..230
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 140
            if $super_saiyazin_flag[3] == true
              ray_x = 368
              ray_y = 220
            else
              ray_x = 344
              ray_y = 180
            end
            @effect_anime_pattern = 235
          when 231
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 264
          end

        when 301
          #@tec_output_back = false
          @chr_cutin = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          #Audio.se_play("Audio/SE/" + "Z1 ザー")
        when 311..337
          @effect_anime_pattern = 211
          if $super_saiyazin_flag[4] == true
          #  ray_y = 112
            @effect_anime_pattern = 211

          else
          #  ray_y = 112
            @effect_anime_pattern = 209
          end

        when 338
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
          
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 6 if @battle_anime_frame == 128
          #@tec_back_color = 0 if @battle_anime_frame == 128
          @chr_cutin = false if @battle_anime_frame == 128
        when 129..360
          #kien_x = 220
          #kien_y = 80
          Audio.se_stop if @battle_anime_frame == 129 || @battle_anime_frame == 290
          Audio.se_play("Audio/SE/" + "ZG 気をためる2") if @battle_anime_frame == 140
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 290
          @chay = -160
          #kienkizyunframe = 175
          #kiptan = 0
          picno=1
          
          if $game_variables[173] == 1
            if $super_saiyazin_flag[4] == true
              picname = "ZG_必殺技_バーニングアタック_超トランクス"
            else
              picname = "ZG_必殺技_バーニングアタック_トランクス"
              
            end
          elsif $game_variables[173] == 2
            if $super_saiyazin_flag[4] == true
              picname = "ZG_必殺技_バーニングアタック_超トランクス(タンクトップ)"
            else
              picname = "ZG_必殺技_バーニングアタック_トランクス(タンクトップ)"
              
            end
          elsif $game_variables[173] == 3
            if $super_saiyazin_flag[4] == true
              picname = "ZG_必殺技_バーニングアタック_超トランクス(剣なし・タンクトップ・長髪)"
            else
              picname = "ZG_必殺技_バーニングアタック_トランクス(剣なし・タンクトップ・長髪)"
              
            end            
            
          end
          bezikat_x = 64
          bezikat_y = 114
          rect = Rect.new(0, 0, 512, 128)
          
          if @battle_anime_frame >= 290
            picno +=3
          elsif @battle_anime_frame >= 255
            picno +=1
          elsif @battle_anime_frame >= 245
            picno +=2
          elsif @battle_anime_frame >= 235
            picno +=0
          elsif @battle_anime_frame >= 190
            picno +=1
          end
          
          picture = Cache.picture(picname + picno.to_s)
          @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
          
          if @battle_anime_frame >= 340
            color = Color.new(255,255,255,15*(@battle_anime_frame-340)+160)
              #@back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            @back_window.contents.fill_rect(0,0,640,378,color) 
          end
        when 361
          #@tec_output_back = false
          @chr_cutin = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          #Audio.se_play("Audio/SE/" + "Z1 ザー")
        when 371..397
          @effect_anime_pattern = 211
          if $super_saiyazin_flag[4] == true
          #  ray_y = 112
            @effect_anime_pattern = 211

          else
          #  ray_y = 112
            @effect_anime_pattern = 209
          end

        when 398
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2277 #シャイニングソードアタック
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        #ray_x = 228
        #ray_y = 134
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      
      @battle_anime_frame = 1001 if @enedatenum != 102 && @battle_anime_frame == 0
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
        
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        #kien_x = 220
        #kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        #kienkizyunframe = 175
        #kiptan = 0
        if $game_variables[173] == 3
            if $super_saiyazin_flag[4] == true
              picture = Cache.picture("Z3_必殺技_バーニングアタック(超トランクス(剣持ち長髪))")
            else
              picture = Cache.picture("Z3_必殺技_バーニングアタック(トランクス(剣持ち長髪))")
            end
          else
            if $super_saiyazin_flag[4] == true
              picture = Cache.picture("Z3_必殺技_バーニングアタック(超トランクス)")
            else
              picture = Cache.picture("Z3_必殺技_バーニングアタック(トランクス)")
            end
          end
        bezikat_x = 272
        bezikat_y = 82
        rect = Rect.new(0, 0, 158, 184)
        
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x -= 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x -= 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x -= 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..230
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 140
          if $super_saiyazin_flag[3] == true
            ray_x = 368
            ray_y = 220
          else
            ray_x = 344
            ray_y = 180
          end
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        #set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 311..370
        @effect_anime_pattern = 211
        if $super_saiyazin_flag[4] == true
        #  ray_y = 112
          @effect_anime_pattern = 211

        else
        #  ray_y = 112
          @effect_anime_pattern = 209
        end
        
        if @battle_anime_frame == 334
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 0
          battle_anime_change 1,16
          @gy = -16
        end
      when 371
        #@chr_cutin = true
        @tec_output_back_no = 3
        @output_anime_type = 1
        battle_anime_change 0,3
        #@output_anime_type = 0
        battle_anime_change 1,0
        tranidoux = 8
        tranidouy = 8
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
        #Audio.se_play("Audio/SE/" + "DB3 刀")
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @enedatenum == 102
        @chax = CENTER_ENEX
        @chay = STANDARD_ENEY
        @chax -= (96+tranidoux*49)
        @chay -= (tranidouy*49)
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @enex += (tranidoux*52)
        @eney += (tranidouy*52)
        @gy = 0
        #@chax = 160
        #@chay = 160
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 372..699
        tranidoux = 8
        tranidouy = 8
        if @battle_anime_frame <= 420
          @chax += tranidoux
          @chay += tranidouy

        end
        
        if @battle_anime_frame <= 450
          if @effect_anime_type == 0 && @effect_anime_frame == 0
            @chax += 4
          elsif @effect_anime_type == 1 && @effect_anime_frame == 0
            @chax -= 4
          end

          if @effect_anime_frame >= 2
            if @effect_anime_type == 0
              @effect_anime_type += 1
              @effect_anime_frame = 0
            else
              @effect_anime_type = 0
              @effect_anime_frame = 0
            end
          else
            @effect_anime_frame +=1
          end
        end
        
        if @battle_anime_frame >= 430 && @battle_anime_frame <= 455
          
          #p @enex,@eney
          @enex -= tranidoux*2
          @eney -= tranidouy*2
          
          
          if @battle_anime_frame == 455
            battle_anime_change 0,4

            @chax += 16
            Audio.se_play("Audio/SE/" + "DB3 刀")
            #Audio.se_play("ZG 打撃5")

            @chr_cutin = true
            
            if $game_variables[173] != 0 && $super_saiyazin_flag[4] == true
              @effect_anime_pattern = 269
            end
          end
        end
        
        if @battle_anime_frame >= 455 && @battle_anime_frame <= 491 && $game_variables[173] == 0 && $super_saiyazin_flag[4] == true
          @chay = -200
          @eney = -200
          
          if $game_variables[96] == 1
            @chr_cutin = false
            picture = Cache.picture("Z3_必殺技_シャイニングソードアタック(フリーザ付)")
          else
            picture = Cache.picture("Z3_必殺技_シャイニングソードアタック")
          end
          rect = Rect.new(0, 0, 340, 346)
          @back_window.contents.blt(100,10,picture,rect)
          
          
        end
        kiruse = "DB3 刀"
        
        katana_frame = 500
        if @battle_anime_frame == katana_frame-8
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @chay = 120
          @eney = 120
          battle_anime_change 0,5
          @chax -= 22
        end
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,8
          @chax -= 22
        end
        
        katana_frame = 510
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,6
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 268
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
        end
        katana_frame = 520
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,3
          @chax -= 16
        end
        
        katana_frame = 530
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 16
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 269
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
          #Audio.se_play("Audio/SE/" + "Z1 高速移動")
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          #@tec_output_back_no = 0
        end
        katana_frame = 540
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,8
          @chax -= 22
        end
        
        katana_frame = 550
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,6
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 268
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
        end
        katana_frame = 560
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,3
          @chax -= 16
        end
        
        katana_frame = 570
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 16
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 269
        elsif @battle_anime_frame == katana_frame +20
          battle_anime_change 0,5
          @chax -= 22
          #Audio.se_play("Audio/SE/" + "Z1 高速移動")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @tec_output_back_no = 0
        end
        katana_frame = 630
        if @battle_anime_frame == katana_frame
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          battle_anime_change 0,7
          @effect_anime_pattern = 256
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @ray_color = 3
        end
        case @effect_anime_pattern
        
        when 267,268
          ray_x = 228
          ray_y = 134-16
        when 269,270
          ray_x = 292
          ray_y = 70
        when 256
          ray_x = 336-32
          ray_y = 112
        end
      when 700
        
        @chay = -160
        anime_pattern_fromat
        return @battle_anime_result + 1
      when 1001..1020
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 1001
        @output_anime_type = 0
        battle_anime_change 0,16
        @ay = -16
        if @battle_anime_frame == 1020
          @ay = 0
          @battle_anime_frame = 370 
        end
      end
    when 2278 #ヒートドームアタック
        #back_x = 228
        back_x = 216
        back_y = 88
        ray_x = 320-90
        ray_y = 246-198
        #ray_x = 228
        #ray_y = 134
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      
      case @battle_anime_frame
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 1..40
        #back_anime_pattern 201,back_x,back_y
        #Audio.se_stop if @battle_anime_frame == 128
        @ax = 24
        battle_anime_change 0,8
      when 41..99
        @chax = -120 if @battle_anime_frame == 41
        @enex = CENTER_ENEX if @battle_anime_frame == 41
        @eney = STANDARD_ENEY if @battle_anime_frame == 41
        if @battle_anime_frame == 56
          @ax = 0
          @chax += 16
          @output_anime_type = 0
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 1,16
        end
        
        if @battle_anime_frame >= 56
          @enex += 24
          @eney -= 12
          @effect_anime_pattern = 123 if @battle_anime_frame == 56
          ray_x = 330
          ray_y = 150
          @effect_anime_pattern = 0 if @battle_anime_frame == 64
        end
      when 100
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 101..228
        back_anime_pattern 201,back_x,back_y
        #@tec_output_back = false if @battle_anime_frame == 228
        @tec_output_back_no = 1 if @battle_anime_frame == 228
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 228 && $super_saiyazin_flag[4] == true
        Audio.se_stop if @battle_anime_frame == 228
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 228
      when 229..370
        
        if $super_saiyazin_flag[4] == true #トランクスが超サイヤ人なら
          @chay = -100
          @tec_output_back_no = 4
          
          if $game_variables[173] == 1 #バトルスーツ
            picture = Cache.picture("ZG_必殺技_ヒートドームアタック_超トランクス(バトルスーツ)") #ダメージ表示用
          elsif $game_variables[173] == 3
            picture = Cache.picture("ZG_必殺技_ヒートドームアタック_超トランクス(剣なし・タンクトップ・長髪)") #ダメージ表示用
          else
            picture = Cache.picture("ZG_必殺技_ヒートドームアタック_超トランクス(タンクトップ)") #ダメージ表示用
          end
          rect = Rect.new(0, 0,200,284)
          back_x = 220
          back_y = 38
          @back_window.contents.blt(back_x,back_y,picture,rect)
          @tec_output_back_no = 1 if @battle_anime_frame == 370
        else
          @tec_output_back_no = 1
          battle_anime_change 0,2
          @chay = STANDARD_ENEY + 72
          @chax = TEC_CENTER_CHAX
        end
      when 371..459
        ray_x = 320-114
        ray_y = 246-188
        if @battle_anime_frame == 371
          @ray_color = 0
          @chay = STANDARD_ENEY + 72
          @chax = TEC_CENTER_CHAX
          @chr_cutin = true
          battle_anime_change 0,2
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 291
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        end
      when 460
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @effect_anime_pattern = 0
        @enex = TEC_CENTER_CHAX
        battle_anime_change 1,0
        battle_anime_change 1,21 if @enedatenum == 127
      when 461..494
        ray_x = 320-114
        ray_y = 640
        @effect_anime_pattern = 292
        if @enedatenum == 127 && @battle_anime_frame == 475
          battle_anime_change 1,19
        end
      when 495
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
     when 2281 #フィニッシュバスター

        ray_x = 340
        ray_y = 96
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 88
        else
          backhai_no = 101
          back_x = 214
          back_y = 32
        end
      case @battle_anime_frame
      when 0 #初期化
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
        end
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,11
        battle_anime_change 0,12 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        back_anime_pattern backhai_no,back_x,back_y
        @effect_anime_pattern = 237
        ray_x = 276
        ray_y = 108
      when 91..189
        back_anime_pattern backhai_no,back_x,back_y
        @effect_anime_pattern = 237
        ray_x = 276
        ray_y = 108
      when 190
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        battle_anime_change 0,11
        battle_anime_change 0,13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        @effect_anime_pattern = 256
        #back_anime_pattern backhai_no,back_x,back_y
      when 191..228
        #back_anime_pattern backhai_no,back_x,back_y
      when 229
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 239
        set_chr_display_out
      when 240..266
        @effect_anime_pattern = 265
      when 267
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2294 #気円斬
      
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 0
        
      when 1..126
        ray_x = 242
        ray_y = 96
        @effect_anime_frame += 1
        
        if @effect_anime_frame == 5
          @effect_anime_type += 1 if @effect_anime_type < 4
          @effect_anime_frame = 1
        end
        picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        rect = Rect.new(0, 30*@effect_anime_type,126,30)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
        if @battle_anime_frame == 126
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          Audio.se_stop
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
        end
      when 127..155
        @effect_anime_frame += 1
        #@effect_anime_pattern = 273
        ray_x = 340
        ray_y = 150
        picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      when 156
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 160
        set_chr_display_out
      when 161..191
        @effect_anime_pattern = 260
      when 192
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2298 #エネルギーウェイブ(18号)
        #back_x = 228
        #back_y = 88
        back_x = 266
        #back_x = 206
        back_y = 0
        ray_x = 302
        ray_y = 62
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        #@ray_color = 3
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @ray_color = 3
        #ray_x = 338
        #ray_y = 156
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = ray_x + 12
        @genkityuushin_y = ray_y + 12
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
        @chr_cutin = false
      when 1..350
        sframe = 1
        @tec_output_back_no = 4
        @chay = -160

        if $game_variables[177] == 1 #18号衣装No
          picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ(着替)")
        else
          picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ")
        end
          bezikat_x = 138
          bezikat_y = 96
          rect = Rect.new(0, 0, 296, 220)
        
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        #ray_x = 290
        #ray_y = 40
        
        tame_end = 360
        
        if @battle_anime_frame == tame_end
          
        elsif @battle_anime_frame >= tame_end
          
        else
          #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          #rect = Rect.new(0, 0, 8, 10)
          #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              
              
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              #idou_x_moto = 4
              #idou_y_moto = 2
              case i

              when 0 #上
                idou_x = 0
                idou_y = -2

              when 1 #左上
                idou_x = 2
                idou_y = -2

              when 2 #左
                idou_x = 2
                idou_y = 0
                
              when 3 #左下
                idou_x = 2
                idou_y = 2
                
              when 4 #下
                idou_x = 0
                idou_y = 2
                
              when 5 #右下
                idou_x = -2
                idou_y = 2

              when 6 #右
                idou_x = -2
                idou_y = 0
                
              when 7 #右上
                idou_x = -2
                idou_y = -2

              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(7) == 0
              end
              
            end
          end
        end
        
        if @battle_anime_frame == (sframe + 90)
          
          @effect_anime_pattern = 235
        end
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == (sframe + 90)
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == (sframe + 90)
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == (sframe + 180)
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == (sframe + 180)
        if @battle_anime_frame > (sframe + 240)
          
          @effect_anime_pattern = 289
          ray_x -= 16 
          ray_y -= 16
        end
        
        #back_anime_pattern 201,back_x,back_y
        #@tec_back_small = true if @battle_anime_frame == 128
        #@tec_output_back = false if @battle_anime_frame == 128
        @chr_cutin = true if @battle_anime_frame == 350
        @tec_output_back_no = 0 if @battle_anime_frame == 350
        #@chr_cutin_flag = false if @battle_anime_frame == 128
        #@tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        #@chr_cutin = false if @battle_anime_frame == 128
      when 351..390
        sframe = 351
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") 
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        battle_anime_change 0,10
        @effect_anime_pattern = 239
        ray_x = 338
        ray_y = 104

      when 391
        @tec_output_back = true
        @chr_cutin = true
        @chr_cutin_flag = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 401..427
        ray_y = 106
        @effect_anime_pattern = 240

      when 428
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2308 #エネルギーウェイブ(17号)
        #back_x = 228
        #back_y = 88
        back_x = 266
        #back_x = 206
        back_y = 0
        ray_x = back_x +82
        ray_y = back_y +60
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        #@ray_color = 3
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @ray_color = 3
        ray_x = 338
        ray_y = 156
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = ray_x -14
        @genkityuushin_y = ray_y +2 + 10
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 1..128
        
        ray_x = 324
        ray_y = 120
        
        tame_end = 128
        
        if @battle_anime_frame == tame_end
          
        elsif @battle_anime_frame >= tame_end
          
        else
          #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          #rect = Rect.new(0, 0, 8, 10)
          #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              #idou_x_moto = 4
              #idou_y_moto = 2
              case i

              when 0 #上
                idou_x = 0
                idou_y = -2

              when 1 #左上
                idou_x = 2
                idou_y = -2

              when 2 #左
                idou_x = 2
                idou_y = 0
                
              when 3 #左下
                idou_x = 2
                idou_y = 2
                
              when 4 #下
                idou_x = 0
                idou_y = 2
                
              when 5 #右下
                idou_x = -2
                idou_y = 2

              when 6 #右
                idou_x = -2
                idou_y = 0
                
              when 7 #右上
                idou_x = -2
                idou_y = -2

              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(7) == 0
              end
              
            end
          end
        end
        #back_anime_pattern 201,back_x,back_y
        #@tec_back_small = true if @battle_anime_frame == 128
        #@tec_output_back = false if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
        @chr_cutin_flag = false if @battle_anime_frame == 128
        #@tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        #@chr_cutin = false if @battle_anime_frame == 128
      when 129..330
        #kien_x = 220
        #kien_y = 80
        #back_anime_pattern 106
        #Audio.se_stop if @battle_anime_frame == 129
        @tec_output_back_no = 4
        
        
        @chay = -160
        #kienkizyunframe = 175
        #kiptan = 0
        picture = Cache.picture("Z3_必殺技_電撃地獄玉(17号)")
        bezikat_x = 170
        bezikat_y = 66
        rect = Rect.new(0, 0, 296, 220)
        
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..260
          sframe = 140
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 140

          ray_x = 302
          ray_y = 224
          @effect_anime_pattern = 235
          
          if @battle_anime_frame > (sframe + 60)
            @effect_anime_pattern = 289
            ray_x -= 16 
            ray_y -= 16
          end
          
        when 261..330
          sframe = 261
          @effect_anime_pattern = 0 if @battle_anime_frame == sframe
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
          #Audio.se_play("Audio/SE/" + "Z1 ザー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          #@effect_anime_pattern = 264
          picture = Cache.picture("ZG_必殺技_光線_大(青)")
          rect = Rect.new(0, 0,316,158)
          @back_window.contents.blt(162,220,picture,rect)
        end

      when 331
        @tec_output_back = true
        @chr_cutin = true
        @chr_cutin_flag = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 341..367
        ray_y = 106
        @effect_anime_type = 4
        @effect_anime_pattern = 271

      when 368
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2314 #ロケットパンチ
      ray_x = 340
      ray_y = 156
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
        @effect_anime_pattern = 273
        @effect_anime_frame = 0
      when 1..40
        @effect_anime_frame = 0
      when 41..45
        battle_anime_change 0,3
      when 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
      when 47..75
        @ax = 2
        @ax = -2
        @ax = 0
        #@effect_anime_pattern = 273
        #ray_x = 340
        #ray_y = 156
      when 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 80
        set_chr_display_out
      when 81..111
        @effect_anime_pattern = 274
      when 112
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2315 #ヘルズフラッシュ
        #back_x = 228
        #back_y = 88
        back_x = 266
        #back_x = 206
        back_y = 0
        ray_x = back_x +82
        ray_y = back_y +60
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        #@ray_color = 3
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @ray_color = 3
        ray_x = 338
        ray_y = 156
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = ray_x -14
        @genkityuushin_y = ray_y +2
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 1..128
        
        ray_x = 324
        ray_y = 120
        
        tame_end = 128
        
        if @battle_anime_frame == tame_end
          
        elsif @battle_anime_frame >= tame_end
          
        else
          #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          #rect = Rect.new(0, 0, 8, 10)
          #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              #idou_x_moto = 4
              #idou_y_moto = 2
              case i

              when 0 #上
                idou_x = 0
                idou_y = -2

              when 1 #左上
                idou_x = 2
                idou_y = -2

              when 2 #左
                idou_x = 2
                idou_y = 0
                
              when 3 #左下
                idou_x = 2
                idou_y = 2
                
              when 4 #下
                idou_x = 0
                idou_y = 2
                
              when 5 #右下
                idou_x = -2
                idou_y = 2

              when 6 #右
                idou_x = -2
                idou_y = 0
                
              when 7 #右上
                idou_x = -2
                idou_y = -2

              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(7) == 0
              end
              
            end
          end
        end
        #back_anime_pattern 201,back_x,back_y
        #@tec_back_small = true if @battle_anime_frame == 128
        @tec_output_back = false if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
        @chr_cutin_flag = false if @battle_anime_frame == 128
        #@tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        #@chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        #kien_x = 220
        #kien_y = 80
        back_anime_pattern 106
        #Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        #kienkizyunframe = 175
        #kiptan = 0
        picture = Cache.picture("Z3_必殺技_ヘルズフラッシュ(16号)")
        bezikat_x = 56
        bezikat_y = 96
        rect = Rect.new(0, 0, 302, 220)
        
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x -= 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x -= 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x -= 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..230
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 140

          ray_x = 362
          ray_y = 244
          @effect_anime_pattern = 235
        when 231
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          #Audio.se_play("Audio/SE/" + "Z1 ザー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          #@effect_anime_pattern = 264
          @effect_anime_pattern = 275
        end

      when 301
        @tec_output_back = true
        @chr_cutin = true
        @chr_cutin_flag = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..337
        ray_y = 114
        @effect_anime_pattern = 265

      when 338
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2317 #自爆
        back_x = 218
        back_y = 60
        ray_x = 325
        ray_y = 138
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -120
      when 31..90
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@chax +10 ,140,picture,rect)

        else
          
        end
      when 91
        set_chr_display_out
        @effect_anime_frame = 0
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      when 92..130
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax +10+110 ,140,picture,rect)
        else
          
        end
      when 131..190
        back_anime_pattern 1
        @output_anime_type = 1
        battle_anime_change 0,6
        #back_anime_pattern 55
        #@effect_anime_frame += 1
        #@effect_anime_pattern = 88
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 133    # 効果音を再生する
        @chay = STANDARD_CHAY if @battle_anime_frame == 133
        @chax = CENTER_ENEX + 16
        @gx = 2 if @battle_anime_frame == 133
        @gx = -2 if @battle_anime_frame == 135
        @gx = 0 if @battle_anime_frame == 137
      when 191..270
        back_anime_pattern 1
        battle_anime_change 0,7
      when 271..330
        back_anime_pattern 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ") if @battle_anime_frame == 271
        picture = Cache.picture("戦闘アニメ_ビックリマーク")
        rect = Rect.new(0, 0, 16, 16)
        @back_window.contents.blt(CENTER_ENEX+106,STANDARD_ENEY-0,picture,rect)
      when 331
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2329 #MAXパワーカメハメ波

      ray_x = 242
      ray_y = 120
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 218
        back_y = 88
      else
        backhai_no = 102
        back_x = 184
        back_y = 32
      end
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @ray_color = 0
        
        @output_anime_type = 1
        battle_anime_change 0,6
        
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90 #初期化
        @tec_output_back_no = 1
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @chay = -100
        @chr_cutin_flag = false
        
      when 91..140
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(0*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
        #back_anime_pattern backhai_no,back_x,back_y
      when 141..190
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(1*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 191..240
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 241
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 2
        @ray_color = 0
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 242..279
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 280
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 290
        @tec_output_back_no = 0
        @chr_cutin_flag = true
        @chr_cutin = true
        set_chr_display_out
        
      when 291..317
        @effect_anime_pattern = 207
      when 318
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2330 #魔封波
      ray_x = 242
      ray_y = 120


      backhai_no = 201
      back_x = 218
      back_y = 88
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @ray_color = 0
        
        @output_anime_type = 1
        battle_anime_change 0,6
        
        @nCenterX = 200 #回転する位置横
        @nCenterY = 90  #回転する位置縦
        @nRadiusX = 100 #回転する量横に伸ばす
        @nRadiusY = 50 #回転する量縦に伸ばす
        @nRadian = 0 #回転スピード
        #@temp_enex = @nCenterX
        #@temp_eney = @nCenterY
        #@enex = 100
        #@eney = 90
        
        #@back_anime_frame = 0
        #@back_anime_type = 54

      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        
        battle_anime_change 0,5
        Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
        back_anime_pattern backhai_no,back_x,back_y
      when 91..119
        back_anime_pattern backhai_no,back_x,back_y
      when 120
        Audio.se_stop
        Audio.bgs_play("Audio/BGS/" + "Z1 大地が揺れる")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 SE103")    # 効果音を再生する
        @chr_cutin_flag = false
        @chay = -180
      when 121..240
        @tec_output_back_no = 2
        if $game_switches[363] == true #普段着
          picture = Cache.picture("Z3_戦闘_必殺技_魔封波(亀仙人_普段着)")
        else
          picture = Cache.picture("Z3_戦闘_必殺技_魔封波(亀仙人_黒道着)")
        end
        rect = Rect.new(0, 0, 204, 160)
        @back_window.contents.blt(CENTER_CHAX+48-90,STANDARD_CHAY-0-20,picture,rect)
         
        if @battle_anime_frame >= 180 && @battle_anime_frame <= 183
          Audio.se_play("Audio/SE/" + "DB3 SE103") if @battle_anime_frame == 180
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
      when 250
        @tec_output_back_no = 0
        #@chr_cutin_flag = true
        #@chr_cutin = true
        set_chr_display_out
      when 270
        Audio.se_play("Audio/SE/" + "DB3 SE103")
        @back_anime_frame = 0
        @back_anime_type = 54
      when 280
        if @attack_hit == false
          @battle_anime_frame = 597
        end
      when 281..340
        
        if @battle_anime_frame >= 281 && @battle_anime_frame <= 284
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
        battle_anime_change 1,16
        case @back_anime_type
          when 5,56,54 #動かない
            @enex += 0
          when 6 #右
            @enex += 12
          when 4 #左
            @enex -= 12
          when 2 #下
            
          when 8 #上
        end
          
        @back_anime_frame += 1
        
        if @back_anime_frame >= 3
          @back_anime_frame = 0
          case @back_anime_type
                  
            when 54 #左から右
              @back_anime_type = 6
            when 56 #右から左
              @back_anime_type = 4
            when 6 #右
              @back_anime_type = 56
            when 4 #左
              @back_anime_type = 54
            when 2 #下
              
            when 8 #上
            
          end
        end
        
        if @battle_anime_frame == 340
          @temp_enex = @enex
          @temp_eney = @eney
        end
      when 341..347
        @enex += 12
      when 348..460
        if @battle_anime_frame >= 348 && @battle_anime_frame <= 351
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
        Audio.se_stop if @battle_anime_frame == 348
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if @battle_anime_frame == 348
        #p @back_anime_frame
        @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
        @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
        #@temp_enex += 0.5
        @nRadian += 0.25
        
      when 461..550
        if @battle_anime_frame >= 461 && @battle_anime_frame <= 464
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if @battle_anime_frame == 461
        #Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")if @battle_anime_frame == 461
        battle_anime_change 1,17
        @enex += 16
        @eney -= 8
        
        if @battle_anime_frame == 550
          @enex = CENTER_ENEX
          @eney = -180
          Audio.se_stop
        end
      when 551..597
        if @battle_anime_frame >= 551 && @battle_anime_frame <= 554
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
        end
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")if @battle_anime_frame == 551
        
        @tec_output_back_no = 1
        @eney += 16
      when 598
        Audio.bgs_stop
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2336 #魔光砲(未来ゴハン)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
        @chax += 2
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 201
        ray_x = 312
        ray_y = 96
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 202
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2337 #魔閃光(未来ゴハン)
        back_x = 228
        back_y = 88
        ray_x = 350
        ray_y = 130
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,12
          @ray_color = 3
      when 1..89
        back_anime_pattern 201,back_x,back_y
      when 90
        @ray_color = 0
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @chax += 2
        @effect_anime_pattern = 203
        #back_anime_pattern 201,back_x,back_y
      when 91..128
        #back_anime_pattern 201,back_x,back_y
      when 129
        battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 204
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2338 #超爆力波
      @ray_color = 3
      if @attackcourse == 0
      back_x = 228
      back_y = 88
      ray_x = 326
      ray_y = 96
      else
      back_x = 210+24
      back_y = 32
      ray_x = 326-64
      ray_y = 96
      end
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 3
        when 1..89
          back_anime_pattern 201,back_x,back_y
        when 90 #初期化
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,4
          back_anime_pattern 201,back_x,back_y
        when 91..127
          back_anime_pattern 201,back_x,back_y
        when 128
          @tec_output_back = false
          #@chr_cutin = false
          @chax  += 8
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,8
          #back_anime_pattern 2
        when 129..208
          back_anime_pattern 2

          #back_anime_pattern 101,back_x,back_y
        when 209
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 220
          #@chr_cutin = true
          set_chr_display_out
        when 221..281
          back_anime_pattern 1
        when 282
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        case @battle_anime_frame
        when 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #@effect_anime_frame = 27
          @output_anime_type = 0
          @tec_back = false
          set_chr_display_out
        when 1..60
          back_anime_pattern 1
        when 61
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2340 #魔貫光殺砲(未来悟飯)
        back_x = 180
        back_y = 0
        ray_x = 358
        ray_y = 124
        
        color = Color.new(255,255,255,260)
    
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,5
        @ray_color = 0
        @chay = -160
        @chr_cutin_flag = false

      when 1..130
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 116
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来ゴハン)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来超ゴハン)") #ダメージ表示用
        end
        rect = Rect.new(0, 0, 648, 64)
        
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 118
        Audio.se_stop if @battle_anime_frame == 130
        @tec_output_back = true if @battle_anime_frame == 130
        @output_anime_type = 1
        battle_anime_change 0,12
      when 131..220
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        
        if @battle_anime_frame == 160
          battle_anime_change 0,13
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 272
        end
      when 221
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 222..247
        ray_y = 134
        @effect_anime_pattern = 255
      when 248
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2341 #スーパーカメハメ波(未来悟飯)
        @ray_color = 0
        back_x = 140
        back_y = 100
        ray_x = back_x +202
        ray_y = back_y +90
      case @battle_anime_frame
      when 0 #初期化
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
        else
          @eney = -200 #キャラ画面範囲外へ
        end
        @tec_output_back = false
        @chr_cutin = false
        @chr_cutin_flag = false
      when 1..30
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯超)") #ダメージ表示用
        end
        rect = Rect.new(0, 0,250,214)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        
        if @battle_anime_frame == 30
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        end 
      when 31..120
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯超)") #ダメージ表示用
        end
        rect = Rect.new(0, 0,250,214)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        @effect_anime_pattern = 235
        if @battle_anime_frame == 120
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          @effect_anime_frame = 0
        end 
      when 121..210
        ray_y = 6
        back_x -= (@battle_anime_frame-121)/2
        ray_x -=  (@battle_anime_frame-121)/2
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_超カメハメ波(未来悟飯超)") #ダメージ表示用
        end
        rect = Rect.new(0, 0,250,214)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        @effect_anime_pattern = 236
      when 211
        @chr_cutin = true
        @chr_cutin_flag = true
        @tec_output_back = true
        set_chr_display_out
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
        #@chr_cutin_mirror_flag = true
        @tec_back_small = true if $btl_progress >= 2
      when 212
        #battle_anime_change 0,1
        #@effect_anime_pattern = 0
        #@effect_anime_frame = 0
        #@effect_anime_type = 0
        
      when 213..239
        #ここでエラーが発生する可能性がある
        
        @effect_anime_pattern = 48
      when 240
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2342 #爆裂乱舞
      @ray_color = 3
      back_x = 228
      back_y = 88
      ray_x = 356
      ray_y = 112


      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 3
      when 1..89
        back_anime_pattern 201,back_x,back_y
      when 90 #初期化
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        battle_anime_change 0,4
        back_anime_pattern 201,back_x,back_y
      when 91..127
        back_anime_pattern 201,back_x,back_y
      when 128
        #@tec_output_back = false
        #@chr_cutin = false
        #@ay  -= 2
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        battle_anime_change 0,7
        #back_anime_pattern 2
      when 129..180
        @chax += 20
        #back_anime_pattern 101,back_x,back_y
      when 181
        #set_chr_display_out
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @output_anime_type = 1
        @chax = -320
        @chay = STANDARD_CHAY
      when 182..210
        @chax += 20
      when 211
        battle_anime_change 0,11
        Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
        
      when 212..240
        battle_anime_change 1,16
        @effect_anime_pattern = 123
        ray_x = 346
        ray_y = 154
        
        @effect_anime_pattern = 0 if @battle_anime_frame >= 220
        @enex += 20
        @eney -= 4
      when 241..260
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 241
        @chax += 24
        @chay -= 4
        battle_anime_change 0,10
      when 261..289
        if @battle_anime_frame == 261
          @enex = -100
          @eney = STANDARD_ENEY + 50
          @chax = -150
          @chay = STANDARD_ENEY + 50
        end
        
        if @battle_anime_frame <= 284
          @enex += 16
          @eney -= 2
        else
          battle_anime_change 1,0
        end
        @chax += 28
        @chay -= 4
      when 290
        battle_anime_change 0,15
        @chax = 740
        @chay = STANDARD_ENEY
      when 291..304
        @chax -= 28
      when 305..325
        if @battle_anime_frame == 305
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @chax -= 28
        end
        
        @effect_anime_pattern = 123
        ray_x = 324
        ray_y = 158
        
        @effect_anime_pattern = 0 if @battle_anime_frame >= 313
        battle_anime_change 0,17
        battle_anime_change 1,17
        @enex -= 20
      when 326..344
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 326
        battle_anime_change 0,15
        @chax -= 28
        @enex -= 20
      when 345
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        @chax = 900
        @chay = STANDARD_ENEY
        @enex = 640
        @eney = STANDARD_ENEY
      when 346..364
        @chax -= 28
        @enex -= 20
      when 365
        Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == 365
        @chax -= 28
        battle_anime_change 0,16
      when 366..389
        @effect_anime_pattern = 123
        ray_x = 324
        ray_y = 158
        
        @effect_anime_pattern = 0 if @battle_anime_frame >= 374
        @enex -= 4
        @eney += 16
      when 390
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        @chr_cutin = false
        @chr_cutin_flag = false
        @tec_output_back_no = 1
        @chax = CENTER_CHAX-30
        @chay = -184
        @enex = CENTER_ENEX-40
        @eney = -140
        battle_anime_change 0,10
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 391..404
        @eney += 16
        @chay += 24
        @chax += 4
      when 405
        battle_anime_change 0,18
        Audio.se_play("Audio/SE/" + "ZG 打撃1")
      when 406..439
        if @battle_anime_frame % 4 == 0
          #@chax += 4
          @enex += 4
        elsif @battle_anime_frame % 2 == 0
          #@chax -= 4
          @enex -= 4
        end
        @chay -= 4
        @eney -= 4
      when 440
        @output_anime_type = 1
        battle_anime_change 0,20
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 441..469
        @chay += 2
        @eney += 16
      when 470
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        battle_anime_change 0,29
      when 471..489
        @chay -= 16
        @chax -= 16
      when 509
        @tec_back_small = false
        @chr_cutin = true
        @chr_cutin_flag = true
        @tec_output_back_no = 0
      when 510
        @chay = STANDARD_ENEY
        @chax = TEC_CENTER_CHAX
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        @ray_color = 3
        back_anime_pattern 201,back_x,back_y
      when 511..569
        back_anime_pattern 201,back_x,back_y
      when 570..637
        battle_anime_change 0,5
        back_anime_pattern 201,back_x,back_y
      when 638
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        battle_anime_change 0,2
        @effect_anime_pattern = 256
        @chax += 2
      when 737
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        battle_anime_change 1,16
        set_chr_display_out
      when 738..763
        

        @effect_anime_pattern = 265
      when 764
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2350 #フルパワーフレイムバレット
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..128
          back_anime_pattern 201,back_x,back_y
        when 129..353
          sframe = 129
          kitamefra = 30
          @tec_output_back_no = 1
          kien_x = 320
          kien_y = 30
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("Z3_必殺技_フレイムバレット(トーマ)")
          rect = Rect.new(0, 0, 272, 254)
          @back_window.contents.blt(168,76,picture,rect)
          #picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          #rect = Rect.new(0, 30*0, 126, 30)
          @chr_cutin = false
          @chr_cutin_flag = false
          case @battle_anime_frame
          
          when (sframe + 45 + kitamefra * 1)..(sframe + 45 + kitamefra * 2 - 1)
            @ray_anime_type = 1
             
          when (sframe + 45 + kitamefra * 2)..(sframe + 45 + kitamefra * 3 - 1)
            @ray_anime_type = 2
            
          when (sframe + 45 + kitamefra * 3)..(sframe + 45 + kitamefra * 4 - 1)
            @ray_anime_type = 3
            
          when (sframe + 45 + kitamefra * 4)..(sframe + 45 + kitamefra * 5 - 1)
            @ray_anime_type = 4
            
          when (sframe + 45 + kitamefra * 5)..(sframe + 45 + kitamefra * 6 - 1)
            @ray_anime_type = 4
            kien_y -= (6 + 16 + 16 + 16)
           end
          
          if @battle_anime_frame < sframe + 45 + kitamefra * 5
            if @battle_anime_frame % 12 == 0 #|| @battle_anime_frame % 8 == 0
              @ray_anime_type -= 1
            end
            
            case @ray_anime_type
            
            when 1
              kien_y -= 6
            when 2
              kien_y -= (6 + 16)
            when 3
              kien_y -= (6 + 16 + 16)
            when 4
              kien_y -= (6 + 16 + 16 + 16)
            end
          end
          
          
          
          
          if @battle_anime_frame-sframe > 45
            picture = Cache.picture("Z3_戦闘_必殺技_繰気弾(青)")
            rect = Rect.new(@ray_anime_type*128, 0,128,128)
          
            @back_window.contents.blt(kien_x,kien_y,picture,rect)
            
            
          end
          if @battle_anime_frame == 353
            @tec_output_back_no = 0
          end
        when 354..390
          sframe = 354
          ray_x = 352
          ray_y = 98
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
            @chay = STANDARD_CHAY
            battle_anime_change 0,1
            @effect_anime_pattern = 293
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @chr_cutin = true
            @chr_cutin_flag = true
          end
        when 400
          @tec_back_small = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
        when 401..425
          
          #ray_x = 346
          #ray_y = 136
          ray_y = 98
          @effect_anime_pattern = 266
        when 426
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      when 2360 #ハンティングアロー
        back_x = 228
        back_y = 88
        ray_x = 346
        ray_y = 66
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 3
        when 1..128
          back_anime_pattern 201,back_x,back_y
        when 129..303
          sframe = 129
          ray_x = 372
          ray_y = 116
          @tec_output_back_no = 1
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
          @chay = -160
          picture = Cache.picture("Z3_必殺技_ハンティングアロー(セリパ)")
          rect = Rect.new(0, 0, 248, 254)
          @back_window.contents.blt(208,76,picture,rect)
          @effect_anime_pattern = 289
          @chr_cutin = false
          @chr_cutin_flag = false
          
          if @battle_anime_frame == 303
            @tec_output_back_no = 0
          end
        when 304..340
          sframe = 304
          ray_x = 352
          ray_y = 98
          #battle_anime_change 0,2 if @battle_anime_frame == sframe + 4
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
            @chay = STANDARD_CHAY
            battle_anime_change 0,2
            
            @effect_anime_pattern = 293
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @chr_cutin = true
            @chr_cutin_flag = true
          end
        when 350
          @tec_back_small = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
        when 351..375
          
          #ray_x = 346
          #ray_y = 136
          ray_y = 98
          @effect_anime_pattern = 266
        when 376
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
    when 2369 #アングリーキャノン
        back_x = 228
        back_y = 88
        ray_x = 338
        ray_y = 156
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
        
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 3 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == 129
        
        @chay = -160
        kienkizyunframe = 175
        kiptan = 0

        picture = Cache.picture("Z3_必殺技_アングリーランチャー(トテッポ)")
        bezikat_x = 140
        bezikat_y = 20
        rect = Rect.new(0, 0, 274, 264)
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x -= 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x -= 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x -= 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 1
          
        when 140..230
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 140

          ray_x = 344 + 26
          ray_y = 180 + 110
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336

        if $super_saiyazin_flag[3] == true
          ray_y = 112
          @effect_anime_pattern = 265

        else
          ray_y = 112
          @effect_anime_pattern = 266
        end

      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2377 #マッシブキャノン
      back_x = 228
      back_y = 88
      ray_x = 346
      ray_y = 66
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129..303
        sframe = 129
        ray_x = 372
        ray_y = 116
        @tec_output_back_no = 4
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
        @chay = -160
        picture = Cache.picture("Z3_必殺技_マッシブカタパルト(パンブーキン)")
        rect = Rect.new(0, 0, 250, 200)
        @back_window.contents.blt(192,76,picture,rect)
        #@effect_anime_pattern = 289
        @chr_cutin = false
        @chr_cutin_flag = false
        
        if @battle_anime_frame == 303
          @tec_output_back_no = 0
        end
      when 304..340
        sframe = 304
        ray_x = 352
        ray_y = 98
        #battle_anime_change 0,2 if @battle_anime_frame == sframe + 4
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
          @chay = STANDARD_CHAY
          battle_anime_change 0,7
          
          @effect_anime_pattern = 293
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @chr_cutin = true
          @chr_cutin_flag = true
        end
      when 350
        @tec_back_small = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
      when 351..375
        
        #ray_x = 346
        #ray_y = 136
        ray_y = 98
        @effect_anime_pattern = 266
      when 376
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2388 #ダイナマイトキック(イベント用
      if @battle_anime_frame == 0 #初期化
        #Audio.se_play("Audio/SE/" + "ZSB1 サタン登場テーマ")    # 効果音を再生する
        @output_anime_type = 0
        battle_anime_change 0,0
      elsif @battle_anime_frame == 30
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @chax += 20
      elsif @battle_anime_frame >= 31 && @battle_anime_frame <= 70
        @chax += 20
      elsif @battle_anime_frame == 71
        #set_chr_display_out
        @chax = -96
        @tec_output_back = false
        #Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
      elsif @battle_anime_frame >= 72 && @battle_anime_frame <= 95
        back_anime_pattern 1
        @chax += 20
        if @battle_anime_frame == 87
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        
        if @chax >= TEC_CENTER_CHAX
          #p @battle_anime_frame
          @chax = TEC_CENTER_CHAX
        end
      elsif @battle_anime_frame >= 96 && @battle_anime_frame <= 110
        battle_anime_change 0,0
        #@chax = TEC_CENTER_CHAX - 16
      elsif @battle_anime_frame >= 111 && @battle_anime_frame <= 190
        @chax = -200
        @effect_anime_pattern = 93
        battle_anime_change 1,1 if @battle_anime_frame == 161
      elsif @battle_anime_frame >= 191 && @battle_anime_frame <= 260
        if @battle_anime_frame == 191
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "DB3 キラーン")
        end
        ray_x = 64
        ray_y = 32
        @effect_anime_pattern = 124
      elsif @battle_anime_frame == 261
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2812 #地球人ストライク
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212-18
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame < 21
            @ay = -2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 8
          @scombo_cha3 = 9
          @scombo_cha4 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 40
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
          
          #back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          if @battle_anime_frame < 25
            @ax = -3
            @ay = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 6
          @scombo_cha2 = 8
          @scombo_cha3 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 40
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame < 21
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 6
          @scombo_cha2 = 7
          @scombo_cha3 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #チャオズ
          @scombo_cha1 = 6
          @scombo_cha2 = 7
          @scombo_cha3 = 8
          if @battle_anime_frame < 25
            @ax = -3
            @ay = +3
          else
            @ax = 0
            @ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 40
          
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 40
        @btl_ani_cha_chg_no = 6
        @scombo_cha1 = 7
        @scombo_cha2 = 8
        @scombo_cha3 = 9
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ヤムチャ
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 40 #テンシンハン
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #チャオズ
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ヤムチャ
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 40 #テンシンハン
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #チャオズ
      when 61..120
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 40 #テンシンハン
        
        back_anime_pattern 48,idougo+24,STANDARD_CHAY - 72 +24 #ヤムチャ
        back_anime_pattern 48,idougo+24,STANDARD_CHAY + 72 +24 #チャオズ
        
        
        #back_anime_pattern 8
      when 121..300
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 121
        @output_anime_type = 1
        battle_anime_change 0,2
        
        
        ray_x = @chax
        ray_y = STANDARD_CHAY + 40
        
        if @battle_anime_frame >= 151 && @battle_anime_frame <= 320
          Audio.se_play("Audio/SE/" + "Z1 分身") if @battle_anime_frame == 151
          @effect_anime_pattern = 314
        else
          @scombo_cha2_anime_type = 3
          back_anime_pattern 118,@chax -14 ,STANDARD_CHAY + 40 #テンシンハン
        end
      
      when 301
        #サイコアタック
        @btl_ani_cha_chg_no = 9
        @chax = -200
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 302..363
        back_anime_pattern 1
        #back_anime_pattern 55
        #@effect_anime_frame += 1
        @effect_anime_pattern = 88
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 323    # 効果音を再生する
        @gx = 2 if @battle_anime_frame == 323
        @gx = -2 if @battle_anime_frame == 325
        @gx = 0 if @battle_anime_frame == 327
      when 364..424
        back_anime_pattern 1
        sframe = 364
        utiframe = @battle_anime_frame - sframe
        
        if utiframe == 0
          @effect_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 逃げる") #狼牙
        end
        @btl_ani_cha_chg_no = 7
        #サイコアタックと狼牙をまとめて表示
        @effect_anime_pattern = 315
        
        
         
        
        #サイコアタック揺れ
        if utiframe % 2 == 0 && utiframe <= 600
          @gx = 6
        elsif utiframe % 2 == 1 && utiframe <= 600
          @gx = -6
        else
          @ax = 0
          @ay = 0
          @gx = 0
          @gy = 0
          #Audio.se_stop
        end
        
      when 425..439
        Audio.se_stop if @battle_anime_frame == 425
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 425
        @tec_output_back = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @eney = -200
        #クリリンカメハメ波
        @btl_ani_cha_chg_no = 6
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY
        battle_anime_change 0,2
      when 440..444
        battle_anime_change 0,3
      when 445
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      when 446..474
        @effect_anime_pattern = 203
        ray_x = 340
        ray_y = 142
        @ax = -2 if @battle_anime_frame == 446 && $btl_progress >= 2
        @ax = 2 if @battle_anime_frame == 449 && $btl_progress >= 2
        @ax = 0 if @battle_anime_frame == 452 && $btl_progress >= 2
      when 475
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 480..494
        sframe = 480
        if @battle_anime_frame == sframe
          @chay = -200
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @btl_ani_cha_chg_no = 7
          @effect_anime_frame = 36
          @effect_anime_pattern = 315
          Audio.se_play("Audio/SE/" + "Z3 超能力")
        end
          #@effect_anime_pattern = 204

          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2") #ダメージ表示用
          rect = Rect.new(0, 0,96,64)
          @back_window.contents.blt(-128+(@battle_anime_frame-sframe)*RAY_SPEED,144,picture,rect)
      when 495..505
        sframe = 495
        y_idou = 24
        x_idou = 4
        if @battle_anime_frame == sframe
          @gx = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @effect_anime_pattern = 0
          @btl_ani_cha_chg_no = 9
          @output_anime_type = 1
          battle_anime_change 0,8
          @chax = STANDARD_ENEX+16-21*RAY_SPEED#STANDARD_CHAY-8,picture,rect)
          @chay = STANDARD_CHAY+22
        end
          
          @chax += x_idou
          @chay -= y_idou
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,CENTER_CHAX-x_idou*(@battle_anime_frame-sframe),STANDARD_CHAY-y_idou*(@battle_anime_frame-sframe) #ヤムチャ
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2") #ダメージ表示用
          rect = Rect.new(0, 0,96,64)
          @back_window.contents.blt(-128+(@battle_anime_frame-480)*RAY_SPEED,144,picture,rect)
      when 506..559
        sframe = 506
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット2")
        end
        
        battle_anime_change 1,16
        @damage_center = false
        @effect_anime_pattern = 102
        @enex += 16
        
      when 560..589
        sframe = 560
        
        if @battle_anime_frame == sframe
          @eney = -200
        end
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用

        rect = Rect.new(0 , 0+(96*0), 96, 96)
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY-40,picture,rect)
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY+40,picture,rect)
        @back_window.contents.blt(CENTER_CHAX+90,STANDARD_CHAY-64,picture,rect)
        @back_window.contents.blt(CENTER_CHAX+90,STANDARD_CHAY+64,picture,rect)
        
      when 590..720
        sframe = 590
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          #@eney = -200
        end
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用

        rect = Rect.new(0 , 0+(96*2), 96, 96)
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY-40,picture,rect)
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY+40,picture,rect)
        @back_window.contents.blt(CENTER_CHAX+90,STANDARD_CHAY-64,picture,rect)
        @back_window.contents.blt(CENTER_CHAX+90,STANDARD_CHAY+64,picture,rect)
      when 721
        set_chr_display_out
        @tec_output_back = false
        #@chr_cutin_flag = false
        @damage_huttobi = true
        @damage_center = false
        @gx = 0
        @gy = 0
      when 722..760
        back_anime_pattern 9
      when 761
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2816 #ノンステップバイオレンス

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 21  #18号
          @scombo_cha2 = 22
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 22  #17号
          @scombo_cha2 = 21
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 22 && @battle_anime_frame == 40 #18号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 21
        @scombo_cha2 = 22
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -200 #キャラ画面範囲外へ
         #@effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60 # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
      when 110
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chax = 640+16
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        battle_anime_change 0,8
        @scombo_cha2_anime_type = 16
      when 120..160
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 120
        
        case @battle_anime_frame
        
        when 120..137
          @chax -= 16
        when 138..141
          battle_anime_change 0,6
            if @battle_anime_frame == 141
              Audio.se_play("Audio/SE/" + "Z1 強打")
              battle_anime_change 1,16
            end
        when 142..143
          @enex -= 8
        when 144..145
          @enex += 8
        
        when 160
          battle_anime_change 1,0
        end
      when 161..184
        battle_anime_change 0,5
        sframe = 161
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        back_anime_pattern 117,-96+16*(@battle_anime_frame-sframe),STANDARD_CHAY
        @scombo_cha2_anime_type = 1 if @battle_anime_frame == 182
      when 185..240
        sframe = 185
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        back_anime_pattern 117,272,STANDARD_CHAY
        case @battle_anime_frame
        when sframe..sframe+1
          battle_anime_change 1,16
          @enex += 8
        when sframe+2..sframe+3
          @enex -= 8
        
        when 203
          battle_anime_change 1,0
          @scombo_cha2_anime_type = 0
          battle_anime_change 0,8
          @chay -= 12
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 204..208
          @chay -= 12
        when 209..211
          @chay += 24
          
          battle_anime_change 0,7
          Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == 211
        when 212..240
          battle_anime_change 1,17
          @eney += 16
          battle_anime_change 0,5 if @battle_anime_frame == 227
        end
      when 241..280
        sframe = 241
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        @chay -= 16
        battle_anime_change 0,8
        @scombo_cha2_anime_type = 16
        back_anime_pattern 117,272,@chay
      when 281..310
        @ray_color = 3
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        battle_anime_change 0,0
        @scombo_cha2_anime_type = 0
        back_anime_pattern 118,@chax,@chay + 100
        
        @effect_anime_pattern = 0
      when 311..409
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == 311
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        back_anime_pattern 118,@chax,@chay + 100
        @effect_anime_pattern = 298
      when 410
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        battle_anime_change 1,16
        set_chr_display_out
      when 411..437
        @effect_anime_pattern = 299
      when 438
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2818 #ヘルズスパイラル
      color = Color.new(255,255,255,260)
      
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 21  #18号
            @scombo_cha2 = 21
            @scombo_cha3 = 23
            
            back_anime_pattern 117,-142+12*@battle_anime_frame,STANDARD_CHAY + 50
            back_anime_pattern 119,-124+10*@battle_anime_frame,STANDARD_CHAY - 50
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = 5
              @ax = -5
            else
              @ax = 0
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 22  #17号
            @scombo_cha2 = 21
            @scombo_cha3 = 23
            
            back_anime_pattern 117,-96+8*@battle_anime_frame,STANDARD_CHAY + 50
            back_anime_pattern 119,-124+10*@battle_anime_frame,STANDARD_CHAY - 50
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = 5
              @ax = 6
            else
              @ax = 0
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 23  #16号
            @scombo_cha2 = 21
            @scombo_cha3 = 22
            back_anime_pattern 117,-96+8*@battle_anime_frame,STANDARD_CHAY + 50
            back_anime_pattern 119,-142+12*@battle_anime_frame,STANDARD_CHAY + 50
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 21 && @battle_anime_frame == 40 #18号
            @chay -= 100
            @chax += 50
          elsif $partyc[@chanum.to_i] == 22 && @battle_anime_frame == 40 #17号
            @chay -= 100
            @chax -= 60
          end
          @btl_ani_cha_chg_no = 23
          @scombo_cha2 = 21
          @scombo_cha3 = 22
          back_anime_pattern 117,216,STANDARD_CHAY + 50
          back_anime_pattern 119,326,STANDARD_CHAY + 50
        when 60..229
          sframe = 60
          
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == sframe
          battle_anime_change 0,5
          @scombo_cha2_anime_type = 3
          @scombo_cha3_anime_type = 3
          @tec_output_back_no = 1
          back_anime_pattern 118,216,STANDARD_CHAY + 50
          back_anime_pattern 120,326,STANDARD_CHAY + 50
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 230
          @tec_output_back = false
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          battle_anime_change 1,0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 231..297
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 298
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          @tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          set_chr_display_out
          #@effect_anime_pattern = 319
        when 1..67
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 68
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2819 #ダブル気円斬
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 6  #クリリン
            @scombo_cha2 = 21
            @effect_anime_pattern = 90
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 21  #18号
            @scombo_cha2 = 6
            @effect_anime_pattern = 89
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = +5
            else
              @ay = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 21 && @battle_anime_frame == 40 #18号
            @chay -= 100
          end
          @btl_ani_cha_chg_no = 6
          @scombo_cha2 = 21
          #@scombo_cha3 = 21
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
        when 60..180
          @scombo_cha2 = 6
          @scombo_cha3 = 21
          @effect_anime_pattern = 0 
          #@effect_anime_pattern = 86
          @chay = -200 #キャラ画面範囲外へ
          #@effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 60 # 効果音を再生する
          #back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
          #@output_anime_type = 1
          #battle_anime_change 0,5
          @scombo_cha2_anime_type = 5
          @scombo_cha3_anime_type = 4
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY - 50
          back_anime_pattern 120,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          @effect_anime_frame = 0
        when 181..280
          sframe = 181
          Audio.se_play("Audio/SE/" + "Z1 気円斬") if @battle_anime_frame == sframe
          @scombo_cha2_anime_type = 9
          @scombo_cha3_anime_type = 1
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY - 50
          back_anime_pattern 120,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          @effect_anime_pattern = 300
        when 290
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          set_chr_display_out
        when 291..319
          @effect_anime_pattern = 301
        when 320
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 気円斬")
          set_chr_display_out
          #@effect_anime_pattern = 319
        when 1..29
          @effect_anime_pattern = 301
        when 30
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2820 #ギャリックバスター
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 17 && @battle_anime_frame == 40 || $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 12
        @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true 
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,5
        @scombo_cha2_anime_type = 10
        @scombo_cha2_anime_type = 3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 302
        sframe = 188
        battle_anime_change 0,6
        @scombo_cha2_anime_type = 11
        @scombo_cha2_anime_type = 13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら 
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2823 #眠れる力

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #ゴハン
          @scombo_cha2 = 23
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 23  #18号
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[4] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 23 && @battle_anime_frame == 40 #16号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[4] == true
        @scombo_cha2 = 23
        #@scombo_cha3 = 21
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        sframe = 60
        ray_x = 282
        ray_y = 58
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 201
        
        #@effect_anime_pattern = 86
        #@effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == sframe # 効果音を再生する
        #back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
        #@output_anime_type = 1
        #battle_anime_change 0,5
        battle_anime_change 0,1
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 101..180
        sframe = 101
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 12,STANDARD_CHAY + 76
      when 190
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
      when 201..229
        sframe = 201
        @effect_anime_pattern = 202
        
        if @battle_anime_frame >= sframe + 14
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 14
          back_anime_pattern 48,TEC_CENTER_CHAX - 200,STANDARD_CHAY + 24
        end
      when 230..280
        sframe = 230
        if @battle_anime_frame == sframe
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット2")    # 効果音を再生する
        end
        @gx = -8
        back_anime_pattern 48,TEC_CENTER_CHAX - 200,STANDARD_CHAY + 24
        @effect_anime_pattern = 102
        battle_anime_change 1,16
        if @battle_anime_frame >= sframe + 25
          @gx = 0
          battle_anime_change 1,0
        end
      when 281..400
        
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        sframe = 281
        @eney = -200
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
        picture = Cache.picture("Z3_必殺技_ロケットパンチ(16号・左手)") #ダメージ表示用
        rect = Rect.new(0, 0,382,314)
        @back_window.contents.blt(TEC_CENTER_CHAX - 148,STANDARD_CHAY - 106,picture,rect)
      when 401..450
        sframe = 401
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @scombo_cha2_anime_type = 3
          @effect_anime_pattern = 273
        end
        back_anime_pattern 118,TEC_CENTER_CHAX - 216 + 0,STANDARD_CHAY
        @eney = STANDARD_CHAY
        ray_x = 340 - 80
        ray_y = 156
        
      when 451..478
        sframe = 451
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe
        back_anime_pattern 118,TEC_CENTER_CHAX - 216 + 0,STANDARD_CHAY
        @effect_anime_pattern = 273
        ray_x = 138
        ray_y = 156
      when 479
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2825 #アウトサイダーショット(ピ＆バ)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        if $btl_progress >= 2
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50
        else
          backhai_no = 105
          back_x = 218
          back_y = 60
        end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 16
          @scombo_cha2 = 32 if $super_saiyazin_flag[7] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
          @scombo_cha2 = 4
          
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 4 && @battle_anime_frame == 40 #ピッコロ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 16
        @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true 
        @scombo_cha2 = 4
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,4
        @scombo_cha2_anime_type = 2
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 303
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2826 #ダブルませんこう(ゴ＆ト)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #ゴハン
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 17 && @battle_anime_frame == 40 || $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true 
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 10
        @scombo_cha2_anime_type = 3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 305
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 11
        @scombo_cha2_anime_type = 13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 306
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2827 #ダブルまかんこうさっぽう(ピッコロ＆未来ゴハン)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来ゴハン
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 25 && @battle_anime_frame == 40 || $partyc[@chanum.to_i] == 26 && @battle_anime_frame == 40 #未来ゴハン
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 25
        @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3
         @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,5
        @scombo_cha2_anime_type = 12
        @chay = -200
        @chr_cutin_flag = false
        @tec_output_back = false
      when 61..191
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 177
        
        rect = Rect.new(0, 0, 648, 64)
        
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(ピッコロ)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y-40,picture,rect)
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来ゴハン)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来超ゴハン)") #ダメージ表示用
        end
        
        
        @back_window.contents.blt(-4+shake_x,146+shake_y+40,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 179
        Audio.se_stop if @battle_anime_frame == 191
        @tec_output_back = true if @battle_anime_frame == 191
      when 192..281
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY-50    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        if @battle_anime_frame == 221
          battle_anime_change 0,6
          @scombo_cha2_anime_type = 13
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 307
        end  
      when 282
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 283..308
        ray_y = 134
        @effect_anime_pattern = 308
      when 309
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2829 #四身の拳・かめはめは
        ray_x = 88
        ray_y = 118
        @ray_color = 0
        idougo = 212+24
      idouryou = 8
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
            @scombo_cha1 = 8
            if @battle_anime_frame <= 10
              #@ax = -2
              #@ay = -5
            else
              #@ay = 0
            end
            back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
          elsif $partyc[@chanum.to_i] == 8  #テンシンハン
            @scombo_cha1 = 3
            @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
            if @battle_anime_frame <= 20
              #@ax = -2
              @ax = -8
            else
              @ax = 0
            end
            back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
          end
          
        when 40..59
          @chax += 160 if $partyc[@chanum.to_i] == 8 if @battle_anime_frame == 40
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 3
          @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha1 = 8
          back_anime_pattern 116,@chax-160,STANDARD_CHAY
          #back_anime_pattern 40
        when 60
          #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @ray_color = 0
          #back_anime_pattern 41
          @output_anime_type = 1
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 0
          back_anime_pattern 116,@chax-160,STANDARD_CHAY
          Audio.se_play("Audio/SE/" + "Z1 分身")
          Audio.se_play("Audio/SE/" + "DB3 残像拳")
        when 61..240
          @chay = -200
          @effect_anime_pattern = 318
          #back_anime_pattern 116,@chax,STANDARD_CHAY + 50
          
          @chr_cutin = false if @battle_anime_frame == 240
        when 241..399
          sframe = 241
          
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 四身の拳")
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            @status_window.visible = false
            @tec_output_back = false
            #@chr_cutin = false
          end

          rect,picture = set_battle_cutin_name 3 #悟空
          rect,picture = set_battle_cutin_name 14 if $super_saiyazin_flag[1] == true #超悟空
          rect2,picture2 = set_battle_cutin_name 8 #天津飯
          cha2y = 60
          sisinkizyun = 241
          akizyouge = 0
          akinaka = cha2y+0
          kat_haitiiti = akizyouge
          if @battle_anime_frame <= sisinkizyun + 20
            @back_window.contents.blt(-640+32*(@battle_anime_frame-sisinkizyun),kat_haitiiti,picture,rect)
            @back_window.contents.blt(-640+32*(@battle_anime_frame-sisinkizyun),kat_haitiiti+cha2y,picture2,rect2)
          else
            if @battle_anime_frame >= sisinkizyun + 20
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
              @back_window.contents.blt(0,kat_haitiiti+cha2y,picture2,rect2)
            end        end
          
          kat_haitiiti = akizyouge+cha2y*1+akinaka*1
          if @battle_anime_frame >= sisinkizyun + 21 && @battle_anime_frame <= sisinkizyun + 40
            @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*1)),kat_haitiiti,picture,rect)
            @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*1)),kat_haitiiti+cha2y,picture2,rect2)
          elsif
            if @battle_anime_frame >= sisinkizyun + 40
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
              @back_window.contents.blt(0,kat_haitiiti+cha2y,picture2,rect2)
            end
          end
          
          kat_haitiiti = akizyouge+cha2y*2+akinaka*2
          if @battle_anime_frame >= sisinkizyun + 41 && @battle_anime_frame <= sisinkizyun + 60
            @back_window.contents.blt(-640+32*(@battle_anime_frame-(sisinkizyun+20*2)),kat_haitiiti,picture,rect)
            @back_window.contents.blt(-640+32*(@battle_anime_frame-(sisinkizyun+20*2)),kat_haitiiti+cha2y,picture2,rect2)
          else
            if @battle_anime_frame >= sisinkizyun + 60
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
              @back_window.contents.blt(0,kat_haitiiti+cha2y,picture2,rect2)
            end        end
          
          kat_haitiiti = akizyouge+cha2y*3+akinaka*3
          if @battle_anime_frame >= sisinkizyun + 61 && @battle_anime_frame <= sisinkizyun + 80
            @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*3)),kat_haitiiti,picture,rect)
            @back_window.contents.blt(640-32*(@battle_anime_frame-(sisinkizyun+20*3)),kat_haitiiti+cha2y,picture2,rect2)
          else
            if @battle_anime_frame >= sisinkizyun + 80
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
              @back_window.contents.blt(0,kat_haitiiti+cha2y,picture2,rect2)
            end
          end
        when 400
          set_chr_display_out
          @status_window.visible = true
          @tec_output_back = true
          back_anime_pattern 1
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        when 401..429
          @effect_anime_pattern = 319
        when 430
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
          set_chr_display_out
          #@effect_anime_pattern = 319
        when 1..29
          @effect_anime_pattern = 319
        when 30
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2838 #3大超サイヤ人
      color = Color.new(255,255,255,260)
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212+24-48
      idouryou = 8
      
      if @battle_anime_frame == 0
        #@battle_anime_frame = 1101
      end
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
       if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          if @battle_anime_frame < 17
            @ax = -4
            @ay = +4
          elsif @battle_anime_frame < 20
            @ax = -4
            @ay = 0
          elsif @battle_anime_frame < 21
            @ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -62,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19  #ベジータ
          if @battle_anime_frame < 17
            @ax = -4
            @ay = -4
          elsif @battle_anime_frame < 20
            @ax = -4
            @ay = 0
          elsif @battle_anime_frame < 21
            @ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -62,STANDARD_CHAY + 64
        else #悟空
          @scombo_cha1 = 12
          @scombo_cha1 = 19 if $super_saiyazin_flag[3] == true
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -62,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -62,STANDARD_CHAY + 64
        end
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 3
          @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha1 = 12 
          @scombo_cha1 = 19 if $super_saiyazin_flag[3] == true
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 60..100
        sframe = 60
        
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe

        back_anime_pattern 118,@chax -78,STANDARD_CHAY + 64
        @back_anime_frame -= 1 
        back_anime_pattern 48,@chax -70,STANDARD_CHAY - 40
      when 101..160
        sframe = 101
        @effect_anime_pattern = 201
        ray_x = 230
        ray_y = 160
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == sframe
        @scombo_cha2_anime_type = 1
        #@ray_color = 3
        back_anime_pattern 118,@chax -78,STANDARD_CHAY + 64
      when 161..200
        
        @effect_anime_pattern = 0
        sframe = 161
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        if @battle_anime_frame >= sframe + 16
          if $super_saiyazin_flag[1] != true
            battle_anime_change 0,5 
          else
            $goku3dai = true
            battle_anime_change 0,1
          end
        end
        back_anime_pattern 48,@chax -70,STANDARD_CHAY + 80
      when 201..229
        if $super_saiyazin_flag[1] != true
            battle_anime_change 0,5 
          else
            $goku3dai = true
            battle_anime_change 0,1
          end
      when 230
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        battle_anime_change 1,0
        battle_anime_change 0,0
        @output_anime_type = 0
        @chay = -120 #キャラ画面範囲外へ
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
        @btl_ani_cha_chg_no = 12
        @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true
        @chax -= 8
      when 231..270
        back_anime_pattern 48,@chax - 8 ,STANDARD_CHAY+24
      when 271..302
        sframe = 271
        @chay = STANDARD_CHAY
        
        case @battle_anime_frame - sframe
        
        when 0,28
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,1
        when 4,16
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,4
        when 8,20
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,2
        when 12,24
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          battle_anime_change 0,3
        when 0,1,5,6,9,10,12,13,16,17,20,21,24,25,28,29
          @enex += 4
        when 2,3,7,8,11,12,14,15,18,19,22,23,26,27,30,31
          @enex -= 4
        end
        #back_anime_pattern 115,@chax - 8 ,STANDARD_CHAY
        battle_anime_change 1,16
      when 303..322
        sframe = 303
        @effect_anime_pattern = 201
        ray_x = -16
        ray_y = 96
        battle_anime_change 0,16
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        @chay -= 16
        battle_anime_change 1,0
      when 323..331
        sframe = 323
        Audio.se_play("Audio/SE/" + "Z3 光線系ヒット") if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_type = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 101
        battle_anime_change 1,16
        case @battle_anime_frame - sframe
        
        when 0..3
          @enex += 8
        when 4..7
          @enex -= 8
        end
      when 332..370
        back_anime_pattern 48,@chax - 48 ,STANDARD_CHAY+24
      when 371..440
        sframe = 371
        kiruse = "DB3 刀"
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 17
          @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
          @output_anime_type = 1
          battle_anime_change 0,3
          @chax -= 96
          @chay = STANDARD_CHAY
        end
        katana_frame = sframe + 10
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,8
          @chax -= 22
        end
        
        katana_frame = sframe + 20
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,6
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 268
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
        end
        katana_frame = sframe + 30
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,3
          @chax -= 16
        end
        
        katana_frame = sframe + 40
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 16
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 269
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
          #Audio.se_play("Audio/SE/" + "Z1 高速移動")
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          #@tec_output_back_no = 0
        end
        katana_frame = sframe + 50
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          #battle_anime_change 0,8
          #@chax -= 22
        end
=begin       
        katana_frame = sframe + 60
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,6
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 268
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,5
          @chax -= 22
        end
        katana_frame = sframe + 70
        if @battle_anime_frame == katana_frame
          Audio.se_play("Audio/SE/" + kiruse)
          battle_anime_change 0,4
          @chax += 22
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 267
        elsif @battle_anime_frame == katana_frame +6
          battle_anime_change 0,3
          @chax -= 16
        end
=end
        case @effect_anime_pattern
        
        when 267,268
          ray_x = 228
          ray_y = 134-16
        when 269,270
          ray_x = 292
          ray_y = 70
        when 256
          ray_x = 336-32
          ray_y = 112
        end
      when 441..489
        sframe = 441
        @enex += 16
        Audio.se_play("Audio/SE/" + "Z3 跳ね返し") if @battle_anime_frame == sframe
        battle_anime_change 1,17
        @effect_anime_type = 0
        @effect_anime_pattern = 0 
      when 490..1100
        sframe = 490
        
        back_x = 180
        back_y = 0
        ray_x = (640-246)
        ray_y = 0
        @tec_output_back_no = 2
        case @battle_anime_frame - sframe
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 気を溜める(超元気玉)")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,5
          @ray_color = 0
          @chay = -160 
          @chr_cutin_flag = false
          @genkitama_kanri_frame = []
          @genkitama_kanri_maxflame = 40
          @genkitama_kanri_spdup = 25
          @genkityuushin_x = 484
          @genkityuushin_y = 60
          @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
          @ray_anime_frame = 0
          @ray_anime_type = 0
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @btl_ani_cha_chg_no = 14
          
          battle_anime_change 0,1
        when 1..650
          
          if $game_variables[171] == 1
            chafname1 = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：ボロボロ)")
          elsif $game_variables[171] == 2
            chafname1 = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：さらにボロボロ)")
          elsif $game_variables[171] == 3
            chafname1 = Cache.picture("Z3_必殺技_超元気玉(ゴクウ：戦闘服)")
          else
            chafname1 = Cache.picture("Z3_必殺技_超元気玉(ゴクウ)") #ダメージ表示用
          end
          
          if $game_variables[171] == 1
            chafname2 = Cache.picture("Z3_必殺技_超元気玉(超ゴクウ：ボロボロ)")
          elsif $game_variables[171] == 2
            chafname2 = Cache.picture("Z3_必殺技_超元気玉(超ゴクウ：さらにボロボロ)")
          elsif $game_variables[171] == 3
            chafname2 = Cache.picture("Z3_必殺技_超元気玉(超ゴクウ：戦闘服)")
          else
            chafname2 = Cache.picture("Z3_必殺技_超元気玉(超ゴクウ)") #ダメージ表示用
          end
            
          if (@battle_anime_frame - sframe) > 350
            
            if (@battle_anime_frame - sframe - 350) >= 0 && (@battle_anime_frame - sframe - 350) <= 63
              @effect_anime_frame += 1
              if @effect_anime_frame >= 9
                @effect_anime_frame = 1
                if @effect_anime_type == 0
                  @effect_anime_type += 1
                else
                  @effect_anime_type = 0
                end
              end
            elsif (@battle_anime_frame - sframe - 350) >= 64 && (@battle_anime_frame - sframe - 350) <= 143
              @effect_anime_frame += 1
              if @effect_anime_frame >= 5
                @effect_anime_frame = 1
                if @effect_anime_type == 0
                  @effect_anime_type += 1
                else
                  @effect_anime_type = 0
                end
              end
            elsif (@battle_anime_frame - sframe - 350) >= 144
              @effect_anime_type = 1
              #on_super_saiyazin 1
              #output_status
              #@status_window.update
              #Graphics.update
            end

          end
          
          if @effect_anime_type == 0 && $super_saiyazin_flag[1] != true
            picture = chafname1
          else
            picture = chafname2
          end
          
          rect = Rect.new(0, 0, 168, 198)
          @back_window.contents.blt(270,90,picture,rect)

          
          #ray_x = @genkityuushin_x - 12
          #ray_y = @genkityuushin_y - 12
          tame_end = 650
          
          if (@battle_anime_frame - sframe) == tame_end
            
          elsif (@battle_anime_frame - sframe) >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #左
                  idou_x = 4
                  idou_y = 2

                when 1 #左下
                  idou_x = 2
                  idou_y = 4

                when 2 #左足元
                  idou_x = 4
                  idou_y = 4
                  
                when 3 #右足元
                  idou_x = -2
                  idou_y = 4
                  
                when 4 #右下
                  idou_x = -4
                  idou_y = 4
                when 5 #右
                  idou_x = -4
                  idou_y = 2
                when 6 #左上
                  idou_x = 4
                  idou_y = 0
                when 7 #左上
                  idou_x = 4
                  idou_y = -2
                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - (@battle_anime_frame - sframe)) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(4) == 0
                end
                
              end
            end
            if (@battle_anime_frame - sframe) == 60
              @effect_anime_pattern = 253
            end
            
            
          end
        end
      when 1101..1350
        sframe = 1101
        
        backmainasuy = 300 - (@battle_anime_frame - sframe) * 2
        
        if backmainasuy <= 16
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if backmainasuy == 16
          backmainasuy = 16
          @effect_anime_frame += 1
          if @effect_anime_frame == 8 && @effect_anime_type == 0
            @effect_anime_frame = 0
            @effect_anime_type = 1
            battle_anime_change 0,2
          elsif @effect_anime_frame == 8 && @effect_anime_type == 1
            @effect_anime_frame = 0
            @effect_anime_type = 0
            battle_anime_change 0,3
          end
        end
        $goku3dai = true
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 1
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          
          @btl_ani_cha_chg_no = 14
          battle_anime_change 0,1
          @output_anime_type = 1
          @chr_cutin_flag = false
        end
        
        
        back_anime_pattern 212,@chax-10,STANDARD_CHAY - backmainasuy
        
        battle_anime_change 0,4 if @battle_anime_frame == 1350
      when 1351..1500
        sframe = 1351
        back_anime_pattern 213,0,-16
        $goku3dai = true
        if @battle_anime_frame == sframe
          Audio.bgs_play("Audio/BGS/" + "Z1 大地が揺れる")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
          @btl_ani_cha_chg_no = 14
          @output_anime_type = 1
        end
        
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,4
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,5
        end
      when 1501
        @chr_cutin_flag = true
        @chr_cutin = true
        @chr_cutin_mirror_flag = true
        set_chr_display_out
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @back_anime_type = 0
        @back_anime_frame = 0
        battle_anime_change 1,0
        @tec_output_back_no = 0
        battle_anime_change 0,12
        #Audio.se_stop
      when 1511..1665
        sframe = 1511
        $goku3dai = true
        if @battle_anime_frame == sframe
          @chax = TEC_CENTER_CHAX - 640
          @chay = STANDARD_CHAY + 4
          
          @output_anime_type = 1
        end
        
        @chax += 4
        back_anime_pattern 213,@chax-276,-16
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,12
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,13
        end
      when 1666..1730
        $goku3dai = true
        back_anime_pattern 213,@chax-276,-16
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,12
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,13
        end
      when 1731..1800
        sframe = 1731
        $goku3dai = true
        if @battle_anime_frame == sframe
          @output_anime_type = 1
          
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @chax -= 12
          battle_anime_change 0,6
        end
        
        case @battle_anime_frame - sframe
        
        when 0..3
          @chax -= 4
        end
        back_anime_pattern 213,@chax-276+12,-16
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,6
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,7
        end
      when 1801..1890
        sframe = 1801
        $goku3dai = true
        if @battle_anime_frame == sframe
          Audio.bgs_stop
          Audio.se_play("Audio/SE/" + "Z1 ダメージ")
          Audio.se_play("Audio/SE/" + "Z1 強打")
          @output_anime_type = 1
          battle_anime_change 1,16
          battle_anime_change 0,8
        end
        
        case @battle_anime_frame - sframe
        
        when 0..3
          @chax += 16
          #@back_window.contents.fill_rect(0,0,640,378,color)
        end
        back_anime_pattern 213,@chax-276,-16
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,8
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,9
        end
      when 1891..2000
        sframe = 1891
        $goku3dai = true
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          @output_anime_type = 1
          @chax += 2
          battle_anime_change 1,16
          battle_anime_change 0,10
        end
        back_anime_pattern 213,@chax-276-2,-16
        @effect_anime_frame += 1
        if @effect_anime_frame == 8 && @effect_anime_type == 0
          @effect_anime_frame = 0
          @effect_anime_type = 1
          battle_anime_change 0,10
        elsif @effect_anime_frame == 8 && @effect_anime_type == 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 0,11
        end
      when 2001
        
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end  
    when 2839 #この世で一番強いヤツZ3
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 340
      ray_y = 112
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3  #悟空
          if @battle_anime_frame < 25
            @ay = -2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 5
          @scombo_cha2 = 4
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
          
          #back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 40
        elsif $partyc[@chanum.to_i] == 5  #ゴハン(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ax = -3
            @ay = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha2 = 4
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 4  #ピッコロ(わざと位置をここにしてる
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha2 = 5
          @scombo_cha3 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #クリリン
          @scombo_cha1 = 3
          @scombo_cha2 = 5
          @scombo_cha3 = 4
          if @battle_anime_frame < 25
            @ax = -3
            @ay = +3
          else
            @ax = 0
            @ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou +24,STANDARD_CHAY + 48
          
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 48
        @btl_ani_cha_chg_no = 3
        @scombo_cha1 = 5
        @scombo_cha2 = 4
        @scombo_cha3 = 6
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ゴハン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #ピッコロ
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #クリリン
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 72 #ゴハン
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 48 #ピッコロ
        back_anime_pattern 120,idougo,STANDARD_CHAY + 72 #クリリン
      when 61..120
        back_anime_pattern 48,idougo,STANDARD_CHAY - 72 +24 #ゴハン
        back_anime_pattern 48,@chax+8 ,STANDARD_CHAY + 48+16 #ピッコロ
        back_anime_pattern 48,idougo,STANDARD_CHAY + 72 +24 #クリリン
      when 121..132
        @chay += 4
      when 133..139
        @chay = STANDARD_CHAY
        
        @tec_output_back_no = 1 if @battle_anime_frame == 139
      when 140 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める(元気弾)")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 40
        @genkitama_kanri_spdup = 20
        @genkityuushin_x = 316
        @genkityuushin_y = 60
        @genkitama_kanri_frame = [0,0,0,0,0,0]
      when 141..388
        ray_x = @genkityuushin_x - 12
        ray_y = @genkityuushin_y - 12
        tame_end = 390
        
        if @battle_anime_frame == tame_end
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        elsif @battle_anime_frame >= tame_end
          
        else
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
          rect = Rect.new(0, 0, 8, 10)
          @back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
          
          for i in 0..(@genkitama_kanri_frame.size - 1)
            if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
              @genkitama_kanri_frame[i] = 0
            elsif @genkitama_kanri_frame[i] > 0
              picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              rect = Rect.new(0, 0, 8, 10)
              
              case i

              when 0 #左
                idou_x = 4
                idou_y = 2

              when 1 #左下
                idou_x = 2
                idou_y = 4

              when 2 #左足元
                idou_x = 4
                idou_y = 4
                
              when 3 #右足元
                idou_x = -2
                idou_y = 4
                
              when 4 #右下
                idou_x = -4
                idou_y = 4
              when 5 #右
                idou_x = -4
                idou_y = 2
              end
              
                idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
          
              if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
              else
                @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
              end
              @genkitama_kanri_frame[i] += 1
              
            else
              if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 1 if rand(4) == 0
              end
              
            end
          end
        
        end
      
        if @battle_anime_frame >= 200
          
          if @battle_anime_frame <= 260
            if @battle_anime_frame % 4 == 0
              @effect_anime_pattern = 375
            else

              if @effect_anime_frame >= 7
                @effect_anime_pattern = 0
                @effect_anime_frame = 0
              end
            end
          elsif @battle_anime_frame <= 320

            if @battle_anime_frame % 6 == 0
              @effect_anime_pattern = 392
            else
              if @effect_anime_frame >= 3

                @effect_anime_pattern = 375
                @effect_anime_frame = 0
              end
            end
            
            if @effect_anime_pattern == 252
              ray_x = @genkityuushin_x - (12 + 16)
              ray_y = @genkityuushin_y - (12 + 16)
            elsif @effect_anime_pattern == 235
              ray_x = @genkityuushin_x - 12
              ray_y = @genkityuushin_y - 12
            end
          elsif @battle_anime_frame <= tame_end
            #p @battle_anime_frame,@effect_anime_pattern
            ray_x = @genkityuushin_x - (12 + 16)
            ray_y = @genkityuushin_y - (12 + 16)
            @effect_anime_pattern = 252
          else #@battle_anime_frame <= 540
            #p @battle_anime_frame,@effect_anime_pattern
            ray_x = @genkityuushin_x - (12 + 16) #- (@battle_anime_frame-540)*2
            ray_y = @genkityuushin_y - (12 + 16) - (@battle_anime_frame-tame_end)*2
            @effect_anime_pattern = 252
          end
        end
      when 389 #初期化
        Audio.se_stop
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
      when 391..400
        @chay = -200
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @scombo_cha1 = 4
        @scombo_cha2 = 5
      when 401
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 逃げる")
      when 402..415
        
        sframe = 402
        idoux = 16
        @scombo_cha1_anime_type = 0
        @scombo_cha2_anime_type = 0
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 416..421
        sframe = 402
        idoux = 16
        @scombo_cha1_anime_type = 16
        @scombo_cha2_anime_type = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 422..428
        sframe = 402
        idoux = 16
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 1
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY+34
      when 429..432
        sframe = 429
        idoux = 16
        back_anime_pattern 115,STANDARD_CHAX-108+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX-108+26+idoux*27,STANDARD_CHAY+34
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        battle_anime_change 1,16
        @enex += 8
      when 433..436
        idoux = 12
        back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+34
        @enex -= 8
      when 437..489
        sframe = 437
        gohanidouf = 30
        pikkoroidouf = 40
        idoux = 12
        gohanidoux = 4
        gohanidouy = 1
        pikkoroidouy = 2
        
        
        if gohanidouf > @battle_anime_frame - sframe
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27,STANDARD_CHAY+34
        else
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
          back_anime_pattern 117,STANDARD_CHAX+26+idoux*27-gohanidoux*(@battle_anime_frame - sframe-gohanidouf),STANDARD_CHAY+34+gohanidouy*(@battle_anime_frame - sframe-gohanidouf)
        end
        
        if pikkoroidouf > @battle_anime_frame - sframe
          back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30
        else
          pikkoroidouy = pikkoroidouy * (@battle_anime_frame - sframe-pikkoroidouf)
          back_anime_pattern 115,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + pikkoroidouy
          
        end
        
      when 490 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @scombo_cha1_anime_type = 4
        
        idoux = 12
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 491..580
        idoux = 12
        @effect_anime_pattern = 237
        @ray_color = 1
        ray_x = STANDARD_CHAX+idoux*27 + 58
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 581
        idoux = 12
        @ray_color = 1
        #Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        ray_x = STANDARD_CHAX+idoux*27 + 58
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 582..585
        sframe = 582
        @ray_color = 1
        idoux = 12
        ray_x = STANDARD_CHAX+idoux*27 + 58 + 2*(@battle_anime_frame - sframe + 1)
        ray_y = STANDARD_CHAY-8 + 24
        back_anime_pattern 116,STANDARD_CHAX+idoux*27,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 586..595
        sframe = 586
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          battle_anime_change 0,7
          @chay = -200
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z3 光線系ヒット")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 101
          battle_anime_change 1,16
        end
        idoux = 12
        pikkoroidoux = 12
        @scombo_cha1_anime_type = 16
        @eney = STANDARD_ENEY
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-pikkoroidoux*(@battle_anime_frame - sframe),STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 596..635
        sframe = 596
        idoux = 12
        if @battle_anime_frame == sframe
          @scombo_cha1_anime_type = 0
          @scombo_cha2_anime_type = 0
          @effect_anime_pattern = 0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30 + 24
        back_anime_pattern 117,192,176
      when 636..665
        sframe = 636
        idoux = 12
        idouy = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha1_anime_type = 16
          @scombo_cha2_anime_type = 16
          battle_anime_change 1,0
        end
        back_anime_pattern 115,STANDARD_CHAX+idoux*27-120,STANDARD_CHAY-30 + 24 -idouy*(@battle_anime_frame - sframe)
        back_anime_pattern 117,192,176-idouy*(@battle_anime_frame - sframe)
      when 666..685
        sframe = 666
        idoux = 16
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 逃げる")
          @scombo_cha3_anime_type = 0
        elsif @battle_anime_frame == sframe + 12
          @scombo_cha3_anime_type = 16
        elsif @battle_anime_frame == sframe + 17
          @scombo_cha3_anime_type = 1
        end
        
        back_anime_pattern 119,STANDARD_CHAX+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 686..690
        sframe = 686
        idoux = -24
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 SE041")
          battle_anime_change 1,1
          @scombo_cha3_anime_type = 16
        end
        
        back_anime_pattern 119,STANDARD_CHAX+320+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 691..725
        back_anime_pattern 119,STANDARD_CHAX+200,STANDARD_CHAY
      when 726..730
        sframe = 726
        idoux = 24
        @scombo_cha3_anime_type = 1
        back_anime_pattern 119,STANDARD_CHAX+200+idoux*(@battle_anime_frame-sframe),STANDARD_CHAY
      when 731..775
        sframe = 731
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          battle_anime_change 1,16
        end
        back_anime_pattern 119,STANDARD_CHAX+320,STANDARD_CHAY
        @enex += 20
      when 776..825
        sframe = 776
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY
          Audio.se_stop
        end
        battle_anime_change 0,6
      when 826..864
        sframe = 826
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,13
          @effect_anime_pattern = 208
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
      when 865
        battle_anime_change 0,13
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 1
      when 866..965
        sframe = 866
        if @battle_anime_frame == sframe
          @chay = -200
          @scombo_cha1_anime_type = 8
          @scombo_cha2_anime_type = 5
          @scombo_cha3_anime_type = 8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        
        idoux = 2
        tyouseikakeru = @battle_anime_frame - sframe
        tyouseikakeru = 34 if tyouseikakeru > 34 
        tyouseix = idoux * tyouseikakeru
        back_anime_pattern 115,CENTER_CHAX-90+tyouseix,STANDARD_CHAY-86
        back_anime_pattern 117,CENTER_CHAX-100+tyouseix,STANDARD_CHAY+36
        back_anime_pattern 119,CENTER_CHAX+200-tyouseix,STANDARD_CHAY+70
        
        
        @effect_anime_type = 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾")
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(254,390-@effect_anime_frame*RAY_SPEED/2,picture,rect)
        @effect_anime_frame += 1
      when 966
        set_chr_display_out
        @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @back_anime_type = 0
          @back_anime_frame = 0
          battle_anime_change 1,0
          @tec_output_back_no = 0
      when 967..992
        @effect_anime_pattern = 209
      when 993
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2840 #メタルクラッシュ(超ゴ＆超ベ)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 14 #超悟空
          @scombo_cha2 = 19
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 19 #超ベジータ
          @scombo_cha2 = 14
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 19 && @battle_anime_frame == 40#トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 14
        @scombo_cha2 = 19
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,0
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        
        @scombo_cha2_anime_type = 16
        #@effect_anime_pattern = 305
        sframe = 188
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe  # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 15
        #Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe + 15
        battle_anime_change 0,8 if @battle_anime_frame == sframe + 15
        #back_anime_pattern 118,@chax + 0,STANDARD_CHAY + 50
        
        xspeed = 16
        plusx = (@battle_anime_frame - (sframe + 15))
        @ax = xspeed if plusx > 0
          
        plusx = (@battle_anime_frame - sframe) * xspeed
        back_anime_pattern 118,TEC_CENTER_CHAX + plusx,STANDARD_CHAY + 50
      when 270..340
        sframe = 270
        @chax = -420 if @battle_anime_frame == sframe
        @chay += 12 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe  # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 15
        #Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe + 15
        xspeed = 16
        plusx = (@battle_anime_frame - (sframe + 15))
        @ax = xspeed + 6 if plusx > 0
          
        plusx = (@battle_anime_frame - sframe) * xspeed
        back_anime_pattern 118,0-180 + plusx,STANDARD_CHAY + 50 - 12
      when 350
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @chay = 82
        @output_anime_type = 1
        battle_anime_change 0,8
      when 361..425
        sframe = 361
        @chax = -240 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        xspeed = 16
        #plusx = (@battle_anime_frame - sframe)
        #@ax = xspeed if plusx > 0
        @ax = 16  
        plusx = (@battle_anime_frame - sframe) * xspeed
        #back_anime_pattern 118,@chax + 28,STANDARD_CHAY + 50 - 12
        
        if @battle_anime_frame >= sframe + 29
          @output_anime_type = 0
          battle_anime_change 0,2
          @scombo_cha2_anime_type = 1
          back_anime_pattern 117,@chax + 28,STANDARD_CHAY + 50 - 12
          
          case @battle_anime_frame
          
          when sframe + 29
            battle_anime_change 1,17
            @enex += 24
            Audio.se_play("Audio/SE/" + "Z1 強打")
            Audio.se_play("Audio/SE/" + "ZG 打撃4")
          when sframe + 30,sframe + 31
            @enex += 24
          when sframe + 32..sframe + 34
            @enex -= 24
          
          end
        elsif @battle_anime_frame >= sframe + 17
          @output_anime_type = 0
          battle_anime_change 0,16
          @scombo_cha2_anime_type = 16
          back_anime_pattern 117,@chax + 28,STANDARD_CHAY + 50 - 12
        else
          @output_anime_type = 1
          battle_anime_change 0,8
          back_anime_pattern 118,@chax + 28,STANDARD_CHAY + 50 - 12
        end
      when 426..495
        sframe = 426
        @enex -= 12
        if @battle_anime_frame == sframe
          @output_anime_type = 1
          battle_anime_change 0,10
          @scombo_cha2_anime_type = 22
          @chax = 840
        end
        
        case @battle_anime_frame
        
        when sframe + 4
          @ax = -8
        end
        
        back_anime_pattern 118,@chax -8 ,STANDARD_CHAY + 50 - 12
      when 496..580
        sframe = 496
        @ax = 0
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == sframe  # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,11
        @scombo_cha2_anime_type = 21
        back_anime_pattern 118,@chax ,STANDARD_CHAY + 50 - 12
        @effect_anime_pattern = 316
      when 581..603
        sframe = 581
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 1,16 if @battle_anime_frame == sframe
        #ray_y = 110
        @chay = -200
        @enex = TEC_CENTER_CHAX + 48
        @effect_anime_pattern = 317
      when 604
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
  when 2841 #あっち行ってけろ
      ray_x = 0
      ray_y = 118
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 7 #ヤムチャ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = 7
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 7
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        battle_anime_change 0,11
        @scombo_cha1_anime_type = 0
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        Audio.se_play("Audio/SE/" + "Z1 ダメージ")
      when 61..119
        #@chay = -200
        #@effect_anime_pattern = 318
        #back_anime_pattern 116,@chax,STANDARD_CHAY + 50
        
        #@chr_cutin = false if @battle_anime_frame == 240
        picture = Cache.picture("戦闘アニメ_ビックリマーク")
        rect = Rect.new(0, 0, 16, 16)
        
        @chax += 4 if @battle_anime_frame == 61
        @chax -= 4 if @battle_anime_frame == 62
        
        if @battle_anime_frame == 61
          @back_window.contents.blt(@chax-4,@chay,picture,rect)
          back_anime_pattern 116,@chax-160-4,STANDARD_CHAY
        else
          @back_window.contents.blt(@chax,@chay,picture,rect)
          back_anime_pattern 116,@chax-160,STANDARD_CHAY
        end
      when 120 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,12
        @ray_color = 0
        @scombo_cha1_anime_type = 4
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") 
      when 121..160
        @effect_anime_pattern = 225
        @chay -= 16
        ray_x = 168
        ray_y = 128
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 161
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 170
        set_chr_display_out
      when 171..197
        @effect_anime_pattern = 226
      when 198
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2843 #アウトサイダーショット(ピ＆17号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 22
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 22 #17号
          @scombo_cha2 = 4
          
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 22 && @battle_anime_frame == 40 #17号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 22
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
        
        
        ##
      when 188..269
        @effect_anime_pattern = 304
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2844 #よけられるハズだべ・・・
      ray_x = 340-160
        ray_y = 96
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 24 #かめせんにん
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = 24
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 24
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 3
        @effect_anime_pattern = 206
        if $btl_progress == 2
          #@ray_color = 3
        else
          @ray_color = 0
        end
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202
        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe
        if $btl_progress == 2
          #@ray_color = 3
        else
          @ray_color = 0
        end
        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        if @battle_anime_frame == 142 || @battle_anime_frame == 146
          back_anime_pattern 116,@chax-160-2,STANDARD_CHAY
        elsif @battle_anime_frame == 143 || @battle_anime_frame == 145
          back_anime_pattern 116,@chax-160-4,STANDARD_CHAY
        elsif @battle_anime_frame == 144
          back_anime_pattern 116,@chax-160-6,STANDARD_CHAY
        else
          back_anime_pattern 116,@chax-160,STANDARD_CHAY
        end
      when 240
        @scombo_cha1_anime_type = 3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
      when 251..277
        @effect_anime_pattern = 207
      when 278
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2845 #うごきをとめろ
      #ray_x = 302
      #ray_y = 64
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      
            ray_x = 242
      ray_y = 120
        

      backhai_no = 201
      back_x = 200
      back_y = 88
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 24
          @scombo_cha2 = 8
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 24
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #亀仙人
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 24
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..159
        sframe = 61
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == sframe
        @output_anime_type = 0
        battle_anime_change 0,16
        @scombo_cha1_anime_type = 16
        @scombo_cha2_anime_type = 6
        @chay -= 12 
        back_anime_pattern 115,idougo,STANDARD_CHAY - 64 - 12 * (@battle_anime_frame - sframe + 1)
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 160
        @output_anime_type = 1
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 超能力")
        @chax = CENTER_CHAX
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @gx = 6
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
        @scombo_cha1_anime_type = 0
      when 161..209
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+8,STANDARD_CHAY+24,picture,rect)
        end
      when 210..269
        sframe = 210
        akifra = 6
        @btl_ani_cha_chg_no = 8
        @output_anime_type = 0
        
        #@scombo_cha1 = 8
        @chay = STANDARD_CHAY if @battle_anime_frame == sframe
        
        if (@battle_anime_frame - sframe) % (akifra * 2) == 0 || (@battle_anime_frame - sframe) == 0
          fratype = 1
          battle_anime_change 1,16
        elsif (@battle_anime_frame - sframe) % (akifra) == 0
          fratype = 2
          battle_anime_change 1,16
        else
          fratype = 0
          battle_anime_change 1,0
        end
        
        case fratype
        
        when 1

          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when 2
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when 0
          
        end
        #back_anime_pattern 115,CENTER_CHAX,STANDARD_CHAY
      when 270
        battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 強打")
      when 271..319
        battle_anime_change 1,17
        @enex += 16


      when 320 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @ray_color = 0
        @btl_ani_cha_chg_no = 24
        @output_anime_type = 1
        battle_anime_change 0,6
        
      when 321..409
        back_anime_pattern backhai_no,back_x,back_y
      when 410 #初期化
        @tec_output_back_no = 1
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @chay = -100
        @chr_cutin_flag = false
        
      when 411..460
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(0*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
        #back_anime_pattern backhai_no,back_x,back_y
      when 461..510
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(1*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 511..560
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 561
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 2
        @ray_color = 0
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 562..599
        picture = Cache.picture("DB3_亀仙人カメハメは")
        rect = Rect.new(2*64, 0, 64, 96)
        @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
      when 600
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 610
        @tec_output_back_no = 0
        @chr_cutin_flag = true
        @chr_cutin = true
        #@gx = 0
        battle_anime_change 1,16
        set_chr_display_out
        
      when 611..637
        @effect_anime_pattern = 207
      when 638
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2846 #ダブル残像拳(全パターンで流用)
        ray_x = 88
        ray_y = 118
        @ray_color = 0
        idougo = 212+24
      idouryou = 8
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
        when 1..39
          
          if $cha_set_action[@chanum] == 756 #ゴクウ＆クリリン
            if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
              @scombo_cha2 = 6
              @effect_anime_pattern = 90
              if @battle_anime_frame <= 10
                #@ax = -2
                @ay = -5
              else
                @ay = 0
              end
            elsif $partyc[@chanum.to_i] == 6 #クリリン
              @scombo_cha2 = 3
              @scombo_cha2 = 14 if $super_saiyazin_flag[1] == true 
              @effect_anime_pattern = 89
              if @battle_anime_frame <= 10
                #@ax = -2
                @ay = +5
              else
                @ay = 0
              end
            end
          elsif $cha_set_action[@chanum] == 759 #クリリン＆亀仙人
            if $partyc[@chanum.to_i] == 6 #クリリン
              @scombo_cha2 = 24 
              @effect_anime_pattern = 90
              if @battle_anime_frame <= 10
                #@ax = -2
                @ay = -5
              else
                @ay = 0
              end
            elsif $partyc[@chanum.to_i] == 24 #亀仙人
              @scombo_cha2 = 6
              @effect_anime_pattern = 89
              if @battle_anime_frame <= 10
                #@ax = -2
                @ay = +5
              else
                @ay = 0
              end
            end
          end
          
        when 40..59
          @effect_anime_pattern = 0
          @chay -= 100 if $partyc[@chanum.to_i] == 6 if @battle_anime_frame == 40 && $cha_set_action[@chanum] == 756
          @chay -= 100 if $partyc[@chanum.to_i] == 24 if @battle_anime_frame == 40 && $cha_set_action[@chanum] == 759
          @ax = 0
          @ay = 0
          if $cha_set_action[@chanum] == 756
            @btl_ani_cha_chg_no = 3
            @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
            @scombo_cha1 = 6
          elsif $cha_set_action[@chanum] == 759
            @btl_ani_cha_chg_no = 6
            @scombo_cha1 = 24
          end
          back_anime_pattern 116,@chax,@chay + 100
          #back_anime_pattern 40
        when 60
          #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @ray_color = 0
          #back_anime_pattern 41
          @output_anime_type = 1
          battle_anime_change 0,0
          @scombo_cha1_anime_type = 0
          back_anime_pattern 116,@chax,@chay + 100
        when 61..100
          @chay = -200
          @effect_anime_pattern = 0
          Audio.se_stop if @battle_anime_frame == 151
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 61  # 効果音を再生する
          back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76
          @back_anime_frame -= 1
          back_anime_pattern 48,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 76 - 100
        when 110
          set_chr_display_out
          @status_window.visible = true
          @tec_output_back = true
        when 121..229
          sframe = 121
          Audio.se_play("Audio/SE/" + "DB3 残像拳") if @battle_anime_frame == sframe  # 効果音を再生する
          #charand = rand(2)+1
          #chahaiti1 = rand(2)+1
          hanisx = 40
          haniex = 320-96
          hanisy = 64
          haniey = 294-96
          #zanx = 0 
          #zany = 0
          
          zanx = rand(haniex-hanisx)+hanisx
          zanx +=1 if zanx % 2 == 1
          
          zany = rand(haniey-hanisy)+hanisy
          zany +=1 if zany % 2 == 1
          
          @chax = zanx
          @chay = zany
          
          zanx = rand(haniex-hanisx)+hanisx
          zanx +=1 if zanx % 2 == 1
          
          zany = rand(haniey-hanisy)+hanisy
          zany +=1 if zany % 2 == 1
          back_anime_pattern 116,zanx,zany
          #@effect_anime_pattern = 319
        when 230
          
          
          @chax = TEC_CENTER_CHAX - 16
          @chay = STANDARD_CHAY
          battle_anime_change 0,1
          
          charand = rand(2)+1
          
            case charand
            
            when 1 #一人目(変更なし)
              #@btl_ani_cha_chg_no = 3
              #@btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
            when 2 #二人目
              #@btl_ani_cha_chg_no = 6
              @btl_ani_cha_chg_no =@scombo_cha1
            end
        when 231
          @tec_kyouda_se = true
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0..108
          sframe = 0
          if @battle_anime_frame == sframe  # 効果音を再生する
            set_chr_display_out
            if $cha_set_action[@chanum] == 756 #ゴクウ＆クリリン
              @btl_ani_cha_chg_no = 3
              @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
              @scombo_cha1 = 6
            elsif $cha_set_action[@chanum] == 759 #クリリン＆亀仙人
              @btl_ani_cha_chg_no = 6
              @scombo_cha1 = 24
            end
            Audio.se_play("Audio/SE/" + "DB3 残像拳")
          end
          
          #charand = rand(2)+1
          #chahaiti1 = rand(2)+1
          hanisx = 40
          haniex = 320-96
          hanisy = 64
          haniey = 294-96
          #zanx = 0 
          #zany = 0
          
          zanx = rand(haniex-hanisx)+hanisx
          zanx +=1 if zanx % 2 == 1
          
          zany = rand(haniey-hanisy)+hanisy
          zany +=1 if zany % 2 == 1
          
          @chax = zanx
          @chay = zany
          
          zanx = rand(haniex-hanisx)+hanisx
          zanx +=1 if zanx % 2 == 1
          
          zany = rand(haniey-hanisy)+hanisy
          zany +=1 if zany % 2 == 1
          back_anime_pattern 116,zanx,zany
          #@effect_anime_pattern = 319
        when 109
          
          
          @chax = TEC_CENTER_CHAX - 16
          @chay = STANDARD_CHAY
          battle_anime_change 0,1
          
          charand = rand(2)+1
          
            case charand
            
            when 1 #キャラ1(変更なし)
              #@btl_ani_cha_chg_no = 3
              #@btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
            when 2 #キャラ2
              @btl_ani_cha_chg_no = @scombo_cha1
            end
        when 110
          @tec_kyouda_se = true
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2847 #師弟アタック(未来悟飯、トランクス
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if ($partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26) && @battle_anime_frame == 40 #未来悟飯
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @scombo_cha2 = 25
        @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        #back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,2
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,1
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,4
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -120 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 25 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true && @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
      when 252
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 258
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 268
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
        @effect_anime_frame = 0
      when 274..293
        @gx = -18
        @effect_anime_pattern = 121
        @gx = 0 if @battle_anime_frame == 293
        @eney = -200 if @battle_anime_frame == 293
        @chay = -120 if @battle_anime_frame == 293
        battle_anime_change 1,0 if @battle_anime_frame == 293
        @back_anime_type = 0
        @back_anime_frame = 0
        #@chax += 26 if @battle_anime_frame == 293
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 293
      when 294..353
        @output_anime_type = 1
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        #back_anime_pattern 52
        #@effect_anime_pattern = 92
        battle_anime_change 0,10
        battle_anime_change 0,3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3
        @scombo_cha2_anime_type = 12
        @chay = STANDARD_CHAY-50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,11
        battle_anime_change 0,13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3
        @scombo_cha2_anime_type = 2
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_pattern = 246
      when 415 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 247
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2854 #お母さんをいじめるなーっ！

        back_x = 166
        back_y = 86
        backhai_no = 201

      ray_x = 326
      ray_y = 124
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 5 || @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 18
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 10
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 10 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 5
          @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          @btl_ani_cha_chg_no = 10
          @output_anime_type = 1
          battle_anime_change 0,6
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
        when 2..59
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          @chax += 16
        when 60
          @enex = CENTER_ENEX
          @eney = STANDARD_CHAY
          @chax = -96
        when 61..82
          @chax += 16
        when 83
          @output_anime_type = 0
          battle_anime_change 0,17
          battle_anime_change 1,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")# if @battle_anime_frame == 24
        when 84..119
          @chax -= 20
        when 120
          @eney = -200
          @chax = 840
          Audio.se_play("Audio/SE/" + "Z1 逃げる") #if @battle_anime_frame == 2
        when 121..146
          sframe = 121
          @chax -= 20
          back_anime_pattern 115,-96 + 16 * (@battle_anime_frame - sframe),STANDARD_CHAY
        when 147..159
          sframe = 147
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 147
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,-96 + 16 * 25 - 8 * (@battle_anime_frame - sframe),STANDARD_CHAY
          @chax -= 8
        when 160
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @scombo_cha1_anime_type = 0
          battle_anime_change 0,0
        when 161..180
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @chax += 4
        when 181..240
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,7
        when 241..270
          battle_anime_change 0,8
          @chay -= 16
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 241
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 271..359
          Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == 271
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          
        when 360
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
          @chay = -200
          #back_x = 220
          #back_y = 32
          back_anime_pattern backhai_no,back_x,back_y
        when 361..400
            #back_x = 220
            #back_y = 32
            back_anime_pattern backhai_no,back_x,back_y
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(210,144+2,picture,rect)

          else
            
          end
          
        when 401
          @btl_ani_cha_chg_no = 5
          @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          #set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
            @chax = -200
            @chay = STANDARD_CHAY
            @ray_color = 0
            @output_anime_type = 0
            battle_anime_change 0,16
            battle_anime_change 1,0
            @ax = 20
          #set_chr_display_out
        when 410..1126
           hit_efe_x = 346
           hit_efe_y = 154
          case @battle_anime_frame
          when 426..427
            @ax = 0
            battle_anime_change 0,3
            Audio.se_stop if @battle_anime_frame == 426
            Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 426
            @gx = -8
            battle_anime_change 1,16
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 428..429
            @gx = 8
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 430..433
            @gx = 0
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 434
            @effect_anime_pattern = 0
            @effect_anime_frame = 0 
            battle_anime_change 0,0
            @ax = -12
            @ay = 6
          when 442
            @ax = 0
            @ay = 0
            battle_anime_change 0,16
          when 450
            @ax = 24
            @ay = -12
            
          when 454..470
            @gx = -24
            @gy = -6
            @ax = 0
            @ay = 0
            if $btl_progress >= 2
              battle_anime_change 0,1
            else
              battle_anime_change 0,2
            end
            battle_anime_change 1,17
            Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == 454
            @effect_anime_pattern = 123 if @battle_anime_frame == 454
            ray_x = hit_efe_x
            ray_y = hit_efe_y
            #p @battle_anime_frame
            @effect_anime_pattern = 0 if @battle_anime_frame == 470
          when 471..485
            @effect_anime_frame = 0 
            battle_anime_change 0,16
            @ax = 24
            @ay = -6
            Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 471
          when 486..495
            @enex = CENTER_ENEX - 24*10 if @battle_anime_frame == 486
            @eney = STANDARD_ENEY + 6*10 if @battle_anime_frame == 486
            battle_anime_change 1,17 if @battle_anime_frame == 486
            battle_anime_change 1,16 if @battle_anime_frame == 491
            @gx = -24
            @gy = -6
          when 496
            @gx = 0
            @gy = 0
            @chax = CENTER_CHAX + 16 - 24*10 if @battle_anime_frame == 496
            @chay = STANDARD_CHAY + 6*10 if @battle_anime_frame == 496
          when 497..506
            @ax = 24
            @ay = -6
          when 507
            @ax = 0
            @ay = 0
          when 511
            @ax = 0
            @gx = -4
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 512..516
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y
            
          when 517
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            #@gx = -4
            battle_anime_change 0,2
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 518..520
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y - 14
          when 521
            #@gx = -4
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 522..524
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 525
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            @gx = -4
            battle_anime_change 0,2
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 526..528
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y - 14
          when 529
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            #@gx = -4
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 530..532
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 533
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            #@gx = -4
            battle_anime_change 0,2
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 534..536
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y - 14
          when 537
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            #@gx = -4
            battle_anime_change 0,1
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 538..540
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y
          when 541
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            #@gx = -4
            battle_anime_change 0,2
            Audio.se_play("Audio/SE/" + "Z1 打撃") #if @battle_anime_frame == 184
          when 542..544
            @effect_anime_pattern = 123
            ray_x = hit_efe_x
            ray_y = hit_efe_y - 14
            @gx = 0
            battle_anime_change 0,0
            @ax = -24
          when 545
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
          when 546
            @ax = 48
          when 548
            @ax = 0
            battle_anime_change 0,4
            battle_anime_change 1,17
            Audio.se_play("Audio/SE/" + "Z1 強打")
            @effect_anime_pattern = 121
          when 549..570
            @gx = -24
            if @battle_anime_frame == 559
              battle_anime_change 0,16
              @ay = -24
              Audio.se_play("Audio/SE/" + "Z1 逃げる")
              Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
            end
          when 571
            @effect_anime_frame = 0
            @effect_anime_pattern = 0
            @gx = 0
            @ay = -6
            @output_anime_type = 1
            battle_anime_change 0,17
            battle_anime_change 0,18 if $game_switches[445] == true
            @tec_output_back_no = 1
            @chax = CENTER_CHAX + 74
            @chay = (STANDARD_CHAY + 142)
            @chr_cutin_flag = false
          when 610
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            @effect_anime_pattern = 257
            battle_anime_change 0,18
            battle_anime_change 0,19 if $game_switches[445] == true
            @ay = 0
            @ray_spd_up_flag = true
          when 611..669  
            @effect_anime_frame = 13 if @effect_anime_frame >= 13
          when 670
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @output_anime_type = 0
            set_chr_display_out
            battle_anime_change 1,16
          when 671..700
            ray_x = 330
            ray_y = -600
            @effect_anime_pattern = 258
          when 701
            @battle_anime_frame = 1166
          end
        when 1167
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
          @btl_ani_tokusyu_flag = true
      end
    when 2855 #アウトサイダーショット(ピ＆ベ)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha2 = 4
          
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 12 && @battle_anime_frame == 40 || #ベジータ
          $partyc[@chanum.to_i] == 19 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 12
        @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 5
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 321
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 6
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2860 #ダブルまかんこうさっぽう(ピッコロ＆若者)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 15
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 15 #わかもの
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 15 && @battle_anime_frame == 40 #若者
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 15
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3
         @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,5
        @scombo_cha2_anime_type = 13
        @chay = -200
        @chr_cutin_flag = false
        @tec_output_back = false
      when 61..191
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 177
        
        rect = Rect.new(0, 0, 648, 64)
        
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(ピッコロ)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y-40,picture,rect)
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(若者)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y+40,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 179
        Audio.se_stop if @battle_anime_frame == 191
        @tec_output_back = true if @battle_anime_frame == 191
      when 192..281
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY-50    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        if @battle_anime_frame == 221
          battle_anime_change 0,6
          @scombo_cha2_anime_type = 14
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 307
        end  
      when 282
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 283..308
        ray_y = 134
        @effect_anime_pattern = 308
      when 309
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2861 #大師匠と孫弟子
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 4
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if ($partyc[@chanum.to_i] == 4) && @battle_anime_frame == 40 #ピッコロ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @scombo_cha2 = 4
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        #back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,2
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,1
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,4
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -120 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 4 if @battle_anime_frame == 225
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
      when 252
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 258
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 268
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
        @effect_anime_frame = 0
      when 274..293
        @gx = -18
        @effect_anime_pattern = 121
        @gx = 0 if @battle_anime_frame == 293
        @eney = -200 if @battle_anime_frame == 293
        @chay = -120 if @battle_anime_frame == 293
        battle_anime_change 1,0 if @battle_anime_frame == 293
        @back_anime_type = 0
        @back_anime_frame = 0
        #@chax += 26 if @battle_anime_frame == 293
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 293
      when 294..353
        @output_anime_type = 1
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        #back_anime_pattern 52
        #@effect_anime_pattern = 92
        battle_anime_change 0,10
        battle_anime_change 0,3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3
        @scombo_cha2_anime_type = 2
        @chay = STANDARD_CHAY-50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,11
        battle_anime_change 0,13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3
        @scombo_cha2_anime_type = 3
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_pattern = 246
      when 415 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 247
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2862 #ダブルスラッシュ
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
        end
      color = Color.new(255,255,255,260)
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 6 #クリリン
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 6
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        start_frame = 40
        if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == start_frame #トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 6
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60   # 効果音を再生する
        #back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 6
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,1
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,2
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,3
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -120 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 17 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 20 if @battle_anime_frame == 225 && $super_saiyazin_flag[4] == true
      when 226..246
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 246
        @gx = 0 if @battle_anime_frame == 246
      when 252
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 258
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 268
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,2
        battle_anime_change 1,16
        @effect_anime_frame = 0
      when 274..293
        @gx = -18
        @effect_anime_pattern = 121
        @gx = 0 if @battle_anime_frame == 293
        @eney = -200 if @battle_anime_frame == 293
        @chay = -120 if @battle_anime_frame == 293
        battle_anime_change 1,0 if @battle_anime_frame == 293
        @back_anime_type = 0
        @back_anime_frame = 0
        #@chax += 26 if @battle_anime_frame == 293
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 293
      when 294..330
        start_frame = 294
        @output_anime_type = 1
        @btl_ani_cha_chg_no = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == start_frame
        #back_anime_pattern 52
        #@effect_anime_pattern = 92
        battle_anime_change 0,0
        @scombo_cha2_anime_type = 8
        @chay = STANDARD_CHAY-50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0 + (@battle_anime_frame - start_frame) * 24,STANDARD_CHAY + 50 - (@battle_anime_frame - start_frame) * 2
      when 331..422
        start_frame = 331
        @output_anime_type = 1
        
        ray_x = 224
        ray_y = 96 - 50
        
        @back_anime_frame = 0   if @battle_anime_frame == start_frame
        @back_anime_type = 54   if @battle_anime_frame == start_frame
        battle_anime_change 0,5 if @battle_anime_frame == start_frame
        
        @effect_anime_pattern = 330 if @battle_anime_frame == (start_frame + 30)
        Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == (start_frame + 30)

        battle_anime_change 0,6 if @battle_anime_frame == (start_frame + 40)
        battle_anime_change 0,7 if @battle_anime_frame == (start_frame + 50)
        battle_anime_change 0,5 if @battle_anime_frame == (start_frame + 60)
        battle_anime_change 0,6 if @battle_anime_frame == (start_frame + 70)
        battle_anime_change 0,7 if @battle_anime_frame == (start_frame + 80)
        #battle_anime_change 0,5 if @battle_anime_frame == 189
        case @back_anime_type
          when 5,56,54 #動かない
            ray_x += 0
            ray_y += 0
          when 6 #右
            ray_x += 8
            ray_y += 2
          when 4 #左
            ray_x -= 8
            ray_y -= 2
          when 2 #下
            
          when 8 #上
        end
          
        @back_anime_frame += 1
        
        if @back_anime_frame >= 3
          @back_anime_frame = 0
          case @back_anime_type
                  
            when 54 #左から右
              @back_anime_type = 6
            when 56 #右から左
              @back_anime_type = 4
            when 6 #右
              @back_anime_type = 56
            when 4 #左
              @back_anime_type = 54
            when 2 #下
              
            when 8 #上
            
          end
        end
      when 423..482
        start_frame = 423
        end_frame = 59 + start_frame
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == start_frame
        battle_anime_change 0,9
        ray_x = 224
        ray_y = 96 - 50
        ray_x += 16 * (@battle_anime_frame - start_frame)
        ray_y += 2 * (@battle_anime_frame - start_frame)
        if @battle_anime_frame == end_frame
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
      when 483 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 484..525
        start_frame = 484
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == start_frame
        
        back_anime_pattern 118,-192 + (@battle_anime_frame - start_frame) * 24,STANDARD_CHAY #+ 50 - (@battle_anime_frame - start_frame) * 2
        
        Audio.se_play("Audio/SE/" + "Z3 剣攻撃") if @battle_anime_frame == (start_frame + 19)
        case (@battle_anime_frame - start_frame)
        
        when 19..23
          @back_window.contents.fill_rect(0,0,640,378,color)
          @scombo_cha2_anime_type = 6
        else
        end
      when 526..556
        start_frame = 526
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == start_frame
        @effect_anime_pattern = 260
      when 557
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 2863 #ギャリックかめはめは(ヤムチャとベジータ)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      wake_color = Color.new(188,188,188,256)
      if @btl_ani_tokusyu_flag == false && ($partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19)
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 127
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 7 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 86
        else
          backhai_no = 102
          back_x = 198
          back_y = 32
        end
        ray_x = 340
        ray_y = 96
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 3
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          @output_anime_type = 1
          battle_anime_change 0,0
          
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,2
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141..180
          
          back_x -= 12*(@battle_anime_frame-140)
          @ax = -12
          #ray_x -= 2*(@battle_anime_frame-140)
          back_anime_pattern backhai_no,back_x,back_y
          if @battle_anime_frame > 161
            #CENTER_ENEX = 304
            #STANDARD_ENEX = 602
          end
          @back_window.contents.fill_rect(640-16*(@battle_anime_frame-140),64,6,228,wake_color)
        when 181..220
          if @battle_anime_frame == 181
            Audio.se_stop
            if $btl_progress == 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 3
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 3
            end
          end
          @ax = 0
          #if @battle_anime_frame >= 181 && @battle_anime_frame <= 190
          if $btl_progress == 2
            back_x = 678 + 30
          else
            back_x = 678
          end
          back_x -= 12*(@battle_anime_frame-180)
          back_anime_pattern backhai_no,back_x,back_y
          @scombo_cha1 = 7
          @scombo_cha1_anime_type = 2
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true
          @scombo_cha2_anime_type = 7
          back_x = 730
          back_x -= 12*(@battle_anime_frame-180)
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          #p back_x
          #end
          #TEC_CENTER_CHAX = 266
        when 221..270
          if $btl_progress == 2
            back_x = 198 + 30
          else
            back_x = 198
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 271..360
          if @battle_anime_frame == 271
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          if $btl_progress == 2
            back_x = 198 + 30
          else
            back_x = 198
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 361..469
          if @battle_anime_frame == 361
            Audio.se_stop
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 3
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 3
            end
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          #back_y = 32
          if $btl_progress == 2
            back_x = 198 + 30 + (@battle_anime_frame-360) * 2
          else
            back_x = 198 + (@battle_anime_frame-360) * 2
          end
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          if $btl_progress == 2
            @ray_color = 3
          else
            @ray_color = 0
          end
          #back_y = 32
          if $btl_progress == 2
            back_x = (-220 + 30) + (@battle_anime_frame-360) * 2
            back_y = 32 + 54
          else
            back_x = -220 + (@battle_anime_frame-360) * 2
            back_y = 32
          end
          #back_x = -220 + (@battle_anime_frame-360) * 2
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          if $btl_progress == 2
            @ray_color = 3
          else
            @ray_color = 3
          end
          back_x = -154 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          
          if @battle_anime_frame < 412
            nakasen_x = 4*(@battle_anime_frame-360)
          else
            nakasen_x = 2*(@battle_anime_frame-412) + 4 * 52
          end
          nakasen_x = 320 if nakasen_x >= 320
          
          @back_window.contents.fill_rect(nakasen_x,64,6,228,wake_color)
          #p @battle_anime_frame,nakasen_x
        when 470..520
          @ray_color = 3
          #back_y = 32
          if $btl_progress == 2
            back_x = 418 + 30
          else
            back_x = 418
          end
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          
          #back_y = 32
          if $btl_progress == 2
            back_x = 0 + 30
            back_y = 32 + 54
            @ray_color = 3
          else
            back_x = 0
            back_y = 32
            @ray_color = 0
          end
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 521..600
          if @battle_anime_frame == 521
            @effect_anime_frame = 0
            Audio.se_stop
            #Audio.se_play("Audio/SE/" + "Z1 大猿")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          @scombo_cha1_anime_type = 3
          @scombo_cha2_anime_type = 8
          @ray_color = 3
          #back_y = 32
          #back_x = 418
          #back_anime_pattern 102,back_x,back_y
          #@back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          #if $btl_progress == 2
          #  picture = Cache.picture("FC風_GBZ1 戦闘_ベジータ_ギャリック砲")
          #  
          #  rect = Rect.new(0, 0, 128, 96)
          #  @back_window.contents.blt(back_x-30,back_y-0,picture,rect)
          #else
            back_anime_pattern 118,back_x,back_y
          #end
          @back_anime_frame -= 1
          
          #if $btl_progress == 2
          #  @ray_color = 3
          #else
            @ray_color = 0
          #end
          #back_y = 32
          #back_x = 0
          #back_anime_pattern 102,back_x,back_y
          #@back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          #if $btl_progress == 2
          #  picture = Cache.picture("FC風_GBZ1 戦闘_ゴクウ_カメハメは")
          #  rect = Rect.new(0, 0, 128, 96)
          #  @back_window.contents.blt(back_x-20,back_y-0,picture,rect)
          #else
            back_anime_pattern 116,back_x,back_y
          #end
          @effect_anime_pattern = 249
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 601..679
          if @battle_anime_frame == 601
            @effect_anime_frame = 0
          end
          @effect_anime_pattern = 250
          @back_window.contents.fill_rect(0,156,640,4,wake_color)
        when 680
          set_chr_display_out
          @effect_anime_pattern = 0
          @enex = (CENTER_ENEX - 56)
          @effect_anime_frame = 0
          #@back_anime_frame -= 1
        when 681..703
          @effect_anime_pattern = 251
        when 704
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2864 #親子かめはめは(悟空と悟飯)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..39
        
        if $partyc[@chanum.to_i] == 14 #悟空(超)
          @scombo_cha2 = 18
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
            #@ax = -6
            #@ay = -2
          else
            @ay = 0
            @ax = 0
          end
        elsif $partyc[@chanum.to_i] == 18 #悟飯(超)
          @scombo_cha2 = 14
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 18 && @battle_anime_frame == 40 #悟飯(超)
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 14
        @scombo_cha2 = 18
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 0
         @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 17
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        #@chay = -200
        #@chr_cutin_flag = false
        #@tec_output_back = false
      when 61..191
        back_anime_pattern 201,230,40
        @back_anime_frame -= 1 
        back_anime_pattern 201,220,140
        @back_anime_frame -= 1 
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        #shake_dot = 4
        #shake_x,shake_y= pic_shake_cal shake_dot
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 177
        
        #rect = Rect.new(0, 0, 648, 64)
        
        #picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(ピッコロ)") #ダメージ表示用
        #@back_window.contents.blt(-4+shake_x,146+shake_y-40,picture,rect)
        #picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(若者)") #ダメージ表示用
        #@back_window.contents.blt(-4+shake_x,146+shake_y+40,picture,rect)
        
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 179
        #Audio.se_stop if @battle_anime_frame == 191
        #@tec_output_back = true if @battle_anime_frame == 191
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅小)") #ダメージ表示用
        rect = Rect.new(16*@ray_anime_type, 0,16,16)
        @effect_anime_pattern = 237
        ray_x = 282
        ray_y = 110
        @back_window.contents.blt(278,214,picture,rect)

      when 192..281
        sframe = 192
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == sframe
        back_anime_pattern 201,230,40
        @back_anime_frame -= 1 
        back_anime_pattern 201,220,140
        @back_anime_frame -= 1 
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)") #ダメージ表示用
        rect = Rect.new(32*@ray_anime_type, 0,32,32)
        @effect_anime_pattern = 235
        ray_x = 276
        ray_y = 104
        @back_window.contents.blt(272,208,picture,rect)
      when 282..398
        @chay -= 200
        sframe = 282
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 大猿") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        #@effect_anime_pattern = 0
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_type = 0 if @battle_anime_frame == sframe
        @chr_cutin = false
        #@chr_cutin_flag = false
        #set_chr_display_out
        @tec_output_back_no = 4
        
        #p $game_variables[171],$game_variables[172]
        if $game_variables[171] == 0 && $game_variables[172] == 2
          #悟空通常、悟飯赤
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空通常、悟飯赤")
        elsif  $game_variables[171] == 1 && $game_variables[172] == 0
          #悟空ボロ、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空ボロ、悟飯通常")
        elsif  $game_variables[171] == 1 && $game_variables[172] == 2
          #悟空ボロ、悟飯赤
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空ボロ、悟飯赤")
        elsif  $game_variables[171] == 2 && $game_variables[172] == 0
          #悟空さらにボロ、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空さらにボロ、悟飯通常")
        elsif  $game_variables[171] == 2 && $game_variables[172] == 2
          #悟空さらにボロ、悟飯赤
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空さらにボロ、悟飯赤")
        elsif  $game_variables[171] == 3 && $game_variables[172] == 0
          #悟空バトルスーツ、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空バトル、悟飯通常")
        elsif  $game_variables[171] == 3 && $game_variables[172] == 2
          #悟空バトルスーツ、悟飯赤
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空バトル、悟飯赤")
        else
          #悟空通常、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波")
        end
        rect = Rect.new(16*@ray_anime_type, 0,250,286)
        @back_window.contents.blt(210,40,picture,rect)
        #@chr_cutin = true
        @effect_anime_pattern = 333
        ray_x = 236
        ray_y = 128
      when 399
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "ZG 光線1")
      when 400..426
        #@effect_anime_pattern = 265
        @effect_anime_pattern = 48
      when 427
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2869 #ダブルまかんこうさっぽう(未来悟飯＆若者)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 338
        ray_y = 204
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来ゴハン
          @scombo_cha2 = 15
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 15 #わかもの
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 15 && @battle_anime_frame == 40 #若者
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true 
        @scombo_cha2 = 15
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3
         @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 13
        @chay = -200
        @chr_cutin_flag = false
        @tec_output_back = false
      when 61..191
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 177
        
        rect = Rect.new(0, 0, 648, 64)
        
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来ゴハン)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来超ゴハン)") #ダメージ表示用
        end
        @back_window.contents.blt(-4+shake_x,146+shake_y-40,picture,rect)
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(若者)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y+40,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 179
        Audio.se_stop if @battle_anime_frame == 191
        @tec_output_back = true if @battle_anime_frame == 191
      when 192..281
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY-50    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        if @battle_anime_frame == 221
          battle_anime_change 0,13
          @scombo_cha2_anime_type = 14
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 342
        end  
      when 282
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 283..308
        ray_y = 134
        @effect_anime_pattern = 308
      when 309
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2870 #母さんは俺が守る


      #  back_x = 166
      #  back_y = 86
      backhai_no = 201
      @ray_color = 3
      back_x = 176
      back_y = 88
      ray_x = 356
      ray_y = 112
      #ray_x = 326
      #ray_y = 124
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 26
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 10
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 10 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 26
          @btl_ani_cha_chg_no = 10
          @output_anime_type = 1
          battle_anime_change 0,6
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
        when 2..59
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          @chax += 16
        when 60
          @enex = CENTER_ENEX
          @eney = STANDARD_CHAY
          @chax = -96
        when 61..82
          @chax += 16
        when 83
          @output_anime_type = 0
          battle_anime_change 0,17
          battle_anime_change 1,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")# if @battle_anime_frame == 24
        when 84..119
          @chax -= 20
        when 120
          @eney = -200
          @chax = 840
          Audio.se_play("Audio/SE/" + "Z1 逃げる") #if @battle_anime_frame == 2
        when 121..146
          sframe = 121
          @chax -= 20
          back_anime_pattern 115,-96 + 16 * (@battle_anime_frame - sframe),STANDARD_CHAY
        when 147..159
          sframe = 147
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 147
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,-96 + 16 * 25 - 8 * (@battle_anime_frame - sframe),STANDARD_CHAY
          @chax -= 8
        when 160
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @scombo_cha1_anime_type = 0
          battle_anime_change 0,0
        when 161..180
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @chax += 4
        when 181..240
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,7
        when 241..270
          battle_anime_change 0,8
          @chay -= 16
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 241
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 271..359
          Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == 271
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1 
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          
        when 360 #初期化
          #Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          @btl_ani_cha_chg_no = 26
          battle_anime_change 0,4
          back_anime_pattern 201,back_x,back_y
          @chay = STANDARD_CHAY
          @chax = -96 + 16 * 25 - 8 * 12
          battle_anime_change 1,0
        when 361..397
          back_anime_pattern 201,back_x,back_y
        when 398
          #@tec_output_back = false
          #@chr_cutin = false
          #@ay  -= 2
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
          battle_anime_change 0,7
          #back_anime_pattern 2
        when 399..450
          @chax += 20
          #back_anime_pattern 101,back_x,back_y
        when 451
          #set_chr_display_out
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @output_anime_type = 1
          @chax = -320
          @chay = STANDARD_CHAY
        when 452..480
          @chax += 20
        when 481
          battle_anime_change 0,11
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          
        when 482..510
          battle_anime_change 1,16
          @effect_anime_pattern = 123
          ray_x = 346
          ray_y = 154
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= 490
          @enex += 20
          @eney -= 4
        when 511..530
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 511
          @chax += 24
          @chay -= 4
          battle_anime_change 0,10
        when 531..559
          if @battle_anime_frame == 531
            @enex = -100
            @eney = STANDARD_ENEY + 50
            @chax = -150
            @chay = STANDARD_ENEY + 50
          end
          
          if @battle_anime_frame <= 554
            @enex += 16
            @eney -= 2
          else
            battle_anime_change 1,0
          end
          @chax += 28
          @chay -= 4
        when 560
          battle_anime_change 0,15
          @chax = 740
          @chay = STANDARD_ENEY
        when 561..574
          @chax -= 28
        when 575..595
          if @battle_anime_frame == 575
            Audio.se_play("Audio/SE/" + "ZG 打撃2")
            @chax -= 28
          end
          
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= 583
          battle_anime_change 0,17
          battle_anime_change 1,17
          @enex -= 20
        when 596..614
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 596
          battle_anime_change 0,15
          @chax -= 28
          @enex -= 20
        when 615
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chax = 900
          @chay = STANDARD_ENEY
          @enex = 640
          @eney = STANDARD_ENEY
        when 616..634
          @chax -= 28
          @enex -= 20
        when 635
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == 635
          @chax -= 28
          battle_anime_change 0,16
        when 636..659
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= 644
          @enex -= 4
          @eney += 16
        when 660
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chr_cutin = false
          @chr_cutin_flag = false
          @tec_output_back_no = 1
          @chax = CENTER_CHAX-30
          @chay = -184
          @enex = CENTER_ENEX-40
          @eney = -140
          battle_anime_change 0,10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 661..674
          @eney += 16
          @chay += 24
          @chax += 4
        when 675
          battle_anime_change 0,18
          Audio.se_play("Audio/SE/" + "ZG 打撃1")
        when 676..709
          if @battle_anime_frame % 4 == 0
            #@chax += 4
            @enex += 4
          elsif @battle_anime_frame % 2 == 0
            #@chax -= 4
            @enex -= 4
          end
          @chay -= 4
          @eney -= 4
        when 710
          @output_anime_type = 1
          battle_anime_change 0,20
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 711..739
          @chay += 2
          @eney += 16
        when 740
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,29
        when 741..759
          @chay -= 16
          @chax -= 16
        when 779
          @tec_back_small = false
          @chr_cutin = true
          @chr_cutin_flag = true
          @tec_output_back_no = 0
        when 780
          @chay = STANDARD_ENEY
          @chax = TEC_CENTER_CHAX
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 3
          back_x = 226
          back_anime_pattern 201,back_x,back_y
          
        when 781..839
          back_x = 226
          back_anime_pattern 201,back_x,back_y
        when 840..907
          back_x = 226
          battle_anime_change 0,5
          back_anime_pattern 201,back_x,back_y
        when 908
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          battle_anime_change 0,2
          @effect_anime_pattern = 256
          @chax += 2
        when 1007
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          battle_anime_change 1,16
          set_chr_display_out
        when 1008..1033
          

          @effect_anime_pattern = 265
        when 1034
          anime_pattern_fromat
          return @battle_anime_result + 1
        end

        #when 1167
        #  anime_pattern_fromat
        #  return @battle_anime_result + 1
        #end
      else
          @btl_ani_tokusyu_flag = true
        end
    when 2871 #ダブルませんこう(未来悟飯＆トランクス)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来ゴハン
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 17 && @battle_anime_frame == 40 || $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 10
        @scombo_cha2_anime_type = 3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 305
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 11
        @scombo_cha2_anime_type = 13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 306
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2872 #トリプルませんこう(悟飯&未来悟飯＆トランクス)
      ray_x = 302
      ray_y = 64
      @ray_color = 3
      idougo = 212+24
      idouryou = 8
      backhai_no = 201
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          #未来悟飯
          @scombo_cha1 = 25
          @scombo_cha1 = 26 if $super_saiyazin_flag[6] == true
          #悟飯
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          #未来悟飯
          @scombo_cha1 = 25
          @scombo_cha1 = 26 if $super_saiyazin_flag[6] == true
          #トランクス
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #未来悟飯
          #悟飯
          @scombo_cha1 = 5
          @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          #トランクス
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 25
          @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true
          #悟飯
          @scombo_cha1 = 5
          @scombo_cha1 = 18 if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
          #トランクス
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,12
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 10
        @scombo_cha2_anime_type = 3 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        
      when 61..189
        back_anime_pattern backhai_no,@chax-32,@chay-24
        @back_anime_frame -= 1
        
        back_anime_pattern backhai_no,@chax-32-40,@chay-24-66
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,@chax-32-40,@chay-24+66
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 190
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        battle_anime_change 0,1
        @scombo_cha1_anime_type = 3
        @scombo_cha2_anime_type = 11
        @scombo_cha2_anime_type = 13 if $game_variables[173] == 1 || $game_variables[173] == 2 || $game_variables[173] == 3 #剣なしなら
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 343
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
      when 191..299
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 302..328
        @effect_anime_pattern = 282
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2873 #トリプル魔貫光殺法(ピッコロ&未来悟飯＆若者)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 338
        ray_y = 204
      color = Color.new(255,255,255,260)
      idougo = 212+24
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 15 #若者
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          #ピッコロ
          @scombo_cha1 = 4
          #未来悟飯
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          #ピッコロ
          @scombo_cha1 = 4
          #若者
          @scombo_cha2 = 15
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #ピッコロ
          #未来悟飯
          @scombo_cha1 = 25
          @scombo_cha1 = 26 if $super_saiyazin_flag[6] == true
          #若者
          @scombo_cha2 = 15
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 4
          #未来悟飯
          @scombo_cha1 = 25
          @scombo_cha1 = 26 if $super_saiyazin_flag[6] == true
          #若者
          @scombo_cha2 = 15
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
        @ray_color = 3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @output_anime_type = 1
        battle_anime_change 0,5
        @scombo_cha1_anime_type = 12
        @scombo_cha2_anime_type = 13
        @chay -= 400
        @chr_cutin_flag = false
        @tec_output_back = false
      when 61..191
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 177
        
        rect = Rect.new(0, 0, 648, 64)
        
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(ピッコロ)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来ゴハン)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来超ゴハン)") #ダメージ表示用
        end
        @back_window.contents.blt(-4+shake_x,146+shake_y-40-64,picture,rect)
        picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(若者)") #ダメージ表示用
        @back_window.contents.blt(-4+shake_x,146+shake_y+40+64,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 179
        Audio.se_stop if @battle_anime_frame == 191
        @tec_output_back = true if @battle_anime_frame == 191
      when 192..281
        sframe = 192
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay += 400 if @battle_anime_frame == sframe  
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        if @battle_anime_frame == 221
          battle_anime_change 0,6
          @scombo_cha1_anime_type = 13
          @scombo_cha2_anime_type = 14
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 344
        end  
      when 282
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 283..308
        ray_y = 134
        @effect_anime_pattern = 345
      when 309
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2874 #アウトサイダーショット(ピ＆18号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 202

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 21
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 21 #18号
          @scombo_cha2 = 4
          
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 21 && @battle_anime_frame == 40 #18号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 21
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
      when 188..269
        @effect_anime_pattern = 304
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2875 #アウトサイダーショット(ピ＆16号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 202

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 23
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 23 #16号
          @scombo_cha2 = 4
          
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 23 && @battle_anime_frame == 40 #16号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 23
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 102 #86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
      when 188..269
        @effect_anime_pattern = 346#304
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2876 #アウトサイダーショット(未来悟飯＆18号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 202

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 21
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 21 #18号
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 21 && @battle_anime_frame == 40 #18号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true
        @scombo_cha2 = 21
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
      when 188..269
        @effect_anime_pattern = 347
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    
    when 2877 #アウトサイダーショット(未来悟飯＆17号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 202

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 22
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 22 #17号
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 22 && @battle_anime_frame == 40 #17号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true
        @scombo_cha2 = 22
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
      when 188..269
        @effect_anime_pattern = 347
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2878 #アウトサイダーショット(未来悟飯＆16号)
          backhai_no = 201
          back_x = 234
          back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 202

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 23
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 23 #16号
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 23 && @battle_anime_frame == 40 #16号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true
        @scombo_cha2 = 23
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 102
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        #@back_anime_frame -= 1
        #@ray_color = 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        ##
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        
      when 188..269
        @effect_anime_pattern = 348
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2879 #アウトサイダーショット(未来悟飯＆ベジータ)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 12 && @battle_anime_frame == 40 || #ベジータ
          $partyc[@chanum.to_i] == 19 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true 
        @scombo_cha2 = 12
        @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 5
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 349
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 6
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 3
        @effect_anime_pattern = 240
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2880 #超爆力魔波(未来悟飯＆ピッコロ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 4
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 4 #ピッコロ
            @scombo_cha2 = 25
            @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 4 && @battle_anime_frame == 40 #ピッコロ
            @chax += 160 + 24
          end
          @btl_ani_cha_chg_no = 25
          @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true 
          @scombo_cha2 = 4

          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 1
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 1
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,8
          @scombo_cha2_anime_type = 23
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2881 #ダブルアタック(天津飯とトランクス)
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 8  #天津飯
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true #トランクス
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクストランクス
          @scombo_cha2 = 8
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = 5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay -= 100 if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40
        @btl_ani_cha_chg_no = 8
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true #トランクス
        @effect_anime_pattern = 92
      when 60..100
        @effect_anime_pattern = 92
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76 - 100# 効果音を再生する
        
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 8
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -200 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 17 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 20 if @battle_anime_frame == 225 && $super_saiyazin_flag[4] == true
      when 226..246
        
        traframe = 238
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        if @battle_anime_frame == traframe
          back_anime_pattern 48,CENTER_CHAX + 16+96,STANDARD_CHAY + 26
        end
        #@chax += 96 if @battle_anime_frame == traframe
        @chax += 96 + 24 * 4 if @battle_anime_frame == traframe
        @chay = STANDARD_CHAY if @battle_anime_frame == traframe
        @effect_anime_pattern = 0 if @battle_anime_frame == traframe
        @gx = 0 if @battle_anime_frame == 246
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax -= 16 if @battle_anime_frame >= traframe + 6
      when 247..251
        @chax -= 24
      when 252..293
        sframe = 238
      #when 252..293
        @effect_anime_pattern = 125
        ray_x = 350
        ray_y = 158
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 252

        case $game_variables[173]
        
        when 0
          battle_anime_change 0,12
        when 1
          battle_anime_change 0,17
        when 2
          battle_anime_change 0,17
        when 3
          battle_anime_change 0,17
        when 4
          battle_anime_change 0,12
        else
          battle_anime_change 0,12
        end
        battle_anime_change 1,16
        @gx = 18
        @gy = 4
      when 294..353
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        battle_anime_change 0,0
        @btl_ani_cha_chg_no = 8
        @scombo_cha2_anime_type = 0
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        #back_anime_pattern 52
        
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 1
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        @effect_anime_pattern = 355
      when 415 #初期化
        @gy = 0
        @gx = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 356
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2882 #ダブルアタック(チャオズとトランクス)
        back_x = 204
        back_y = -18
        if @battle_anime_frame <= 500 
        ray_x = 325
        ray_y = 70
        else
        ray_x = 340
        ray_y = 200
      end
      #@tec_back_small = true
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 9  #チャオズ
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true #トランクス
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクストランクス
          @scombo_cha2 = 9
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = 5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay -= 100 if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40
        @btl_ani_cha_chg_no = 9
        @scombo_cha2 = 17
        @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true #トランクス
        @effect_anime_pattern = 92
      when 60..100
        @effect_anime_pattern = 92
        @chay = -200 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60
        back_anime_pattern 48,TEC_CENTER_CHAX ,STANDARD_CHAY + 76 - 100# 効果音を再生する
        
      when 101..140
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 101
        back_anime_pattern 48,TEC_CENTER_CHAX + 10,STANDARD_CHAY + 76
      when 150
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 9
        @chax = CENTER_CHAX
        @output_anime_type = 0
        battle_anime_change 0,0
      when 160..180
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 160
        back_anime_pattern 48,CENTER_CHAX + 16,STANDARD_CHAY + 26
        @chay = STANDARD_CHAY if @battle_anime_frame == 180
        
      when 186
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,3
      when 191
        Audio.se_play("Audio/SE/" + "Z1 打撃")
        battle_anime_change 0,4
      when 201
        Audio.se_play("Audio/SE/" + "Z3 打撃")
        battle_anime_change 0,1
        battle_anime_change 1,16
      when 207..225
        @gx = -18
        @effect_anime_pattern = 121
        @chay = -200 if @battle_anime_frame == 225
        @enex = -96  if @battle_anime_frame == 225
        battle_anime_change 0,0 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 17 if @battle_anime_frame == 225
        @btl_ani_cha_chg_no = 20 if @battle_anime_frame == 225 && $super_saiyazin_flag[4] == true
      when 226..246
        
        traframe = 238
        @gx = -18
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 226
        battle_anime_change 1,0 if @battle_anime_frame == 235
        if @battle_anime_frame == traframe
          back_anime_pattern 48,CENTER_CHAX + 16+96,STANDARD_CHAY + 26
        end
        #@chax += 96 if @battle_anime_frame == traframe
        @chax += 96 + 24 * 4 if @battle_anime_frame == traframe
        @chay = STANDARD_CHAY if @battle_anime_frame == traframe
        @effect_anime_pattern = 0 if @battle_anime_frame == traframe
        @gx = 0 if @battle_anime_frame == 246
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax -= 16 if @battle_anime_frame >= traframe + 6
      when 247..251
        @chax -= 24
      when 252..293
        sframe = 238
      #when 252..293
        @effect_anime_pattern = 125
        ray_x = 350
        ray_y = 158
        @chay = STANDARD_CHAY
        @output_anime_type = 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 252

        case $game_variables[173]
        
        when 0
          battle_anime_change 0,12
        when 1
          battle_anime_change 0,17
        when 2
          battle_anime_change 0,17
        when 3
          battle_anime_change 0,17
        when 4
          battle_anime_change 0,12
        else
          battle_anime_change 0,12
        end
        battle_anime_change 1,16
        @gx = 18
        @gy = 4
      when 294..353
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == 294
        @chax = TEC_CENTER_CHAX
        @chay = STANDARD_CHAY - 50
        battle_anime_change 0,0
        @btl_ani_cha_chg_no = 9
        @scombo_cha2_anime_type = 0
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        #back_anime_pattern 52
        
      when 354..414
        Audio.se_stop if @battle_anime_frame == 354
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == 354
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 1
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        @effect_anime_pattern = 357
      when 415 #初期化
        @gy = 0
        @gx = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        @effect_anime_frame = 0
      when 416..442
        @effect_anime_pattern = 356
      when 443
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2883 #悟飯ちゃんを巻き込む出ねえ
      ray_x = 340-160
        ray_y = 96
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = 4
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 4
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,3
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2884 #悟空さを巻き込む出ねえ
      ray_x = 340-160
        ray_y = 96
        
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = 12
          @scombo_cha1 = 19 if $super_saiyazin_flag[3] == true #ベジータ
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = 12 
        @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true #ベジータ
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,1
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2885 #バーダック一味
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 3
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
          if @battle_anime_frame < 24
            #@ay = -2
            @ax = -4
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 27
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 27  #トーマ
          if @battle_anime_frame < 25
            #@ax = -3
            @ay = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 16
          @scombo_cha1 = 32 if $super_saiyazin_flag[7] == true
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 28  #セリパ
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 16
          @scombo_cha1 = 32 if $super_saiyazin_flag[7] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 29  #トテッポ
          if @battle_anime_frame < 25
            @ay = -3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 16
          @scombo_cha1 = 32 if $super_saiyazin_flag[7] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #パンブーキン
          if @battle_anime_frame < 25
            @ay = 3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 16
          @scombo_cha1 = 32 if $super_saiyazin_flag[7] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 29
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX - 92
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = 16
        @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true
        @scombo_cha1 = 27
        @scombo_cha2 = 28
        @scombo_cha3 = 29
        @scombo_cha4 = 30
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
        battle_anime_change 0,4
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 0
        @scombo_cha3_anime_type = 2
        @scombo_cha4_anime_type = 4
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 61..189
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 190
        Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        battle_anime_change 0,1
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 4
        @scombo_cha3_anime_type = 3
        @scombo_cha4_anime_type = 2
        
        @effect_anime_pattern = 358
        
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 191..299
        #battle_anime_change 0,3
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 353
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2886 #ダブルかめはめ波(亀仙人＆悟空)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
          @scombo_cha2 = 24
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 3
          @scombo_cha2 = 14 if $super_saiyazin_flag[1] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 24 && @battle_anime_frame == 40 #亀仙人
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 3
        @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true 
        @scombo_cha2 = 24
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 2
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 0
        back_anime_pattern backhai_no,back_x ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 359
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2887 #ダブルかめはめ波(亀仙人＆悟飯)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 5 || $partyc[@chanum.to_i] == 18 #悟飯
          @scombo_cha2 = 24
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 24 && @battle_anime_frame == 40 #亀仙人
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 5
        @btl_ani_cha_chg_no = 18 if $super_saiyazin_flag[2] == true 
        @scombo_cha2 = 24
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,11
        @scombo_cha2_anime_type = 2
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 360
        sframe = 188
        battle_anime_change 0,12
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2888 #ダブルかめはめ波(亀仙人＆クリリン)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 6 #クリリン
          @scombo_cha2 = 24
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 6
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 24 && @battle_anime_frame == 40 #亀仙人
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 6
        @scombo_cha2 = 24
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 2
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 14 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 360
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2889 #ダブルかめはめ波(亀仙人＆ヤムチャ)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 7 #ヤムチャ
          @scombo_cha2 = 24
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 7
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 24 && @battle_anime_frame == 40 #亀仙人
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 7
        @scombo_cha2 = 24
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 2
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 2 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 361
        sframe = 188
        battle_anime_change 0,3
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2890 #ダブルかめはめ波(亀仙人＆未来悟飯)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
          @scombo_cha2 = 24
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 24 && @battle_anime_frame == 40 #亀仙人
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 25
        @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true 
        @scombo_cha2 = 24
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,5
        @scombo_cha2_anime_type = 2
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 0
        back_anime_pattern backhai_no,back_x - 2 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 362
        sframe = 188
        battle_anime_change 0,1
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe  # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe  # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @ray_color = 0
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2891 #かめはめ乱舞(親子)
      ray_x = 356
      ray_y = 70
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 18  #悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 26
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 26  #未来悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 18
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #悟空
          @scombo_cha1 = 26
          @scombo_cha2 = 18
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 14
          @scombo_cha1 = 26
          @scombo_cha2 = 18
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @scombo_cha1_anime_type = 5
        @scombo_cha2_anime_type = 11
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..189
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 190
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
        battle_anime_change 0,3
        @scombo_cha1_anime_type = 1
        @scombo_cha2_anime_type = 12
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 358
        
      when 191..299
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 302..328
        @effect_anime_pattern = 353
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2892 #アンドロイドストライク(18号＆17号)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 21 #18号
          @scombo_cha2 = 22
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 22 #17号
          @scombo_cha2 = 21
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 22 && @battle_anime_frame == 40 #17号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 21 
        @scombo_cha2 = 22
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
        
        if @battle_anime_frame == 59
          @tec_output_back_no = 1 #縦に変更
          @effect_anime_pattern = 0
          @chr_cutin = false
        end
      when 60..120
        sframe = 60
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
          @andridx = [0,4,0,-4]
          @andarr = 0
          @andloop = 0
        end
        @chay -= 100
        kizyunx = 98
        kizyuny = 0
        
        #kizyunx += @andridx[@andarr]
        shake_dot = 4
        shakex,shakey = pic_shake_cal shake_dot
        #loopmax = 2
        #@andloop += 1
        
        #4フレームで次の配列へ
        #if @andloop == loopmax
        #  @andloop = 0
        #  @andarr += 1
        #  #配列が最後まで行ったら最初に戻す
        #  if (@andridx.size - 1 == @andarr)
        #    @andarr = 0
        #  end
        #end
        
        rect = Rect.new(0, 0, 250, 356)
        if $game_variables[177] == 0
          picture = Cache.picture("Z3_必殺技_アンドロイドストライク(18号)")
        else
          picture = Cache.picture("Z3_必殺技_アンドロイドストライク(18号 着せ替え)")
        end
        @back_window.contents.blt(kizyunx + shakex,kizyuny + shakey,picture,rect)

        picture = Cache.picture("Z3_必殺技_アンドロイドストライク(17号)")
        @back_window.contents.blt(kizyunx + 200 + shakex,kizyuny + shakey,picture,rect)
      when 121..180
        sframe = 121
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @and18x = 98
          @and18y = 0
          @and17x = 298
          @and17y = 0

        end
          andarrx = [ 0, 0,-8,-8,-8,-8,-8,-8,-16,-16,-16,-8,-8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8,- 8]
          andarry = [16,16, 8, 8, 8, 8, 8, 8,  0,  0,  0,-8,-8,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16,-16]
        framearr = @battle_anime_frame - sframe
        shake_dot = 4
        shakex,shakey = pic_shake_cal shake_dot
        
        @and18x += andarrx[framearr] * 1.5
        @and18y += andarry[framearr] * 1.5
        
        @and17x -= andarrx[framearr] * 1.5
        @and17y -= andarry[framearr] * 1.5
        rect = Rect.new(0, 0, 250, 356)
        if $game_variables[177] == 0
          picture = Cache.picture("Z3_必殺技_アンドロイドストライク(18号)")
        else
          picture = Cache.picture("Z3_必殺技_アンドロイドストライク(18号 着せ替え)")
        end
        @back_window.contents.blt(@and18x,@and18y,picture,rect)

        picture = Cache.picture("Z3_必殺技_アンドロイドストライク(17号)")
        @back_window.contents.blt(@and17x,@and17y,picture,rect)
        if @battle_anime_frame == 180
          @tec_output_back_no = 0 #縦に変更
          @effect_anime_pattern = 0
          @chr_cutin = true
        end
      when 181..210
        sframe = 181
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        end
        back_anime_pattern 48,CENTER_ENEX - 48, STANDARD_ENEY + 26
      when 211..264
        sframe = 211
        if @battle_anime_frame == sframe
          @chax = CENTER_ENEX - 48
          @chay = STANDARD_ENEY
          @output_anime_type = 0
        end
        
        kfra = 6 
        #味方の攻撃
        case @battle_anime_frame - sframe
        
        when kfra * 0,kfra * 2,kfra * 4,kfra * 6,kfra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when kfra * 1,kfra * 3,kfra * 5,kfra * 7,kfra * 9
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")

        end
        
        #敵の防御
        case (@battle_anime_frame - sframe) % kfra
        
        when 0,1
          #p "奥へ" + (@battle_anime_frame - sframe).to_s
          battle_anime_change 1,16
          @enex += 12
        when 2,3
          #p "前へ" + (@battle_anime_frame - sframe).to_s
          battle_anime_change 1,0
          @enex -= 12

        end
        #p @battle_anime_frame if (@battle_anime_frame - sframe) == kfra * 9
      when 265..330
        sframe = 265
        battle_anime_change 1,0
        
        #味方の攻撃
        case @battle_anime_frame - sframe
        
        when 0..7
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            battle_anime_change 0,0
          end
          @chax -= 16
          @chay += 4
        
        when 24..25
          battle_anime_change 0,16
          @chax += 32
          @chay -= 8
        when 26..27
          battle_anime_change 0,3
          @chax += 32
          @chay -= 8
          if ((@battle_anime_frame - sframe) == 27)
            Audio.se_play("Audio/SE/" + "Z1 強打")
          end
        end
        
        #敵の防御
        case @battle_anime_frame - sframe
        
        when 27..100
          @enex += 24
          @eney -= 8
          battle_anime_change 1,17
        end
        #p @battle_anime_frame if (@battle_anime_frame - sframe) == kfra * 9
      when 331..360
        sframe = 331
        eframe = 360
        
        if @battle_anime_frame == sframe
          @chax = 32
          @chay = -200
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
        end

        back_anime_pattern 48,CENTER_ENEX - 48, STANDARD_ENEY + 26
        
        @enex = CENTER_ENEX - (32 * (eframe-@battle_anime_frame))
        @eney = STANDARD_ENEY + (8 * (eframe-@battle_anime_frame))
        
        case @battle_anime_frame - sframe
        when 0
          
        when 12
          battle_anime_change 1,16
        when 25
          battle_anime_change 1,0
        end
      when 361..414
        sframe = 361
        if @battle_anime_frame == sframe
          @chax = CENTER_ENEX - 48
          @chay = STANDARD_ENEY
          @output_anime_type = 0
          @btl_ani_cha_chg_no = 22 
        end
        
        kfra = 6 
        #味方の攻撃
        case @battle_anime_frame - sframe
        
        when kfra * 0,kfra * 2,kfra * 4,kfra * 6,kfra * 8
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when kfra * 1,kfra * 3,kfra * 5,kfra * 7,kfra * 9
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")

        end
        
        #敵の防御
        case (@battle_anime_frame - sframe) % kfra
        
        when 0,1
          #p "奥へ" + (@battle_anime_frame - sframe).to_s
          battle_anime_change 1,16
          @enex += 12
        when 2,3
          #p "前へ" + (@battle_anime_frame - sframe).to_s
          battle_anime_change 1,0
          @enex -= 12

        end
      when 415..480
        sframe = 415
        battle_anime_change 1,0
        
        #味方の攻撃
        case @battle_anime_frame - sframe
        
        when 0..7
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            battle_anime_change 0,0
          end
          @chax -= 16
          @chay -= 4
        
        when 24..25
          battle_anime_change 0,16
          @chax += 32
          @chay += 8
        when 26..27
          battle_anime_change 0,2
          @chax += 32
          @chay += 8
          if ((@battle_anime_frame - sframe) == 27)
            Audio.se_play("Audio/SE/" + "ZG 打撃4")
          end
        end
        
        #敵の防御
        case @battle_anime_frame - sframe
        
        when 27..100
          @enex += 24
          @eney += 8
          battle_anime_change 1,17
        end
      when 481..530
        sframe = 481
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,16
        end
        @chay -= 20
      when 531..619
        sframe = 531
        if @battle_anime_frame == sframe
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY - 50
          @btl_ani_cha_chg_no = 21 
          @scombo_cha2 = 22
          @output_anime_type = 1
          battle_anime_change 0,0
          @scombo_cha2_anime_type = 0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          battle_anime_change 1,0
        end
        
        if @battle_anime_frame == sframe + 10
          battle_anime_change 0,1
          @scombo_cha2_anime_type = 1
          Audio.se_play("Audio/SE/" + "ZG 光線1")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          @ray_color = 3
          @effect_anime_pattern = 358
        end
        
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50

        ray_x = 340
        ray_y = 74
      when 620
        @chay = -200
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 621..645
        ray_y = 110
        @effect_anime_pattern = 353
      when 646
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2893 #あの時の借りを返すよ！(天津飯と18号)
      back_x = 228
      back_y = 88
      ray_x = 346
      ray_y = 66
      color = Color.new(255,255,255,260)
      
      #18号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 21
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 8
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @back_anime_frame = 0
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 3 if @battle_anime_frame == 128
        when 129..329
          kien_x = 220
          kien_y = 80
          Audio.se_stop if @battle_anime_frame == 129 || @battle_anime_frame == 170
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if @battle_anime_frame == 129
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
          rect = Rect.new(0, 0, 170, 160)
          @back_window.contents.blt(208,98,picture,rect)
          
          case @battle_anime_frame
          
          when 1
            
          when 170..173,210..213,250..253,290..293
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          end
          
        when 330
          Audio.se_stop
          @tec_output_back = false
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          #set_chr_display_out
          @chr_cutin_flag = false
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 341..550
          
          #ray_x = 346
          #ray_y = 136
          back_anime_pattern 9
          case @battle_anime_frame
          when 370..373,410..413,450..453,490..493
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 370 || @battle_anime_frame == 410 || @battle_anime_frame == 450 || @battle_anime_frame == 490
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 21
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 9
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            @scombo_cha1_anime_type = 3
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 427
          back_x = 266
          back_y = 0
          ray_x = 302
          ray_y = 62
          color = Color.new(255,255,255,260)
          case @battle_anime_frame - ssframe
          when 0 #初期化
            #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @btl_ani_cha_chg_no = @scombo_cha1
            @chax = @scmbc1_x
            @chay = @scmbc1_y
            @output_anime_type = 1
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            battle_anime_change 0,2

            #@ray_color = 3
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            @ray_color = 3
            #ray_x = 338
            #ray_y = 156
            @genkitama_kanri_frame = []
            @genkitama_kanri_maxflame = 15
            @genkitama_kanri_spdup = 10
            @genkityuushin_x = ray_x + 12
            @genkityuushin_y = ray_y + 12
            @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
            @chr_cutin = false
          when 1..350
            sframe = 1
            @tec_output_back_no = 4
            @chay = -160

            if $game_variables[177] == 1 #18号衣装No
              picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ(着替)")
            else
              picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ")
            end
              bezikat_x = 138
              bezikat_y = 96
              rect = Rect.new(0, 0, 296, 220)
            
            @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
            
            #ray_x = 290
            #ray_y = 40
            
            tame_end = 360
            
            if (@battle_anime_frame - ssframe) == tame_end
              
            elsif (@battle_anime_frame - ssframe) >= tame_end
              
            else
              #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              #rect = Rect.new(0, 0, 8, 10)
              #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
              for i in 0..(@genkitama_kanri_frame.size - 1)
                if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 0
                elsif @genkitama_kanri_frame[i] > 0
                  
                  
                  picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                  rect = Rect.new(0, 0, 8, 10)
                  #idou_x_moto = 4
                  #idou_y_moto = 2
                  case i

                  when 0 #上
                    idou_x = 0
                    idou_y = -2

                  when 1 #左上
                    idou_x = 2
                    idou_y = -2

                  when 2 #左
                    idou_x = 2
                    idou_y = 0
                    
                  when 3 #左下
                    idou_x = 2
                    idou_y = 2
                    
                  when 4 #下
                    idou_x = 0
                    idou_y = 2
                    
                  when 5 #右下
                    idou_x = -2
                    idou_y = 2

                  when 6 #右
                    idou_x = -2
                    idou_y = 0
                    
                  when 7 #右上
                    idou_x = -2
                    idou_y = -2

                  end
                  
                    idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                    idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
              
                  if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                  else
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                  end
                  @genkitama_kanri_frame[i] += 1
                  
                else
                  if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                    @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                  end
                  
                end
              end
            end
            
            if (@battle_anime_frame - ssframe) == (sframe + 90)
              @effect_anime_pattern = 235
            end
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if (@battle_anime_frame - ssframe) == (sframe + 90)
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == (sframe + 90)
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if (@battle_anime_frame - ssframe) == (sframe + 180)
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == (sframe + 180)
            if (@battle_anime_frame - ssframe) > (sframe + 240)
              
              @effect_anime_pattern = 289
              ray_x -= 16 
              ray_y -= 16
            end
            
            #back_anime_pattern 201,back_x,back_y
            #@tec_back_small = true if @battle_anime_frame == 128
            #@tec_output_back = false if @battle_anime_frame == 128
            @chr_cutin = true if (@battle_anime_frame - ssframe) == 350
            @tec_output_back_no = 0 if (@battle_anime_frame - ssframe) == 350
            #@chr_cutin_flag = false if @battle_anime_frame == 128
            #@tec_output_back_no = 3 if @battle_anime_frame == 128
            #@tec_back_color = 0 if @battle_anime_frame == 128
            #@chr_cutin = false if @battle_anime_frame == 128
          when 351..390
            sframe = 351
            if (@battle_anime_frame - ssframe) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") 
              @effect_anime_frame = 0
              @effect_anime_type = 0
            end
            @chay = STANDARD_CHAY
            @output_anime_type = 1
            battle_anime_change 0,10
            @effect_anime_pattern = 239
            ray_x = 338
            ray_y = 104

          when 391
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 401..427
            ray_y = 106
            @effect_anime_pattern = 240
            
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2894 #あの時の借りを返すぞ！(天津飯と16号)
      back_x = 228
      back_y = 88
      ray_x = 346
      ray_y = 66
      color = Color.new(255,255,255,260)
      
      #16号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 23
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 8
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @back_anime_frame = 0
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 3 if @battle_anime_frame == 128
        when 129..329
          kien_x = 220
          kien_y = 80
          Audio.se_stop if @battle_anime_frame == 129 || @battle_anime_frame == 170
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if @battle_anime_frame == 129
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
          rect = Rect.new(0, 0, 170, 160)
          @back_window.contents.blt(208,98,picture,rect)
          
          case @battle_anime_frame
          
          when 1
            
          when 170..173,210..213,250..253,290..293
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          end
          
        when 330
          Audio.se_stop
          @tec_output_back = false
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          #set_chr_display_out
          @chr_cutin_flag = false
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 341..550
          
          #ray_x = 346
          #ray_y = 136
          back_anime_pattern 9
          case @battle_anime_frame
          when 370..373,410..413,450..453,490..493
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 370 || @battle_anime_frame == 410 || @battle_anime_frame == 450 || @battle_anime_frame == 490
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 23 #16号
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 8
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            #@scombo_cha1_anime_type = 3
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            @scombo_cha1_anime_type = 0
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 337
          back_x = 266
          back_y = 0
          ray_x = back_x +82
          ray_y = back_y +60
          color = Color.new(255,255,255,260)
        case (@battle_anime_frame - ssframe)
        when 0 #初期化
          @btl_ani_cha_chg_no = @scombo_cha1
          @chax = @scmbc1_x
          @chay = @scmbc1_y
          @output_anime_type = 1
          battle_anime_change 0,4
          #@ray_color = 3
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          @ray_color = 3
          ray_x = 338
          ray_y = 156
          @genkitama_kanri_frame = []
          @genkitama_kanri_maxflame = 15
          @genkitama_kanri_spdup = 10
          @genkityuushin_x = ray_x -14
          @genkityuushin_y = ray_y +2
          @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
        when 1..128
          
          ray_x = 324
          ray_y = 120
          
          tame_end = 128
          
          if (@battle_anime_frame - ssframe) == tame_end
            
          elsif (@battle_anime_frame - ssframe) >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
          #back_anime_pattern 201,back_x,back_y
          #@tec_back_small = true if @battle_anime_frame == 128
          @tec_output_back = false if (@battle_anime_frame - ssframe) == 128
          @chr_cutin = false if (@battle_anime_frame - ssframe) == 128
          @chr_cutin_flag = false if (@battle_anime_frame - ssframe) == 128
          #@tec_output_back_no = 3 if @battle_anime_frame == 128
          #@tec_back_color = 0 if @battle_anime_frame == 128
          #@chr_cutin = false if @battle_anime_frame == 128
        when 129..300
          #kien_x = 220
          #kien_y = 80
          back_anime_pattern 106
          #Audio.se_stop if @battle_anime_frame == 129
          
          @chay = -160
          #kienkizyunframe = 175
          #kiptan = 0
          picture = Cache.picture("Z3_必殺技_ヘルズフラッシュ(16号)")
          bezikat_x = 56
          bezikat_y = 96
          rect = Rect.new(0, 0, 302, 220)
          
          if (@battle_anime_frame - ssframe) == 231 || (@battle_anime_frame - ssframe) == 232 || (@battle_anime_frame - ssframe) == 233
            bezikat_x -= 2
            bezikat_y -= 2
          elsif (@battle_anime_frame - ssframe) == 232
            bezikat_x -= 4
            bezikat_y -= 4
          elsif (@battle_anime_frame - ssframe) == 233
            bezikat_x -= 6
            bezikat_y -= 6
          elsif (@battle_anime_frame - ssframe) == 234
            bezikat_x -= 4
            bezikat_y -= 4
          elsif (@battle_anime_frame - ssframe) == 235
            bezikat_x -= 2
            bezikat_y -= 2
          end
          @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
          
          case (@battle_anime_frame - ssframe)
          
          when 1
            
          when 140..230
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == 140

            ray_x = 362
            ray_y = 244
            @effect_anime_pattern = 235
          when 231
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
            @ray_anime_type = 0
            @ray_anime_frame = 0
            #@effect_anime_pattern = 264
            @effect_anime_pattern = 275
          end

          when 301
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 311..337
            ray_y = 114
            @effect_anime_pattern = 265
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2895 #借りがあるらしいな(天津飯と17号)
      back_x = 228
      back_y = 88
      ray_x = 346
      ray_y = 66
      color = Color.new(255,255,255,260)
      
      #17号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 22
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 8
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @back_anime_frame = 0
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 3 if @battle_anime_frame == 128
        when 129..329
          kien_x = 220
          kien_y = 80
          Audio.se_stop if @battle_anime_frame == 129 || @battle_anime_frame == 170
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if @battle_anime_frame == 129
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
          rect = Rect.new(0, 0, 170, 160)
          @back_window.contents.blt(208,98,picture,rect)
          
          case @battle_anime_frame
          
          when 1
            
          when 170..173,210..213,250..253,290..293
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          end
          
        when 330
          Audio.se_stop
          @tec_output_back = false
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          #set_chr_display_out
          @chr_cutin_flag = false
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 341..550
          
          #ray_x = 346
          #ray_y = 136
          back_anime_pattern 9
          case @battle_anime_frame
          when 370..373,410..413,450..453,490..493
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 370 || @battle_anime_frame == 410 || @battle_anime_frame == 450 || @battle_anime_frame == 490
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 22 #17号
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 4
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            @scombo_cha1_anime_type = 1
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 367
          back_x = 266
          back_y = 0
          ray_x = back_x +82
          ray_y = back_y +60
          color = Color.new(255,255,255,260)
          case (@battle_anime_frame - ssframe)
          when 0 #初期化
            @btl_ani_cha_chg_no = @scombo_cha1
            @chax = @scmbc1_x
            @chay = @scmbc1_y
            @output_anime_type = 1
            battle_anime_change 0,2
            #@ray_color = 3
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
            @ray_color = 3
            ray_x = 338
            ray_y = 156

            @genkitama_kanri_frame = []
            @genkitama_kanri_maxflame = 15
            @genkitama_kanri_spdup = 10
            @genkityuushin_x = ray_x -14
            @genkityuushin_y = ray_y +2 + 10
            @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
          when 1..128
            
            ray_x = 324
            ray_y = 120
            
            tame_end = 128
            
            if (@battle_anime_frame - ssframe) == tame_end
              
            elsif (@battle_anime_frame - ssframe) >= tame_end
              
            else
              #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              #rect = Rect.new(0, 0, 8, 10)
              #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
              for i in 0..(@genkitama_kanri_frame.size - 1)
                if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 0
                elsif @genkitama_kanri_frame[i] > 0
                  picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                  rect = Rect.new(0, 0, 8, 10)
                  #idou_x_moto = 4
                  #idou_y_moto = 2
                  case i

                  when 0 #上
                    idou_x = 0
                    idou_y = -2

                  when 1 #左上
                    idou_x = 2
                    idou_y = -2

                  when 2 #左
                    idou_x = 2
                    idou_y = 0
                    
                  when 3 #左下
                    idou_x = 2
                    idou_y = 2
                    
                  when 4 #下
                    idou_x = 0
                    idou_y = 2
                    
                  when 5 #右下
                    idou_x = -2
                    idou_y = 2

                  when 6 #右
                    idou_x = -2
                    idou_y = 0
                    
                  when 7 #右上
                    idou_x = -2
                    idou_y = -2

                  end
                  
                    idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                    idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
              
                  if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                  else
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                  end
                  @genkitama_kanri_frame[i] += 1
                  
                else
                  if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                    @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                  end
                  
                end
              end
            end
            #back_anime_pattern 201,back_x,back_y
            #@tec_back_small = true if (@battle_anime_frame - ssframe) == 128
            #@tec_output_back = false if (@battle_anime_frame - ssframe) == 128
            @chr_cutin = false if (@battle_anime_frame - ssframe) == 128
            @chr_cutin_flag = false if (@battle_anime_frame - ssframe) == 128
            #@tec_output_back_no = 3 if (@battle_anime_frame - ssframe) == 128
            #@tec_back_color = 0 if (@battle_anime_frame - ssframe) == 128
            #@chr_cutin = false if (@battle_anime_frame - ssframe) == 128
          when 129..330
            #kien_x = 220
            #kien_y = 80
            #back_anime_pattern 106
            #Audio.se_stop if (@battle_anime_frame - ssframe) == 129
            @tec_output_back_no = 4
            
            
            @chay = -160
            #kienkizyunframe = 175
            #kiptan = 0
            picture = Cache.picture("Z3_必殺技_電撃地獄玉(17号)")
            bezikat_x = 170
            bezikat_y = 66
            rect = Rect.new(0, 0, 296, 220)
            
            @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
            
            case (@battle_anime_frame - ssframe)
            
            when 1
              
            when 140..260
              sframe = 140
              Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == 140

              ray_x = 302
              ray_y = 224
              @effect_anime_pattern = 235
              
              if (@battle_anime_frame - ssframe) > (sframe + 60)
                @effect_anime_pattern = 289
                ray_x -= 16 
                ray_y -= 16
              end
              
            when 261..330
              sframe = 261
              @effect_anime_pattern = 0 if (@battle_anime_frame - ssframe) == sframe
              Audio.se_stop if (@battle_anime_frame - ssframe) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if (@battle_anime_frame - ssframe) == sframe
              #Audio.se_play("Audio/SE/" + "Z1 ザー")
              @ray_anime_type = 0
              @ray_anime_frame = 0
              #@effect_anime_pattern = 264
              picture = Cache.picture("ZG_必殺技_光線_大(青)")
              rect = Rect.new(0, 0,316,158)
              @back_window.contents.blt(162,220,picture,rect)
            end

          when 331
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 341..367
            ray_y = 106
            @effect_anime_type = 4
            @effect_anime_pattern = 271
              if (@battle_anime_frame - ssframe) == eframe
                @battle_anime_frame = 9998
              end
            end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2896 #あんたも助けるよ！(チャオズと18号)
      back_x = 228
      back_y = 88
      ray_x = 306
      ray_y = 94
      color = Color.new(255,255,255,260)
      
      #18号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 21
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 9
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..199
          sframe = 1
          back_anime_pattern 201,back_x,back_y
          
          ray_x = 290
          ray_y = 132

          case (@battle_anime_frame-sframe)
          when 30..74
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
            battle_anime_change 0,7
            @effect_anime_pattern = 237
          when 75..200
            ray_x -= 8
            ray_y -= 16
            @effect_anime_pattern = 235
          end
        when 200
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @chay = -200
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        when 201..310
          #@tec_output_back_no = 3
          picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
          rect = Rect.new(0, 0, 192, 168)
          @back_window.contents.blt(120,90,picture,rect)
          
          @effect_anime_pattern = 295
        when 311
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #set_chr_display_out
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        when 320
          
          
          #@tec_output_back = false
          #@chr_cutin_flag = false
        when 321..347
          ray_y = 132
          @effect_anime_pattern = 297
          
          if @battle_anime_frame == 347
            @battle_anime_frame = 550
            @effect_anime_pattern = 0
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 21
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 9
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            @scombo_cha1_anime_type = 3
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 427
          back_x = 266
          back_y = 0
          ray_x = 302
          ray_y = 62
          color = Color.new(255,255,255,260)
          case @battle_anime_frame - ssframe
          when 0 #初期化
            #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @btl_ani_cha_chg_no = @scombo_cha1
            @chax = @scmbc1_x
            @chay = @scmbc1_y
            @output_anime_type = 1
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            battle_anime_change 0,2

            #@ray_color = 3
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            @ray_color = 3
            #ray_x = 338
            #ray_y = 156
            @genkitama_kanri_frame = []
            @genkitama_kanri_maxflame = 15
            @genkitama_kanri_spdup = 10
            @genkityuushin_x = ray_x + 12
            @genkityuushin_y = ray_y + 12
            @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
            @chr_cutin = false
          when 1..350
            sframe = 1
            @tec_output_back_no = 4
            @chay = -160

            if $game_variables[177] == 1 #18号衣装No
              picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ(着替)")
            else
              picture = Cache.picture("Z3_必殺技_18号エネルギーウェイブ")
            end
              bezikat_x = 138
              bezikat_y = 96
              rect = Rect.new(0, 0, 296, 220)
            
            @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
            
            #ray_x = 290
            #ray_y = 40
            
            tame_end = 360
            
            if (@battle_anime_frame - ssframe) == tame_end
              
            elsif (@battle_anime_frame - ssframe) >= tame_end
              
            else
              #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              #rect = Rect.new(0, 0, 8, 10)
              #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
              for i in 0..(@genkitama_kanri_frame.size - 1)
                if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 0
                elsif @genkitama_kanri_frame[i] > 0
                  
                  
                  picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                  rect = Rect.new(0, 0, 8, 10)
                  #idou_x_moto = 4
                  #idou_y_moto = 2
                  case i

                  when 0 #上
                    idou_x = 0
                    idou_y = -2

                  when 1 #左上
                    idou_x = 2
                    idou_y = -2

                  when 2 #左
                    idou_x = 2
                    idou_y = 0
                    
                  when 3 #左下
                    idou_x = 2
                    idou_y = 2
                    
                  when 4 #下
                    idou_x = 0
                    idou_y = 2
                    
                  when 5 #右下
                    idou_x = -2
                    idou_y = 2

                  when 6 #右
                    idou_x = -2
                    idou_y = 0
                    
                  when 7 #右上
                    idou_x = -2
                    idou_y = -2

                  end
                  
                    idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                    idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
              
                  if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                  else
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                  end
                  @genkitama_kanri_frame[i] += 1
                  
                else
                  if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                    @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                  end
                  
                end
              end
            end
            
            if (@battle_anime_frame - ssframe) == (sframe + 90)
              @effect_anime_pattern = 235
            end
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if (@battle_anime_frame - ssframe) == (sframe + 90)
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == (sframe + 90)
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if (@battle_anime_frame - ssframe) == (sframe + 180)
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == (sframe + 180)
            if (@battle_anime_frame - ssframe) > (sframe + 240)
              
              @effect_anime_pattern = 289
              ray_x -= 16 
              ray_y -= 16
            end
            
            #back_anime_pattern 201,back_x,back_y
            #@tec_back_small = true if @battle_anime_frame == 128
            #@tec_output_back = false if @battle_anime_frame == 128
            @chr_cutin = true if (@battle_anime_frame - ssframe) == 350
            @tec_output_back_no = 0 if (@battle_anime_frame - ssframe) == 350
            #@chr_cutin_flag = false if @battle_anime_frame == 128
            #@tec_output_back_no = 3 if @battle_anime_frame == 128
            #@tec_back_color = 0 if @battle_anime_frame == 128
            #@chr_cutin = false if @battle_anime_frame == 128
          when 351..390
            sframe = 351
            if (@battle_anime_frame - ssframe) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") 
              @effect_anime_frame = 0
              @effect_anime_type = 0
            end
            @chay = STANDARD_CHAY
            @output_anime_type = 1
            battle_anime_change 0,10
            @effect_anime_pattern = 239
            ray_x = 338
            ray_y = 104

          when 391
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 401..427
            ray_y = 106
            @effect_anime_pattern = 240
            
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2897 #お前も助けるぞ！(チャオズと16号)
      back_x = 228
      back_y = 88
      ray_x = 306
      ray_y = 94
      color = Color.new(255,255,255,260)
      
      #16号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 23
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 9
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

       case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..199
          sframe = 1
          back_anime_pattern 201,back_x,back_y
          
          ray_x = 290
          ray_y = 132

          case (@battle_anime_frame-sframe)
          when 30..74
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
            battle_anime_change 0,7
            @effect_anime_pattern = 237
          when 75..200
            ray_x -= 8
            ray_y -= 16
            @effect_anime_pattern = 235
          end
        when 200
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @chay = -200
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        when 201..310
          #@tec_output_back_no = 3
          picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
          rect = Rect.new(0, 0, 192, 168)
          @back_window.contents.blt(120,90,picture,rect)
          
          @effect_anime_pattern = 295
        when 311
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #set_chr_display_out
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        when 320
          
          
          #@tec_output_back = false
          #@chr_cutin_flag = false
        when 321..347
          ray_y = 132
          @effect_anime_pattern = 297
          
          if @battle_anime_frame == 347
            @battle_anime_frame = 550
            @effect_anime_pattern = 0
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 23 #16号
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 8
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            #@scombo_cha1_anime_type = 3
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            @scombo_cha1_anime_type = 0
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 337
          back_x = 266
          back_y = 0
          ray_x = back_x +82
          ray_y = back_y +60
          color = Color.new(255,255,255,260)
        case (@battle_anime_frame - ssframe)
        when 0 #初期化
          @btl_ani_cha_chg_no = @scombo_cha1
          @chax = @scmbc1_x
          @chay = @scmbc1_y
          @output_anime_type = 1
          battle_anime_change 0,4
          #@ray_color = 3
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          @ray_color = 3
          ray_x = 338
          ray_y = 156
          @genkitama_kanri_frame = []
          @genkitama_kanri_maxflame = 15
          @genkitama_kanri_spdup = 10
          @genkityuushin_x = ray_x -14
          @genkityuushin_y = ray_y +2
          @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
        when 1..128
          
          ray_x = 324
          ray_y = 120
          
          tame_end = 128
          
          if (@battle_anime_frame - ssframe) == tame_end
            
          elsif (@battle_anime_frame - ssframe) >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
          #back_anime_pattern 201,back_x,back_y
          #@tec_back_small = true if @battle_anime_frame == 128
          @tec_output_back = false if (@battle_anime_frame - ssframe) == 128
          @chr_cutin = false if (@battle_anime_frame - ssframe) == 128
          @chr_cutin_flag = false if (@battle_anime_frame - ssframe) == 128
          #@tec_output_back_no = 3 if @battle_anime_frame == 128
          #@tec_back_color = 0 if @battle_anime_frame == 128
          #@chr_cutin = false if @battle_anime_frame == 128
        when 129..300
          #kien_x = 220
          #kien_y = 80
          back_anime_pattern 106
          #Audio.se_stop if @battle_anime_frame == 129
          
          @chay = -160
          #kienkizyunframe = 175
          #kiptan = 0
          picture = Cache.picture("Z3_必殺技_ヘルズフラッシュ(16号)")
          bezikat_x = 56
          bezikat_y = 96
          rect = Rect.new(0, 0, 302, 220)
          
          if (@battle_anime_frame - ssframe) == 231 || (@battle_anime_frame - ssframe) == 232 || (@battle_anime_frame - ssframe) == 233
            bezikat_x -= 2
            bezikat_y -= 2
          elsif (@battle_anime_frame - ssframe) == 232
            bezikat_x -= 4
            bezikat_y -= 4
          elsif (@battle_anime_frame - ssframe) == 233
            bezikat_x -= 6
            bezikat_y -= 6
          elsif (@battle_anime_frame - ssframe) == 234
            bezikat_x -= 4
            bezikat_y -= 4
          elsif (@battle_anime_frame - ssframe) == 235
            bezikat_x -= 2
            bezikat_y -= 2
          end
          @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
          
          case (@battle_anime_frame - ssframe)
          
          when 1
            
          when 140..230
            Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == 140

            ray_x = 362
            ray_y = 244
            @effect_anime_pattern = 235
          when 231
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
            @ray_anime_type = 0
            @ray_anime_frame = 0
            #@effect_anime_pattern = 264
            @effect_anime_pattern = 275
          end

          when 301
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 311..337
            ray_y = 114
            @effect_anime_pattern = 265
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2898 #今度は俺が助けてやる(チャオズと17号)
      back_x = 228
      back_y = 88
      ray_x = 306
      ray_y = 94
      color = Color.new(255,255,255,260)
      
      #17号
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 22
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 9
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #天津飯
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true

       case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..199
          sframe = 1
          back_anime_pattern 201,back_x,back_y
          
          ray_x = 290
          ray_y = 132

          case (@battle_anime_frame-sframe)
          when 30..74
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
            battle_anime_change 0,7
            @effect_anime_pattern = 237
          when 75..200
            ray_x -= 8
            ray_y -= 16
            @effect_anime_pattern = 235
          end
        when 200
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @chay = -200
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        when 201..310
          #@tec_output_back_no = 3
          picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
          rect = Rect.new(0, 0, 192, 168)
          @back_window.contents.blt(120,90,picture,rect)
          
          @effect_anime_pattern = 295
        when 311
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #set_chr_display_out
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        when 320
          
          
          #@tec_output_back = false
          #@chr_cutin_flag = false
        when 321..347
          ray_y = 132
          @effect_anime_pattern = 297
          
          if @battle_anime_frame == 347
            @battle_anime_frame = 550
            @effect_anime_pattern = 0
          end
        when 551..670
          sframe = 551
          if @battle_anime_frame == sframe
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY - 96
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 死亡1")
            @output_anime_type = 0
            battle_anime_change 0,16
            @eney = -200
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @chax -= 4
            @chay += 4
          when 21..120
            battle_anime_change 0,17
            @chax -= 2
            @chay += 4
          end
        when 671..710
          sframe = 671
          if @battle_anime_frame == sframe
            @chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back = true
            @enex = 720
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          case @battle_anime_frame - sframe
          
          when 0..36
            @enex -= 12
            
          end
          
        when 711..750
          sframe = 711
          if @battle_anime_frame == sframe
            @scombo_cha1 = 22 #17号
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @scombo_cha1_anime_type = 4
            @scmbc1_x = -184#-208
            @scmbc1_y = 204
          end
          
          case @battle_anime_frame - sframe
          
          when 0..20
            @scmbc1_x += 24
            @scmbc1_y -= 4
          when 21
            @scmbc1_y = STANDARD_CHAY
            @scombo_cha1_anime_type = 1
            @enex += 20
            @eney -= 8
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          when 22..40
            @enex += 20
            @eney -= 8
          end
          
          if (@battle_anime_frame - sframe) <= 20
            back_anime_pattern 116,@scmbc1_x,@scmbc1_y
          else
            back_anime_pattern 115,@scmbc1_x,@scmbc1_y
          end
        when 751..820
          sframe = 751
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = -124
          end
          
          case @battle_anime_frame - sframe
          
          when 0..60
            battle_anime_change 0,17 if (@battle_anime_frame - sframe) == 0
            @chax -= 2
            @chay += 4
            
            if STANDARD_CHAY < @chay
              @chay = STANDARD_CHAY
            end
            
            if (@battle_anime_frame - sframe) == 57
              battle_anime_change 0,16
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる")
            end
          when 61
            
            
          when 65
            battle_anime_change 0,0
          end
          
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 821..850
          sframe = 821
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if (@battle_anime_frame - sframe) == 0
          @chax -= 16
          
          @scmbc1_x -= 4
          
          if @scmbc1_x < TEC_CENTER_CHAX
            @scmbc1_x = TEC_CENTER_CHAX
          end
          back_anime_pattern 115,@scmbc1_x,@scmbc1_y
        when 851..9000
          ssframe = 851
          eframe = 367
          back_x = 266
          back_y = 0
          ray_x = back_x +82
          ray_y = back_y +60
          color = Color.new(255,255,255,260)
          case (@battle_anime_frame - ssframe)
          when 0 #初期化
            @btl_ani_cha_chg_no = @scombo_cha1
            @chax = @scmbc1_x
            @chay = @scmbc1_y
            @output_anime_type = 1
            battle_anime_change 0,2
            #@ray_color = 3
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
            @ray_color = 3
            ray_x = 338
            ray_y = 156

            @genkitama_kanri_frame = []
            @genkitama_kanri_maxflame = 15
            @genkitama_kanri_spdup = 10
            @genkityuushin_x = ray_x -14
            @genkityuushin_y = ray_y +2 + 10
            @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
          when 1..128
            
            ray_x = 324
            ray_y = 120
            
            tame_end = 128
            
            if (@battle_anime_frame - ssframe) == tame_end
              
            elsif (@battle_anime_frame - ssframe) >= tame_end
              
            else
              #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
              #rect = Rect.new(0, 0, 8, 10)
              #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
              for i in 0..(@genkitama_kanri_frame.size - 1)
                if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 0
                elsif @genkitama_kanri_frame[i] > 0
                  picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                  rect = Rect.new(0, 0, 8, 10)
                  #idou_x_moto = 4
                  #idou_y_moto = 2
                  case i

                  when 0 #上
                    idou_x = 0
                    idou_y = -2

                  when 1 #左上
                    idou_x = 2
                    idou_y = -2

                  when 2 #左
                    idou_x = 2
                    idou_y = 0
                    
                  when 3 #左下
                    idou_x = 2
                    idou_y = 2
                    
                  when 4 #下
                    idou_x = 0
                    idou_y = 2
                    
                  when 5 #右下
                    idou_x = -2
                    idou_y = 2

                  when 6 #右
                    idou_x = -2
                    idou_y = 0
                    
                  when 7 #右上
                    idou_x = -2
                    idou_y = -2

                  end
                  
                    idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                    idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
              
                  if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                  else
                    @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                  end
                  @genkitama_kanri_frame[i] += 1
                  
                else
                  if (tame_end - (@battle_anime_frame - ssframe)) > @genkitama_kanri_maxflame
                    @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                  end
                  
                end
              end
            end
            #back_anime_pattern 201,back_x,back_y
            #@tec_back_small = true if (@battle_anime_frame - ssframe) == 128
            #@tec_output_back = false if (@battle_anime_frame - ssframe) == 128
            @chr_cutin = false if (@battle_anime_frame - ssframe) == 128
            @chr_cutin_flag = false if (@battle_anime_frame - ssframe) == 128
            #@tec_output_back_no = 3 if (@battle_anime_frame - ssframe) == 128
            #@tec_back_color = 0 if (@battle_anime_frame - ssframe) == 128
            #@chr_cutin = false if (@battle_anime_frame - ssframe) == 128
          when 129..330
            #kien_x = 220
            #kien_y = 80
            #back_anime_pattern 106
            #Audio.se_stop if (@battle_anime_frame - ssframe) == 129
            @tec_output_back_no = 4
            
            
            @chay = -160
            #kienkizyunframe = 175
            #kiptan = 0
            picture = Cache.picture("Z3_必殺技_電撃地獄玉(17号)")
            bezikat_x = 170
            bezikat_y = 66
            rect = Rect.new(0, 0, 296, 220)
            
            @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
            
            case (@battle_anime_frame - ssframe)
            
            when 1
              
            when 140..260
              sframe = 140
              Audio.se_play("Audio/SE/" + "Z1 気を溜める") if (@battle_anime_frame - ssframe) == 140

              ray_x = 302
              ray_y = 224
              @effect_anime_pattern = 235
              
              if (@battle_anime_frame - ssframe) > (sframe + 60)
                @effect_anime_pattern = 289
                ray_x -= 16 
                ray_y -= 16
              end
              
            when 261..330
              sframe = 261
              @effect_anime_pattern = 0 if (@battle_anime_frame - ssframe) == sframe
              Audio.se_stop if (@battle_anime_frame - ssframe) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if (@battle_anime_frame - ssframe) == sframe
              #Audio.se_play("Audio/SE/" + "Z1 ザー")
              @ray_anime_type = 0
              @ray_anime_frame = 0
              #@effect_anime_pattern = 264
              picture = Cache.picture("ZG_必殺技_光線_大(青)")
              rect = Rect.new(0, 0,316,158)
              @back_window.contents.blt(162,220,picture,rect)
            end

          when 331
            @tec_output_back = true
            @chr_cutin = true
            @chr_cutin_flag = true
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @tec_output_back_no = 0
            set_chr_display_out
            #Audio.se_play("Audio/SE/" + "Z1 ザー")
          when 341..367
            ray_y = 106
            @effect_anime_type = 4
            @effect_anime_pattern = 271
              if (@battle_anime_frame - ssframe) == eframe
                @battle_anime_frame = 9998
              end
            end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2899 #流派を超えた連携！(天津飯と亀仙人)
      ray_x = 340
      ray_y = 150
      
      #天津飯
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 8
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 24
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #亀仙人
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        #萬國驚天掌
        if $btl_progress == 2
          backhai_no = 201
          back_x = 218
          back_y = 88
        else
          backhai_no = 101
          back_x = 200
          back_y = 32
        end
          
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          @back_anime_frame = 0
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 1
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90
          battle_anime_change 0,5
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 283
          #back_anime_pattern 101,back_x,back_y
        when 91..128
          #back_anime_pattern 101,back_x,back_y
        when 129
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 139
          #set_chr_display_out
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @chay = -200
        when 140..166
          @effect_anime_pattern = 44
        when 167..266
          sframe = 167
          if (@battle_anime_frame - sframe) == 0 #初期化
            Audio.se_play("Audio/SE/" + "DB3 SE091")
            @effect_anime_pattern = 0
          end
          
          case (@battle_anime_frame - sframe) % 2
          
          when 0
            @gx = 6
          when 1
            @gx = -6
          end
          
          if @battle_anime_frame == 266
            @gx = 0
            @battle_anime_frame = 300
          end
        when 301..9000
          ssframe = 301
          eframe = 550
          back_x = 228
          back_y = 88
          ray_x = 346
          ray_y = 66
          color = Color.new(255,255,255,260)
          #@back_window.contents.fill_rect(0,0,640,378,color)
        case (@battle_anime_frame - ssframe)
        when 0 #初期化
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @eney = -200
          @btl_ani_cha_chg_no = 8 #天津飯
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
        when 1..128
          back_anime_pattern 201,back_x,back_y
          @tec_output_back_no = 3 if (@battle_anime_frame - ssframe) == 128
        when 129..329
          kien_x = 220
          kien_y = 80
          Audio.se_stop if (@battle_anime_frame - ssframe) == 129 || (@battle_anime_frame - ssframe) == 170
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if (@battle_anime_frame - ssframe) == 129
          @chay = -160
          kienkizyunframe = 175
          kiptan = 0
          picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
          rect = Rect.new(0, 0, 170, 160)
          @back_window.contents.blt(208,98,picture,rect)
          
          case (@battle_anime_frame - ssframe)
          
          when 1
            
          when 170..173,210..213,250..253,290..293
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if (@battle_anime_frame - ssframe) == 170 || (@battle_anime_frame - ssframe) == 210 || (@battle_anime_frame - ssframe) == 250 || (@battle_anime_frame - ssframe) == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if (@battle_anime_frame - ssframe) == 170 || (@battle_anime_frame - ssframe) == 210 || (@battle_anime_frame - ssframe) == 250 || (@battle_anime_frame - ssframe) == 290
          end
          
        when 330
          Audio.se_stop
          @tec_output_back = false
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 341..550
          #ray_x = 346
          #ray_y = 136
          back_anime_pattern 9
          case (@battle_anime_frame - ssframe)
          when 370..373,410..413,450..453,490..493
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if (@battle_anime_frame - ssframe) == 170 || (@battle_anime_frame - ssframe) == 210 || (@battle_anime_frame - ssframe) == 250 || (@battle_anime_frame - ssframe) == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if (@battle_anime_frame - ssframe) == 370 || (@battle_anime_frame - ssframe) == 410 || (@battle_anime_frame - ssframe) == 450 || (@battle_anime_frame - ssframe) == 490
          end
            
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2900 #流派を超えた連携(チャオズと亀仙人)
      ray_x = 340
      ray_y = 150
      
      #チャオズ
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 9
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 24
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = @scombo_cha1 if @battle_anime_frame == 60 #亀仙人
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        #萬國驚天掌
        if $btl_progress == 2
          backhai_no = 201
          back_x = 218
          back_y = 88
        else
          backhai_no = 101
          back_x = 200
          back_y = 32
        end
          
        case @battle_anime_frame
        when 0 #初期化
          if $btl_progress == 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          end
          @back_anime_frame = 0
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 1
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90
          battle_anime_change 0,5
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 283
          #back_anime_pattern 101,back_x,back_y
        when 91..128
          #back_anime_pattern 101,back_x,back_y
        when 129
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 139
          #set_chr_display_out
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @chay = -200
        when 140..166
          @effect_anime_pattern = 44
        when 167..266
          sframe = 167
          if (@battle_anime_frame - sframe) == 0 #初期化
            Audio.se_play("Audio/SE/" + "DB3 SE091")
            @effect_anime_pattern = 0
          end
          
          case (@battle_anime_frame - sframe) % 2
          
          when 0
            @gx = 6
          when 1
            @gx = -6
          end
          
          if @battle_anime_frame == 266
            @gx = 0
            @battle_anime_frame = 300
          end
        when 301..9000
          ssframe = 301
          eframe = 347
          back_x = 228
          back_y = 88
          ray_x = 306
          ray_y = 94
          color = Color.new(255,255,255,260)
          #@back_window.contents.fill_rect(0,0,640,378,color)
          case (@battle_anime_frame - ssframe)
          when 0 #初期化
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY
            @eney = -200
            @btl_ani_cha_chg_no = 9 #チャオズ
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
            @output_anime_type = 1
            battle_anime_change 0,0
            @ray_color = 0
          when 1..199
            sframe = 1
            back_anime_pattern 201,back_x,back_y
            
            ray_x = 290
            ray_y = 132

            case ((@battle_anime_frame - ssframe)-sframe)
            when 30..74
              Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if ((@battle_anime_frame - ssframe)-sframe) == 30
              battle_anime_change 0,7
              @effect_anime_pattern = 237
            when 75..200
              ray_x -= 8
              ray_y -= 16
              @effect_anime_pattern = 235
            end
          when 200
            Audio.se_stop
            #battle_anime_change 0,3
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @chay = -200
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          when 201..310
            #@tec_output_back_no = 3
            picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
            rect = Rect.new(0, 0, 192, 168)
            @back_window.contents.blt(120,90,picture,rect)
            
            @effect_anime_pattern = 295
          when 311
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            set_chr_display_out
          when 320
            
            
            #@tec_output_back = false
            #@chr_cutin_flag = false
          when 321..347
            ray_y = 132
            @effect_anime_pattern = 297
            if (@battle_anime_frame - ssframe) == eframe
              @battle_anime_frame = 9998
            end
          end
      
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
   when 2901 #ダブル魔封波(ピッコロと亀仙人)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      wake_color = Color.new(188,188,188,256)
      color = Color.new(255,255,255,260)
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 4
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 24
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 24 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 86
        else
          backhai_no = 102
          back_x = 198
          back_y = 32
        end
        ray_x = 340
        ray_y = 96
        case @battle_anime_frame
        when 0 #初期化
          @back_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 0
          @output_anime_type = 1
          battle_anime_change 0,6
          
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,6
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141..180
          
          back_x -= 12*(@battle_anime_frame-140)
          @ax = -12
          #ray_x -= 2*(@battle_anime_frame-140)
          back_anime_pattern backhai_no,back_x,back_y
          if @battle_anime_frame > 161
            #CENTER_ENEX = 304
            #STANDARD_ENEX = 602
          end
          @back_window.contents.fill_rect(640-16*(@battle_anime_frame-140),64,6,228,wake_color)
        when 181..220
          if @battle_anime_frame == 181
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 1
          end
          @ax = 0
          #if @battle_anime_frame >= 181 && @battle_anime_frame <= 190
          back_x = 678 + 30

          back_x -= 12*(@battle_anime_frame-180)
          back_anime_pattern backhai_no,back_x,back_y
          @scombo_cha1 = 24
          @scombo_cha1_anime_type = 6
          @scombo_cha2 = 4
          @scombo_cha2_anime_type = 21
          back_x = 730
          back_x -= 12*(@battle_anime_frame-180)
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          #p back_x
          #end
          #TEC_CENTER_CHAX = 266
        when 221..270
          back_x = 198 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 271..360
          if @battle_anime_frame == 271
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          
          back_x = 198 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 361..469
          if @battle_anime_frame == 361
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 1
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          end
          #back_y = 32
          back_x = 198 + 30 + (@battle_anime_frame-360) * 2
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          @ray_color = 0
          #back_y = 32
          back_x = (-220 + 30) + (@battle_anime_frame-360) * 2
          back_y = 32 + 54

          #back_x = -220 + (@battle_anime_frame-360) * 2
          back_anime_pattern backhai_no,back_x,back_y
          
          #ピッコロ表示
          @back_anime_frame -= 1
          @ray_color = 1
          back_x = -154 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          
          if @battle_anime_frame < 412
            nakasen_x = 4*(@battle_anime_frame-360)
          else
            nakasen_x = 2*(@battle_anime_frame-412) + 4 * 52
          end
          nakasen_x = 320 if nakasen_x >= 320
          
          @back_window.contents.fill_rect(nakasen_x,64,6,228,wake_color)
          #p @battle_anime_frame,nakasen_x
        when 470..520
          #ピッコロ
          @ray_color = 1
          #back_y = 32

          back_x = 418 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          
          
          #亀仙人
          back_x = 0 + 30
          back_y = 32 + 54
          @ray_color = 0
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 521..550
          sframe = 521
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "DB3 SE103")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          end
          

          @scombo_cha1_anime_type = 5
          @scombo_cha2_anime_type = 24
          @ray_color = 3

          back_x = 470
          back_y = STANDARD_ENEY

          back_anime_pattern 118,back_x,back_y
          
          @back_anime_frame -= 1
  
          @ray_color = 0

          back_x = 66
          back_y = STANDARD_ENEY

          back_anime_pattern 116,back_x,back_y

          #@effect_anime_pattern = 249
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 551..610
          sframe = 551
          
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 SE103")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          end
          case @battle_anime_frame - sframe
          
          when 0,3
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          
          back_x = 470
          back_y = STANDARD_ENEY

          back_anime_pattern 118,back_x,back_y
          
          @back_anime_frame -= 1

          back_x = 66
          back_y = STANDARD_ENEY

          back_anime_pattern 116,back_x,back_y
          
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
          
        when 611..6000
          ssframe = 611


          ray_x = 242
          ray_y = 120

          back_x = 218
          back_y = 88
          case (@battle_anime_frame - ssframe + 250)
          
          when 250
            @nCenterX = 200 #回転する位置横
            @nCenterY = 90  #回転する位置縦
            @nRadiusX = 100 #回転する量横に伸ばす
            @nRadiusY = 50 #回転する量縦に伸ばす
            @nRadian = 0 #回転スピード
            @tec_output_back_no = 0
            #@chr_cutin_flag = true
            #@chr_cutin = true
            set_chr_display_out
          when 270
            Audio.se_play("Audio/SE/" + "DB3 SE103")
            @back_anime_frame = 0
            @back_anime_type = 54
          when 281..340
            
            if (@battle_anime_frame - ssframe + 250) >= 281 && (@battle_anime_frame - ssframe + 250) <= 284
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            battle_anime_change 1,16
            case @back_anime_type
              when 5,56,54 #動かない
                @enex += 0
              when 6 #右
                @enex += 12
              when 4 #左
                @enex -= 12
              when 2 #下
                
              when 8 #上
            end
              
            @back_anime_frame += 1
            
            if @back_anime_frame >= 3
              @back_anime_frame = 0
              case @back_anime_type
                      
                when 54 #左から右
                  @back_anime_type = 6
                when 56 #右から左
                  @back_anime_type = 4
                when 6 #右
                  @back_anime_type = 56
                when 4 #左
                  @back_anime_type = 54
                when 2 #下
                  
                when 8 #上
                
              end
            end
            
            if (@battle_anime_frame - ssframe + 250) == 340
              @temp_enex = @enex
              @temp_eney = @eney
            end
          when 341..347
            @enex += 12
          when 348..460
            sframe = 348
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_stop if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            #p @back_anime_frame
            @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
            @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
            #@temp_enex += 0.5
            @nRadian += 0.35
          when 461..573
            sframe = 461
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_stop if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            #p @back_anime_frame
            @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
            @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
            #@temp_enex += 0.5
            @nRadian -= 0.45
          when 574..663
            sframe = 574
            eframe = 663
            @tec_output_back_no = 3
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")if (@battle_anime_frame - ssframe + 250) == sframe
            battle_anime_change 1,17
            @enex -= 16
            @eney -= 16#8
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @enex = 0
              @eney = 360
              Audio.se_stop
            end
          when 664..753
            sframe = 664
            eframe = 753
            @tec_output_back_no = 2
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")if (@battle_anime_frame - ssframe + 250) == sframe
            battle_anime_change 1,17
            @enex += 24
            @eney -= 24#8
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @enex = CENTER_ENEX
              @eney = -180
              Audio.se_stop
            end
          when 754..800
            sframe = 754
            eframe = 800
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            if (@battle_anime_frame - ssframe + 250) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
              Audio.se_play("Audio/SE/" + "ZG 光線1")
            end
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @battle_anime_frame = 9998
            end
            @tec_output_back_no = 1
            @eney += 24
          end
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
   when 2902 #ダブル魔封波(若者と亀仙人)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      wake_color = Color.new(188,188,188,256)
      color = Color.new(255,255,255,260)
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 15
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 24
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 24 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 86
        else
          backhai_no = 102
          back_x = 198
          back_y = 32
        end
        ray_x = 340
        ray_y = 96
        case @battle_anime_frame
        when 0 #初期化
          @back_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 0
          @output_anime_type = 1
          battle_anime_change 0,6
          
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,6
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141..180
          
          back_x -= 12*(@battle_anime_frame-140)
          @ax = -12
          #ray_x -= 2*(@battle_anime_frame-140)
          back_anime_pattern backhai_no,back_x,back_y
          if @battle_anime_frame > 161
            #CENTER_ENEX = 304
            #STANDARD_ENEX = 602
          end
          @back_window.contents.fill_rect(640-16*(@battle_anime_frame-140),64,6,228,wake_color)
        when 181..220
          if @battle_anime_frame == 181
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 3
            
          end
          @ax = 0
          #if @battle_anime_frame >= 181 && @battle_anime_frame <= 190
          back_x = 678 + 30

          back_x -= 12*(@battle_anime_frame-180)
          back_anime_pattern backhai_no,back_x,back_y
          @scombo_cha1 = 24
          @scombo_cha1_anime_type = 6
          @scombo_cha2 = 15
          @scombo_cha2_anime_type = 31
          back_x = 730
          back_x -= 12*(@battle_anime_frame-180)
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          #p back_x
          #end
          #TEC_CENTER_CHAX = 266
        when 221..270
          back_x = 198 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 271..360
          if @battle_anime_frame == 271
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            
          end
          
          back_x = 198 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
        when 361..469
          if @battle_anime_frame == 361
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 3
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する

          end
          #back_y = 32
          back_x = 198 + 30 + (@battle_anime_frame-360) * 2
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 250 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          @ray_color = 0
          #back_y = 32
          back_x = (-220 + 30) + (@battle_anime_frame-360) * 2
          back_y = 32 + 54

          #back_x = -220 + (@battle_anime_frame-360) * 2
          back_anime_pattern backhai_no,back_x,back_y
          
          #若者表示
          @back_anime_frame -= 1
          @ray_color = 3
          back_x = -154 + (@battle_anime_frame-360) * 2
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          
          if @battle_anime_frame < 412
            nakasen_x = 4*(@battle_anime_frame-360)
          else
            nakasen_x = 2*(@battle_anime_frame-412) + 4 * 52
          end
          nakasen_x = 320 if nakasen_x >= 320
          
          @back_window.contents.fill_rect(nakasen_x,64,6,228,wake_color)
          #p @battle_anime_frame,nakasen_x
        when 470..520
          #若者
          @ray_color = 3
          #back_y = 32

          back_x = 418 + 30

          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 470
          back_y = STANDARD_ENEY
          back_anime_pattern 118,back_x,back_y
          @back_anime_frame -= 1
          
          
          #亀仙人
          back_x = 0 + 30
          back_y = 32 + 54
          @ray_color = 0
          
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1
          back_x = 66
          back_y = STANDARD_ENEY
          back_anime_pattern 116,back_x,back_y
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 521..550
          sframe = 521
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "DB3 SE103")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          end
          

          @scombo_cha1_anime_type = 5
          @scombo_cha2_anime_type = 29

          back_x = 470
          back_y = STANDARD_ENEY

          back_anime_pattern 118,back_x,back_y
          
          @back_anime_frame -= 1
  
          @ray_color = 0

          back_x = 66
          back_y = STANDARD_ENEY

          back_anime_pattern 116,back_x,back_y

          #@effect_anime_pattern = 249
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
        when 551..610
          sframe = 551
          
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 SE103")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          end
          case @battle_anime_frame - sframe
          
          when 0,3
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          
          back_x = 470
          back_y = STANDARD_ENEY

          back_anime_pattern 118,back_x,back_y
          
          @back_anime_frame -= 1

          back_x = 66
          back_y = STANDARD_ENEY

          back_anime_pattern 116,back_x,back_y
          
          @back_window.contents.fill_rect(320,64,6,228,wake_color)
          
        when 611..6000
          ssframe = 611


          ray_x = 242
          ray_y = 120

          back_x = 218
          back_y = 88
          case (@battle_anime_frame - ssframe + 250)
          
          when 250
            @nCenterX = 200 #回転する位置横
            @nCenterY = 90  #回転する位置縦
            @nRadiusX = 100 #回転する量横に伸ばす
            @nRadiusY = 50 #回転する量縦に伸ばす
            @nRadian = 0 #回転スピード
            @tec_output_back_no = 0
            #@chr_cutin_flag = true
            #@chr_cutin = true
            set_chr_display_out
          when 270
            Audio.se_play("Audio/SE/" + "DB3 SE103")
            @back_anime_frame = 0
            @back_anime_type = 54
          when 281..340
            
            if (@battle_anime_frame - ssframe + 250) >= 281 && (@battle_anime_frame - ssframe + 250) <= 284
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            battle_anime_change 1,16
            case @back_anime_type
              when 5,56,54 #動かない
                @enex += 0
              when 6 #右
                @enex += 12
              when 4 #左
                @enex -= 12
              when 2 #下
                
              when 8 #上
            end
              
            @back_anime_frame += 1
            
            if @back_anime_frame >= 3
              @back_anime_frame = 0
              case @back_anime_type
                      
                when 54 #左から右
                  @back_anime_type = 6
                when 56 #右から左
                  @back_anime_type = 4
                when 6 #右
                  @back_anime_type = 56
                when 4 #左
                  @back_anime_type = 54
                when 2 #下
                  
                when 8 #上
                
              end
            end
            
            if (@battle_anime_frame - ssframe + 250) == 340
              @temp_enex = @enex
              @temp_eney = @eney
            end
          when 341..347
            @enex += 12
          when 348..460
            sframe = 348
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_stop if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            #p @back_anime_frame
            @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
            @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
            #@temp_enex += 0.5
            @nRadian += 0.35
          when 461..573
            sframe = 461
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_stop if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            #p @back_anime_frame
            @enex = @temp_enex+Math.cos(@nRadian)*@nRadiusX;
            @eney = @temp_eney+Math.sin(@nRadian)*@nRadiusY;
            #@temp_enex += 0.5
            @nRadian -= 0.45
          when 574..663
            sframe = 574
            eframe = 663
            @tec_output_back_no = 3
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")if (@battle_anime_frame - ssframe + 250) == sframe
            battle_anime_change 1,17
            @enex -= 16
            @eney -= 16#8
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @enex = 0
              @eney = 360
              Audio.se_stop
            end
          when 664..753
            sframe = 664
            eframe = 753
            @tec_output_back_no = 2
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")if (@battle_anime_frame - ssframe + 250) == sframe
            Audio.se_play("Audio/SE/" + "Z1 ゴー")if (@battle_anime_frame - ssframe + 250) == sframe
            battle_anime_change 1,17
            @enex += 24
            @eney -= 24#8
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @enex = CENTER_ENEX
              @eney = -180
              Audio.se_stop
            end
          when 754..800
            sframe = 754
            eframe = 800
            if (@battle_anime_frame - ssframe + 250) >= sframe && (@battle_anime_frame - ssframe + 250) <= sframe + 3
              @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            end
            if (@battle_anime_frame - ssframe + 250) == sframe
              Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
              Audio.se_play("Audio/SE/" + "ZG 光線1")
            end
            
            if (@battle_anime_frame - ssframe + 250) == eframe
              @battle_anime_frame = 9998
            end
            @tec_output_back_no = 1
            @eney += 24
          end
        when 9999
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
      
   when 2903 #スピリッツかめはめ波(悟空とバーダック)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] ==14 #超悟空
          @scombo_cha2 = 32
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 32 #超バーダック
          @scombo_cha2 = 14
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 32 && @battle_anime_frame == 40 #バーダック
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 14
        @scombo_cha2 = 32
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
        
        if @battle_anime_frame == 59
          #@tec_output_back_no = 1 #縦に変更
          #@effect_anime_pattern = 0
          #@chr_cutin = false
        end
      when 60
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,0
        @scombo_cha2_anime_type = 4
        @ray_color = 3
        back_x = 234
        back_y = 96
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 188..240
        sframe = 188
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        @output_anime_type = 0
        battle_anime_change 0,16
        @scombo_cha2_anime_type = 3

        @chay -= 16
        back_anime_pattern 118,TEC_CENTER_CHAX + (@battle_anime_frame - sframe) * 24 ,STANDARD_CHAY + 50 - (@battle_anime_frame - sframe) * 4
        
      when 241..259
        sframe = 241
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @btl_ani_cha_chg_no = 32 #バーダックにチェンジ
          @output_anime_type = 1
          battle_anime_change 0,3
          @chax = -176
          @chay = STANDARD_CHAY + 72
        end
        
        @chax += 24
        @chay -= 4
        
        
        case (@battle_anime_frame - sframe)
        
        when 0..17
          
        when 18
          @output_anime_type = 0
        end
      when 260..298
        sframe = 260
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 7..10,15..18,23..26,31..34
          @chax += 2
          battle_anime_change 0,1
        when 11..14,19..22,27..30,35..38
          @chax += 2
          battle_anime_change 0,2
        end

        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 16
          @eney -= 4
          battle_anime_change 1,16
        when 4..6
          @enex -= 16
          @eney += 4
        when 7..8
          @enex += 2
        when 9..38
          @enex += 2
        end
 
        #SE
        case (@battle_anime_frame - sframe)
        
        when 7,11,15,19,23,27,31,35
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 299..329
        sframe = 299
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..8 #
          @chax -= 16
          battle_anime_change 0,16
        when 9..12
          @chax += 24
          @output_anime_type = 1
          battle_anime_change 0,8
        when 13
          @chax += 24
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        end
        
        #敵
        case (@battle_anime_frame - sframe)

        when 13..30
          @enex += 24
          battle_anime_change 1,17
        end
      when 330..388
        sframe = 330
        if @battle_anime_frame == sframe
          @enex = -200
          @chax = 640
          @chay = STANDARD_CHAY
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 14 #悟空にチェンジ
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 16..23
          @chax -= 18
          battle_anime_change 0,10
        when 24..25
          @chax -= 18
          battle_anime_change 0,11
        when 34..37,42..45,50..53
          @chax -= 2
          battle_anime_change 0,14
        when 30..33,38..41,46..49,54..58
          @chax -= 2
          battle_anime_change 0,15
        end
        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..24
          @enex += 24
        when 25
          @enex += 24
          battle_anime_change 1,16
        when 26..58
          @enex -= 2
        end
        
        #SE
        case (@battle_anime_frame - sframe)
        
        when 25
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 30,34,38,42,46,50,54
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 389..439
        sframe = 389
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..8 #
          @chax += 16
          @chay += 8
          battle_anime_change 0,16
        when 9..12
          @chax -= 24
          @chay -= 14
          battle_anime_change 0,12
        when 13
          @chax -= 24
          @chay -= 16
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29..50
          @chay -= 24
          battle_anime_change 0,16
        end
        
        #敵
        case (@battle_anime_frame - sframe)

        when 13..50
          @enex -= 24
          @eney -= 8
          battle_anime_change 1,17
        end
        
        #SE
        case (@battle_anime_frame - sframe)

        when 13
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
      when 440..500
        sframe = 440
        if @battle_anime_frame == sframe
          @tec_output_back_no = 1
          @enex = 640
          @eney = 100
          @chax = TEC_CENTER_CHAX
          @chay = -100
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 32 #バーダックにチェンジ
          battle_anime_change 0,9
        end

        #味方
        case (@battle_anime_frame - sframe)
        
        when 16..100
          @chay += 16
        end

        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..15
          @enex -= 24
          @eney -= 8
          @temp_eney = 0
          @temp_enex = 0
        when 16..100
          if @temp_enex != 0
            @eney = @temp_eney 
            @enex = @temp_enex
          end
          shakex = 0
          shakey = 0
          shake_dot = 4
          shakex,shakey = pic_shake_cal shake_dot
          @eney += 16
          @temp_eney = @eney
          @temp_enex = @enex
          @enex += shakex
          @eney += shakey
          battle_anime_change 1,16
        end
        
        #SE
        case (@battle_anime_frame - sframe)
        
        when 16
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
      when 501..550
        sframe = 501
        if @battle_anime_frame == sframe
          @tec_output_back_no = 1
          @eney = -20 
          @enex = @temp_enex
          @temp_enex = 0
          @temp_eney = 0
          @chax = TEC_CENTER_CHAX
          @chay = -100
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 32 #バーダックにチェンジ
          battle_anime_change 0,9
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..4
          @chay += 16
        when 5..8
          @chay += 48
          @chax -= 24
          @output_anime_type = 0
          battle_anime_change 0,16
        when 9
          @chax += 32
        when 10
          @chax += 32
          @output_anime_type = 1
          battle_anime_change 0,10
        when 26..50
          @chay -= 32
          @chax -= 8
          @output_anime_type = 0
          battle_anime_change 0,16
        end

        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..9
          if @temp_enex != 0
            @eney = @temp_eney 
            @enex = @temp_enex
          end
          shakex = 0
          shakey = 0
          shake_dot = 4
          shakex,shakey = pic_shake_cal shake_dot
          @eney += 16
          @temp_eney = @eney
          @temp_enex = @enex
          @enex += shakex
          @eney += shakey
          battle_anime_change 1,16
          
        when 10..30
          battle_anime_change 1,17
          @enex += 16
          @eney -= 24
        end
        
        #SE
        case (@battle_anime_frame - sframe)
        when 5
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 10
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
        when 26
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        
        if @battle_anime_frame == 550
          @tec_output_back_no = 0
        end
      when 551..677
        sframe = 551
        if @battle_anime_frame == sframe
          @eney = -200
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY - 50
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 14 #悟空にチェンジ
          battle_anime_change 0,0
          @scombo_cha2 = 32
          @scombo_cha2_anime_type = 4 #バーダックにチェンジ
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        end
        
        @ray_color = 3
        back_x = 234
        back_y = 96
        back_anime_pattern backhai_no,back_x,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 678..794
        sframe = 678
        if @battle_anime_frame == sframe
          @chay -= 200
          @effect_anime_frame = 0 
          @effect_anime_type = 0
          @chr_cutin = false
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @tec_output_back_no = 4
          @ray_color = 3
          Audio.se_play("Audio/SE/" + "Z1 大猿")
          Audio.se_play("Audio/SE/" + "ZG 光線1")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
        end
        
        if $game_variables[171] == 0
          #悟空通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空通常、バーダック")
        elsif  $game_variables[171] == 1
          #悟空ボロ
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空ボロボロ、バーダック")
        elsif  $game_variables[171] == 2
          #悟空さらにボロ
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空さらにボロボロ、バーダック")
        elsif  $game_variables[171] == 3
          #悟空バトルスーツ、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空バトルスーツ、バーダック")
        else
          #悟空通常、悟飯通常
          picture = Cache.picture("Z3_必殺技_親子カメハメ波_悟空通常、バーダック")
        end
        rect = Rect.new(0, 0,326,352)
        @back_window.contents.blt(140,-6,picture,rect)
        #@chr_cutin = true
        @effect_anime_pattern = 366
        ray_x = 266
        ray_y = 60
      when 795
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "ZG 光線1")
      when 796..822
        #@effect_anime_pattern = 265
        @effect_anime_pattern = 365
      when 823
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 2907 #俺たちに不可能はない(超悟空、超ベジータ)
      back_x = 200
      back_y = 32
      ray_x = 300
      ray_y = 162
      wake_color = Color.new(188,188,188,256)
      color = Color.new(255,255,255,260)
      color2 = Color.new(255,216,160,260)
      color3 = Color.new(255,120,48,260)
      
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 19
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 14
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          back_anime_pattern 128
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 14 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = -1 if @battle_anime_frame == 60 # 効果音を再生する
      elsif @btl_ani_tokusyu_flag == true
        if $btl_progress == 2
          backhai_no = 201
          back_x = 228
          back_y = 86
        else
          backhai_no = 102
          back_x = 198
          back_y = 32
        end
        ray_x = 340
        ray_y = 96
        case @battle_anime_frame
        when 0 #初期化
          @back_anime_frame = 0
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @ray_color = 0
          @output_anime_type = 1
          
          
        when 1..129
          back_anime_pattern backhai_no,back_x,back_y
        when 130 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          battle_anime_change 0,18
          
          #back_anime_pattern backhai_no,back_x,back_y
        when 131..210
          ray_x = 280
          ray_y = 132
          @ray_color = 0
          @effect_anime_pattern = 237
          #back_anime_pattern backhai_no,back_x,back_y
        when 211..290
          sframe = 211
          
          ray_x = 280-8
          ray_y = 132-8
          @effect_anime_pattern = 235
        when 291..305
          sframe = 291
          ray_x = 280-8
          ray_y = 132-8
          if (@battle_anime_frame - sframe) == 0
            @enex = 640
            @eney = STANDARD_ENEY
            Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
          elsif (@battle_anime_frame - sframe) == 14
            @effect_anime_pattern = 0
          end
          
          @enex -= 12
        when 306..335
          sframe = 306
          eframe = 335
          if (@battle_anime_frame - sframe) == 0
            @scombo_cha1 = 19
            @scombo_cha1_anime_type = 3
            @eney = -200#STANDARD_ENEY
            @chay = -200
            @tec_output_back_no = 2
          end
          back_anime_pattern 116,TEC_CENTER_CHAX,STANDARD_CHAY
        when 336..430
          sframe = 336
          eframe = 430
          if (@battle_anime_frame - sframe) == 0
            #@enex = 640

            Audio.se_play("Audio/SE/" + "ZG 気円斬")
            
          end
          
          kien_x = 244
          kien_y = 80
          
          #
          #@chay = -160
          kienkizyunframe = sframe #20
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 30*4, 126, 30)
          if @battle_anime_frame >= kienkizyunframe
            
            
            kien_kizyun_x = -6
            kien_kizyun_y = 2
            kien_mawarikata = 0
            case @battle_anime_frame
            
            when kienkizyunframe +10,kienkizyunframe +26
              kien_mawarikata = 1
            when kienkizyunframe +11,kienkizyunframe +27
              kien_mawarikata = 2
            when kienkizyunframe +12,kienkizyunframe +28
              kien_mawarikata = 3
            when kienkizyunframe +13,kienkizyunframe +29
              kien_mawarikata = 4
            when kienkizyunframe +14,kienkizyunframe +30
              kien_mawarikata = 5
            when kienkizyunframe +15,kienkizyunframe +31
              kien_mawarikata = 6
            when kienkizyunframe +16,kienkizyunframe +32
              kien_mawarikata = 7
            when kienkizyunframe +17,kienkizyunframe +33
              kien_mawarikata = 8
            when kienkizyunframe +18,kienkizyunframe +34
              kien_mawarikata = 9
            when kienkizyunframe +19,kienkizyunframe +35
              kien_mawarikata = 10
            when kienkizyunframe +20,kienkizyunframe +36
              kien_mawarikata = 11
            when kienkizyunframe +21,kienkizyunframe +37
              kien_mawarikata = 12
            when kienkizyunframe +22,kienkizyunframe +38
              kien_mawarikata = 13
            when kienkizyunframe +23,kienkizyunframe +39
              kien_mawarikata = 14
            when kienkizyunframe +24,kienkizyunframe +40
              kien_mawarikata = 15
            else
              kien_mawarikata = 0
            end
            
            case kien_mawarikata
            
            when 0 #下
              kien_x += 0
              kien_y += 0
            when 1
              kien_x += kien_kizyun_x * 4
              kien_y += - kien_kizyun_y * 1
            when 2
              kien_x += kien_kizyun_x * 7
              kien_y += - kien_kizyun_y * 3
            when 3
              kien_x += kien_kizyun_x * 9
              kien_y += - kien_kizyun_y * 6
            when 4 #右
              kien_x += kien_kizyun_x * 10
              kien_y += - kien_kizyun_y * 10
            when 5
              kien_x += kien_kizyun_x * 9
              kien_y += - kien_kizyun_y * 14
            when 6
              kien_x += kien_kizyun_x * 7
              kien_y += - kien_kizyun_y * 17
            when 7 
              kien_x += kien_kizyun_x * 4
              kien_y += - kien_kizyun_y * 19
            when 8 #上
              kien_x += kien_kizyun_x * 0
              kien_y += - kien_kizyun_y * 20
            when 9
              kien_x += - kien_kizyun_x * 4
              kien_y += - kien_kizyun_y * 19
            when 10 
              kien_x += - kien_kizyun_x * 7
              kien_y += - kien_kizyun_y * 17
            when 11
              kien_x += - kien_kizyun_x * 9
              kien_y += - kien_kizyun_y * 14
            when 12 #左
              kien_x += - kien_kizyun_x * 10
              kien_y += - kien_kizyun_y * 10
            when 13
              kien_x += - kien_kizyun_x * 9
              kien_y += - kien_kizyun_y * 6
            when 14 
              kien_x += - kien_kizyun_x * 7
              kien_y += - kien_kizyun_y * 3
            when 15
              kien_x += - kien_kizyun_x * 4
              kien_y += - kien_kizyun_y * 1
            end
            
          end
          
          if @battle_anime_frame >= kienkizyunframe + 50
            Audio.se_stop if @battle_anime_frame == kienkizyunframe + 50
            Audio.se_play("Audio/SE/" + "Z1 気円斬") if @battle_anime_frame == kienkizyunframe + 50
            kien_y += - 16 * (@battle_anime_frame-(kienkizyunframe + 50))
            kien_x +=  16 * (@battle_anime_frame-(kienkizyunframe + 50))
            @scombo_cha1_anime_type = 10
            #p kien_x,kien_y
          end
          
          back_anime_pattern 116,TEC_CENTER_CHAX,STANDARD_CHAY
          
          @back_window.contents.blt(kien_x,kien_y,picture,rect)
          
          if @battle_anime_frame == eframe
            @tec_output_back_no = 0
          end
          
        when 431..490
          sframe = 431
          if (@battle_anime_frame - sframe) == 0

            @effect_anime_pattern = 235
            @eney = STANDARD_ENEY
            @chay = STANDARD_CHAY
            
          end
          
          ray_x = 280-8
          ray_y = 132-8
          
          
          kien_y = -16 * (@battle_anime_frame - sframe) + 300
          kien_x = 16 * (@battle_anime_frame - sframe) + 234
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 30*4, 126, 30)
          @back_window.contents.blt(kien_x,kien_y,picture,rect)
          
          case (@battle_anime_frame - sframe)
          
          when 0..7
            @enex -= 12
          when 8..300
            
            if (@battle_anime_frame - sframe) == 8
              Audio.se_stop
              Audio.se_play("Audio/SE/" + "ZG SE040")
              @back_anime_frame = 0
              @back_anime_type = 0
            end
            @enex += 16
            battle_anime_change 1,16
            
            picture = Cache.picture("戦闘アニメ_爆発3") #ダメージ表示用
            rect = Rect.new(@back_anime_type*112, 0,112,120)
            if @back_anime_frame >= 10 
              @back_anime_type += 1
              @back_anime_frame = 0
            else
              @back_anime_frame += 1
            end
            @back_window.contents.blt(402,112,picture,rect)
            
          end
          
        when 491..560
          sframe = 491
          if (@battle_anime_frame - sframe) == 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          battle_anime_change 0,7
          ray_x = 358-8 + (@battle_anime_frame - sframe) * 12
          ray_y = 152-8
        when 561
          @effect_anime_pattern = 0
        when 570
          #@chr_cutin = true
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back_no = 0
          set_chr_display_out
          #Audio.se_play("Audio/SE/" + "ZG 光線1")
        when 571..606
          sframe = 571
          eframe = 606
          if (@battle_anime_frame - sframe) == 0
            #Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          @effect_anime_pattern = 235
          ray_x = -64 + (@battle_anime_frame - sframe) * 12
          ray_y = 152-8
          
          if @battle_anime_frame == eframe
            #p ray_x
          end
        when 607..636
          sframe = 607
          ray_x = 356
          ray_y = 152-8
        when 637..666
          sframe = 637
          if (@battle_anime_frame - sframe) == 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 SE102")
          end
          ray_x = 356+8
          ray_y = 152
          @effect_anime_pattern = 237
        when 667..696
          @effect_anime_pattern = 0
        when 697..757
          sframe = 697
          if (@battle_anime_frame - sframe) == 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
          end
          
          case (@battle_anime_frame - sframe)
          when 1..4,17..20,33..36,50..53
            #白
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          when 5..8,21..24,37,54..57
            #肌色
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color2)
          when 9..12,25..28,42..45,58..61
            #オレンジ
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
          when 13..16,29..32,38..41,46..49
            #黒
          end
        when 758..787
          sframe = 758
          if (@battle_anime_frame - sframe) == 0
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 キラーン")
            @effect_anime_pattern = 124
            @effect_anime_frame = 0
            @effect_anime_type = 0
          end
          ray_x = CENTER_ENEX + 48
          ray_y = STANDARD_CHAY + 24
          
        when 788
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
        @battle_anime_frame = -1 # 効果音を再生する
      end
    when 2908 #ダブルロイヤルアタック(超ベジータ、チャオズ)
          #backhai_no = 201
          #back_x = 234
          #back_y = -18 + 54+ 50

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 19 #超ベジータ
          @scombo_cha2 = 9
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 9 #チャオズ
          @scombo_cha2 = 19
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 9 && @battle_anime_frame == 40 #チャオズ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 19 
        @scombo_cha2 = 9
        
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
        
        #if @battle_anime_frame == 59
        #  #@tec_output_back_no = 1 #縦に変更
        #  @effect_anime_pattern = 0
        #  #@chr_cutin = false
        #end
      when 60..259
        sframe = 60
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,12
          
        end
        
        back_x = 228
        back_y = 88
        
        @ray_color = 3
        back_anime_pattern 201,back_x,back_y - 50
        @back_anime_frame -= 1
        
        @ray_color = 0
        back_anime_pattern 201,back_x,back_y + 50
        @back_anime_frame -= 1
        
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY+50
        ray_x = 290
        ray_y = 132 + 50

        case (@battle_anime_frame-sframe)
        when 30..74
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")  if (@battle_anime_frame-sframe) == 30
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")  if (@battle_anime_frame-sframe) == 30
          #battle_anime_change 0,7
          @scombo_cha2_anime_type = 7
          @effect_anime_pattern = 237
        when 75..200
          ray_x -= 8
          ray_y -= 16
          @effect_anime_pattern = 235
        end
      when 260..290
        
        sframe = 260
        if @battle_anime_frame == sframe
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          @effect_anime_pattern = 0
          @chay = -200
        end
        tmpx = 16 * (@battle_anime_frame-sframe)
        
        #rect = Rect.new(0, 0, 232, 128)
        rect = Rect.new(0, 8, 232, 116)
        picture = Cache.picture("ZG_必殺技_ファイナルフラッシュ(発動)_ベジータ")
        @back_window.contents.blt(640 - tmpx,62,picture,rect)
        
        #rect = Rect.new(24, 20, 160, 134)
        rect = Rect.new(24, 28, 160, 112)
        picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
        @back_window.contents.blt(640 + 72 - tmpx-50,60 + 134-14,picture,rect)
        
        #灰色の線
        @back_window.contents.fill_rect(0,62+116,640,4,wake_color)

      when 291..380
        sframe = 291
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        rect = Rect.new(0, 8, 232, 116)
        picture = Cache.picture("ZG_必殺技_ファイナルフラッシュ(発動)_ベジータ")
        @back_window.contents.blt(160,62,picture,rect)
        
        rect = Rect.new(24, 28, 160, 112)
        picture = Cache.picture("Z3_必殺技_どどん波(チャオズ1)")
        @back_window.contents.blt(232-50,60 + 134-14,picture,rect)
        
        tmpframe = @battle_anime_frame - sframe
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(青)")
        rect = Rect.new(0, 0, tmpframe*16, 116)
        @back_window.contents.blt(232+160-48 ,62,picture,rect)
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(0, 0, tmpframe*16, 102)
        @back_window.contents.blt(232+160-48 ,128+62,picture,rect)
        
        #picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_中") #ダメージ表示用
        #rect = Rect.new(0, 80,tmpframe*16,82)
        #@back_window.contents.blt(162+232-50,214,picture,rect)
        
        #灰色の線
        @back_window.contents.fill_rect(0,62+116,640,4,wake_color)
      when 390
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 391..415
        ray_y = 110
        @effect_anime_pattern = 369
      when 416
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2910 #やっぱり息の合う
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      if @battle_anime_frame <= 500 
      ray_x = 325
      ray_y = 70
      else
      ray_x = 340
      ray_y = 200
      end
      
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 7  #ヤムチャ
          @scombo_cha2 = 15
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 15  #わかもの
          @scombo_cha2 = 7
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 15 && @battle_anime_frame == 40 #ヤムチャ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 7
        @scombo_cha2 = 15
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        #@effect_anime_pattern = 86
         @chay = -120 #キャラ画面範囲外へ
         @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 60 # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76
        @back_anime_frame -= 1
        back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76 - 100
      when 110
        @effect_anime_frame = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @btl_ani_cha_chg_no = 7
        @chax = CENTER_CHAX+16
        @output_anime_type = 0
        battle_anime_change 0,0
        @scombo_cha2 =15
        @scombo_cha2_anime_type = 19
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        set_chr_display_out
      when 111..202
        @effect_anime_pattern = 332
        #back_anime_pattern 48,TEC_CENTER_CHAX - 0,STANDARD_CHAY + 16
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 126,STANDARD_CHAY + 16
        #@chay = STANDARD_CHAY if @battle_anime_frame == 180
        #back_anime_pattern 118,@chax + 126 ,STANDARD_CHAY if @battle_anime_frame == 180
      when 203..220
        sframe = 203
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        end
        @eney += 16
        battle_anime_change 1,17
      when 221..260
        sframe = 221
        @effect_anime_pattern = 0
        if @battle_anime_frame == sframe
          @scom2x = @chax + 134
          @chay = STANDARD_CHAY
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        @chax += 20
        @chay += 16
        @scom2x -= 20 
        @scombo_cha2_anime_type = 19
        back_anime_pattern 118,@scom2x,@chay
      when 261..274
        sframe = 261
        if @battle_anime_frame == sframe
          @scombo_cha2_anime_type = 32
          @output_anime_type = 1
          battle_anime_change 0,14
          @chay = -104
          @chax = 294-72
          @scom2x = 320
        end
        @chax += 20
        @chay += 16
        @scom2x -= 20 
        back_anime_pattern 118,@scom2x,@chay
        @back_window.contents.fill_rect(320,64,6,228,wake_color)
      when 275..339
        sframe = 275
        if @battle_anime_frame == sframe
          @scombo_cha2_anime_type = 33
          @output_anime_type = 1
          battle_anime_change 0,15
          Audio.se_play("Audio/SE/" + "DB3 SE041")
          Audio.se_play("Audio/SE/" + "DB3 SE041")
          
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
        end
        back_anime_pattern 118,@scom2x,@chay
        
        if @battle_anime_frame - sframe < 12 
          tmpframe = @battle_anime_frame - sframe
        else
          tmpframe = 12
        end
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(青)")
        rect = Rect.new(0, 0, tmpframe*16, 128)
        @back_window.contents.blt(128 ,98,picture,rect)
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(700-tmpframe*16, 128, tmpframe*16, 128)
        @back_window.contents.blt(640-124-tmpframe*16 ,98,picture,rect)
        @back_window.contents.fill_rect(320,64,6,228,wake_color)
      when 340
        set_chr_display_out
        @enex = (CENTER_ENEX - 56)
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 341..361
        sframe = 341
        tmpframe = @battle_anime_frame - sframe
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(青)")
        rect = Rect.new(0, 128, 700, 128)
        @back_window.contents.blt(-700+tmpframe*16,98,picture,rect)
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(0, 0, tmpframe*16, 128)
        @back_window.contents.blt(640-tmpframe*16 ,98,picture,rect)
        
      when 362
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2911 #足元がお留守だぜ！
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      if @battle_anime_frame <= 500 
      ray_x = 325
      ray_y = 70
      else
      ray_x = 340
      ray_y = 200
      end
      
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @scombo_cha2 = 7
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 7 && @battle_anime_frame == 40 #ヤムチャ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 7
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..149
        sframe = 60
        if @battle_anime_frame ==sframe
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
          Audio.se_play("Audio/SE/" + "Z3 変身")
          @ray_color = 1
          @output_anime_type = 1
          battle_anime_change 0,13
        end
        #@effect_anime_pattern = 86
        #@chay = -120 #キャラ画面範囲外へ
        #@effect_anime_pattern = 0
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76 - 100
        
        #気を溜める
        back_anime_pattern backhai_no,back_x,back_y - 50
        
        if @battle_anime_frame <= sframe + 49
          #高速移動
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76,picture,rect)
          end
        end
      when 150..310
        sframe = 150
        picture = Cache.picture("Z3_必殺技_激烈光弾(ピッコロ)")
        rect = Rect.new(0, 0, 218, 230)
        @back_window.contents.blt(190,66,picture,rect)
        if @battle_anime_frame == sframe
          @chay = -160
          
          @tec_back_small = true
          #@chr_cutin_flag = false
          Audio.se_stop
          
        end
        if @battle_anime_frame >= sframe + 90
          @effect_anime_pattern = 252
          ray_x = 322-16
          ray_y = 164-16
          @ray_anime_type = 0 if @battle_anime_frame == sframe + 90
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        elsif @battle_anime_frame >= sframe + 30
          @effect_anime_pattern = 235
          ray_x = 322
          ray_y = 164
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe + 30 # 効果音を再生する
        end
      when 311#71
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @btl_ani_cha_chg_no = 7
        @chay = -200
        @chax -= 26
        #set_chr_display_out
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 312..403
        back_anime_pattern 1
        @effect_anime_pattern = 39
        
      when 404..584#619
        sframe = 404
        rframe = 124
        akifra = 4
        back_anime_pattern 1
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 1,16
        end
        case (@battle_anime_frame-sframe)
        
        when 0..9
          @gx = -16
        when 10..19
          @gx = 16
        when 20
          @gx = 0
          battle_anime_change 1,0
          
        when 50
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "DB3 狼牙風風拳")
          battle_anime_change 0,0
        when 51..120
          if @battle_anime_frame % 2 == 0
            picture = Cache.picture("DB3_ヤムチャ(Z3化)")
            rect = Rect.new(0, 0, 64, 64)
            @back_window.contents.blt(@chax + 16,STANDARD_CHAY + 24,picture,rect)
            @chay = -200
          else
            @chay = STANDARD_CHAY
          end
        when 121
          @chay = STANDARD_CHAY
          
        when rframe + akifra*0,rframe + akifra*6,rframe + akifra*8
          @output_anime_type = 0
          battle_anime_change 1,16
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*1,rframe + akifra*5,rframe + akifra*10,rframe + akifra*12
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*2,rframe + akifra*4,rframe + akifra*9,rframe + akifra*13
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*3,rframe + akifra*7,rframe + akifra*11
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when rframe + akifra*14..rframe + akifra*20
          @output_anime_type = 0
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "ZG 打撃3") if (@battle_anime_frame-sframe) == rframe + akifra*14
          #@eney -= 24
          battle_anime_change 1,17
          #p @battle_anime_frame
        end
        
        case (@battle_anime_frame-sframe)
        
        when rframe + akifra*0+0..rframe + akifra*0+1,rframe + akifra*1+0..rframe + akifra*1+1,rframe + akifra*2+0..rframe + akifra*2+1,rframe + akifra*3+0..rframe + akifra*3+1,rframe + akifra*4+0..rframe + akifra*4+1,rframe + akifra*5+0..rframe + akifra*5+1,rframe + akifra*6+0..rframe + akifra*6+1,rframe + akifra*7+0..rframe + akifra*7+1,rframe + akifra*8+0..rframe + akifra*8+1,rframe + akifra*9+0..rframe + akifra*9+1,rframe + akifra*10+0..rframe + akifra*10+1,rframe + akifra*11+0..rframe + akifra*11+1,rframe + akifra*12+0..rframe + akifra*12+1,rframe + akifra*13+0..rframe + akifra*13+1
          @gx = -8
        when rframe + akifra*0+2..rframe + akifra*0+3,rframe + akifra*1+2..rframe + akifra*1+3,rframe + akifra*2+2..rframe + akifra*2+3,rframe + akifra*3+2..rframe + akifra*3+3,rframe + akifra*4+2..rframe + akifra*4+3,rframe + akifra*5+2..rframe + akifra*5+3,rframe + akifra*6+2..rframe + akifra*6+3,rframe + akifra*7+2..rframe + akifra*7+3,rframe + akifra*8+2..rframe + akifra*8+3,rframe + akifra*9+2..rframe + akifra*9+3,rframe + akifra*10+2..rframe + akifra*10+3,rframe + akifra*11+2..rframe + akifra*11+3,rframe + akifra*12+2..rframe + akifra*12+3,rframe + akifra*13+2..rframe + akifra*13+3
          @gx = 8

        end
      when 585..589
        @gx = 0
        @chax += 20
      when 590..593
        sframe = 592
        if @battle_anime_frame == sframe
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 1
          battle_anime_change 0,12
        end
        
        case @battle_anime_frame - sframe
        
        when 0..4
          @chax += 16
        end
      when 594..605
        sframe = 594
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG 打撃6")
          @output_anime_type = 1
          battle_anime_change 0,15
          #@chay -= 16
        end
        @enex -= 12
        @eney -= 16
      when 606..629
        sframe = 606
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 1
          battle_anime_change 0,12
          #@chay -= 16
        end
        @chax += 8
        @chay -= 24
        @enex -= 12
        @eney -= 16
      when 630..694
        sframe = 630
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 4
          @scombo_cha2_anime_type = 15
          @output_anime_type = 1
          battle_anime_change 0,14
          @chax = 40
          @chay = STANDARD_CHAY
          
          #Audio.se_play("Audio/SE/" + "DB3 SE041")
          #Audio.se_play("Audio/SE/" + "DB3 SE041")
          
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
        end
        back_anime_pattern 118,640-138,@chay
        
        if @battle_anime_frame - sframe < 12 
          tmpframe = @battle_anime_frame - sframe
        else
          tmpframe = 12
        end
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(緑)")
        rect = Rect.new(0, 0, tmpframe*16, 128)
        @back_window.contents.blt(128 ,98,picture,rect)
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(700-tmpframe*16, 128, tmpframe*16, 128)
        @back_window.contents.blt(640-124-tmpframe*16 ,98,picture,rect)
        @back_window.contents.fill_rect(320,64,6,228,wake_color)
      when 695
        set_chr_display_out
        @enex = (CENTER_ENEX - 56)
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 696..716
        sframe = 696
        tmpframe = @battle_anime_frame - sframe
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円(緑)")
        rect = Rect.new(0, 128, 700, 128)
        @back_window.contents.blt(-700+tmpframe*16,98,picture,rect)
        
        picture = Cache.picture("ZG_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(0, 0, tmpframe*16, 128)
        @back_window.contents.blt(640-tmpframe*16 ,98,picture,rect)
        
      when 717
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 2912 #コイツを倒すパワーをくれ！
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 0
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14 #悟空
          if @battle_anime_frame < 24
            #@ay = -2
            @ax = -4
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 8
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 7  #ヤムチャ
          if @battle_anime_frame < 25
            #@ax = -3
            @ay = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 8
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 8  #天津飯
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 6
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 6  #クリリン
          if @battle_anime_frame < 25
            @ay = -3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 8
          @scombo_cha4 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #チャオズ
          if @battle_anime_frame < 25
            @ay = 3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 3
          @scombo_cha1 = 14 if $super_saiyazin_flag[1] == true
          @scombo_cha2 = 7
          @scombo_cha3 = 8
          @scombo_cha4 = 6
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX - 92
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = 3
        @btl_ani_cha_chg_no = 14 if $super_saiyazin_flag[1] == true
        @scombo_cha1 = 7
        @scombo_cha2 = 8
        @scombo_cha3 = 6
        @scombo_cha4 = 9
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
        battle_anime_change 0,2
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 0
        @scombo_cha3_anime_type = 2
        @scombo_cha4_anime_type = 0
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 61..189
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 190
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        battle_anime_change 0,3
        @scombo_cha1_anime_type = 3
        @scombo_cha2_anime_type = 2
        @scombo_cha3_anime_type = 3
        @scombo_cha4_anime_type = 1
        
        @effect_anime_pattern = 96
        
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 191..299
        #battle_anime_change 0,3
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #ヤムチャ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #天津飯
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #クリリン
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #チャオズ
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 48
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2913 #新狼鶴相打陣
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      if @battle_anime_frame <= 500 
      ray_x = 325
      ray_y = 70
      else
      ray_x = 340
      ray_y = 200
      end
      color = Color.new(255,255,255,260)
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 7  #ヤムチャ
          @scombo_cha2 = 8
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 8  #天津飯
          @scombo_cha2 = 7
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 8 && @battle_anime_frame == 40 #天津飯
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 7
        @scombo_cha2 = 8
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..150
        sframe = 60
        if @battle_anime_frame ==sframe
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
          Audio.se_play("Audio/SE/" + "Z3 変身")
          @ray_color = 0
          #@output_anime_type = 1
          #battle_anime_change 0,13
          @chay = -200
        end
        #@effect_anime_pattern = 86
        #@chay = -120 #キャラ画面範囲外へ
        #@effect_anime_pattern = 0
        #@back_anime_frame -= 1
        #back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76 - 100
        
        #気を溜める
        back_anime_pattern backhai_no,back_x,back_y + 50
        @back_anime_frame -= 1
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        if @battle_anime_frame <= sframe + 49
          #高速移動
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76-100,picture,rect)
          end
        end

      when 151#71 - 160
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @btl_ani_cha_chg_no = 7
        @chay = -200
        @chax -= 26
        #set_chr_display_out
        @tec_output_back = false
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 152..243
        back_anime_pattern 1
        @effect_anime_pattern = 39
        
      when 244..424
        sframe = 244
        rframe = 124
        akifra = 4
        back_anime_pattern 1
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 1,16
        end
        case (@battle_anime_frame-sframe)
        
        when 0..9
          @gx = -16
        when 10..19
          @gx = 16
        when 20
          @gx = 0
          battle_anime_change 1,0
          
        when 50
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "DB3 狼牙風風拳")
          battle_anime_change 0,0
        when 51..120
          if @battle_anime_frame % 2 == 0
            picture = Cache.picture("DB3_ヤムチャ(Z3化)")
            rect = Rect.new(0, 0, 64, 64)
            @back_window.contents.blt(@chax + 16,STANDARD_CHAY + 24,picture,rect)
            @chay = -200
          else
            @chay = STANDARD_CHAY
          end
        when 121
          @chay = STANDARD_CHAY
          
        when rframe + akifra*0,rframe + akifra*6,rframe + akifra*8
          @output_anime_type = 0
          battle_anime_change 1,16
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*1,rframe + akifra*5,rframe + akifra*10,rframe + akifra*12
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*2,rframe + akifra*4,rframe + akifra*9,rframe + akifra*13
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          
        when rframe + akifra*3,rframe + akifra*7,rframe + akifra*11
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        when rframe + akifra*14..rframe + akifra*20
          @output_anime_type = 1
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "ZG 打撃4") if (@battle_anime_frame-sframe) == rframe + akifra*14
          @gx = -16
          @gy = -8
          battle_anime_change 1,17
        end
        
        case (@battle_anime_frame-sframe)
        
        when rframe + akifra*0+0..rframe + akifra*0+1,rframe + akifra*1+0..rframe + akifra*1+1,rframe + akifra*2+0..rframe + akifra*2+1,rframe + akifra*3+0..rframe + akifra*3+1,rframe + akifra*4+0..rframe + akifra*4+1,rframe + akifra*5+0..rframe + akifra*5+1,rframe + akifra*6+0..rframe + akifra*6+1,rframe + akifra*7+0..rframe + akifra*7+1,rframe + akifra*8+0..rframe + akifra*8+1,rframe + akifra*9+0..rframe + akifra*9+1,rframe + akifra*10+0..rframe + akifra*10+1,rframe + akifra*11+0..rframe + akifra*11+1,rframe + akifra*12+0..rframe + akifra*12+1,rframe + akifra*13+0..rframe + akifra*13+1
          @gx = -8
        when rframe + akifra*0+2..rframe + akifra*0+3,rframe + akifra*1+2..rframe + akifra*1+3,rframe + akifra*2+2..rframe + akifra*2+3,rframe + akifra*3+2..rframe + akifra*3+3,rframe + akifra*4+2..rframe + akifra*4+3,rframe + akifra*5+2..rframe + akifra*5+3,rframe + akifra*6+2..rframe + akifra*6+3,rframe + akifra*7+2..rframe + akifra*7+3,rframe + akifra*8+2..rframe + akifra*8+3,rframe + akifra*9+2..rframe + akifra*9+3,rframe + akifra*10+2..rframe + akifra*10+3,rframe + akifra*11+2..rframe + akifra*11+3,rframe + akifra*12+2..rframe + akifra*12+3,rframe + akifra*13+2..rframe + akifra*13+3
          @gx = 8

        end
      when 425..459
        eframe = 459
          @gx = -24
          @gy = -16
          back_anime_pattern 1
        if @battle_anime_frame == eframe
          @tec_output_back_no = 3 
          @tec_output_back = true
        end
      when 460..660
        sframe = 460
        if @battle_anime_frame == sframe
          @gx = 0
          @gy = 0
        end
        @chay = -200
        kien_x = 220
        kien_y = 80
        Audio.se_stop if @battle_anime_frame == sframe #|| @battle_anime_frame == sframe + 40
        Audio.se_play("Audio/SE/" + "Z1 気を溜める4") if @battle_anime_frame == sframe
        
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
        rect = Rect.new(0, 0, 170, 160)
        @back_window.contents.blt(208,98,picture,rect)
        
      #when 481
        case @battle_anime_frame
        when sframe + 40..sframe + 43,sframe + 80..sframe + 83,sframe + 120..sframe + 123,sframe + 160..sframe + 163
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe+40 || @battle_anime_frame == sframe+80 || @battle_anime_frame == sframe+120 || @battle_anime_frame == sframe+160
        end
      when 670
        Audio.se_stop
        @tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        battle_anime_change 1,16
        
        Audio.se_play("Audio/SE/" + "Z1 ザー")
        Audio.se_play("Audio/SE/" + "Z1 ゴー")
      when 681..890
        sframe = 681
        #ray_x = 346
        #ray_y = 136
        back_anime_pattern 9
        case @battle_anime_frame
        when sframe+30..sframe+33,sframe+70..sframe+73,sframe+110..sframe+113,sframe+150..sframe+153
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe+30 || @battle_anime_frame == sframe+70 || @battle_anime_frame == sframe+110 || @battle_anime_frame == sframe+150
        end
      when 891..910
        sframe = 891
        
        if @battle_anime_frame == sframe
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 105
          Audio.se_play("Audio/SE/" + "DB3 大爆発")
          battle_anime_change 1,17
        end
        @eney += 16
        
      when 911..930
        sframe = 911  
        if @battle_anime_frame == sframe
          @output_anime_type = 1
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 0
          @chax = -96
          @chay = STANDARD_CHAY
          @eney = -200
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
          battle_anime_change 0,2
          battle_anime_change 1,16
        end
        
        @chax += 16
        @eney += 16
      when 931..1020
        sframe = 931
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
          battle_anime_change 0,3
        end
        tmpframe = @battle_anime_frame - sframe
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大")
        rect = Rect.new(0, 192, tmpframe*16, 192)
        @back_window.contents.blt(306 ,66,picture,rect)
      when 1021
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2914 #超操気円裂斬(クリリン＆ヤムチャ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        wake_color = Color.new(188,188,188,256)
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 6 #クリリン
            @scombo_cha2 = 7
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 7 #ヤムチャ
            @scombo_cha2 = 6
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 7 && @battle_anime_frame == 40 #ヤムチャ
            @chax -= 184
          end
          @btl_ani_cha_chg_no = 6
          @scombo_cha2 = 7

          back_anime_pattern 118,TEC_CENTER_CHAX + 80 + 24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX + 80 + 24,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,5 #8 #4
          @scombo_cha2_anime_type = 9 #23 #20
          @ray_color = 0
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 0
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80 + 24,STANDARD_CHAY
        when 188..250
          sframe = 188
          if @battle_anime_frame == sframe
            @chay = -200
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          tmpfra = @battle_anime_frame - sframe
          picture = Cache.picture("Z3_必殺技_気円烈斬(クリリン)")
          rect = Rect.new(0, 0, 130, 168)
          @back_window.contents.blt(320-190,+342 - tmpfra * 4 ,picture,rect)
          
          picture = Cache.picture("FC風_ZSSD_必殺技_繰気弾(ヤムチャ)2")
          rect = Rect.new(0, 0, 124, 156)
          @back_window.contents.blt(320+52,-156 + tmpfra * 4 ,picture,rect)
          
          @back_window.contents.fill_rect(320-2,0,6,228+64,wake_color)

          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 150, 126, 30)
          @back_window.contents.blt(320-190+38,+342 - tmpfra * 4 - 46,picture,rect)
          
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_弾")
          rect = Rect.new(126, 0, 126, 126)
          @back_window.contents.blt(320+52-40,-156 + tmpfra * 4 - 130 ,picture,rect)

        when 251..299
          sframe = 251
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 刀")
            Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
            Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
          end
          
          tmpfra = 62
          picture = Cache.picture("Z3_必殺技_気円烈斬(クリリン)")
          rect = Rect.new(0, 0, 130, 168)
          @back_window.contents.blt(320-190,+342 - tmpfra * 4 ,picture,rect)
          
          picture = Cache.picture("FC風_ZSSD_必殺技_繰気弾(ヤムチャ)2")
          rect = Rect.new(0, 0, 124, 156)
          @back_window.contents.blt(320+52,-156 + tmpfra * 4 ,picture,rect)
          
          @back_window.contents.fill_rect(320-2,0,6,228+64,wake_color)
          
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 150, 126, 30)
          @back_window.contents.blt(320-190+38,+342 - tmpfra * 4 - 46,picture,rect)
          
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_弾")
          rect = Rect.new(126, 0, 126, 126)
          @back_window.contents.blt(320+52-40,-156 + tmpfra * 4 - 130 ,picture,rect)

        when 300 #初期化
          @tec_output_back_no = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          set_chr_display_out
          
        when 301
          #Audio.se_stop
          @soukirand = 0
          @kienrand = 0
          
          @soukirand = rand(3) + 1
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          begin
            @kienrand = rand(3) + 1
          end while @soukirand == @kienrand
          
        when 302..333
          sframe = 302
          tmpfra = @battle_anime_frame - sframe
          
          case @kienrand
            
          when 1
            kiensy= -60
            kieny = 6
          when 2
            kiensy= 158
            kieny = 0
          when 3
            kiensy= 386
            kieny = -6
          end
          
          case @soukirand
            
          when 1
            soukisy= -126
            soukiy = 6
          when 2
            soukisy= 108
            soukiy = 0
          when 3
            soukisy= 366
            soukiy = -6
          end
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 150, 126, 30)
          @back_window.contents.blt(-126 + 12 * tmpfra ,kiensy + tmpfra * kieny,picture,rect)
          
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_弾")
          rect = Rect.new(126, 0, 126, 126)
          @back_window.contents.blt(-126 + 12 * tmpfra ,soukisy + tmpfra * soukiy ,picture,rect)
        when 334
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        #@tec_output_back = false
        case @battle_anime_frame
        
        when 0
          @tec_output_back_no = 0
          @soukirand = 0
          @kienrand = 0
          
          @soukirand = rand(3) + 1
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          begin
            @kienrand = rand(3) + 1
          end while @soukirand == @kienrand
          
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        when 1..32
          sframe = 1
          tmpfra = @battle_anime_frame - sframe
          
          case @kienrand
            
          when 1
            kiensy= -60
            kieny = 6
          when 2
            kiensy= 158
            kieny = 0
          when 3
            kiensy= 386
            kieny = -6
          end
          
          case @soukirand
            
          when 1
            soukisy= -126
            soukiy = 6
          when 2
            soukisy= 108
            soukiy = 0
          when 3
            soukisy= 366
            soukiy = -6
          end
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 150, 126, 30)
          @back_window.contents.blt(-126 + 12 * tmpfra ,kiensy + tmpfra * kieny,picture,rect)
          
          picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_弾")
          rect = Rect.new(126, 0, 126, 126)
          @back_window.contents.blt(-126 + 12 * tmpfra ,soukisy + tmpfra * soukiy ,picture,rect)
        when 33
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
      
    when 2915 #烈戦人造人間
      ray_x = 356
      ray_y = 70
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      wake_color = Color.new(188,188,188,256)
      color = Color.new(255,255,255,260)
      color2 = Color.new(255,216,160,260)
      color3 = Color.new(255,120,48,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 21  #18号
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 23
          @scombo_cha2 = 22
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        elsif $partyc[@chanum.to_i] == 22 #17号
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 23
          @scombo_cha2 = 21
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        else #16号
          @scombo_cha1 = 21
          @scombo_cha2 = 22
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 23
          @scombo_cha1 = 21
          @scombo_cha2 = 22
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,8
        @scombo_cha1_anime_type = 16
        @scombo_cha2_anime_type = 16
        back_anime_pattern 115,idougo,STANDARD_CHAY - 64
        back_anime_pattern 117,idougo,STANDARD_CHAY + 64
      when 61..119
        sframe = 61
        
        @chax += 16
        temp_frame = @battle_anime_frame - sframe
        back_anime_pattern 115,idougo - temp_frame * 8,STANDARD_CHAY - 64 - temp_frame * 16
        back_anime_pattern 117,idougo + temp_frame * 8,STANDARD_CHAY + 64 - temp_frame * 16
        #back_anime_pattern 8
      when 120
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @chax = -96 - 8*24
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ")    # 効果音を再生する
      when 121..144
        sframe = 121
        @chax += 24
      when 145..190
        sframe = 145
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        @enex += 28
        @eney -= 8
        battle_anime_change 1,16
      when 191..233
        sframe = 191
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @chay = -200
        end
        
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 5
        back_anime_pattern 116,-96+(@battle_anime_frame-sframe)*8,STANDARD_CHAY
        back_anime_pattern 118,640-(@battle_anime_frame-sframe)*8,STANDARD_CHAY
        
        #picture = Cache.picture("Z3_戦闘_必殺技_敵_17号")
        #rect = Rect.new(0, 0*96, 96, 96)
        #@back_window.contents.blt(640-(@battle_anime_frame-sframe)*8,STANDARD_ENEY,picture,rect)
        #picture = Cache.picture("Z3_戦闘_必殺技_敵_18号")
        #rect = Rect.new(0, 6*96, 96, 96)
        #@back_window.contents.blt(-96+(@battle_anime_frame-sframe)*8,STANDARD_ENEY,picture,rect)
      when 234..360
        sframe = 235
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
        end
        
        back_anime_pattern 116,-96+(364-321)*8-8,STANDARD_CHAY
        back_anime_pattern 118,640-(364-321)*8+8,STANDARD_CHAY
        
        #picture = Cache.picture("Z3_戦闘_必殺技_敵_17号")
        #rect = Rect.new(0, 2*96, 96, 96)
        #@back_window.contents.blt(640-(364-321)*8+8,STANDARD_ENEY,picture,rect)
        #picture = Cache.picture("Z3_戦闘_必殺技_敵_18号")
        #rect = Rect.new(0, 5*96, 96, 96)
        #@back_window.contents.blt(-96+(364-321)*8-8,STANDARD_ENEY,picture,rect)
        @effect_anime_pattern = 290
      when 361
        @effect_anime_pattern = 0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        battle_anime_change 1,0
        @tec_output_back_no = 1
      when 371..428
        sframe = 371
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          
        end
        
        case (@battle_anime_frame - sframe)
        when 1..4,17..20,33..36,50..53
          #白
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        when 5..8,21..24,37,54..57
          #肌色
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color2)
        when 9..12,25..28,42..45,58..61
          #オレンジ
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
        when 13..16,29..32,38..41,46..49
          #黒
        end
      when 429..450
        sframe = 429
        
        if @battle_anime_frame == sframe
          
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 104
          Audio.se_play("Audio/SE/" + "Z1 爆発1")
          battle_anime_change 1,17
        end
        @eney += 16
      when 451..470
        sframe = 451
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          @tec_output_back = false
          @eney = -200
          @chay = STANDARD_CHAY
          @chax = 640
          battle_anime_change 0,9
        end
        @eney += 16
        @chax -= 16
        back_anime_pattern 1
      when 471..500
        sframe = 471
        if @battle_anime_frame == sframe
          battle_anime_change 0,6
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        
        if @battle_anime_frame % 2 == 1
          @enex += 8
        else
          @enex -= 8
        end
        back_anime_pattern 1
      when 501..560
        sframe = 501
        if @battle_anime_frame == sframe
          battle_anime_change 0,7
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")
        end
        
        if @battle_anime_frame % 2 == 1
          @enex += 12
        else
          @enex -= 12
        end
        case (@battle_anime_frame - sframe)
        when 1..4,17..20,33..36,50..53
          #白
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        when 5..8,21..24,37,54..57
          #肌色
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color2)
        when 9..12,25..28,42..45,58..61
          #オレンジ
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
        when 13..16,29..32,38..41,46..49
          #黒
        end
        back_anime_pattern 1
      when 561
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
   when 2918 #ダブルポコペン
        ray_x = 328
        ray_y = 148
        @ray_color = 0

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == 4  #ピッコロ
          @scombo_cha2 = 15
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 15  #若者
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 15 && @battle_anime_frame == 40 #若者
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 15
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @ray_color = 0
        @output_anime_type = 1
        battle_anime_change 0,4
        @effect_anime_pattern = 0
        #back_anime_pattern 41
        @scombo_cha2_anime_type = 12
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        @effect_anime_frame = 0
      when 61..104
        sframe = 61
        back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
        rect = Rect.new(128, 0,128,128)
        @back_window.contents.blt(@chax+2+(@battle_anime_frame-sframe)*RAY_SPEED,STANDARD_CHAY - 84,picture,rect)
        @back_window.contents.blt(@chax+2+(@battle_anime_frame-sframe)*RAY_SPEED,STANDARD_CHAY + 16,picture,rect)
      when 105
        set_chr_display_out
        @effect_anime_frame = 0
      when 106..127
        sframe = 106
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
        rect = Rect.new(128, 0,128,128)
        @back_window.contents.blt(-16+(@battle_anime_frame-sframe)*RAY_SPEED,STANDARD_CHAY - 30,picture,rect)
        @back_window.contents.blt(-16+(@battle_anime_frame-sframe)*RAY_SPEED,STANDARD_CHAY - 4,picture,rect)
      when 128
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 2920 #超能力きこうほう改
        ray_x = 328
        ray_y = 148
        
        color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        @ray_color = 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        back_anime_pattern 39
        if $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        end
      when 40..59
        @chay = -120
        @ax = 0
        @ay = 0
        back_anime_pattern 40
      when 60
        back_anime_pattern 40
        Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
      when 61..149
        back_anime_pattern 105,222,60-50
        @back_anime_frame -= 1
        back_anime_pattern 105,218,60+50
        @back_anime_frame -= 1
        back_anime_pattern 44
      when 150
        Audio.se_stop
        @chay = -200
        @tec_output_back_no = 3 
        @tec_output_back = true
      when 151..359
        sframe = 151
        if @battle_anime_frame == sframe

        end

        picture = Cache.picture("Z3_必殺技_新気功砲(テンシンハン・服あり)")
        rect = Rect.new(0, 0, 170, 160)
        @back_window.contents.blt(208,98,picture,rect)
        
        case @battle_anime_frame
        when sframe + 40..sframe + 43,sframe + 80..sframe + 83,sframe + 120..sframe + 123,sframe + 160..sframe + 163
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
            #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe+40 || @battle_anime_frame == sframe+80 || @battle_anime_frame == sframe+120 || @battle_anime_frame == sframe+160
        end
      when 360
        Audio.se_stop
        @tec_output_back = false
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        
        Audio.se_play("Audio/SE/" + "Z1 ザー")
        Audio.se_play("Audio/SE/" + "Z1 ゴー")
      when 361..561
        sframe = 361
        #ray_x = 346
        #ray_y = 136
        back_anime_pattern 9
        case @battle_anime_frame
        when sframe+30..sframe+33,sframe+70..sframe+73,sframe+110..sframe+113,sframe+150..sframe+153
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          #Audio.se_play("Audio/SE/" + "Z3 拡散エネルギー波拡散") if @battle_anime_frame == 170 || @battle_anime_frame == 210 || @battle_anime_frame == 250 || @battle_anime_frame == 290
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe+30 || @battle_anime_frame == sframe+70 || @battle_anime_frame == sframe+110 || @battle_anime_frame == sframe+150
        end
      when 562
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2921 #激烈魔閃光弾
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      #if @battle_anime_frame <= 500 
      ray_x = 324
      ray_y = 80
      #else
      #ray_x = 340
      #ray_y = 200
      #end

      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 5
          @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true 
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 18 #ご飯
          @scombo_cha2 = 4
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 18 && @battle_anime_frame == 40 #ご飯
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 4
        @scombo_cha2 = 5
        @scombo_cha2 = 18 if $super_saiyazin_flag[2] == true 
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,13
        #@scombo_cha2_anime_type = 2
        @ray_color = 1
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x - 12 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..348
        sframe = 188
        picture = Cache.picture("Z3_必殺技_激烈光弾(ピッコロ)")
        rect = Rect.new(0, 0, 218, 230)
        @back_window.contents.blt(190,66,picture,rect)
        if @battle_anime_frame == sframe
          @chay = -200
          
          @tec_back_small = true
          #@chr_cutin_flag = false
          Audio.se_stop
          
        end
        if @battle_anime_frame >= sframe + 90
          @effect_anime_pattern = 252
          ray_x = 322-16
          ray_y = 164-16
          @ray_anime_type = 0 if @battle_anime_frame == sframe + 90
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        elsif @battle_anime_frame >= sframe + 30
          @effect_anime_pattern = 235
          ray_x = 322
          ray_y = 164
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe + 30 # 効果音を再生する
        end
      when 349..549
        sframe = 349
        eframe = 549
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
        end
      
        @chr_cutin = false
        @tec_output_back_no = 1
        iwax=[166,230,260,364,420,480,200,440,400]
        iway=[560,540,480,480,480,500,580,600,520]
        iwabig = [1,0,1,1,0,1,0,1,0]
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG SE057") if @battle_anime_frame == sframe + 30
        @chay = -200
        itix = 280
        itiy = 72
        yure = rand(3)
        
        if yure == 2
          itix += 2
        elsif yure == 1
          itix -= 2
        end
        
        if $game_variables[172] == 2
          picture = Cache.picture("ZG_必殺技_激烈魔閃光1(悟飯)_赤道着")
        else
          picture = Cache.picture("ZG_必殺技_激烈魔閃光1(悟飯)")
        end
        rect = Rect.new(0, 0, 80, 176)
        @back_window.contents.blt(itix,itiy,picture,rect)
        
        picture = Cache.picture("ZG_必殺技_岩")
        for x in 0..iwax.size - 1
          if iwabig[x] == 1
            iway[x] -= 4 * (@battle_anime_frame-sframe)
            rect = Rect.new(16, 0, 28, 20)
          else
            iway[x] -= 2 * (@battle_anime_frame-sframe)
            rect = Rect.new(0, 0, 16, 14)
          end
          @back_window.contents.blt(iwax[x],iway[x],picture,rect)
        end
        
        
        case @battle_anime_frame
        
        when sframe+156..sframe+159
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color1)
        when sframe+160..sframe+163
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
        when sframe+164..sframe+200
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color3)
        end
        
        if @battle_anime_frame == eframe
          @tec_output_back_no = 0
        end
      when 550..659
        sframe = 550
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY - 50
          Audio.se_stop
          @chr_cutin = true
          battle_anime_change 0,14
          @scombo_cha2_anime_type = 3
          #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @ray_color = 1
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_pattern = 295
      when 660 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 661
        #Audio.se_stop
      when 662..687
        @effect_anime_pattern = 48
      when 688
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2922 #ファイナルバスター
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      #if @battle_anime_frame <= 500 
      ray_x = 324
      ray_y = 80
      #else
      #ray_x = 340
      #ray_y = 200
      #end

      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha2 = 20
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 20 #トランクス
          @scombo_cha2 = 19
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 19
        @scombo_cha2 = 20
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
        @ray_color = 3

      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,12
        
        #トランクスの衣装No
        case $game_variables[173]
        
        when 0,4
          @scombo_cha2_anime_type = 10
        when 1,2,3
          @scombo_cha2_anime_type = 12
        end
        @ray_color = 3
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x - 18 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 188..299
        sframe = 188
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY - 50
          Audio.se_stop
          @chr_cutin = true
          battle_anime_change 0,14
          @scombo_cha2_anime_type = 3
          #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @ray_color = 3
          
          battle_anime_change 0,13
          
          #トランクスの衣装No
          case $game_variables[173]
          
          when 0,4
            @scombo_cha2_anime_type = 11
          when 1,2,3
            @scombo_cha2_anime_type = 13
          end
          

        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_pattern = 295
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..327
        @effect_anime_pattern = 48
      when 328
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2923 #ファイナルかめはめ波
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      #if @battle_anime_frame <= 500 
      ray_x = 324
      ray_y = 80
      #else
      #ray_x = 340
      #ray_y = 200
      #end

      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      wake_color = Color.new(188,188,188,256)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 14 #悟空
          @scombo_cha2 = 19
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 19 #ベジータ
          @scombo_cha2 = 14
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 19 && @battle_anime_frame == 40 #ベジータ
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 14
        @scombo_cha2 = 19
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
          if $btl_progress >= 2
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            @ray_color = 0
          else
            Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
            @ray_color = 0
          end
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        @ray_color = 3

      when 61..187
        eframe = 187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,2
        @scombo_cha2_anime_type = 12
        @ray_color = 3
        back_anime_pattern backhai_no,back_x - 18,back_y+50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x - 12 ,back_y-50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        @tec_output_back_no = 4 if @battle_anime_frame == eframe
      when 188..297
        sframe = 188
        eframe = 297
        @effect_anime_pattern = 235
        if @battle_anime_frame == sframe
          Audio.se_stop 
          Audio.se_play("Audio/SE/" + "ZG SE053")
          @chr_cutin = false
          #@eney = -200
          @chay = -200
          @ray_color = 0
        end
        if @battle_anime_frame == eframe
          @tec_output_back_no = 6
        end
        itix = 258
        itiy = 46
        ray_x = itix + 16
        ray_y = itiy + 86
        if $game_variables[171] == 1
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_ボロボロ)")
        elsif $game_variables[171] == 2
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_さらにボロボロ)")
        elsif $game_variables[171] == 3
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_バトルスーツ)")
        else
          picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空)") #ダメージ表示用
        end
        
        rect = Rect.new(0, 0,122,212)
        @back_window.contents.blt(itix,itiy,picture,rect)
      when 298..399
        sframe = 298
        eframe = 399
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
          
          @effect_anime_pattern = 0
        end
        if @battle_anime_frame == eframe
          @tec_output_back_no = 0
        end
        kien_x = 220
        kien_y = 80
        
        #@chay = -160
        kienkizyunframe = 175
        kiptan = 0
        picture = Cache.picture("ZG_必殺技_ファイナルフラッシュ(溜め)_ベジータ")
        bezikat_x = 130
        bezikat_y = 130
        rect = Rect.new(0, 0, 382, 96)
        
        picture1 = Cache.picture("ZG_必殺技_ファイナルフラッシュ(溜め)_ベジータ(気)")
        
        if @battle_anime_frame > sframe + 10
          @back_window.contents.blt(bezikat_x,bezikat_y,picture1,rect)
        end
        
        if @battle_anime_frame >= sframe + 10 && @battle_anime_frame <= sframe + 70
          if @battle_anime_frame % 2 == 1
            bezikat_x -= 2
          else
            bezikat_x += 2
          end
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
      when 400..509
        sframe = 400
        if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY - 50
          Audio.se_stop
          @chr_cutin = true
          battle_anime_change 0,3
          @scombo_cha2_anime_type = 13
          #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @ray_color = 0
          @effect_anime_frame = 0
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_pattern = 372
        ray_x = 328
        ray_y = 84
      when 510 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 511
        #Audio.se_stop
      when 512..537
        @effect_anime_pattern = 365
      when 538
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2924 #未来のZ戦士
      if $btl_progress >= 2
        backhai_no = 201
        back_x = 234
        back_y = -18 + 54+ 50
      else
        backhai_no = 105
        back_x = 218
        back_y = 60
      end
      #if @battle_anime_frame <= 500 
      ray_x = 324
      ray_y = 80
      #else
      #ray_x = 340
      #ray_y = 200
      #end

      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      wake_color = Color.new(188,188,188,256)
      
      #トランクスの衣装No
      case $game_variables[173]
      
      when 0,4

        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 20
            @effect_anime_pattern = 90
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 26
            @effect_anime_pattern = 89
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = +5
            else
              @ay = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
            @chay -= 100
          end
          @btl_ani_cha_chg_no = 26
          @scombo_cha2 = 20
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
        when 60
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 0
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 0
            end
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @ray_color = 3

        when 61..187
          eframe = 187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4
          @scombo_cha2_anime_type = 0
          @ray_color = 3
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          back_anime_pattern backhai_no,back_x - 8 ,back_y-50
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          
          #@tec_output_back_no = 4 if @battle_anime_frame == eframe
        when 188..247
          sframe = 188
          eframe = 247
          if @battle_anime_frame == sframe
            @scombo_cha2_anime_type = 16
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
          
          back_anime_pattern backhai_no,back_x - 8 ,back_y-50
          back_anime_pattern 117,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50 - (@battle_anime_frame - sframe) * 24
          @back_anime_frame -= 1
          
          if @battle_anime_frame == eframe
            #処理の番号変えるのが手間だから、フレームをずらす
            @battle_anime_frame = 370
            Audio.se_stop
          end
        when 371
          @btl_ani_cha_chg_no = 20
          #@chr_cutin = true
          @tec_output_back_no = 3
          @output_anime_type = 1
          battle_anime_change 0,3
          #@output_anime_type = 0
          battle_anime_change 1,0
          tranidoux = 8
          tranidouy = 8
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
          #Audio.se_play("Audio/SE/" + "DB3 刀")
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @enedatenum == 102
          @chax = CENTER_ENEX
          @chay = STANDARD_ENEY
          @chax -= (96+tranidoux*49)
          @chay -= (tranidouy*49)
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @enex += (tranidoux*52)
          @eney += (tranidouy*52)
          @gy = 0
          #@chax = 160
          #@chay = 160
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          
        when 372..590
          tranidoux = 8
          tranidouy = 8
          if @battle_anime_frame <= 420
            @chax += tranidoux
            @chay += tranidouy

          end
          
          if @battle_anime_frame <= 450
            if @effect_anime_type == 0 && @effect_anime_frame == 0
              @chax += 4
            elsif @effect_anime_type == 1 && @effect_anime_frame == 0
              @chax -= 4
            end

            if @effect_anime_frame >= 2
              if @effect_anime_type == 0
                @effect_anime_type += 1
                @effect_anime_frame = 0
              else
                @effect_anime_type = 0
                @effect_anime_frame = 0
              end
            else
              @effect_anime_frame +=1
            end
          end
          
          if @battle_anime_frame >= 430 && @battle_anime_frame <= 455
            
            #p @enex,@eney
            @enex -= tranidoux*2
            @eney -= tranidouy*2
            
            
            if @battle_anime_frame == 455
              battle_anime_change 0,4

              @chax += 16
              Audio.se_play("Audio/SE/" + "DB3 刀")
              #Audio.se_play("ZG 打撃5")

              @chr_cutin = true
              
              if $game_variables[173] != 0 && $super_saiyazin_flag[4] == true
                @effect_anime_pattern = 269
              end
            end
          end
          
          if @battle_anime_frame >= 455 && @battle_anime_frame <= 491 && $game_variables[173] == 0 && $super_saiyazin_flag[4] == true
            @chay = -200
            @eney = -200
            
            if $game_variables[96] == 1
              @chr_cutin = false
              picture = Cache.picture("Z3_必殺技_シャイニングソードアタック(フリーザ付)")
            else
              picture = Cache.picture("Z3_必殺技_シャイニングソードアタック")
            end
            rect = Rect.new(0, 0, 340, 346)
            @back_window.contents.blt(100,10,picture,rect)
            
            
          end
          kiruse = "DB3 刀"
          
          katana_frame = 500
          if @battle_anime_frame == katana_frame-8
            @chr_cutin = true
            #@chr_cutin_mirror_flag = true
            @chay = 120
            @eney = 120
            battle_anime_change 0,5
            @chax -= 22
          end
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 267
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,8
            @chax -= 22
          end
          
          katana_frame = 510
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,6
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 268
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,5
            @chax -= 22
          end
          katana_frame = 520
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 267
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,3
            @chax -= 16
          end
          
          katana_frame = 530
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 16
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 269
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,5
            @chax -= 22
            #Audio.se_play("Audio/SE/" + "Z1 高速移動")
            #Audio.se_play("Audio/SE/" + "Z1 気を溜める")
            #@tec_output_back_no = 0
          end
          katana_frame = 540
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 267
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,8
            @chax -= 22
          end
          
          katana_frame = 550
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,6
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 268
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,5
            @chax -= 22
          end
          katana_frame = 560
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 22
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 267
          elsif @battle_anime_frame == katana_frame +6
            battle_anime_change 0,3
            @chax -= 16
          end
          
          katana_frame = 570
          if @battle_anime_frame == katana_frame
            Audio.se_play("Audio/SE/" + kiruse)
            battle_anime_change 0,4
            @chax += 16
            @ray_anime_type = 0
            @ray_anime_frame = 0
            @effect_anime_pattern = 269
          end
          case @effect_anime_pattern
          
          when 267,268
            ray_x = 228
            ray_y = 134-16
          when 269,270
            ray_x = 292
            ray_y = 70
          when 256
            ray_x = 336-32
            ray_y = 112
          end
        when 591..622
          sframe = 591
          if @battle_anime_frame == sframe
            @tec_output_back_no = 0
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            battle_anime_change 0,16
            @output_anime_type = 0
          end
          
          case (@battle_anime_frame - sframe)
            
          when 0..15
            @chax -= 8
          when 16..23
            #動かない
          when 24..31
            @chax += 24
            if (@battle_anime_frame - sframe) == 27
              battle_anime_change 0,3
            end
          end
        when 623..650
          sframe = 623
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 1,16
          end
          
          @enex += 24
          @eney -= 16
        when 651..679
          sframe = 651
          if @battle_anime_frame == sframe
            @enex = -100
            @eney = STANDARD_ENEY + 50
            @chax = -150
            @chay = STANDARD_ENEY + 50
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            @btl_ani_cha_chg_no = 26
            @output_anime_type = 1
            battle_anime_change 0,10
          end
          
          if @battle_anime_frame <= (sframe + 23)
            @enex += 16
            @eney -= 2
          else
            battle_anime_change 1,0
          end
          @chax += 28
          @chay -= 4
        when 680
          battle_anime_change 0,15
          @chax = 740
          @chay = STANDARD_ENEY
        when 681..694
          @chax -= 28
        when 695..715
          sframe = 695
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "ZG 打撃2")
            @chax -= 28
          end
          
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= (sframe + 8)
          battle_anime_change 0,17
          battle_anime_change 1,17
          @enex -= 20
        when 716..734
          sframe = 716
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
          battle_anime_change 0,15
          @chax -= 28
          @enex -= 20
        when 735
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chax = 900
          @chay = STANDARD_ENEY
          @enex = 640
          @eney = STANDARD_ENEY
        when 736..754
          @chax -= 28
          @enex -= 20
        when 755
          sframe = 755
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == sframe
          @chax -= 28
          battle_anime_change 0,16
        when 756..779
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= 374
          @enex -= 4
          @eney += 16
        when 780
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chr_cutin = false
          @chr_cutin_flag = false
          @tec_output_back_no = 1
          @chax = CENTER_CHAX-30
          @chay = -184
          @enex = CENTER_ENEX-40
          @eney = -140
          battle_anime_change 0,10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 781..794
          @eney += 16
          @chay += 24
          @chax += 4
        when 795
          battle_anime_change 0,18
          Audio.se_play("Audio/SE/" + "ZG 打撃1")
        when 796..829
          if @battle_anime_frame % 4 == 0
            #@chax += 4
            @enex += 4
          elsif @battle_anime_frame % 2 == 0
            #@chax -= 4
            @enex -= 4
          end
          @chay -= 4
          @eney -= 4
        when 830
          @output_anime_type = 1
          battle_anime_change 0,20
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 831..859
          @chay += 2
          @eney += 16
        when 860
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,29
        when 861..879
          @chay -= 16
          @chax -= 16
        when 900
          #@tec_back_small = false
          @chr_cutin = true
          @chr_cutin_flag = true
          @tec_output_back_no = 0
          @btl_ani_cha_chg_no = 26
          @scombo_cha2 = 20
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
          @ray_color = 3
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY - 50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50

        when 901..1027
          sframe = 901
          eframe = 1027
          if @battle_anime_frame == sframe
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            battle_anime_change 0,4
            #トランクスの衣装No
            case $game_variables[173]
            
            when 0,4
              @scombo_cha2_anime_type = 10
            when 1,2,3
              @scombo_cha2_anime_type = 12
            end
            @ray_color = 3
          end
          
          battle_anime_change 0,5 if @battle_anime_frame == (sframe + 60)
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          back_anime_pattern backhai_no,back_x - 8 ,back_y-50
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          
        when 1028..1126
          sframe = 1028
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            Audio.se_play("Audio/SE/" + "Z1 大猿")
            Audio.se_play("Audio/SE/" + "ZG 光線1")
            @chax += 2
            battle_anime_change 0,2
            #トランクスの衣装No
            case $game_variables[173]
            
            when 0,4
              @scombo_cha2_anime_type = 11
            when 1,2,3
              @scombo_cha2_anime_type = 13
            end
            @effect_anime_pattern = 295
          end

          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        when 1127
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          battle_anime_change 1,16
          set_chr_display_out
        when 1128..1153
          @effect_anime_pattern = 48
        when 1154
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
        
        
      when 1,2,3
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 20
            @effect_anime_pattern = 90
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 26
            @effect_anime_pattern = 89
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = +5
            else
              @ay = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 20 && @battle_anime_frame == 40 #トランクス
            @chay -= 100
          end
          @btl_ani_cha_chg_no = 26
          @scombo_cha2 = 20
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
        when 60
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 0
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 0
            end
            Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          @ray_color = 3

        when 61..187
          eframe = 187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4
          @scombo_cha2_anime_type = 0
          @ray_color = 3
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          back_anime_pattern backhai_no,back_x - 8 ,back_y-50
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          
          #@tec_output_back_no = 4 if @battle_anime_frame == eframe
        when 188
          #@tec_output_back = false
          #@chr_cutin = false
          #@ay  -= 2
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
          battle_anime_change 0,7
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          @back_anime_frame -= 1
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          #back_anime_pattern 2
        when 189..240
          @chax += 20
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          @back_anime_frame -= 1
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          #back_anime_pattern 101,back_x,back_y
        when 241
          Audio.se_stop
          #set_chr_display_out
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          @output_anime_type = 1
          @chax = -320
          @chay = STANDARD_CHAY
        when 242..270
          @chax += 20
        when 271
          battle_anime_change 0,11
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          
        when 272..300
          battle_anime_change 1,16
          @effect_anime_pattern = 123
          ray_x = 346
          ray_y = 154
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= 220
          @enex += 20
          @eney -= 4
        when 301..320
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 241
          @chax += 24
          @chay -= 4
          battle_anime_change 0,10
        when 321..349
          sframe = 321
          if @battle_anime_frame == sframe
            @enex = -100
            @eney = STANDARD_ENEY + 50
            @chax = -150
            @chay = STANDARD_ENEY + 50
          end
          
          if @battle_anime_frame <= (sframe + 23)
            @enex += 16
            @eney -= 2
          else
            battle_anime_change 1,0
          end
          @chax += 28
          @chay -= 4
        when 350
          battle_anime_change 0,15
          @chax = 740
          @chay = STANDARD_ENEY
        when 351..364
          @chax -= 28
        when 365..385
          sframe = 365
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "ZG 打撃2")
            @chax -= 28
          end
          
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= (sframe + 8)
          battle_anime_change 0,17
          battle_anime_change 1,17
          @enex -= 20
        when 386..404
          sframe = 386
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
          battle_anime_change 0,15
          @chax -= 28
          @enex -= 20
        when 405
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chax = 900
          @chay = STANDARD_ENEY
          @enex = 640
          @eney = STANDARD_ENEY
        when 406..424
          @chax -= 28
          @enex -= 20
        when 425
          sframe = 425
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == sframe
          @chax -= 28
          battle_anime_change 0,16
        when 426..449
          sframe = 426
          @effect_anime_pattern = 123
          ray_x = 324
          ray_y = 158
          
          @effect_anime_pattern = 0 if @battle_anime_frame >= (sframe + 8)
          @enex -= 4
          @eney += 16
        when 450
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chr_cutin = false
          @chr_cutin_flag = false
          @tec_output_back_no = 1
          @chax = CENTER_CHAX-30
          @chay = -184
          @enex = CENTER_ENEX-40
          @eney = -140
          battle_anime_change 0,10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 451..464
          @eney += 16
          @chay += 24
          @chax += 4
        when 465
          battle_anime_change 0,18
          Audio.se_play("Audio/SE/" + "ZG 打撃1")
        when 466..499
          if @battle_anime_frame % 4 == 0
            #@chax += 4
            @enex += 4
          elsif @battle_anime_frame % 2 == 0
            #@chax -= 4
            @enex -= 4
          end
          @chay -= 4
          @eney -= 4
        when 500
          @output_anime_type = 1
          battle_anime_change 0,20
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 501..529
          @chay += 2
          @eney += 16
        when 530
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          battle_anime_change 0,29
        when 531..549
          @chay -= 16
          @chax -= 16
        when 570
          #@tec_back_small = false
          @chr_cutin = true
          @chr_cutin_flag = true
          @tec_output_back_no = 0
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @chax = -96
          @chay = STANDARD_CHAY
          @eney = -100
          @btl_ani_cha_chg_no = 20
          @output_anime_type = 1
          battle_anime_change 0,8
        when 571..583
          @chax += 24
          @eney += 18
          if @eney > STANDARD_CHAY
            @eney = STANDARD_CHAY
          end
        when 584..612
          sframe = 584
          
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 強打")
          end
          
          #味方
          case (@battle_anime_frame - sframe)
          
          when 7..10,15..18,23..26,31..34
            @output_anime_type = 0
            @chax += 2
            battle_anime_change 0,1
          when 11..14,19..22,27..30,35..38
            @chax += 2
            battle_anime_change 0,2
          end

          
          #敵
          case (@battle_anime_frame - sframe)
          
          when 0..3
            @enex += 16
            @eney -= 4
            battle_anime_change 1,16
          when 4..6
            @enex -= 16
            @eney += 4
          when 7..8
            @enex += 2
          when 9..38
            @enex += 2
          end
   
          #SE
          case (@battle_anime_frame - sframe)
          
          when 7,11,15,19,23,27,31,35
            Audio.se_play("Audio/SE/" + "Z1 打撃")
          end
        when 613..630
          sframe = 613
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 強打")
            battle_anime_change 0,3
            battle_anime_change 1,17
          end
          
          @enex += 24
          @eney -= 24
        when 631..659
          sframe = 631
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
            battle_anime_change 0,16
          end
          @chax -= 16
          @chay -= 24
        when 660
          #@tec_back_small = false
          @chr_cutin = true
          @chr_cutin_flag = true
          @tec_output_back_no = 0
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 26
          @scombo_cha2 = 20
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
          @ray_color = 3
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY - 50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50

        when 661..787
          sframe = 661
          eframe = 787
          if @battle_anime_frame == sframe
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            battle_anime_change 0,4
            #トランクスの衣装No
            case $game_variables[173]
            
            when 0,4
              @scombo_cha2_anime_type = 10
            when 1,2,3
              @scombo_cha2_anime_type = 12
            end
            @ray_color = 3
          end
          
          battle_anime_change 0,5 if @battle_anime_frame == (sframe + 60)
          back_anime_pattern backhai_no,back_x - 8,back_y+50
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          back_anime_pattern backhai_no,back_x - 8 ,back_y-50
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
          
        when 788..886
          sframe = 788
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            Audio.se_play("Audio/SE/" + "Z1 大猿")
            Audio.se_play("Audio/SE/" + "ZG 光線1")
            @chax += 2
            battle_anime_change 0,2
            #トランクスの衣装No
            case $game_variables[173]
            
            when 0,4
              @scombo_cha2_anime_type = 11
            when 1,2,3
              @scombo_cha2_anime_type = 13
            end
            @effect_anime_pattern = 295
          end

          back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        when 887
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          battle_anime_change 1,16
          set_chr_display_out
        when 888..913
          @effect_anime_pattern = 48
        when 914
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
        
        
      end
    when 2925 #サイコ気円裂斬(クリリン＆チャオズ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        wake_color = Color.new(188,188,188,256)
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 6 #クリリン
            @scombo_cha2 = 9
            @effect_anime_pattern = 90
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = -5
            else
              @ay = 0
            end
          elsif $partyc[@chanum.to_i] == 9 #チャオズ
            @scombo_cha2 = 6
            @effect_anime_pattern = 89
            if @battle_anime_frame <= 10
              #@ax = -2
              @ay = +5
            else
              @ay = 0
            end
          end
        when 40..59
          if $partyc[@chanum.to_i] == 9 && @battle_anime_frame == 40 #チャオズ
            @chay -= 100
          end
          @btl_ani_cha_chg_no = 6
          @scombo_cha2 = 9
          @effect_anime_pattern = 92
          #@effect_anime_pattern = 85
        when 60..150
          sframe = 60
          @ray_color = 0
          if @battle_anime_frame ==sframe
            @effect_anime_pattern = 0
            Audio.se_play("Audio/SE/" + "Z1 高速移動")
            Audio.se_play("Audio/SE/" + "Z3 変身")
            @ray_color = 0
            @output_anime_type = 1
            battle_anime_change 0,5
            #@chay = -200
          end
          #@effect_anime_pattern = 86
          #@chay = -120 #キャラ画面範囲外へ
          #@effect_anime_pattern = 0
          #@back_anime_frame -= 1
          #back_anime_pattern 48,TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76 - 100
          
          #気を溜める
          back_anime_pattern backhai_no,back_x,back_y - 50
          #@back_anime_frame -= 1
          #back_anime_pattern 118,TEC_CENTER_CHAX,STANDARD_CHAY + 50
          if @battle_anime_frame <= sframe + 49
            #高速移動
            if @battle_anime_frame % 4 == 0
              picture = Cache.picture("戦闘アニメ") #ダメージ表示用
              rect = Rect.new(0, 48,64,64)
              @back_window.contents.blt(TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76,picture,rect)
            end
          end
        when 151..271
          start_frame = 151
          eframe = 271
          @chr_cutin_flag = true if @battle_anime_frame == eframe
          
          kien_x = 250
          kien_y = 80
          
          kien_x_base = kien_x
          kien_y_base = kien_y
          
          @tec_output_back_no = 2
          Audio.se_stop if @battle_anime_frame == start_frame
          @chay = -160
          kienkizyunframe = 31 + start_frame
          picture = Cache.picture("Z3_必殺技_気円烈斬(クリリン)")
          rect = Rect.new(0, 0, 130, 168)
          @back_window.contents.blt(182,130,picture,rect)
          picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
          rect = Rect.new(0, 30*0, 126, 30)
          
          rect = Rect.new(0, 30*1, 126, 30) if @battle_anime_frame >= kienkizyunframe - 15
          rect = Rect.new(0, 30*4, 126, 30) if @battle_anime_frame >= kienkizyunframe + 15
          if @battle_anime_frame >= kienkizyunframe
            
            
            kien_kizyun_x = 6
            kien_kizyun_y = 2
            kien_mawarikata = 0
            case @battle_anime_frame
            
            when kienkizyunframe +10,kienkizyunframe +26
              kien_mawarikata = 1
            when kienkizyunframe +11,kienkizyunframe +27
              kien_mawarikata = 2
            when kienkizyunframe +12,kienkizyunframe +28
              kien_mawarikata = 3
            when kienkizyunframe +13,kienkizyunframe +29
              kien_mawarikata = 4
            when kienkizyunframe +14,kienkizyunframe +30
              kien_mawarikata = 5
            when kienkizyunframe +15,kienkizyunframe +31
              kien_mawarikata = 6
            when kienkizyunframe +16,kienkizyunframe +32
              kien_mawarikata = 7
            when kienkizyunframe +17,kienkizyunframe +33
              kien_mawarikata = 8
            when kienkizyunframe +18,kienkizyunframe +34
              kien_mawarikata = 9
            when kienkizyunframe +19,kienkizyunframe +35
              kien_mawarikata = 10
            when kienkizyunframe +20,kienkizyunframe +36
              kien_mawarikata = 11
            when kienkizyunframe +21,kienkizyunframe +37
              kien_mawarikata = 12
            when kienkizyunframe +22,kienkizyunframe +38
              kien_mawarikata = 13
            when kienkizyunframe +23,kienkizyunframe +39
              kien_mawarikata = 14
            when kienkizyunframe +24,kienkizyunframe +40
              kien_mawarikata = 15
            else
              kien_mawarikata = 0
            end

            
            case kien_mawarikata
            
            when 0 #下
              kien_x = kien_x_base
              kien_y = kien_y_base
            when 1
              kien_x = kien_x_base + kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 1
            when 2
              kien_x = kien_x_base + kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 3
            when 3
              kien_x = kien_x_base + kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 6
            when 4 #右
              kien_x = kien_x_base + kien_kizyun_x * 10
              kien_y = kien_y_base - kien_kizyun_y * 10
            when 5
              kien_x = kien_x_base + kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 14
            when 6
              kien_x = kien_x_base + kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 17
            when 7 
              kien_x = kien_x_base + kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 19
            when 8 #上
              kien_x = kien_x_base + kien_kizyun_x * 0
              kien_y = kien_y_base - kien_kizyun_y * 20
            when 9
              kien_x = kien_x_base - kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 19
            when 10 
              kien_x = kien_x_base - kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 17
            when 11
              kien_x = kien_x_base - kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 14
            when 12 #左
              kien_x = kien_x_base - kien_kizyun_x * 10
              kien_y = kien_y_base - kien_kizyun_y * 10
            when 13
              kien_x = kien_x_base - kien_kizyun_x * 9
              kien_y = kien_y_base - kien_kizyun_y * 6
            when 14 
              kien_x = kien_x_base - kien_kizyun_x * 7
              kien_y = kien_y_base - kien_kizyun_y * 3
            when 15
              kien_x = kien_x_base - kien_kizyun_x * 4
              kien_y = kien_y_base - kien_kizyun_y * 1
            end
            
          end
          
          if @battle_anime_frame >= kienkizyunframe + 50
            Audio.se_play("Audio/SE/" + "Z3 エネルギー波") if @battle_anime_frame == kienkizyunframe + 50
            kien_y = 80 - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
            kien_x += 12 * (@battle_anime_frame-(kienkizyunframe + 50))
            #p kien_x,kien_y
          end
          
          @back_window.contents.blt(kien_x,kien_y,picture,rect)
        when 272
          #@effect_anime_pattern = 0
          #@effect_anime_frame = 0
          #@effect_anime_type = 0
          #@tec_output_back_no = 0
          #@chr_cutin = true
          set_chr_display_out
          #サイコアタック
          @btl_ani_cha_chg_no = 9
          @chax = -200
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        when 273..334
          sframe = 273
          back_anime_pattern 1
          #back_anime_pattern 55
          #@effect_anime_frame += 1
          @effect_anime_pattern = 88
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 21   # 効果音を再生する
          @gx = 2 if @battle_anime_frame == sframe + 21
          @gx = -2 if @battle_anime_frame == sframe + 23
          @gx = 0 if @battle_anime_frame == sframe + 25
        when 335..395
          back_anime_pattern 1
          sframe = 335
          
          utiframe = @battle_anime_frame - sframe
          
          if utiframe == 0
            @effect_anime_pattern = 88
            #@effect_anime_frame = 0
            Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 逃げる") #狼牙
          end
          #@btl_ani_cha_chg_no = 7
          #サイコアタックと狼牙をまとめて表示
          #@effect_anime_pattern = 315

          #サイコアタック揺れ
          if utiframe % 2 == 0 && utiframe <= 600
            @gx = 6
          elsif utiframe % 2 == 1 && utiframe <= 600
            @gx = -6
          else
            @ax = 0
            @ay = 0
            @gx = 0
            @gy = 0
            #Audio.se_stop
          end
        when 396..426
          sframe = 396
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
            @effect_anime_frame = 0
          end
          @effect_anime_pattern = 260
          
          if @battle_anime_frame <= sframe + 49
            #高速移動
            if @battle_anime_frame % 4 == 0
              picture = Cache.picture("戦闘アニメ") #ダメージ表示用
              rect = Rect.new(0, 48,64,64)
              @back_window.contents.blt(@enex + 86,STANDARD_ENEY+28,picture,rect)
            end
          end
        when 427
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        #@tec_output_back = false
        case @battle_anime_frame
        
         when 0
          #@effect_anime_pattern = 0
          #@effect_anime_frame = 0
          #@effect_anime_type = 0
          #@tec_output_back_no = 0
          #@chr_cutin = true
          set_chr_display_out
          #サイコアタック
          @btl_ani_cha_chg_no = 9
          @chax = -200
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        when 1..62
          sframe = 1
          back_anime_pattern 1
          #back_anime_pattern 55
          #@effect_anime_frame += 1
          @effect_anime_pattern = 88
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 21   # 効果音を再生する
          @gx = 2 if @battle_anime_frame == sframe + 21
          @gx = -2 if @battle_anime_frame == sframe + 23
          @gx = 0 if @battle_anime_frame == sframe + 25
        when 63..123
          back_anime_pattern 1
          sframe = 63
          
          utiframe = @battle_anime_frame - sframe
          
          if utiframe == 0
            @effect_anime_pattern = 88
            #@effect_anime_frame = 0
            Audio.se_play("Audio/SE/" + "Z3 超能力")    # 効果音を再生する
            #Audio.se_play("Audio/SE/" + "Z1 逃げる") #狼牙
          end
          #@btl_ani_cha_chg_no = 7
          #サイコアタックと狼牙をまとめて表示
          #@effect_anime_pattern = 315

          #サイコアタック揺れ
          if utiframe % 2 == 0 && utiframe <= 600
            @gx = 6
          elsif utiframe % 2 == 1 && utiframe <= 600
            @gx = -6
          else
            @ax = 0
            @ay = 0
            @gx = 0
            @gy = 0
            #Audio.se_stop
          end
        when 124..154
          sframe = 124
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
            @effect_anime_frame = 0
          end
          @effect_anime_pattern = 260
          
          if @battle_anime_frame <= sframe + 49
            #高速移動
            if @battle_anime_frame % 4 == 0
              picture = Cache.picture("戦闘アニメ") #ダメージ表示用
              rect = Rect.new(0, 48,64,64)
              @back_window.contents.blt(@enex + 86,STANDARD_ENEY+28,picture,rect)
            end
          end
        when 155
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2927 #ダブルエクスプロージョン(ベジータ＆トランクス)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 12
            @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
            @scombo_cha2 = 17
            @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40 #トランクス
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 12
          @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true 
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,2
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2928 #ダブルエクスプロージョン(未来悟飯＆トランクス)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 25
            @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 17
            @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40 #トランクス
            @chax -= 160 + 24
          end

          @btl_ani_cha_chg_no = 25
          @btl_ani_cha_chg_no = 26 if $super_saiyazin_flag[6] == true 
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,8
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2929 #ダブルエクスプロージョン(ピッコロ＆トランクス)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 4
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 4 #ピッコロ
            @scombo_cha2 = 17
            @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40 #トランクス
            @chax -= 160 + 24
          end

          @btl_ani_cha_chg_no = 4
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 1
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,23
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2930 #ダブルエクスプロージョン(ピッコロ＆ベジータ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
            @scombo_cha2 = 4
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 4 #ピッコロ
            @scombo_cha2 = 12
            @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19) && @battle_anime_frame == 40 #トランクス
            @chax -= 160 + 24
          end

          @btl_ani_cha_chg_no = 4
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 1
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,23
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2931 #ダブルエクスプロージョン(ベジータ＆未来悟飯)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 12
            @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
            @scombo_cha2 = 25
            @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26) && @battle_anime_frame == 40 #未来悟飯
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 12
          @btl_ani_cha_chg_no = 19 if $super_saiyazin_flag[3] == true 
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0 #8 #4
          @scombo_cha2_anime_type = 4 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,2
          @scombo_cha2_anime_type = 8
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2932 #ダブルエクスプロージョン(バーダック、ピッコロ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 4 #ピッコロ
            @scombo_cha2 = 16
            @scombo_cha2 = 32 if $super_saiyazin_flag[7] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
            @scombo_cha2 = 4
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 4) && @battle_anime_frame == 40 #ピッコロ
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 16
          @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true
          #battle_anime_change 0,0
          @scombo_cha2 = 4

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 1
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,5
          @scombo_cha2_anime_type = 23
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2933 #ダブルエクスプロージョン(バーダック、ベジータ)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19 #ベジータ
            @scombo_cha2 = 16
            @scombo_cha2 = 32 if $super_saiyazin_flag[7] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
            @scombo_cha2 = 12
            @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 12 || $partyc[@chanum.to_i] == 19) && @battle_anime_frame == 40 #ベジータ
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 16
          @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true 
          @scombo_cha2 = 12
          @scombo_cha2 = 19 if $super_saiyazin_flag[3] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,5
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2934 #ダブルエクスプロージョン(バーダック、トランクス)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
            @scombo_cha2 = 16
            @scombo_cha2 = 32 if $super_saiyazin_flag[7] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
            @scombo_cha2 = 17
            @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20) && @battle_anime_frame == 40 #トランクス
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 16
          @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true 
          @scombo_cha2 = 17
          @scombo_cha2 = 20 if $super_saiyazin_flag[4] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 0 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,5
          @scombo_cha2_anime_type = 2
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2935 #ダブルエクスプロージョン(バーダック、未来悟飯)

        ray_x = 340
        ray_y = 200
        backhai_no = 201
        back_x = TEC_CENTER_CHAX - 80 + 40
        back_y = STANDARD_CHAY - 30
        color = Color.new(255,255,255,260)
        
      if @all_attack_count == 1
        case @battle_anime_frame
        
        when 0
          #set_chr_display_out
          #@tec_output_back = false
          Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
          @output_anime_type = 1
          battle_anime_change 0,0
        when 1..39
          
          if $partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26 #未来悟飯
            @scombo_cha2 = 16
            @scombo_cha2 = 32 if $super_saiyazin_flag[7] == true 
            @effect_anime_pattern = 364
            if @battle_anime_frame <= 13
              @ax = +8
            else
              @ax = 0
            end
          elsif $partyc[@chanum.to_i] == 16 || $partyc[@chanum.to_i] == 32 #バーダック
            @scombo_cha2 = 25
            @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 
            @effect_anime_pattern = 363
            if @battle_anime_frame <= 10
              @ax = -8
            else
              @ax = 0
            end
          end
        when 40..59
          if ($partyc[@chanum.to_i] == 25 || $partyc[@chanum.to_i] == 26) && @battle_anime_frame == 40 #未来悟飯
            @chax -= 160 + 24
          end
          @btl_ani_cha_chg_no = 16
          @btl_ani_cha_chg_no = 32 if $super_saiyazin_flag[7] == true 
          @scombo_cha2 = 25
          @scombo_cha2 = 26 if $super_saiyazin_flag[6] == true 

          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          @effect_anime_pattern = 0
        when 60
          @tec_output_back_no = 1 #縦に変更
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          back_anime_pattern 118,TEC_CENTER_CHAX - 80,STANDARD_CHAY
          @back_anime_frame = 0
        when 61..187
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,4 #8 #4
          @scombo_cha2_anime_type = 4 #23 #20
          @ray_color = 3
          back_anime_pattern backhai_no,back_x-80,back_y
          #back_anime_pattern 105,218,60-50
          @back_anime_frame -= 1
          @ray_color = 3
          back_anime_pattern backhai_no,back_x+80 + 24,back_y
          @back_anime_frame -= 1
          #back_anime_pattern 105,218,60+50
          back_anime_pattern 118,TEC_CENTER_CHAX + 80+24,STANDARD_CHAY
          
        when 188..269
          sframe = 188
          battle_anime_change 0,5
          @scombo_cha2_anime_type = 8
          if @battle_anime_frame == sframe
            Audio.se_stop 
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
            #Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
          end
          back_anime_pattern 118,TEC_CENTER_CHAX +   80+24,STANDARD_CHAY
          @back_anime_frame -= 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 270
          @tec_output_back = false
          @chay = -200
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
        when 271..331
          back_anime_pattern 1
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        when 332
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @tec_output_back = false
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame % 20 == 0
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2936 #ロイヤルガード(ベジータ)
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 3
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 19 #ベジータ
          if @battle_anime_frame < 24
            #@ay = -2
            @ax = -4
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 27
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 27  #トーマ
          if @battle_anime_frame < 25
            #@ax = -3
            @ay = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 19
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 28  #セリパ
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 19
          @scombo_cha2 = 27
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 29  #トテッポ
          if @battle_anime_frame < 25
            @ay = -3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 19
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #パンブーキン
          if @battle_anime_frame < 25
            @ay = 3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 19
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 29
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX - 92
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = 19
        @scombo_cha1 = 27
        @scombo_cha2 = 28
        @scombo_cha3 = 29
        @scombo_cha4 = 30
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
        battle_anime_change 0,12
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 0
        @scombo_cha3_anime_type = 2
        @scombo_cha4_anime_type = 4
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 61..189
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 190
        Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        battle_anime_change 0,13
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 4
        @scombo_cha3_anime_type = 3
        @scombo_cha4_anime_type = 2
        
        @effect_anime_pattern = 358
        
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 191..299
        #battle_anime_change 0,3
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 353
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2937 #ロイヤルガード(トランクス)
      idougo = 212-18
      idouryou = 8
      back_x = 190
      back_y = 36
      ray_x = 346
      ray_y = 84
      @ray_color = 3
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 17 || $partyc[@chanum.to_i] == 20 #トランクス
          if @battle_anime_frame < 24
            #@ay = -2
            @ax = -4
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 27
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 27  #トーマ
          if @battle_anime_frame < 25
            #@ax = -3
            @ay = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 17
          @scombo_cha1 = 20 if $super_saiyazin_flag[4] == true
          @scombo_cha2 = 28
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 28  #セリパ
          if @battle_anime_frame < 25
            @ay = +2
            #@ax = -2
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 17
          @scombo_cha1 = 20 if $super_saiyazin_flag[4] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 29
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        elsif $partyc[@chanum.to_i] == 29  #トテッポ
          if @battle_anime_frame < 25
            @ay = -3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 17
          @scombo_cha1 = 20 if $super_saiyazin_flag[4] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 30
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY + 72
        else #パンブーキン
          if @battle_anime_frame < 25
            @ay = 3
            @ax = -3
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 17
          @scombo_cha1 = 20 if $super_saiyazin_flag[4] == true
          @scombo_cha2 = 27
          @scombo_cha3 = 28
          @scombo_cha4 = 29
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou - 68,STANDARD_CHAY - 0
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY - 48
          back_anime_pattern 120,STANDARD_CHAX+@battle_anime_frame * idouryou + 24,STANDARD_CHAY + 48
          back_anime_pattern 122,STANDARD_CHAX+@battle_anime_frame * idouryou - 48,STANDARD_CHAY - 72
        end
        
        
      when 40..59
        @ax = 0
        @ay = 0
        @chax = TEC_CENTER_CHAX - 92
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = 17
        @btl_ani_cha_chg_no = 20 if $super_saiyazin_flag[4] == true
        @scombo_cha1 = 27
        @scombo_cha2 = 28
        @scombo_cha3 = 29
        @scombo_cha4 = 30
        #@chax = TEC_CENTER_CHAX
        #@chay = STANDARD_CHAY
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める6")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,2
        @output_anime_type = 1
        #トランクスの衣装No
        case $game_variables[173]
        
        when 0,4
          battle_anime_change 0,10
        when 1,2,3
          battle_anime_change 0,12
        end
        @scombo_cha1_anime_type = 2
        @scombo_cha2_anime_type = 0
        @scombo_cha3_anime_type = 2
        @scombo_cha4_anime_type = 4
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 61..189
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 190
        Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        #トランクスの衣装No
        case $game_variables[173]
        
        when 0,4
          battle_anime_change 0,11
        when 1,2,3
          battle_anime_change 0,13
        end
        @scombo_cha1_anime_type = 4
        @scombo_cha2_anime_type = 4
        @scombo_cha3_anime_type = 3
        @scombo_cha4_anime_type = 2
        
        @effect_anime_pattern = 358
        
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 191..299
        #battle_anime_change 0,3
        back_anime_pattern 116,@chax + 92,STANDARD_CHAY - 48 #トーマ
        back_anime_pattern 118,@chax + 92,STANDARD_CHAY + 48 #セリパ
        back_anime_pattern 120,idougo,STANDARD_CHAY - 72 #トテッポ
        back_anime_pattern 122,idougo,STANDARD_CHAY + 72 #パンブーキン
      when 300 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
      when 302..326
        @effect_anime_pattern = 353
      when 327
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2939 #親子乱舞(悟飯)
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      backhai_no = 201
      back_x = TEC_CENTER_CHAX - 34
      back_y = STANDARD_CHAY - 24
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 18  #悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 10
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 10  #チチ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 18
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #悟空
          @scombo_cha1 = 10
          @scombo_cha2 = 18
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 14
          @scombo_cha1 = 10
          @scombo_cha2 = 18
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @scombo_cha1_anime_type = 6
        @scombo_cha2_anime_type = 0
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..90
        sframe = 61
        @ray_color = 3
        xfra = @battle_anime_frame - sframe
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo+xfra*24,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #@back_anime_frame -= 1
        #back_anime_pattern 8
        
        if @battle_anime_frame >= sframe +10 && @battle_anime_frame <= sframe +30
          if @battle_anime_frame == sframe +10
            Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
          end
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(idougo+104,STANDARD_CHAY + 64-66,picture,rect)
          @back_window.contents.blt(idougo+54,STANDARD_CHAY + 64+32,picture,rect)
        end
      when 91..130
        sframe = 91
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          Audio.se_stop
          @output_anime_type = 0
          battle_anime_change 0,16
          @scombo_cha2_anime_type = 7
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
        end
        @chay -= 20
        back_anime_pattern 118,idougo+xfra*24,STANDARD_CHAY + 64
      when 131..147
        sframe = 131
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        back_anime_pattern 116,-96+xfra*24,STANDARD_CHAY - 64 + 32 + xfra * 2
      when 148..250
        sframe = 148
        xfra = @battle_anime_frame - sframe
        yfra = @battle_anime_frame - (sframe + 53)
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..3,8..11,16..19,24..27
          @chax += 2
          @scombo_cha1_anime_type = 1
        when 4..7,12..15,20..23,28..31
          @chax += 2
          @scombo_cha1_anime_type = 2
        when 35
          @scombo_cha1_anime_type = 4
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 51
          @scombo_cha1_anime_type = 0
        when 53
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
        when 73
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end

        #敵
        case (@battle_anime_frame - sframe)
        
        when 1,9,17,25
          @enex += 8
          battle_anime_change 1,16
        when 3,11,19,27
          @enex -= 8
        when 4,12,20,28
          @enex += 8
        when 6,14,22,30
          @enex -= 8
        when 36..44
          @enex += 16
          battle_anime_change 1,17
        when 45
          battle_anime_change 1,16
        when 61..71
          battle_anime_change 1,0
          @enex -= 8
        when 73..100
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        end
        #SE
        case (@battle_anime_frame - sframe)
        
        when 0,4,8,12,16,20,24,28
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
        #チチ
        back_anime_pattern 115,TEC_CENTER_CHAX,STANDARD_CHAY
        #悟飯
        back_anime_pattern 118,-96+yfra*24,STANDARD_CHAY + 64 - yfra * 4
      when 251..266
        sframe = 251
        xfra = @battle_anime_frame - sframe
        
        if @battle_anime_frame == sframe
          @eney = STANDARD_CHAY + 64 + 18
          @enex = -200
        end
        
        #悟飯
        back_anime_pattern 118,-176+xfra*24,STANDARD_CHAY + 64 - xfra * 4
        
        case (@battle_anime_frame - sframe)
        
        when 0..15
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        when 21
          battle_anime_change 1,0
        end
      when 267..329
        sframe = 267
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          @chax = @enex
          @chay = @eney - 18
          @btl_ani_cha_chg_no = 18
          @output_anime_type = 1
          battle_anime_change 0,0
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 4
          @output_anime_type = 0
          battle_anime_change 0,0
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
        when 20
          #@chax += 8
          @output_anime_type = 1
          battle_anime_change 0,1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
        end
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..3
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        when 4
          battle_anime_change 1,0
        when 12..19
          @enex -= 8
        when 21
          Audio.se_play("Audio/SE/" + "Z3 跳ね返し")
        when 22..50
          battle_anime_change 1,17
          @enex += 24
        end
      when 330..388
        sframe = 330
        if @battle_anime_frame == sframe
          @enex = -200
          @chax = 640
          @chay = STANDARD_CHAY
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 14 #悟空にチェンジ
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 16..23
          @chax -= 18
          battle_anime_change 0,10
        when 24..25
          @chax -= 18
          battle_anime_change 0,11
        when 34..37,42..45,50..53
          @chax -= 2
          battle_anime_change 0,12
        when 30..33,38..41,46..49,54..58
          @chax -= 2
          battle_anime_change 0,13
        end
        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..24
          @enex += 24
        when 25
          @enex += 24
          battle_anime_change 1,16
        when 26..58
          @enex -= 2
        end
        
        #SE
        case (@battle_anime_frame - sframe)
        
        when 25
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 30,34,38,42,46,50,54
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 389..440
        sframe = 389
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..8 #
          @chax += 16
          @chay += 8
          battle_anime_change 0,16
        when 9..12
          @chax -= 24
          @chay -= 14
          battle_anime_change 0,14
        when 13
          @chax -= 24
          @chay -= 16
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29..50
          @chay -= 24
          battle_anime_change 0,16
        end
        
        #敵
        case (@battle_anime_frame - sframe)

        when 13..50
          @enex -= 24
          @eney -= 8
          battle_anime_change 1,17
        end
        
        #SE
        case (@battle_anime_frame - sframe)

        when 13
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
      when 441..507
        sframe = 441
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 14
          @scombo_cha1 = 10
          @scombo_cha2 = 18
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,2
          @scombo_cha1_anime_type = 5
          @scombo_cha2_anime_type = 11
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")
          
        end
        @ray_color = 0
        back_anime_pattern backhai_no,back_x-44,back_y -64
        @back_anime_frame -= 1
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64

      when 508..619
        sframe = 508
        if @battle_anime_frame == sframe
          Audio.se_stop
          battle_anime_change 0,3
          @scombo_cha1_anime_type = 4
          @scombo_cha2_anime_type = 12
          Audio.se_play("Audio/SE/" + "Z1 大猿")
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @ray_color = 0
        end
        
        ray_x = 356
        ray_y = 68

        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 295
      when 620 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 621
        #Audio.se_stop
      when 622..647
        @effect_anime_pattern = 48
      when 648
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2940 #親子乱舞(F悟飯)
      ray_x = 302
      ray_y = 64
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      backhai_no = 201
      back_x = TEC_CENTER_CHAX - 34
      back_y = STANDARD_CHAY - 24
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 26  #悟飯
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 10
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 10  #チチ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 14
          @scombo_cha2 = 26
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #悟空
          @scombo_cha1 = 10
          @scombo_cha2 = 26
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 14
          @scombo_cha1 = 10
          @scombo_cha2 = 26
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @scombo_cha1_anime_type = 6
        @scombo_cha2_anime_type = 0
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..90
        sframe = 61
        @ray_color = 3
        xfra = @battle_anime_frame - sframe
        back_anime_pattern backhai_no,back_x,back_y
        
        @ray_color = 1
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo+xfra*24,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #@back_anime_frame -= 1
        #back_anime_pattern 8
        
        if @battle_anime_frame >= sframe +10 && @battle_anime_frame <= sframe +30
          if @battle_anime_frame == sframe +10
            Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
          end
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(idougo+104,STANDARD_CHAY + 64-66,picture,rect)
          @back_window.contents.blt(idougo+54,STANDARD_CHAY + 64+32,picture,rect)
        end
      when 91..130
        sframe = 91
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          Audio.se_stop
          @output_anime_type = 0
          battle_anime_change 0,16
          @scombo_cha2_anime_type = 10
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
        end
        @chay -= 20
        back_anime_pattern 118,idougo+xfra*24,STANDARD_CHAY + 64
      when 131..147
        sframe = 131
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        back_anime_pattern 116,-96+xfra*24,STANDARD_CHAY - 64 + 32 + xfra * 2
      when 148..250
        sframe = 148
        xfra = @battle_anime_frame - sframe
        yfra = @battle_anime_frame - (sframe + 53)
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..3,8..11,16..19,24..27
          @chax += 2
          @scombo_cha1_anime_type = 1
        when 4..7,12..15,20..23,28..31
          @chax += 2
          @scombo_cha1_anime_type = 2
        when 35
          @scombo_cha1_anime_type = 4
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 51
          @scombo_cha1_anime_type = 0
        when 53
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
        when 73
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end

        #敵
        case (@battle_anime_frame - sframe)
        
        when 1,9,17,25
          @enex += 8
          battle_anime_change 1,16
        when 3,11,19,27
          @enex -= 8
        when 4,12,20,28
          @enex += 8
        when 6,14,22,30
          @enex -= 8
        when 36..44
          @enex += 16
          battle_anime_change 1,17
        when 45
          battle_anime_change 1,16
        when 61..71
          battle_anime_change 1,0
          @enex -= 8
        when 73..100
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        end
        #SE
        case (@battle_anime_frame - sframe)
        
        when 0,4,8,12,16,20,24,28
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
        #チチ
        back_anime_pattern 115,TEC_CENTER_CHAX,STANDARD_CHAY
        #悟飯
        back_anime_pattern 118,-96+yfra*24-36,STANDARD_CHAY + 64 - yfra * 4
      when 251..266
        sframe = 251
        xfra = @battle_anime_frame - sframe
        
        if @battle_anime_frame == sframe
          @eney = STANDARD_CHAY + 64 + 18
          @enex = -200
        end
        
        #悟飯
        back_anime_pattern 118,-176+xfra*24-36,STANDARD_CHAY + 64 - xfra * 4
        
        case (@battle_anime_frame - sframe)
        
        when 0..15
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        when 21
          battle_anime_change 1,0
        end
      when 267..329
        sframe = 267
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          @chax = @enex
          @chay = @eney - 18
          @btl_ani_cha_chg_no = 26
          @output_anime_type = 1
          battle_anime_change 0,0
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 4
          @output_anime_type = 0
          battle_anime_change 0,0
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")
        when 20
          #@chax += 8
          @output_anime_type = 1
          battle_anime_change 0,1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
        end
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..3
          battle_anime_change 1,16
          @eney -= 4
          @enex += 24
        when 4
          battle_anime_change 1,0
        when 12..19
          @enex -= 8
        when 21
          Audio.se_play("Audio/SE/" + "Z3 跳ね返し")
        when 22..50
          battle_anime_change 1,17
          @enex += 24
        end
      when 330..388
        sframe = 330
        if @battle_anime_frame == sframe
          @enex = -200
          @chax = 640
          @chay = STANDARD_CHAY
          @output_anime_type = 1
          @btl_ani_cha_chg_no = 14 #悟空にチェンジ
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 16..23
          @chax -= 18
          battle_anime_change 0,10
        when 24..25
          @chax -= 18
          battle_anime_change 0,11
        when 34..37,42..45,50..53
          @chax -= 2
          battle_anime_change 0,12
        when 30..33,38..41,46..49,54..58
          @chax -= 2
          battle_anime_change 0,13
        end
        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 0..24
          @enex += 24
        when 25
          @enex += 24
          battle_anime_change 1,16
        when 26..58
          @enex -= 2
        end
        
        #SE
        case (@battle_anime_frame - sframe)
        
        when 25
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 30,34,38,42,46,50,54
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      when 389..440
        sframe = 389
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..8 #
          @chax += 16
          @chay += 8
          battle_anime_change 0,16
        when 9..12
          @chax -= 24
          @chay -= 14
          battle_anime_change 0,14
        when 13
          @chax -= 24
          @chay -= 16
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29..50
          @chay -= 24
          battle_anime_change 0,16
        end
        
        #敵
        case (@battle_anime_frame - sframe)

        when 13..50
          @enex -= 24
          @eney -= 8
          battle_anime_change 1,17
        end
        
        #SE
        case (@battle_anime_frame - sframe)

        when 13
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
        when 29
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
      when 441..507
        sframe = 441
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 14
          @scombo_cha1 = 10
          @scombo_cha2 = 26
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,2
          @scombo_cha1_anime_type = 5
          @scombo_cha2_anime_type = 4
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")
          
        end
        @ray_color = 0
        back_anime_pattern backhai_no,back_x-44,back_y -64
        @back_anime_frame -= 1
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64

      when 508..619
        sframe = 508
        if @battle_anime_frame == sframe
          Audio.se_stop
          battle_anime_change 0,3
          @scombo_cha1_anime_type = 4
          @scombo_cha2_anime_type = 1
          Audio.se_play("Audio/SE/" + "Z1 大猿")
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @ray_color = 0
        end
        
        ray_x = 356
        ray_y = 68

        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 295
      when 620 #初期化
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 621
        #Audio.se_stop
      when 622..647
        @effect_anime_pattern = 48
      when 648
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2941 #信じる心

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 6 #クリリン
          @scombo_cha2 = 23
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 23  #18号
          @scombo_cha2 = 6
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 23 && @battle_anime_frame == 40 #16号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 6
        @scombo_cha2 = 23
        #@scombo_cha3 = 21
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..100
        sframe = 60
        
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 0
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 101..105
        battle_anime_change 0,3
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 106
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        @effect_anime_frame = 0
      when 107..140
        sframe = 107
        @effect_anime_pattern = 203
        ray_x = 340 - 8
        ray_y = 142 - 50
        @ax = 2 if @battle_anime_frame == sframe
        @ax = -2 if @battle_anime_frame == sframe + 3
        @ax = 0 if @battle_anime_frame == sframe + 6
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 141..170
        sframe = 141
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe # 効果音を再生する
        back_anime_pattern 48,TEC_CENTER_CHAX + 12,STANDARD_CHAY + 76
      when 180
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        set_chr_display_out
      when 181..209
        sframe = 181
        @effect_anime_pattern = 204
        
        if @battle_anime_frame >= sframe + 14
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 14
          back_anime_pattern 48,TEC_CENTER_CHAX - 200,STANDARD_CHAY + 24
        end
      when 210..260
        sframe = 210
        if @battle_anime_frame == sframe
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット2")    # 効果音を再生する
        end
        @gx = -8
        back_anime_pattern 48,TEC_CENTER_CHAX - 200,STANDARD_CHAY + 24
        @effect_anime_pattern = 102
        battle_anime_change 1,16
        if @battle_anime_frame >= sframe + 25
          @gx = 0
          battle_anime_change 1,0
        end
      when 261..320
        sframe = 261
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @eney = -200
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == sframe
        picture = Cache.picture("Z3_必殺技_ロケットパンチ(16号・左手)") #ダメージ表示用
        rect = Rect.new(0, 0,382,314)
        @back_window.contents.blt(TEC_CENTER_CHAX - 148,STANDARD_CHAY - 106,picture,rect)
      when 321..350
        sframe = 321
        if @battle_anime_frame == sframe
          #Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @scombo_cha2_anime_type = 3
          @effect_anime_pattern = 273
        end
        ray_x = 138 - 16
        ray_y = 156
        @effect_anime_frame = 0
        back_anime_pattern 118,TEC_CENTER_CHAX - 216 + 0,STANDARD_CHAY
        @eney = STANDARD_CHAY
      when 351..378
        sframe = 351
        @scombo_cha2_anime_type = 3
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe
        back_anime_pattern 118,TEC_CENTER_CHAX - 216 + 0,STANDARD_CHAY
        @effect_anime_pattern = 273
        ray_x = 138
        ray_y = 156
      when 379
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2942 #月を破壊する者

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 24 #亀仙人
          @scombo_cha2 = 4
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 4 #ピッコロ
          @scombo_cha2 = 24
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        sframe = 40
        if $partyc[@chanum.to_i] == 4 && @battle_anime_frame == sframe
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 24
        @scombo_cha2 = 4
        #@scombo_cha3 = 21
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..199
        sframe = 60
        if @battle_anime_frame == sframe
          @chay = -200 #キャラ画面範囲外へ
          Audio.se_play("Audio/SE/" + "Z1 満月")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,0
          @ray_color = 0
          @tec_output_back = false
          @chr_cutin = false
          @effect_anime_pattern = 0
        end
        
        picture = Cache.picture("Z1_戦闘_必殺技_満月") #ダメージ表示用
        mangetu_rect_x = @battle_anime_frame / 8
        mangetu_rect_x = 10 if mangetu_rect_x > 10
        mangetu_rect_y = @battle_anime_frame * 2
        mangetu_rect_y = 48 if mangetu_rect_y > 48
        rect = Rect.new(48*mangetu_rect_x, 0,48,mangetu_rect_y)
        
        hiku_frame = @battle_anime_frame*2
        hiku_frame = 300 if @battle_anime_frame > 150 
        mangetu_x = 596 - hiku_frame
        mangetu_y = 354 - hiku_frame
        @back_window.contents.blt(mangetu_x,mangetu_y,picture,rect)
      when 200..320
        sframe = 200
        if @battle_anime_frame == sframe
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @scombo_cha2_anime_type = 2
          @ray_color = 0
          @chay = STANDARD_CHAY - 50
          @tec_output_back = true
          @chr_cutin = true
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 321..440
        sframe = 321
        xfra = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          battle_anime_change 0,3
          @scombo_cha2_anime_type = 3
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @effect_anime_type = 0
        end
        
        ray_x = TEC_CENTER_CHAX + 84
        ray_y = STANDARD_CHAY - 8
        
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(0, 0,xfra*RAY_SPEED,128)
        @back_window.contents.blt(ray_x-20,ray_y-50,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円(緑)")
        @back_window.contents.blt(ray_x-8,ray_y+50-20,picture,rect)
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 441..509
        sframe = 441
        xfra = @battle_anime_frame - sframe
        ray_x = 0
        ray_y = STANDARD_CHAY - 8
        if @battle_anime_frame == sframe
          @chay = -200
        end
        
        picture = Cache.picture("Z1_戦闘_必殺技_満月")
        rect = Rect.new(48*10, 0,48,48)
        @back_window.contents.blt(280,144,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(60, 0,xfra*RAY_SPEED,128)
        @back_window.contents.blt(ray_x,ray_y-50,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円(緑)")
        @back_window.contents.blt(ray_x,ray_y+50+2,picture,rect)
        
        if @battle_anime_frame == (sframe + 20)
          #月破壊
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット2")
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット3")
          Audio.se_play("Audio/SE/" + "ZG 光線系ヒット3")
        end
      when 510
        Audio.se_stop
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
      when 511..537
        sframe = 511
        xfra = @battle_anime_frame - sframe
        ray_x = -700 + xfra * RAY_SPEED
        ray_y = STANDARD_CHAY - 8
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円")
        rect = Rect.new(0, 128,700,128)
        @back_window.contents.blt(ray_x,ray_y-50,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_半円(緑)")
        @back_window.contents.blt(ray_x,ray_y+50+2,picture,rect)
      when 538
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2943 #フルパワーアウトサイダーショット(バーダックとトーマ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 27
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2944 #フルパワーアウトサイダーショット(バーダックとセリパ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 28
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 0
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2945 #フルパワーアウトサイダーショット(バーダックとトテッポ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 3
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2946 #フルパワーアウトサイダーショット(バーダックとパンブーキン)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 16
      tcha1s = 32 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 7 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 4
      tcha2_hatudou = 2
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2947 #フルパワーアウトサイダーショット(トーマとセリパ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 27
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 1
      tcha2 = 28
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 0
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2948 #フルパワーアウトサイダーショット(トーマとトテッポ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 27
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 1
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 3
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2949 #フルパワーアウトサイダーショット(トーマとパンブーキン)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 27
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 1
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 4
      tcha2_hatudou = 2
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2950 #フルパワーアウトサイダーショット(セリパとトテッポ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 28
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 0
      tcha1_hatudou = 1
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 3
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2951 #フルパワーアウトサイダーショット(セリパとパンブーキン)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 28
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 0
      tcha1_hatudou = 1
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 4
      tcha2_hatudou = 2
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2952 #フルパワーアウトサイダーショット(トテッポとパンブーキン)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 29
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 3
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 4
      tcha2_hatudou = 2
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2953 #フルパワーアウトサイダーショット(ピッコロと18号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 4
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 3
      tcha2 = 21
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1

        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿")
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2954 #フルパワーアウトサイダーショット(ピッコロと17号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 4
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 3
      tcha2 = 22
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60

        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿") 
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2955 #フルパワーアウトサイダーショット(ピッコロと16号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 4
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 2
      tcha1_hatudou = 3
      tcha2 = 23
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60

        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86+8
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿") 
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2956 #フルパワーアウトサイダーショット(未来悟飯と18号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 21
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1

        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿")
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2957 #フルパワーアウトサイダーショット(未来悟飯と17号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 22
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60

        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿") 
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2958 #フルパワーアウトサイダーショット(未来悟飯と16号)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 23
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 1
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60

        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @ray_color = 1
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = TEC_CENTER_CHAX + 86+8
        @genkityuushin_y = STANDARD_CHAY + 84
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 1
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        #back_anime_pattern backhai_no,back_x,back_y+50
        #@back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
        
        tame_end = 187
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          #Audio.se_play("Audio/SE/" + "Z1 大猿") 
          @ray_color = 3
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2959 #フルパワーアウトサイダーショット(未来悟飯とベジータ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 12
      tcha2s = 19
      tcha2s_flagno = 3
      tcha2_tame = 0
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if ($partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s) && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2960 #師弟アタック改(ピッコロ、未来悟飯)
      backhai_no = 201
      back_x = 228
      back_y = 88 - 50

      ray_x = 342
      ray_y = 68
      tcha1 = 4
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 25
      tcha2s = 26
      tcha2s_flagno = 6
      tcha2_tame = 0
      tcha2_hatudou = 1
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
        
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if ($partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s) && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..149
        sframe = 60
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
          @ray_spd_up_flag = true
          Audio.se_play("Audio/SE/" + "Z3 変身")
          @ray_color = 1
          #@genkitama_kanri_frame = []
          #@genkitama_kanri_maxflame = 40
          #@genkitama_kanri_spdup = 25
          @genkityuushin_x = []
          @genkityuushin_y = []
          @genkitama_kanri_x = [0,0,0,0,0,0,0,0]
          @genkitama_kanri_y = [0,0,0,0,0,0,0,0]
          @genkitama_kanri_frame = []
        end
        if @battle_anime_frame % 4 == 0 && @battle_anime_frame <= sframe + 20
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(TEC_CENTER_CHAX + 16 ,STANDARD_CHAY + 50 + 20,picture,rect)
        end
        
        back_anime_pattern backhai_no,back_x,back_y
      
      when 150
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 181..195
        sframe = 181
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80 - 50
      when 196..210
        sframe = 196
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104 - 50
      when 211
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 241..255
        sframe = 241
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140 - 50
      when 256..270
        sframe = 256
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116 - 50
      when 271
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 301..315
        sframe = 301
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80 - 50
      when 316..330
        sframe = 316
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104 - 50
      when 331
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 361..375
        sframe = 361
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140 - 50
      when 376..390
        sframe = 376
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116 - 50

      when 420
        @chay = -200
        @btl_ani_cha_chg_no = tcha2
        @btl_ani_cha_chg_no = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
      when 421..440
        sframe = 421
        if @battle_anime_frame % 4 == 0 && @battle_anime_frame <= sframe + 20
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(TEC_CENTER_CHAX + 16 ,STANDARD_CHAY + 20,picture,rect)
        end

      when 441..590
        sframe = 441
        if @battle_anime_frame == sframe
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @output_anime_type = 0
        end
        
        #味方
        case (@battle_anime_frame - sframe)
        
        when 0..3,8..11,16..19,24..27
          #@chax += 2
          battle_anime_change 0,1
        when 4..7,12..15,20..23,28..31
          #@chax += 2
          battle_anime_change 0,2
        when 35
          @chax += 48
          @output_anime_type = 1
          battle_anime_change 0,11
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 51
          battle_anime_change 0,0
        when 60
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 0
          battle_anime_change 0,16
          @chax -= 20
          @chay -= 6
        when 61..89
          @chax -= 20
          @chay -= 6
        when 90
          @output_anime_type = 1
          @chax = -96
          @chay = STANDARD_CHAY + 70
          battle_anime_change 0,10
        when 91..126
          @chax += 24
          @chay -= 4
        end
        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 1,9,17,25
          @enex += 8
          battle_anime_change 1,16
        when 3,11,19,27
          @enex -= 8
        when 4,12,20,28
          @enex += 8
        when 6,14,22,30
          @enex -= 8
        when 36..44
          @enex += 16
          battle_anime_change 1,17
        when 45
          battle_anime_change 1,16
        when 61..75
          battle_anime_change 1,0
          @enex -= 8
        when 107
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          battle_anime_change 1,17
        when 108..130
          @enex += 32
        end
        #SE
        case (@battle_anime_frame - sframe)
        
        when 0,4,8,12,16,20,24,28
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      
      when 591..861
        sframe = 591

        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back = false
          @chr_cutin_flag = false
          @enex = - 100
        end
        
        @enex += 16
        if @enex >= CENTER_ENEX
          @enex = CENTER_ENEX
          battle_anime_change 1,0
        end
      #when 401..671
        @genkitama_kanri_maxflame = 28
        tame_end = 300
        for i in 0..(@genkitama_kanri_frame.size - 1)
          #if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
            #@genkitama_kanri_frame[i] = 0
          if @genkitama_kanri_frame[i] > 0
            
            picture = Cache.picture("ZG_戦闘_必殺技_魔空包囲弾") #ダメージ表示用
            
            idou_moto = 8
            #idou_y_moto = 4
            case i

            when 0 #左上
              idou_x = idou_moto
              idou_y = -idou_moto

            when 1 #下
              idou_x = 0
              idou_y = idou_moto

            when 2 #右上
              idou_x = -idou_moto
              idou_y = -idou_moto
              
            when 3 #左
              idou_x = idou_moto
              idou_y = 0
              
            when 4 #右
              idou_x = -idou_moto
              idou_y = 0
              
            when 5 #左下
              idou_x = idou_moto
              idou_y = idou_moto
              
            when 6 #上
              idou_x = 0
              idou_y = -idou_moto
              
            when 7 #右下
              idou_x = -idou_moto
              idou_y = idou_moto
            end
            
            if @battle_anime_frame > (sframe + 169) && @battle_anime_frame < (sframe + 259)
              Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == (sframe + 170)
              if @battle_anime_frame % 2 == 0
                #p i,@genkitama_kanri_y[i],@genkitama_kanri_x[i]
                if @genkitama_kanri_x[i] == 0 #揺れ方向チェック
                  
                  if rand(2) == 1
                    @genkitama_kanri_y[i] = 2
                    @genkitama_kanri_x[i] = 1 #揺れ始め方向セット
                  else
                    @genkitama_kanri_y[i] = -2
                    @genkitama_kanri_x[i] = -1 #揺れ始め方向セット
                  end
                
                elsif @genkitama_kanri_y[i] == 0
                  @genkitama_kanri_y[i] = 2 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -2 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 2
                  @genkitama_kanri_y[i] = 4 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 4
                  @genkitama_kanri_y[i] = 2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                elsif @genkitama_kanri_y[i] == -2
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -4 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == -4
                  @genkitama_kanri_y[i] = -2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                end
              end
            end

            idou_x_goukei = idou_x*@genkitama_kanri_maxflame
            idou_y_goukei = idou_y*@genkitama_kanri_maxflame
            kakechk = (@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y
            if kakechk < 356
              if 356-kakechk >= 32
                rect = Rect.new(0, 0, 32,32)
              else
                rect = Rect.new(0, 0, 32, 356-kakechk)
              end
              
              if @battle_anime_frame < (sframe + 259)
                @back_window.contents.blt((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i],picture,rect)
              else
                
                center_frame = 16
                
                
                tyousei_x = ((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)
                
                #if tyousei_x >= CENTER_ENEX + 48
                #  tyousei_x = -tyousei_x
                #  
                #end
                #p tyousei_x
                tyousei_x = ((CENTER_ENEX + 48) - tyousei_x)/ center_frame
                #p tyousei_x
                tyousei_x = tyousei_x*(@battle_anime_frame-(sframe + 259))
                #p tyousei_x
                tyousei_y = (((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])
                
                #if tyousei_y >= STANDARD_ENEY + 48
                #  tyousei_y = -tyousei_y
                #end
                tyousei_y = (STANDARD_ENEY + 48 -(tyousei_y))/ center_frame
                tyousei_y = tyousei_y*(@battle_anime_frame-(sframe + 259))
                
                @back_window.contents.blt(((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)+tyousei_x,(((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])+tyousei_y,picture,rect)
              end
            end
            if  @genkitama_kanri_maxflame > @genkitama_kanri_frame[i]
              @genkitama_kanri_frame[i] += 1
            end
            
          else

          end
            
        end
        
        case @battle_anime_frame-sframe
        
        when 0 #左上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          #p @genkitama_kanri_frame.size
          @genkitama_kanri_frame[0] = 1
          @genkityuushin_x[0] = 220
          @genkityuushin_y[0] = 90
        when 20 #下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 280
        when 37 #右上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 472
          @genkityuushin_y[@genkityuushin_y.size] = 90
        when 59 #左
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 190
          @genkityuushin_y[@genkityuushin_y.size] = 164
        when 81 #右
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 520
          @genkityuushin_y[@genkityuushin_y.size] = 170
        when 99 #左下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 224
          @genkityuushin_y[@genkityuushin_y.size] = 260
        when 117 #上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 60
        when 139 #右下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 470
          @genkityuushin_y[@genkityuushin_y.size] = 274
        end
      when 862..900
        sframe = 862
        
        if @battle_anime_frame == sframe
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #@effect_anime_pattern = 105
          #Audio.se_play("Audio/SE/" + "DB3 大爆発")
          @effect_anime_pattern = 104
          Audio.se_play("Audio/SE/" + "Z1 爆発1")
          battle_anime_change 1,17
        end

      when 901..1030
        sframe = 901

        if @battle_anime_frame == sframe
          @output_anime_type = 0
          #battle_anime_change 0,16
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")
          @chax = TEC_CENTER_CHAX
          @chay = -200
          @eney = -200
          battle_anime_change 1,16
        end
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= (sframe + 115)
        if $super_saiyazin_flag[6] != true
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来ゴハン)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(未来超ゴハン)") #ダメージ表示用
        end
        rect = Rect.new(0, 0, 648, 64)
        
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= (sframe + 117)
        if @battle_anime_frame == (sframe + 129)
          @output_anime_type = 1
          Audio.se_stop 
          @tec_output_back = true
          @tec_output_back = true
          @chay = STANDARD_CHAY
          @chr_cutin = true
          @chr_cutin_flag = true
          battle_anime_change 0,9
        end
        #@output_anime_type = 1
        #battle_anime_change 0,12

      when 1031..1120
        sframe = 1031
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @chay = STANDARD_CHAY    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        ray_x = 334
        ray_y = 128
        if @battle_anime_frame == (sframe + 10)
          battle_anime_change 0,9
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 272
        end
      when 1121
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 1122..1147
        ray_y = 134
        @effect_anime_pattern = 255
      when 1148
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
  
    when 2961 #ナメックウォーリアーズ 師弟アタック改(ピッコロ、若者)
      backhai_no = 201
      back_x = 228
      back_y = 88 - 50

      ray_x = 342
      ray_y = 68
      tcha1 = 4
      tcha1s = 0 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 0 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 15
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 0
      tcha2_hatudou = 1
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
        
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if ($partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s) && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..149
        sframe = 60
        xframe = @battle_anime_frame - sframe
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @ray_spd_up_flag = true
          Audio.se_play("Audio/SE/" + "Z3 変身")
          @ray_color = 1
          #@genkitama_kanri_frame = []
          #@genkitama_kanri_maxflame = 40
          #@genkitama_kanri_spdup = 25
          @genkityuushin_x = []
          @genkityuushin_y = []
          @genkitama_kanri_x = [0,0,0,0,0,0,0,0]
          @genkitama_kanri_y = [0,0,0,0,0,0,0,0]
          @genkitama_kanri_frame = []
          @scombo_cha2_anime_type = 10
        end
        
        back_anime_pattern backhai_no,back_x,back_y
      
        back_anime_pattern 118,TEC_CENTER_CHAX + xframe * 20,STANDARD_CHAY + 50 - xframe * 2
      when 150
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 181..195
        sframe = 181
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80 - 50
      when 196..210
        sframe = 196
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104 - 50
      when 211
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 241..255
        sframe = 241
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140 - 50
      when 256..270
        sframe = 256
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116 - 50
      when 271
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,8
        #@effect_anime_pattern = 206
      when 301..315
        sframe = 301
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,9
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 80 - 50
      when 316..330
        sframe = 316
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 104 - 50
      when 331
        #Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == 160 # 効果音を再生する
        #@effect_anime_frame = 0 if @battle_anime_frame == 160
        battle_anime_change 0,10
        #@effect_anime_pattern = 201
        #ray_x = 320
        #ray_y = 140
      when 361..375
        sframe = 361
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 140 - 50
      when 376..390
        sframe = 376
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe # 効果音を再生する
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        #battle_anime_change 0,11
        @effect_anime_pattern = 201
        ray_x = 320
        ray_y = 116 - 50

      when 420
        @chax = -140
        @chay = STANDARD_CHAY
        @btl_ani_cha_chg_no = tcha2
        @btl_ani_cha_chg_no = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        Audio.se_play("Audio/SE/" + "Z1 高速移動")
        
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,10
      when 421..440
        sframe = 421
        @chax += 20
      when 441..620
        sframe = 441
        xframe = @battle_anime_frame - (sframe + 80)
        if @battle_anime_frame == sframe
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          @output_anime_type = 0
        end
        
        #味方(若者)
        case (@battle_anime_frame - sframe)
        
        when 0..3,8..11,16..19,24..27
          #@chax += 2
          battle_anime_change 0,1
        when 4..7,12..15,20..23,28..31
          #@chax += 2
          battle_anime_change 0,2
        when 35
          @chax += 48
          @output_anime_type = 0
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打")
        when 51
          battle_anime_change 0,0
        when 60
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          @output_anime_type = 0
          battle_anime_change 0,16
          @chax -= 20
          @chay -= 6
        when 61..89
          @chax -= 20
          #@chay -= 6
        end
        
        #ナメック戦士細い
        case (@battle_anime_frame - sframe)
        
        when 79
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 80..94
          if xframe < 11
            picno = 4
          else
            picno = 8
          end
          
          if xframe == 11
            Audio.se_play("Audio/SE/" + "ZG 打撃4")
          end
          picture = Cache.picture("Z3_戦闘_必殺技_わかもの")
          rect = Rect.new(0, picno*96, 96, 96)
          @back_window.contents.blt(-96+xframe*24,STANDARD_CHAY + 60-xframe*4 ,picture,rect)
        when 95..110
          picture = Cache.picture("Z3_戦闘_必殺技_わかもの")
          rect = Rect.new(0, 8*96, 96, 96)
          @back_window.contents.blt(-96+15*24,STANDARD_CHAY + 60-15*4 ,picture,rect)
        when 111..2000
          picture = Cache.picture("Z3_戦闘_必殺技_わかもの")
          rect = Rect.new(0, 4*96, 96, 96)
          @back_window.contents.blt(-96+15*24-(@battle_anime_frame - sframe - 111)*16,STANDARD_CHAY + 60-15*4 ,picture,rect)
        end
        
        #ナメック戦士太い
        case (@battle_anime_frame - sframe)
        
        when 119
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        when 120..250
          picno = 9
          #if xframe == 11
          #  Audio.se_play("Audio/SE/" + "ZG 打撃4")
          #end
          picture = Cache.picture("Z3_戦闘_必殺技_わかもの")
          rect = Rect.new(0, picno*96, 96, 96)
          @back_window.contents.blt(-96+(xframe-40)*24,STANDARD_CHAY - 60+(xframe-40)*2 ,picture,rect)
          
          if (@battle_anime_frame - sframe) == 140
            Audio.se_play("Audio/SE/" + "ZG 打撃2")
          end
        end
        
        #敵
        case (@battle_anime_frame - sframe)
        
        when 1,9,17,25
          @enex += 8
          battle_anime_change 1,16
        when 3,11,19,27
          @enex -= 8
        when 4,12,20,28
          @enex += 8
        when 6,14,22,30
          @enex -= 8
        when 36..44
          @enex += 16
          battle_anime_change 1,17
        when 45
          battle_anime_change 1,16
        when 61..90
          battle_anime_change 1,0
          @enex -= 8
        when 91..105
          @enex += 20
          battle_anime_change 1,16
        when 121..140
          battle_anime_change 1,0
          @enex -= 8
        when 141..230
          @enex += 30
          battle_anime_change 1,17
        end
        #SE
        case (@battle_anime_frame - sframe)
        
        when 0,4,8,12,16,20,24,28
          Audio.se_play("Audio/SE/" + "Z1 打撃")
        end
      
      when 621..891
        sframe = 621

        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @tec_output_back = false
          @chr_cutin_flag = false
          @enex = - 100
        end
        
        @enex += 16
        if @enex >= CENTER_ENEX
          @enex = CENTER_ENEX
          battle_anime_change 1,0
        end
      #when 401..671
        @genkitama_kanri_maxflame = 28
        tame_end = 300
        for i in 0..(@genkitama_kanri_frame.size - 1)
          #if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
            #@genkitama_kanri_frame[i] = 0
          if @genkitama_kanri_frame[i] > 0
            
            picture = Cache.picture("ZG_戦闘_必殺技_魔空包囲弾") #ダメージ表示用
            
            idou_moto = 8
            #idou_y_moto = 4
            case i

            when 0 #左上
              idou_x = idou_moto
              idou_y = -idou_moto

            when 1 #下
              idou_x = 0
              idou_y = idou_moto

            when 2 #右上
              idou_x = -idou_moto
              idou_y = -idou_moto
              
            when 3 #左
              idou_x = idou_moto
              idou_y = 0
              
            when 4 #右
              idou_x = -idou_moto
              idou_y = 0
              
            when 5 #左下
              idou_x = idou_moto
              idou_y = idou_moto
              
            when 6 #上
              idou_x = 0
              idou_y = -idou_moto
              
            when 7 #右下
              idou_x = -idou_moto
              idou_y = idou_moto
            end
            
            if @battle_anime_frame > (sframe + 169) && @battle_anime_frame < (sframe + 259)
              Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == (sframe + 170)
              if @battle_anime_frame % 2 == 0
                #p i,@genkitama_kanri_y[i],@genkitama_kanri_x[i]
                if @genkitama_kanri_x[i] == 0 #揺れ方向チェック
                  
                  if rand(2) == 1
                    @genkitama_kanri_y[i] = 2
                    @genkitama_kanri_x[i] = 1 #揺れ始め方向セット
                  else
                    @genkitama_kanri_y[i] = -2
                    @genkitama_kanri_x[i] = -1 #揺れ始め方向セット
                  end
                
                elsif @genkitama_kanri_y[i] == 0
                  @genkitama_kanri_y[i] = 2 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -2 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 2
                  @genkitama_kanri_y[i] = 4 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == 4
                  @genkitama_kanri_y[i] = 2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                elsif @genkitama_kanri_y[i] == -2
                  @genkitama_kanri_y[i] = 0 if @genkitama_kanri_x[i] == 1
                  @genkitama_kanri_y[i] = -4 if @genkitama_kanri_x[i] == -1
                elsif @genkitama_kanri_y[i] == -4
                  @genkitama_kanri_y[i] = -2
                  @genkitama_kanri_x[i] = -@genkitama_kanri_x[i]
                end
              end
            end

            idou_x_goukei = idou_x*@genkitama_kanri_maxflame
            idou_y_goukei = idou_y*@genkitama_kanri_maxflame
            kakechk = (@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y
            if kakechk < 356
              if 356-kakechk >= 32
                rect = Rect.new(0, 0, 32,32)
              else
                rect = Rect.new(0, 0, 32, 356-kakechk)
              end
              
              if @battle_anime_frame < (sframe + 259)
                @back_window.contents.blt((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i],picture,rect)
              else
                
                center_frame = 16
                
                
                tyousei_x = ((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)
                
                #if tyousei_x >= CENTER_ENEX + 48
                #  tyousei_x = -tyousei_x
                #  
                #end
                #p tyousei_x
                tyousei_x = ((CENTER_ENEX + 48) - tyousei_x)/ center_frame
                #p tyousei_x
                tyousei_x = tyousei_x*(@battle_anime_frame-(sframe + 259))
                #p tyousei_x
                tyousei_y = (((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])
                
                #if tyousei_y >= STANDARD_ENEY + 48
                #  tyousei_y = -tyousei_y
                #end
                tyousei_y = (STANDARD_ENEY + 48 -(tyousei_y))/ center_frame
                tyousei_y = tyousei_y*(@battle_anime_frame-(sframe + 259))
                
                @back_window.contents.blt(((@genkityuushin_x[i]-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x)+tyousei_x,(((@genkityuushin_y[i]+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y)+@genkitama_kanri_y[i])+tyousei_y,picture,rect)
              end
            end
            if  @genkitama_kanri_maxflame > @genkitama_kanri_frame[i]
              @genkitama_kanri_frame[i] += 1
            end
            
          else

          end
            
        end
        
        case @battle_anime_frame-sframe
        
        when 0 #左上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          #p @genkitama_kanri_frame.size
          @genkitama_kanri_frame[0] = 1
          @genkityuushin_x[0] = 220
          @genkityuushin_y[0] = 90
        when 20 #下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 280
        when 37 #右上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 472
          @genkityuushin_y[@genkityuushin_y.size] = 90
        when 59 #左
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 190
          @genkityuushin_y[@genkityuushin_y.size] = 164
        when 81 #右
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 520
          @genkityuushin_y[@genkityuushin_y.size] = 170
        when 99 #左下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 224
          @genkityuushin_y[@genkityuushin_y.size] = 260
        when 117 #上
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 360
          @genkityuushin_y[@genkityuushin_y.size] = 60
        when 139 #右下
          Audio.se_play("Audio/SE/" + "ZG 打撃2")
          @genkitama_kanri_frame[@genkitama_kanri_frame.size] = 1
          @genkityuushin_x[@genkityuushin_x.size] = 470
          @genkityuushin_y[@genkityuushin_y.size] = 274
        end
      when 892..930
        sframe = 892
        
        if @battle_anime_frame == sframe
          @effect_anime_frame = 0
          @effect_anime_type = 0
          #@effect_anime_pattern = 105
          #Audio.se_play("Audio/SE/" + "DB3 大爆発")
          @effect_anime_pattern = 104
          Audio.se_play("Audio/SE/" + "Z1 爆発1")
          battle_anime_change 1,17
        end

      when 931..960
        #@gx = 0
        sframe = 931
        if @battle_anime_frame == sframe
          @eney = -200
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
          @tec_output_back = true
          @chr_cutin_flag = true
        end
        idougo = 188
        battle_anime_change 0,0
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*4,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        rect = Rect.new(0, 96*5,96,96) #太
        @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
      when 961..1059
        sframe = 961
        idougo = 188
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2") if @battle_anime_frame == sframe
        battle_anime_change 0,1
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの")
        rect = Rect.new(0, 96*6,96,96) #細
        @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
        
        rect = Rect.new(0, 96*7,96,96) #太
        @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
        
        @effect_anime_pattern = 331
      when 1060
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @ray_color = 0
      when 1061..1087
        @effect_anime_pattern = 48
      when 1088
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
        
    when 2963 #オメエもピッコロとおなじけ！(チチ&若者)
      ray_x = 340-160
      ray_y = 96
      cha2no = 15  
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == cha2no #ピッコロ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = cha2no
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = cha2no
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,3
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
      
    when 2965 #悟空さに近寄るでねえ！(チチ&18号)
      ray_x = 340-160
      ray_y = 96
      cha2no = 21  
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == cha2no #ピッコロ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = cha2no
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = cha2no
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,3
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2966 #悟空さに近寄るでねえ！(チチ&17号)
      ray_x = 340-160
      ray_y = 96
      cha2no = 22  
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == cha2no #ピッコロ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = cha2no
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = cha2no
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,3
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2967 #悟空さに近寄るでねえ！(チチ&16号)
      ray_x = 340-160
      ray_y = 96
      cha2no = 23  
      if $btl_progress == 2
        backhai_no = 201
        back_x = 224-160
        back_y = 88
      else
        backhai_no = 102
        back_x = 194-160
        back_y = 32
      end
      @ray_color = 0
      idougo = 212+24
      idouryou = 8

      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        if $partyc[@chanum.to_i] == cha2no #ピッコロ
          @scombo_cha1 = 10
          if @battle_anime_frame <= 10
            #@ax = -2
            #@ay = -5
          else
            #@ay = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16-160,STANDARD_CHAY
        elsif $partyc[@chanum.to_i] == 10  #チチ
          @scombo_cha1 = cha2no
          if @battle_anime_frame <= 20
            #@ax = -2
            @ax = -8
          else
            @ax = 0
          end
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou +16,STANDARD_CHAY
        end
        
      when 40..59
        @chax += 160 if $partyc[@chanum.to_i] == 10 if @battle_anime_frame == 40
        @ax = 0
        @ay = 0
        @btl_ani_cha_chg_no = cha2no
        @scombo_cha1 = 10
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #back_anime_pattern 40
      when 60
        #Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        @ray_color = 0
        #back_anime_pattern 41
        @output_anime_type = 1
        #battle_anime_change 0,11
        @scombo_cha1_anime_type = 5
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
        #Audio.se_play("Audio/SE/" + "Z1 ダメージ")
        
        if $btl_progress == 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          #@ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 0
        end

      when 61..149
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 150 #初期化
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #@scombo_cha1_anime_type = 2
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 151..200
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160,STANDARD_CHAY
      when 201
        Audio.se_stop
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        @scombo_cha1_anime_type = 6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        #@effect_anime_pattern = 206

        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern 116,@chax-160 + 24,STANDARD_CHAY

        @ray_color = 0
        @chay = -200
      when 202..239
        sframe = 202

        Audio.se_play("Audio/SE/" + "Z3 避ける") if @battle_anime_frame == sframe

        
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax+0,STANDARD_CHAY+30,picture,rect)
        end
        #back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        @ray_color = 0
        
        back_anime_pattern 116,@chax-160 + (@battle_anime_frame - sframe + 1)*24,STANDARD_CHAY

        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax-160 + (@battle_anime_frame - sframe + 1)*24 + 20,STANDARD_CHAY,picture,rect)
        end
      when 240
        @scombo_cha1_anime_type = 6
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 250
        set_chr_display_out
        @chay = STANDARD_CHAY
        @chax = -146
        @btl_ani_cha_chg_no = 10
        @output_anime_type = 1
        battle_anime_change 0,6
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 251..277
        sframe = 251
        @chax += 16
        if (@battle_anime_frame - sframe) >= 4
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 20,STANDARD_CHAY,picture,rect)
        end
        
        #@effect_anime_pattern = 207
      when 278..297
        sframe = 278
        
        #敵の移動
        case (@battle_anime_frame - sframe)
        
        when 0..3
          @enex += 36
          battle_anime_change 1,16
          
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        when 4..7
          @enex -= 36
          battle_anime_change 1,0
        end
        
        idouryou = 24
        #味方の移動
        case (@battle_anime_frame - sframe)
        
        when 0,1
          @output_anime_type = 0
          battle_anime_change 0,16
          @chay -= idouryou
        when 2
          @chay -= idouryou / 2
          @chax -= idouryou
        when 3,4
          @chax -= idouryou / 2
        when 5
          @chay += idouryou / 2
          @chax -= idouryou
        when 6,7
          @chay += idouryou
        when 8
          
        when 16..18
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 16
          @chax += 24
        when 19
          battle_anime_change 0,3
          #battle_anime_change 0,16
        end
      when 298
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2968 #大丈夫かチチ


      #  back_x = 166
      #  back_y = 86
      backhai_no = 201
      @ray_color = 3
      back_x = 176
      back_y = 88
      ray_x = 356
      ray_y = 112
      #ray_x = 326
      #ray_y = 124
      color = Color.new(255,255,255,260)
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 14
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 10
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 10 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 14
          @btl_ani_cha_chg_no = 10
          @output_anime_type = 1
          battle_anime_change 0,6
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
        when 2..59
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          @chax += 16
        when 60
          @enex = CENTER_ENEX
          @eney = STANDARD_CHAY
          @chax = -96
        when 61..82
          @chax += 16
        when 83
          @output_anime_type = 0
          battle_anime_change 0,17
          battle_anime_change 1,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")# if @battle_anime_frame == 24
        when 84..119
          @chax -= 20
        when 120
          @eney = -200
          @chax = 840
          Audio.se_play("Audio/SE/" + "Z1 逃げる") #if @battle_anime_frame == 2
        when 121..146
          sframe = 121
          @chax -= 20
          back_anime_pattern 115,-96 + 16 * (@battle_anime_frame - sframe),STANDARD_CHAY
        when 147..159
          sframe = 147
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 147
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,-96 + 16 * 25 - 8 * (@battle_anime_frame - sframe),STANDARD_CHAY
          @chax -= 8
        when 160
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @scombo_cha1_anime_type = 0
          battle_anime_change 0,0
        when 161..180
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @chax += 4
        when 181..240
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,7
        when 241..270
          battle_anime_change 0,8
          @chay -= 16
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 241
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 271..359
          @ray_color = 3
          Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == 271
          back_anime_pattern backhai_no,back_x,back_y
          @back_anime_frame -= 1 
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          
        when 360 #初期化
          sframe = 360
          @btl_ani_cha_chg_no = 14
          @chax = -96 + 16 * 25 - 8 * 12
          @chay = STANDARD_CHAY
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,2
          back_anime_pattern backhai_no,back_x,back_y
        when 361..420
          back_anime_pattern backhai_no,back_x,back_y
        when 421..540
          sframe = 421
          @ray_color = 3
          back_anime_pattern backhai_no,back_x,back_y
          ray_x = 284 - (TEC_CENTER_CHAX-(-96 + 16 * 25 - 8 * 12))
          ray_y = 160
          @ray_color = 0
          @effect_anime_pattern = 237
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe + 80
        when 541..620
          sframe = 541
          eframe = 620
          @ray_color = 0
          ray_x = 284-8 - (TEC_CENTER_CHAX-(-96 + 16 * 25 - 8 * 12))
          ray_y = 160-8
          @effect_anime_pattern = 235
          @effect_anime_pattern = 0 if @battle_anime_frame == eframe
        when 621..680
          sframe = 621
          @chay = -200
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(TEC_CENTER_CHAX+12 - (TEC_CENTER_CHAX-(-96 + 16 * 25 - 8 * 12)),STANDARD_CHAY+20,picture,rect)
          end
          
        when 690
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          battle_anime_change 1,0
          @chax = TEC_CENTER_CHAX
          @chax -= 48
        when 721..750
          sframe = 721
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(TEC_CENTER_CHAX+12-48,STANDARD_CHAY+20,picture,rect)
          end
        when 751..810
          sframe = 751
          ray_x = 284-8-48
          ray_y = 160-8
          @ray_color = 0
          @effect_anime_pattern = 235
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2") if @battle_anime_frame == sframe
          @chay = STANDARD_CHAY
          @tec_output_back_no = 4 if @battle_anime_frame == sframe + 59
        when 811..920
          sframe = 811
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG SE053") if @battle_anime_frame == sframe
          @chr_cutin = false
          @eney = -200
          @chay = -200
          itix = 258
          itiy = 46
          @ray_color = 0
          ray_x = itix + 16
          ray_y = itiy + 86
          if $game_variables[171] == 1
            picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_ボロボロ)")
          elsif $game_variables[171] == 2
            picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_さらにボロボロ)")
          elsif $game_variables[171] == 3
            picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空_バトルスーツ)")
          else
            picture = Cache.picture("ZG_必殺技_超カメハメ波2(悟空)") #ダメージ表示用
          end
          
          rect = Rect.new(0, 0,122,212)
          @back_window.contents.blt(itix,itiy,picture,rect)
        when 921..989
          sframe = 921
          
          
          itix = 258
          itiy = 46
          ray_x = itix + 16
          ray_y = itiy + 86
          @effect_anime_pattern = 0
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG SE040") if @battle_anime_frame == sframe
          if $game_variables[171] == 1
            picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_ボロボロ)")
          elsif $game_variables[171] == 2
            picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_さらにボロボロ)")
          elsif $game_variables[171] == 3
            picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空_バトルスーツ)")
          else
            picture = Cache.picture("ZG_必殺技_超カメハメ波1(悟空)") #ダメージ表示用
          end
          rect = Rect.new(0, 0,122,212)
          @back_window.contents.blt(itix,itiy,picture,rect)
          picture = Cache.picture("ZG_必殺技_光線_大")
          rect = Rect.new(0, 0,316,158)
          @back_window.contents.blt(162,itiy+134,picture,rect)
          case @battle_anime_frame 
          
          when sframe..sframe+7
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
          @tec_output_back_no = 0 if @battle_anime_frame == 719
        when 990
          @chr_cutin = true
          set_chr_display_out
          @tec_output_back_no = 0
          @output_anime_type = 1
          @chay = STANDARD_CHAY
        when 991..1090
          sframe = 991
          @eney = -200
          ray_x = 308
          ray_y = 96
          @ray_color = 0
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
          battle_anime_change 0,3
          @effect_anime_pattern = 256
        when 1091
          @eney = STANDARD_ENEY
          @chay = -200
          anime_pattern_fromat
          return @battle_anime_result + 1
        end

        #when 1167
        #  anime_pattern_fromat
        #  return @battle_anime_result + 1
        #end
      else
        @btl_ani_tokusyu_flag = true
      end
      
    when 2969 #チチさんはやらせねえ！
      barcut_x = 180
      barcut_y = 64
      #  back_x = 166
      #  back_y = 86
      backhai_no = 201
      @ray_color = 3
      back_x = 176
      back_y = 88
      ray_x = 356
      ray_y = 112
      #ray_x = 326
      #ray_y = 124
      color = Color.new(255,255,255,260)
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 32
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 10
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 10 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 0..1
          @scombo_cha1 = 32
          @btl_ani_cha_chg_no = 10
          @output_anime_type = 1
          battle_anime_change 0,6
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
        when 2..59
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 2
          @chax += 16
        when 60
          @enex = CENTER_ENEX
          @eney = STANDARD_CHAY
          @chax = -96
        when 61..82
          @chax += 16
        when 83
          @output_anime_type = 0
          battle_anime_change 0,17
          battle_anime_change 1,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")# if @battle_anime_frame == 24
        when 84..119
          @chax -= 20
        when 120
          @eney = -200
          @chax = 840
          Audio.se_play("Audio/SE/" + "Z1 逃げる") #if @battle_anime_frame == 2
        when 121..146
          sframe = 121
          @chax -= 20
          back_anime_pattern 115,-96 + 16 * (@battle_anime_frame - sframe),STANDARD_CHAY
        when 147..159
          sframe = 147
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 147
          @scombo_cha1_anime_type = 16
          back_anime_pattern 115,-96 + 16 * 25 - 8 * (@battle_anime_frame - sframe),STANDARD_CHAY
          @chax -= 8
        when 160
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @scombo_cha1_anime_type = 0
          battle_anime_change 0,0
        when 161..180
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @chax += 4
        when 181..240
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
          @output_anime_type = 1
          battle_anime_change 0,7
        when 241..270
          battle_anime_change 0,8
          @chay -= 16
          Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 241
          back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 271..360
          sframe = 271
          if @battle_anime_frame == sframe
            @output_anime_type = 1
            @ray_color = 3
            battle_anime_change 0,4
            Audio.se_play("Audio/SE/" + "Z3 変身")
            @btl_ani_cha_chg_no = 32
            @chax = -96 + 16 * 25 - 8 * 12
            @chay = STANDARD_CHAY
          end
          back_anime_pattern backhai_no,back_x,back_y
          #@back_anime_frame -= 1 
          #back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 361..379
          sframe = 361
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
          @chay = -200 if @battle_anime_frame == sframe
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            if $btl_progress == 0
              @back_window.contents.blt(@chax + 20,144,picture,rect)
            elsif $btl_progress == 1
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            elsif $btl_progress >= 2
              @back_window.contents.blt(@chax + 16,144,picture,rect)
            else
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            end
          else
            
          end
        when 380
          #set_chr_display_out
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          #@chax = STANDARD_CHAX-40
          #@chay = STANDARD_CHAY-26
          @output_anime_type = 1
          #battle_anime_change 0,3
          @chax -= 16
          battle_anime_change 1,0
        when 381..399
          sframe = 381
          #Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @chay = -200
            @chax = TEC_CENTER_CHAX
          end
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            if $btl_progress == 0
              @back_window.contents.blt(@chax + 20,144,picture,rect)
            elsif $btl_progress == 1
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            elsif $btl_progress >= 2
              @back_window.contents.blt(@chax + 16,144,picture,rect)
            else
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            end
          else
            
          end
        when 400..404
          @chay = STANDARD_CHAY
          
        when 405..410
          sframe = 405
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
          battle_anime_change 0,12
          
          case @battle_anime_frame
          
            when sframe + 1..sframe + 2
              @enex += 8
            when sframe + 3..sframe + 4
              @enex -= 8
          end
        when 411..460
          sframe = 411

          case @battle_anime_frame
            when sframe + 1..sframe + 8
              battle_anime_change 0,12
              @eney -= 8
              #@enex -= 8
            when sframe + 9..sframe + 12
              Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 9
              battle_anime_change 0,13 if @battle_anime_frame == sframe + 11
              battle_anime_change 1,17
              @eney += 16
              @enex -= 30
            when sframe + 13..sframe + 22
            when sframe + 23..sframe + 30
              battle_anime_change 0,13
              battle_anime_change 1,16
              @eney -= 8
            when sframe + 31..sframe + 34
              Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 31
              battle_anime_change 0,12 if @battle_anime_frame == sframe + 33
              battle_anime_change 1,17
              @eney += 12
              @enex += 30
            when sframe + 35..sframe + 999
              battle_anime_change 1,17
              @enex += 20
              @eney += 2
              @chax += 30 if @battle_anime_frame >= sframe + 46
              @chay += 2 if @battle_anime_frame >= sframe + 46
              battle_anime_change 0,3 if @battle_anime_frame == sframe + 46
              Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 46
            #when sframe + 7..sframe + 12
            #  battle_anime_change 0,5
            #  @eney -= 2
            #  @enex -= 16
            #when sframe + 13..sframe + 18
            #  battle_anime_change 0,13
            #  @eney += 8
            #  @enex -= 4
            end
        when 461
          @chay = STANDARD_CHAY
          @eney = STANDARD_CHAY
          @enex = -100
          @chax = -300
        when 462..505
          sframe = 462
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
          case @battle_anime_frame
            when sframe + 1..sframe + 17
              @enex += 20
              @chax += 30
              battle_anime_change 0,8 if @battle_anime_frame == sframe + 13
            when sframe + 18..sframe + 21
              battle_anime_change 0,8
              Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == sframe + 18
              @enex += 30
              #battle_anime_change 1,16
            when sframe + 22..sframe + 25
              @enex -= 30
              @chay -= 16
              @chax += 12
              battle_anime_change 0,3
            when sframe + 26..sframe + 27
              battle_anime_change 0,9
              @chay += 24
              Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 27
            when sframe + 28..sframe + 35
              @chay += 16
              @eney += 16
            when sframe + 36..sframe + 43
              @chay -= 16
              @eney -= 18
              @enex += 8

              
          end
        when 506..559
          sframe = 506
          case @battle_anime_frame
            when sframe
              Audio.bgs_play("Audio/BGS/" + "Z1 大地が揺れる")
              battle_anime_change 0,12
              battle_anime_change 1,16
            when sframe + 1..sframe + 10
              battle_anime_change 0,13
              battle_anime_change 1,16
              @enex -= 8
            when sframe + 11..sframe + 20
              battle_anime_change 0,12
              @enex += 8
            when sframe + 21..sframe + 25
              battle_anime_change 0,13
              @enex -= 16
            when sframe + 26..sframe + 30
              battle_anime_change 0,12
              @enex += 16
            when sframe + 31..sframe + 33
              battle_anime_change 0,13
              @enex -= 32
            when sframe + 34..sframe + 36
              battle_anime_change 0,12
              @enex += 32
            when sframe + 37..sframe + 38
              battle_anime_change 0,13
              @enex -= 48
            when sframe + 39..sframe + 40
              battle_anime_change 0,12
              @enex += 48
            when sframe + 41..sframe + 41
              battle_anime_change 0,13
              @enex -= 96
            when sframe + 42..sframe + 42
              battle_anime_change 0,2
              battle_anime_change 1,17
              @enex += 96
              Audio.bgs_stop
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
            when sframe + 43..sframe + 999
              @enex += 48
          end
            
        when 560..619
          sframe = 561
          case @battle_anime_frame
            when sframe
              @chay = STANDARD_CHAY
              @eney = STANDARD_CHAY
              @enex = -100
              @chax = 680
              battle_anime_change 1,16
            when sframe + 1..sframe + 10
              @enex += 32
            when sframe + 11..sframe + 18
              @enex += 32
              @chax -= 24
              battle_anime_change 0,11
              
              Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 18
            when sframe + 19..sframe + 29
              @enex -= 32
              battle_anime_change 1,17
              if @battle_anime_frame >= sframe + 25
                battle_anime_change 0,14
                @chax -= 72
                @chay -= 16
                #Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 25
                Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 25
              end
            when sframe + 30..sframe + 30
              @chay = STANDARD_CHAY
              @chax = @enex - 40
              battle_anime_change 0,10
              
              Audio.se_play("Audio/SE/" + "ZG 打撃2")
            when sframe + 31..sframe + 999
              @enex += 32
              @eney -= 16
            end
=begin
        if @attackcourse == 0
          back_x = 200
          back_y = 32
          ray_x = 300
          ray_y = 162
        else
          back_x = 190+24
          back_y = 32
          ray_x = 350-128
          ray_y = 124
        end
        
=end
        when 620 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          @output_anime_type = 1
          @ray_color = 3
          @chr_cutin = false
          @chax = -200
          
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        when 621..680
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        when 681..740
          eframe = 740
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          @chr_cutin = true if @battle_anime_frame == eframe
          ray_x = 186
          ray_y = 220
          @effect_anime_pattern = 289
        when 741..790
          @chax = TEC_CENTER_CHAX
          
          ray_x = 276
          ray_y = 140
          battle_anime_change 0,6
          @effect_anime_pattern = 235
        when 791
          Audio.se_stop
          battle_anime_change 0,2
          ray_x = -360
          ray_y = -96
        when 792
          #@ray_color = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 206
          @effect_anime_frame = 0
          ray_x = -360
          ray_y = -96
          #back_anime_pattern 101,back_x,back_y
          
        when 793..830
          #back_anime_pattern 101,back_x,back_y
          @effect_anime_pattern = 206
          ray_x = 360
          if $btl_progress >= 2
            ray_y = 96
          else
            ray_y = 92
          end
        when 831
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 861
          set_chr_display_out
        when 882..908
          @effect_anime_pattern = 207
        when 909
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
      end
      
    when 2970 #カカロットが世話になったらしいな！(亀仙人とバーダック)
      barcut_x = 180
      barcut_y = 64
      #  back_x = 166
      #  back_y = 86
      backhai_no = 201
      @ray_color = 3
      back_x = 176
      back_y = 88
      ray_x = 356
      ray_y = 112
      #ray_x = 326
      #ray_y = 124
      color = Color.new(255,255,255,260)
      if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] == 32
        #@btl_ani_cha_chg_no = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha1 = 24
          @ax = -16
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 24 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        #@battle_anime_result += 1 if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
        
      elsif @btl_ani_tokusyu_flag == true

        case @battle_anime_frame
        when 1..89
          sframe = 1
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            
            
            @output_anime_type = 1
            battle_anime_change 0,6
            @btl_ani_cha_chg_no = 24
          end
          back_x = 218
          back_y = 88
          @ray_color = 0
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          @tec_output_back_no = 1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          @chay = -100
          @chr_cutin = false
          
        when 91..140
          picture = Cache.picture("DB3_亀仙人カメハメは")
          rect = Rect.new(0*64, 0, 64, 96)
          @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
          #back_anime_pattern backhai_no,back_x,back_y
        when 141..190
          picture = Cache.picture("DB3_亀仙人カメハメは")
          rect = Rect.new(1*64, 0, 64, 96)
          @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
        when 191..240
          picture = Cache.picture("DB3_亀仙人カメハメは")
          rect = Rect.new(2*64, 0, 64, 96)
          @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
        when 241
          Audio.se_stop
          @ray_color = 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,3
          @effect_anime_pattern = 2
          @ray_color = 0
          picture = Cache.picture("DB3_亀仙人カメハメは")
          rect = Rect.new(2*64, 0, 64, 96)
          @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
          ray_x = 242
          ray_y = 120
        when 242..279
          ray_x = 242
          ray_y = 120
          @ray_color = 0
          picture = Cache.picture("DB3_亀仙人カメハメは")
          rect = Rect.new(2*64, 0, 64, 96)
          @back_window.contents.blt(CENTER_CHAX+48,STANDARD_CHAY-0,picture,rect)
        when 280..440
          sframe = 280
          if @battle_anime_frame == sframe
            #@chr_cutin_flag = true
            @chr_cutin = true
            @tec_output_back_no = 0
            battle_anime_change 0,3
            @effect_anime_pattern = 0
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @chax = TEC_CENTER_CHAX
            @chay = STANDARD_CHAY
            #Audio.se_stop if @battle_anime_frame == sframe
            #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
            @effect_anime_pattern = 256
          end
          
          ray_x = 308 + 22
          ray_y = 96 + 16
          @ray_color = 0
          
          #味方の行動
          case @battle_anime_frame - sframe
          when 115..143
            xframe = 115
            if ((@battle_anime_frame - sframe) == xframe)
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
            end
            #if ((@battle_anime_frame - sframe) - xframe) >= 4
            picture = Cache.picture("戦闘アニメ_ビックリマーク")
            rect = Rect.new(0, 0, 16, 16)
            @back_window.contents.blt(@chax + 24,STANDARD_CHAY - 16,picture,rect)
            #end
          when 144
            battle_anime_change 0,16
            @effect_anime_pattern = 0
          when 145..154
            @chax -= 16
          when 155
            battle_anime_change 0,0
          end
          
          #敵の行動
          case @battle_anime_frame - sframe
          
          when 70
            @enex = 640
            @eney = STANDARD_CHAY
            Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
          when 71..114
            @enex -= 8
          when 115..144
          when 145
            @enex -= 8
            Audio.se_stop
            battle_anime_change 1,1
            Audio.se_play("Audio/SE/" + "DB3 SE041")
            Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          end
        when 441..509
          sframe = 441
          xframe = @battle_anime_frame - sframe
          if @battle_anime_frame == sframe
            @scombo_cha1_anime_type = 0
            Audio.se_play("Audio/SE/" + "Z1 大猿")
            
            @effect_anime_pattern =238
          end
          
          ray_x = -100 + xframe * 24
          ray_y = STANDARD_CHAY + 50 - xframe * 2
          
          case @battle_anime_frame - sframe
          
          when 9
            battle_anime_change 1,17
          when 10..50
            Audio.se_play("Audio/SE/" + "Z2 SE058") if @battle_anime_frame % 6 == 0
            @enex += 24
            @eney -= 2
          end
        when 271..360
          sframe = 271
          if @battle_anime_frame == sframe
            @output_anime_type = 1
            @ray_color = 3
            battle_anime_change 0,4
            Audio.se_play("Audio/SE/" + "Z3 変身")
            @btl_ani_cha_chg_no = 32
            @chax = -96 + 16 * 25 - 8 * 12
            @chay = STANDARD_CHAY
          end
          back_anime_pattern backhai_no,back_x,back_y
          #@back_anime_frame -= 1 
          #back_anime_pattern 115,-96 + 16 * 25 - 8 * 12,STANDARD_CHAY
        when 510
          #set_chr_display_out
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          
          #@enex = CENTER_ENEX
          @enex = - 200
          
          @eney = STANDARD_ENEY
          #@chax = STANDARD_CHAX-40
          #@chay = STANDARD_CHAY-26
          @output_anime_type = 1
          #battle_anime_change 0,3
          @chax = CENTER_CHAX
          #@chax -= 16
          battle_anime_change 1,17
          @effect_anime_pattern =0
          @btl_ani_cha_chg_no = 32
          
        when 511..529
          sframe = 511
          #Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @chay = -200
            @chax = CENTER_CHAX
          end
          
          if @enex < CENTER_ENEX
            @enex += 28
          else
            @enex = CENTER_ENEX
          end
          
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            if $btl_progress == 0
              @back_window.contents.blt(@chax + 20,144,picture,rect)
            elsif $btl_progress == 1
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            elsif $btl_progress >= 2
              @back_window.contents.blt(@chax + 16,144,picture,rect)
            else
              @back_window.contents.blt(@chax + 4,144,picture,rect)
            end
          else
            
          end
        when 530..534
          @chay = STANDARD_CHAY
          battle_anime_change 1,0
        when 535..540
          sframe = 535
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
          battle_anime_change 0,12
          
          case @battle_anime_frame
          
            when sframe + 1..sframe + 2
              @enex += 8
            when sframe + 3..sframe + 4
              @enex -= 8
          end
        when 541..590
          sframe = 541

          case @battle_anime_frame
            when sframe + 1..sframe + 8
              battle_anime_change 0,12
              @eney -= 8
              #@enex -= 8
            when sframe + 9..sframe + 12
              Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 9
              battle_anime_change 0,13 if @battle_anime_frame == sframe + 11
              battle_anime_change 1,17
              @eney += 16
              @enex -= 30
            when sframe + 13..sframe + 22
            when sframe + 23..sframe + 30
              battle_anime_change 0,13
              battle_anime_change 1,16
              @eney -= 8
            when sframe + 31..sframe + 34
              Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe + 31
              battle_anime_change 0,12 if @battle_anime_frame == sframe + 33
              battle_anime_change 1,17
              @eney += 12
              @enex += 30
            when sframe + 35..sframe + 999
              battle_anime_change 1,17
              @enex += 20
              @eney += 2
              @chax += 30 if @battle_anime_frame >= sframe + 46
              @chay += 2 if @battle_anime_frame >= sframe + 46
              battle_anime_change 0,3 if @battle_anime_frame == sframe + 46
              Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 46
            #when sframe + 7..sframe + 12
            #  battle_anime_change 0,5
            #  @eney -= 2
            #  @enex -= 16
            #when sframe + 13..sframe + 18
            #  battle_anime_change 0,13
            #  @eney += 8
            #  @enex -= 4
            end
        when 591
          @chay = STANDARD_CHAY
          @eney = STANDARD_CHAY
          @enex = -100
          @chax = -300
        when 592..635
          sframe = 592
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
          case @battle_anime_frame
            when sframe + 1..sframe + 17
              @enex += 20
              @chax += 30
              battle_anime_change 0,8 if @battle_anime_frame == sframe + 13
            when sframe + 18..sframe + 21
              battle_anime_change 0,8
              Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == sframe + 18
              @enex += 30
              #battle_anime_change 1,16
            when sframe + 22..sframe + 25
              @enex -= 30
              @chay -= 16
              @chax += 12
              battle_anime_change 0,3
            when sframe + 26..sframe + 27
              battle_anime_change 0,9
              @chay += 24
              Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 27
            when sframe + 28..sframe + 35
              @chay += 16
              @eney += 16
            when sframe + 36..sframe + 43
              @chay -= 16
              @eney -= 18
              @enex += 8

              
          end
        when 636..689
          sframe = 636
          case @battle_anime_frame
            when sframe
              Audio.bgs_play("Audio/BGS/" + "Z1 大地が揺れる")
              battle_anime_change 0,12
              battle_anime_change 1,16
            when sframe + 1..sframe + 10
              battle_anime_change 0,13
              battle_anime_change 1,16
              @enex -= 8
            when sframe + 11..sframe + 20
              battle_anime_change 0,12
              @enex += 8
            when sframe + 21..sframe + 25
              battle_anime_change 0,13
              @enex -= 16
            when sframe + 26..sframe + 30
              battle_anime_change 0,12
              @enex += 16
            when sframe + 31..sframe + 33
              battle_anime_change 0,13
              @enex -= 32
            when sframe + 34..sframe + 36
              battle_anime_change 0,12
              @enex += 32
            when sframe + 37..sframe + 38
              battle_anime_change 0,13
              @enex -= 48
            when sframe + 39..sframe + 40
              battle_anime_change 0,12
              @enex += 48
            when sframe + 41..sframe + 41
              battle_anime_change 0,13
              @enex -= 96
            when sframe + 42..sframe + 42
              battle_anime_change 0,2
              battle_anime_change 1,17
              @enex += 96
              Audio.bgs_stop
              Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
            when sframe + 43..sframe + 999
              @enex += 48
          end
            
        when 690..749
          sframe = 691
          case @battle_anime_frame
            when sframe
              @chay = STANDARD_CHAY
              @eney = STANDARD_CHAY
              @enex = -100
              @chax = 680
              battle_anime_change 1,16
            when sframe + 1..sframe + 10
              @enex += 32
            when sframe + 11..sframe + 18
              @enex += 32
              @chax -= 24
              battle_anime_change 0,11
              
              Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 18
            when sframe + 19..sframe + 29
              @enex -= 32
              battle_anime_change 1,17
              if @battle_anime_frame >= sframe + 25
                battle_anime_change 0,14
                @chax -= 72
                @chay -= 16
                #Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 25
                Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 25
              end
            when sframe + 30..sframe + 30
              @chay = STANDARD_CHAY
              @chax = @enex - 40
              battle_anime_change 0,10
              
              Audio.se_play("Audio/SE/" + "ZG 打撃2")
            when sframe + 31..sframe + 999
              @enex += 32
              @eney -= 16
            end
=begin
        if @attackcourse == 0
          back_x = 200
          back_y = 32
          ray_x = 300
          ray_y = 162
        else
          back_x = 190+24
          back_y = 32
          ray_x = 350-128
          ray_y = 124
        end
        
=end
        when 750 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
          @output_anime_type = 1
          @ray_color = 3
          @chr_cutin = false
          @chax = -200
          
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        when 751..810
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          ray_x = 202
          ray_y = 236
          @effect_anime_pattern = 235
        when 811..870
          eframe = 870
          if $game_variables[175] == 0 #バーダックの衣装
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)スカウター有り")
          else
            picture = Cache.picture("Z3_必殺技_スピリッツキャノン(バーダック超)")
          end
          rect = Rect.new(0, 26,274,228)
          @back_window.contents.blt(barcut_x,barcut_y,picture,rect)
          @chr_cutin = true if @battle_anime_frame == eframe
          ray_x = 186
          ray_y = 220
          @effect_anime_pattern = 289
        when 871..920
          @chax = TEC_CENTER_CHAX
          
          ray_x = 276
          ray_y = 140
          battle_anime_change 0,6
          @effect_anime_pattern = 235
        when 921
          Audio.se_stop
          battle_anime_change 0,2
          ray_x = -360
          ray_y = -96
        when 922
          #@ray_color = 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める7")    # 効果音を再生する
          #battle_anime_change 0,1
          @effect_anime_pattern = 206
          @effect_anime_frame = 0
          ray_x = -360
          ray_y = -96
          #back_anime_pattern 101,back_x,back_y
          
        when 923..960
          #back_anime_pattern 101,back_x,back_y
          @effect_anime_pattern = 206
          ray_x = 360
          if $btl_progress >= 2
            ray_y = 96
          else
            ray_y = 92
          end
        when 961
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 991
          set_chr_display_out
        when 1012..1038
          @effect_anime_pattern = 207
        when 1039
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        @btl_ani_tokusyu_flag = true
      end
      
    when 2971 #フルパワーアウトサイダーショット(未来悟飯とトーマ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 27
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2972 #フルパワーアウトサイダーショット(未来悟飯とセリパ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 28
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 0
      tcha2_hatudou = 1
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2973 #フルパワーアウトサイダーショット(未来悟飯とトテッポ)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 29
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 2
      tcha2_hatudou = 3
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2974 #フルパワーアウトサイダーショット(未来悟飯とパンブーキン)
      backhai_no = 201
      back_x = 234
      back_y = -18 + 54+ 50

      ray_x = 342
      ray_y = 68
      tcha1 = 25
      tcha1s = 26 #超サイヤ人のときのキャラNo
      tcha1s_flagno = 6 #超サイヤ人のフラグNo
      tcha1_tame = 4
      tcha1_hatudou = 1
      tcha2 = 30
      tcha2s = 0
      tcha2s_flagno = 0
      tcha2_tame = 4
      tcha2_hatudou = 2
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == tcha1 || $partyc[@chanum.to_i] == tcha1s
          @scombo_cha2 = tcha2
          @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == tcha2 || $partyc[@chanum.to_i] == tcha2s
          @scombo_cha2 = tcha1
          @scombo_cha2 = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == tcha2 && @battle_anime_frame == 40
          @chay -= 100
        end
        @btl_ani_cha_chg_no = tcha1
        @btl_ani_cha_chg_no = tcha1s if $super_saiyazin_flag[tcha1s_flagno] == true
        @scombo_cha2 = tcha2
        @scombo_cha2 = tcha2s if $super_saiyazin_flag[tcha2s_flagno] == true
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60
        if $btl_progress >= 2
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @ray_color = 3
        else
          Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
          @ray_color = 3
        end
      when 61..187
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        battle_anime_change 0,tcha1_tame
        @scombo_cha2_anime_type = tcha2_tame
        @ray_color = 3
        back_anime_pattern backhai_no,back_x,back_y-50
        #back_anime_pattern 105,218,60-50
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x,back_y+50
        @back_anime_frame -= 1
        #back_anime_pattern 105,218,60+50
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
        
      when 188..269
        @effect_anime_pattern = 295
        sframe = 188
        battle_anime_change 0,tcha1_hatudou
        @scombo_cha2_anime_type = tcha2_hatudou
        Audio.se_stop if @battle_anime_frame == sframe
        if @battle_anime_frame == sframe  # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") 
          Audio.se_play("Audio/SE/" + "ZG 光線1") 
          Audio.se_play("Audio/SE/" + "Z1 大猿") 
        end
        back_anime_pattern 118,TEC_CENTER_CHAX + 0,STANDARD_CHAY + 50
      when 270
        @chay = -120
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 280
        set_chr_display_out
      when 281..305
        ray_y = 110
        @effect_anime_pattern = 48
      when 306
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2976 #決死の超元気玉
     
      back_x = 180 - 302
      back_y = -4
     
      backhai_no = 201
     
      ray_x = 340
      ray_y = 200

     if @btl_ani_tokusyu_flag == false && $partyc[@chanum.to_i] != 3
        #@btl_ani_cha_chg_no = 5
        @scombo_cha1 = 3
        Audio.se_play("Audio/SE/" + "Z1 逃げる") if @battle_anime_frame == 0 # 効果音を再生する
        case @battle_anime_frame
        when 0..60
          @scombo_cha_anime_frame += 1 if @scombo_cha_anime_frame <= 20
          @ax = -16
          
          if @battle_anime_frame <= 20
            back_anime_pattern 115,STANDARD_CHAX + @battle_anime_frame * 16,STANDARD_CHAY
          else
            back_anime_pattern 115,STANDARD_CHAX + 21 * 16,STANDARD_CHAY
          end
        end
        @ax = 0 if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_cha_chg_no = 3 if @battle_anime_frame == 60
        @chax = TEC_CENTER_CHAX if @battle_anime_frame == 60 # 効果音を再生する
        @btl_ani_tokusyu_flag = true if @battle_anime_frame == 60 # 効果音を再生する
        @battle_anime_frame = 0 if @battle_anime_frame == 60 # 効果音を再生する
      else
        case @battle_anime_frame
        when 0..1
          sframe = 0
          if @battle_anime_frame == sframe + 1
            Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
            @ray_color = 0
            @scombo_cha1 = 4
            @scombo_cha2 = 5
            @scombo_cha3 = 6
            @btl_ani_cha_chg_no = 3
            @output_anime_type = 1
            battle_anime_change 0,5
            @chax = TEC_CENTER_CHAX - 10
            @chay = STANDARD_CHAY 
          end
        when 2..160
          back_anime_pattern 129,back_x,back_y
        when 161..250
          sframe = 161
          xframe = sframe + 5
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 逃げる")
            @enex = 640 + 32
            @eney = STANDARD_CHAY
          end
          
          #味方の移動
          
          case @battle_anime_frame - xframe
          
          when 0..15
            @scombo_cha1_anime_type = 16
            back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
            
          when 16..20
            @scombo_cha1_anime_type = 4
            back_anime_pattern 115,0 + 24 * (@battle_anime_frame - xframe),STANDARD_CHAY-160 + 8 * (@battle_anime_frame - xframe)
          when 21..40
            back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
          when 41..200
            @scombo_cha1_anime_type = 0
            back_anime_pattern 115,0 + 24 * (20),STANDARD_CHAY-160 + 8 * (20)
          end
            
          #敵の移動
          case @battle_anime_frame - sframe
          
          when 0..20
            @enex -= 12
          when 21..50
            @enex += 24
            battle_anime_change 1,17
          end
          
          #SE
          case @battle_anime_frame - sframe
          
          when 21 #
            Audio.se_play("Audio/SE/" + "Z1 強打")
          end
          
          #back_anime_pattern 129,back_x,back_y
        when 251..280
          back_x = 234
          back_y = -18 + 54+ 50

          sframe = 251
          if @battle_anime_frame == sframe
            if $btl_progress >= 2
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
              @ray_color = 0
            else
              Audio.se_play("Audio/SE/" + "Z2 気を溜める")    # 効果音を再生する
              @ray_color = 0
            end
            @btl_ani_cha_chg_no = 5
            @scombo_cha2 = 6
          end
          @scombo_cha2_anime_type = 2
          battle_anime_change 0,2

          #back_anime_pattern backhai_no,back_x,back_y-50
          #@back_anime_frame -= 1
          #back_anime_pattern backhai_no,back_x,back_y+50
          #@back_anime_frame -= 1
          @chay = STANDARD_CHAY-50
          back_anime_pattern 118,@chax,STANDARD_CHAY+50
        when 281..362
          sframe = 281
          if @battle_anime_frame == sframe
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
          end
          @effect_anime_pattern = 367
          battle_anime_change 0,3
          @scombo_cha2_anime_type = 3
          back_anime_pattern 118,@chax,STANDARD_CHAY+50
        when 363#270
          @chay = -120
          #battle_anime_change 0,1
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 373#280
          #set_chr_display_out
          @eney = STANDARD_ENEY
          @enex = CENTER_ENEX
          battle_anime_change 1,0
        when 374..398#281..305
          ray_y = 110
          @ray_color = 0
          @effect_anime_pattern = 48
        when 399..420
          sframe = 399
          
          if @battle_anime_frame == sframe
            @effect_anime_frame = 0
            @effect_anime_type = 0
            @effect_anime_pattern = 104
            Audio.se_play("Audio/SE/" + "Z1 爆発1")
            battle_anime_change 1,16
          end
          @enex += 16
        when 421
          Audio.se_play("Audio/SE/" + "Z2 気を溜める_元気弾")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")
          @effect_anime_pattern = 0
          @ray_color = 0
          @scombo_cha1 = 4
          @scombo_cha2 = 5
          @scombo_cha3 = 6
          @btl_ani_cha_chg_no = 3
          @output_anime_type = 1
          @back_anime_frame = 0
          @back_anime_type = 0
          battle_anime_change 0,5
          @chax = TEC_CENTER_CHAX - 10
          @chay = STANDARD_CHAY 
          #@enex = 640 + 32
          #@eney = STANDARD_CHAY
          #@chr_cutin_flag = false
        when 422..580
          back_anime_pattern 129,back_x,back_y
        when 581..750
          sframe = 581
          if @battle_anime_frame == sframe
            @chay = -200
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          
          case $game_variables[171]
          
          when 0 #通常
            picture = Cache.picture("FC風_GBZ2 超元気弾発動") #ダメージ表示用
          when 1,2 #ボロボロ
            picture = Cache.picture("FC風_GBZ2 超元気弾発動(ゴクウ：ボロボロ)") #ダメージ表示用
          when 3 #バトルスーツ
            picture = Cache.picture("FC風_GBZ2 超元気弾発動(悟空_バトルスーツ)") #ダメージ表示用
          end
          rect = Rect.new(0, 0,256,124)
          @back_window.contents.blt(176,112,picture,rect)
          
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)(超元気玉)") #ダメージ表示用
          rect = Rect.new(0, 0,640,250)
          @back_window.contents.blt(0+(@battle_anime_frame-sframe)*RAY_SPEED/2,-220+(@battle_anime_frame-sframe)*RAY_SPEED/6,picture,rect)
        when 751
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          
        when 754
          @tec_output_back_no = 1 #縦に変更
        when 755
          battle_anime_change 1,0
          set_chr_display_out
        when 756..820
          sframe = 756
          if @battle_anime_frame == sframe
            Audio.se_play("Audio/SE/" + "Z1 ザー")
            Audio.se_play("Audio/SE/" + "Z1 ゴー")
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          end
          picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉縦)(超元気玉)") #ダメージ表示用
          rect = Rect.new(0, 0,640,250)
          @back_window.contents.blt(0,-250+(@battle_anime_frame-sframe)*RAY_SPEED/6,picture,rect)
        when 821
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
      
    when 2977 #自然を愛する者(悟飯＆16号)

      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      ray_x = 230
      ray_y = 118

      backhai_no = 201
      back_x = 228
      back_y = 88
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 18 #悟飯
          @scombo_cha2 = 23
          @effect_anime_pattern = 90
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = -5
          else
            @ay = 0
          end
        elsif $partyc[@chanum.to_i] == 23 #16号
          @scombo_cha2 = 18
          @effect_anime_pattern = 89
          if @battle_anime_frame <= 10
            #@ax = -2
            @ay = +5
          else
            @ay = 0
          end
        end
      when 40..59
        if $partyc[@chanum.to_i] == 23 && @battle_anime_frame == 40 #16号
          @chay -= 100
        end
        @btl_ani_cha_chg_no = 18
        @scombo_cha2 = 23
        @effect_anime_pattern = 92
        #@effect_anime_pattern = 85
      when 60..150
        sframe = 60
        @ray_color = 0
        if @battle_anime_frame == sframe
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 高速移動")
        end
        
        if @battle_anime_frame == sframe + 30
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")
        end
        
        if @battle_anime_frame >= sframe + 30 && @battle_anime_frame <= sframe + 90
          picture = Cache.picture("戦闘アニメ_ビックリマーク")
          rect = Rect.new(0, 0, 16, 16)
          @back_window.contents.blt(@chax + 48,STANDARD_CHAY - 40,picture,rect)
        end
        
        if @battle_anime_frame <= sframe + 49
          #高速移動
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(TEC_CENTER_CHAX + 6,STANDARD_CHAY + 76,picture,rect)
          end
        end
      when 151
        #set_chr_display_out
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
        @effect_anime_frame = 0
        @tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @chay = -200
        back_anime_pattern 1
      when 152..190
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax +10+110 ,140,picture,rect)
        else
          
        end
        back_anime_pattern 1
      when 191..250
        sframe = 191
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 23
        end
        back_anime_pattern 1
        @output_anime_type = 1
        battle_anime_change 0,6
        #back_anime_pattern 55
        #@effect_anime_frame += 1
        #@effect_anime_pattern = 88
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe + 2    # 効果音を再生する
        @chay = STANDARD_CHAY if @battle_anime_frame == sframe + 2
        @chax = CENTER_ENEX + 16
        if @battle_anime_frame % 2 == 0
          @gx = 4
        else
          @gx = -4
        end
      when 251..329
        sframe = 251
        eframe = 329
        if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")
        end
        back_anime_pattern 1
        battle_anime_change 0,7
        if @battle_anime_frame == eframe
          @tec_output_back = true
        end
      when 330 #初期化
        sframe = 330
        @chay = STANDARD_CHAY
        @chax = TEC_CENTER_CHAX
        @eney = -200
        @btl_ani_cha_chg_no = 18
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 331..457
        back_anime_pattern backhai_no,back_x,back_y
      when 458..630
        sframe = 458
        #Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3") if @battle_anime_frame == sframe + 90
        @output_anime_type = 1
        battle_anime_change 0,17
        back_anime_pattern backhai_no,back_x,back_y
        @effect_anime_pattern = 237 if @battle_anime_frame == sframe
        ray_x = 276 if @battle_anime_frame < sframe + 90
        ray_y = 164 if @battle_anime_frame < sframe + 90
        
        @effect_anime_pattern = 235 if @battle_anime_frame == sframe + 90
        ray_x = 268 if @battle_anime_frame >= sframe + 90
        ray_y = 156 if @battle_anime_frame >= sframe + 90
      when 631..728
        @ray_color = 0
        sframe = 631
        @chr_cutin = false
        @tec_output_back_no = 4 #1
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        @chay = -200
        itix = 278
        itiy = 122
        
        if $game_variables[172] == 2
          picture = Cache.picture("Z3_必殺技_親子カメハメ波(ゴハンのみ)_赤道着")
        else
          picture = Cache.picture("Z3_必殺技_親子カメハメ波(ゴハンのみ)")
        end
        rect = Rect.new(0, 0, 114, 184)
        @back_window.contents.blt(itix,itiy,picture,rect)
        @effect_anime_pattern = 333
      when 729
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "ZG 光線1")
      when 730..756
        sframe = 730
        if @battle_anime_frame == sframe
          @btl_ani_cha_chg_no = 23
          @chay = STANDARD_CHAY
          @chax = CENTER_ENEX + 16
          @output_anime_type = 1
          battle_anime_change 0,6
        end
        if @battle_anime_frame % 2 == 0
          @gx = 4
        else
          @gx = -4
        end
        @effect_anime_pattern = 48
      when 757
        @chay = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2979 #スーパーどどはめは
      ray_x = 348
      ray_y = 70
      @ray_color = 0
      idougo = 212+24
      idouryou = 8
      backhai_no = 201
      back_x = TEC_CENTER_CHAX - 34
      back_y = STANDARD_CHAY - 24
      
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..39
        
        if $partyc[@chanum.to_i] == 9  #チャオズ
          if @battle_anime_frame < 16
            @ax = -2
            @ay = +4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 8
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
        elsif $partyc[@chanum.to_i] == 8  #テンシンハン
          if @battle_anime_frame < 16
            @ax = -2
            @ay = -4
          elsif @battle_anime_frame == 16
            @ax = 0
          else
            @ax = 0
            @ay = 0
          end
          @scombo_cha1 = 7
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou + 16,STANDARD_CHAY
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        else #ヤムチャ
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          back_anime_pattern 116,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY - 64
          back_anime_pattern 118,STANDARD_CHAX+@battle_anime_frame * idouryou -14,STANDARD_CHAY + 64
        end
        
        
      when 40..59
          @ax = 0
          @ay = 0
          @btl_ani_cha_chg_no = 7
          @scombo_cha1 = 8
          @scombo_cha2 = 9
          @chax = TEC_CENTER_CHAX
          @chay = STANDARD_CHAY
          back_anime_pattern 116,idougo,STANDARD_CHAY - 64
          back_anime_pattern 118,idougo,STANDARD_CHAY + 64
          
      when 60
        #back_anime_pattern 8
        #@chay = -120 #キャラ画面範囲外へ
        #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y -64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
      when 61..189
        back_anime_pattern backhai_no,back_x,back_y
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y -64
        @back_anime_frame -= 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        @back_anime_frame -= 1
        back_anime_pattern backhai_no,back_x-44,back_y +64
        @back_anime_frame -= 1
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 190
        #back_anime_pattern 8
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        battle_anime_change 0,3
        @scombo_cha1_anime_type = 5
        @scombo_cha2_anime_type = 1
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        @effect_anime_pattern = 295
        #Audio.se_play("Audio/SE/" + "DB3 大猿")    # 効果音を再生する
      when 191..299
        back_anime_pattern 116,idougo,STANDARD_CHAY - 64
        back_anime_pattern 118,idougo,STANDARD_CHAY + 64
        #back_anime_pattern 8
      when 300 #初期化
        @effect_anime_pattern = 0
        set_chr_display_out
        
      when 301
        #Audio.se_stop
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
      when 302..328
        @effect_anime_pattern = 48
      when 329
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2431 #(敵汎用)エネルギー波
      enerugi_anime_no = 1
      ray_big = false
      ray_color = 3
      if @attackcourse == 0
        case $partyc[@chanum]
        
        when 21 # 18号
          ray_x = 338
          ray_y = 140
        when 22 # 17号
          ray_x = 344
          ray_y = 136
        when 23 # 16号
          ray_x = 358
          ray_y = 138
        when 27 # トーマ
          ray_x = 352
          ray_y = 136
          if $cha_bigsize_on[@chanum] == true
            ray_x = 310
            ray_y = 112
          end
        when 28 # セリパ
          ray_x = 340
          ray_y = 138
          if $cha_bigsize_on[@chanum] == true
            ray_x = 304
            ray_y = 102
          end
        when 29 # トテッポ
          ray_x = 358
          ray_y = 124
          if $cha_bigsize_on[@chanum] == true
            ray_x = 310
            ray_y = 112
          end
        when 30 # パンブーキン
          ray_x = 346
          ray_y = 134
          if $cha_bigsize_on[@chanum] == true
            ray_x = 304
            ray_y = 98
          end
        else
          ray_x = 328
          ray_y = 148
        end
        
        
      else
        case @enedatenum #敵キャラによって光線の位置を変える
        when 65,217 #アモンド系
          ray_x = 328
          ray_y = 142
        when 66,218 #ダイーズ系
          ray_x = 320
          ray_y = 140
        when 67,219 #カカオ系
          ray_x = 314
          ray_y = 138
        when 68,220 #レズン系
          ray_x = 340
          ray_y = 162
          enerugi_anime_no = 2
        when 69,221 #ラカセイ系
          ray_x = 340
          ray_y = 162
        when 72,224 #アンギラ系
          ray_x = 324
          ray_y = 142
        when 73,225 #ドロダボ系
          ray_x = 308
          ray_y = 142
        when 74,226 #メダマッチャ系
          ray_x = 326
          ray_y = 154
        when 75,227 #ゼエウン系
          ray_x = 310
          ray_y = 140
        when 76,228 #スラッグ軍兵士系
          ray_x = 314
          ray_y = 154  
        when 101,102,117..119,170,230,240,243,260 #フリーザ系、サウザー系
          ray_x = 314
          ray_y = 156
        when 103..105,131,109,110,133 #エイル系、メーイ系
          ray_x = 308
          ray_y = 146
        when 111..113,114..116,231,232,241,242 #ネイズドーレ系
          ray_x = 310
          ray_y = 142
        when 106..108,132 #ピラール系
          ray_x = 314
          ray_y = 144
        when 120,123,169,234,239,265 #クウラ系 19号
          ray_x = 320
          ray_y = 146
        when 121,261 #クウラ最終形態
          ray_x = 306
          ray_y = 142
        when 122,262 #20号
          ray_x = 328
          ray_y = 140
        when 125,236 #17号
          ray_x = 324
          ray_y = 144
        when 126,127,128,237,264,268 #16号、セル1、セル２
          ray_x = 306
          ray_y = 144
        when 129,135,269 #セル完全体
          ray_x = 314
          ray_y = 134
        when 130 #セルジュニア
          ray_x = 344
          ray_y = 158
        when 138 #13号
          ray_x = 320
          ray_y = 136
        when 139,267 #13号合体
          ray_x = 310
          ray_y = 136
        when 140 #14号
          ray_x = 308
          ray_y = 136
        when 141 #15号
          ray_x = 344
          ray_y = 160
        when 142 #ボージャック
          ray_x = 310
          ray_y = 136
        when 143 #ボージャックフルパワー
          ray_x = 310
          ray_y = 136
        when 144 #ゴクア
          ray_x = 312
          ray_y = 138
        when 145 #ザンギャ
          ray_x = 342
          ray_y = 142
        when 146 #ビドー
          ray_x = 312
          ray_y = 142
        when 147 #ブージン
          ray_x = 342
          ray_y = 160
        when 148 #戦闘員
          ray_x = 312
          ray_y = 154
        when 151 #ブロリー(超)
          ray_x = 308
          ray_y = 142
        when 152,270 #ブロリー(フルパワー)
          ray_x = 308
          ray_y = 126
        when 154,275 #オゾット
          ray_x = 308
          ray_y = 134
        when 155..158 #キンカーン系
          ray_x = 308
          ray_y = 148
        when 159..161 #アービー系
          ray_x = 312
          ray_y = 144
        when 162..164 #グーレ系
          ray_x = 312
          ray_y = 144
        when 165..166,233 #ターレス系
          ray_x = 312
          ray_y = 144
        when 167..168,255 #スラッグ系
          ray_x = 308
          ray_y = 138
        when 171 #ゴッドゴーガン
          ray_x = 308
          ray_y = 130
        when 172,273 #ゴーストライチー
          ray_x = 326
          ray_y = 144
        when 173,274 #ハッチヒャック
          ray_x = 314
          ray_y = 138
        when 177 #ガッシュ
          ray_x = 310
          ray_y = 142
        when 178 #タード
          ray_x = 318
          ray_y = 144
        when 179 #ビネガー
          ray_x = 310
          ray_y = 142
        when 180 #ゾルド
          ray_x = 340
          ray_y = 160
        when 189,190,246 #キュイ系
          ray_x = 324
          ray_y = 140
        when 191,192,245 #ザーボン変身系
          ray_x = 328
          ray_y = 142
        when 193,194 #アプール系
          ray_x = 314
          ray_y = 142
        when 195,196,244 #ドドリア系
          ray_x = 326
          ray_y = 154
        when 197,198,251 #グルド系
          ray_x = 340
          ray_y = 162
        when 199,200,250 #リクーム系
          ray_x = 320
          ray_y = 138
          enerugi_anime_no = 2
        when 201,202,249 #バータ系
          ray_x = 308
          ray_y = 142
        when 203,204,248 #ジース系
          ray_x = 322
          ray_y = 142
        when 205,206,247 #ギニュー系
          ray_x = 316
          ray_y = 142
        when 213 #ロボット兵
          ray_x = 308
          ray_y = 132
        when 215,277 #パイクーハン
          ray_x = 316
          ray_y = 142
        when 216 #タオパイパイ
          ray_x = 328
          ray_y = 146
        when 70,222 #ターレス大猿
          ray_x = 316
          ray_y = 124
          ray_big = true
        when 71,223,259 #スラッグ巨大化
          ray_x = 260
          ray_y = 120
          ray_big = true
          ray_color = 1
        when 238,252,272 #チルド系
          ray_x = 314
          ray_y = 144
        when 253,276 #オゾット変身
          ray_x = 282
          ray_y = 152
        when 254,278 #ブウ
          ray_x = 326
          ray_y = 142
        when 279 #フルパワーフリーザ
          ray_x = 320
          ray_y = 146
        else
          ray_x = 328
          ray_y = 148
        end
      end
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,enerugi_anime_no
        #battle_anime_change 0,2 if @enedatenum == 199 || @enedatenum == 200 || @enedatenum == 250 #リクーム系
        #battle_anime_change 0,2 if @enedatenum == 199 || @enedatenum == 200 || @enedatenum == 250 #ラカセイ系
        @ray_color = ray_color
        @ax = 2 if @enedatenum == 121 || @enedatenum == 126 || @enedatenum == 140
      elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 40
        @effect_anime_pattern = 227
        @ax = 0 if @enedatenum == 121 && @battle_anime_frame == 1
        @ax = 0 if @enedatenum == 126 && @battle_anime_frame == 1
        @ax = 0 if @enedatenum == 140 && @battle_anime_frame == 1
      elsif @battle_anime_frame == 41
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 45
        set_chr_display_out
      elsif @battle_anime_frame >= 46 && @battle_anime_frame <= 75
        @effect_anime_pattern = 228 
        @effect_anime_pattern = 234 if $cha_bigsize_on[@chanum] == true && @attackcourse == 0 || ray_big == true
        ray_y = 136
      elsif @battle_anime_frame == 76
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2492 #超能力
        back_x = 228
        back_y = 88
        ray_x = 325
        ray_y = 138
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          @output_anime_type = 1
          if @enedatenum != 172
            battle_anime_change 0,2
          else
            battle_anime_change 0,11
            @enex += 4
          end
          @ray_color = 0
        when 1..108
          #back_anime_pattern 201,back_x,back_y
        when 109
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 119
          set_chr_display_out
          #@tec_output_back = false
          #@chr_cutin_flag = false
          @tec_output_back_no = 1
        when 120..146
          #back_anime_pattern 9
          
        when 147
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
          set_chr_display_out
        when 1..27

        when 28
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2493 #フリーザカッター
        back_x = 228
        back_y = 88
        ray_x = 326
        ray_y = 196
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        @ray_color = 0
      when 1..121
        kien_x = 244
        kien_y = 80
        
        #
        #@chay = -160
        kienkizyunframe = 20
        picture = Cache.picture("Z3_戦闘_必殺技_気円斬")
        rect = Rect.new(0, 30*4, 126, 30)
        if @battle_anime_frame >= kienkizyunframe
          
          
          kien_kizyun_x = 6
          kien_kizyun_y = 2
          kien_mawarikata = 0
          case @battle_anime_frame
          
          when kienkizyunframe +10,kienkizyunframe +26
            kien_mawarikata = 1
          when kienkizyunframe +11,kienkizyunframe +27
            kien_mawarikata = 2
          when kienkizyunframe +12,kienkizyunframe +28
            kien_mawarikata = 3
          when kienkizyunframe +13,kienkizyunframe +29
            kien_mawarikata = 4
          when kienkizyunframe +14,kienkizyunframe +30
            kien_mawarikata = 5
          when kienkizyunframe +15,kienkizyunframe +31
            kien_mawarikata = 6
          when kienkizyunframe +16,kienkizyunframe +32
            kien_mawarikata = 7
          when kienkizyunframe +17,kienkizyunframe +33
            kien_mawarikata = 8
          when kienkizyunframe +18,kienkizyunframe +34
            kien_mawarikata = 9
          when kienkizyunframe +19,kienkizyunframe +35
            kien_mawarikata = 10
          when kienkizyunframe +20,kienkizyunframe +36
            kien_mawarikata = 11
          when kienkizyunframe +21,kienkizyunframe +37
            kien_mawarikata = 12
          when kienkizyunframe +22,kienkizyunframe +38
            kien_mawarikata = 13
          when kienkizyunframe +23,kienkizyunframe +39
            kien_mawarikata = 14
          when kienkizyunframe +24,kienkizyunframe +40
            kien_mawarikata = 15
          else
            kien_mawarikata = 0
          end
          
          case kien_mawarikata
          
          when 0 #下
            kien_x += 0
            kien_y += 0
          when 1
            kien_x += kien_kizyun_x * 4
            kien_y += - kien_kizyun_y * 1
          when 2
            kien_x += kien_kizyun_x * 7
            kien_y += - kien_kizyun_y * 3
          when 3
            kien_x += kien_kizyun_x * 9
            kien_y += - kien_kizyun_y * 6
          when 4 #右
            kien_x += kien_kizyun_x * 10
            kien_y += - kien_kizyun_y * 10
          when 5
            kien_x += kien_kizyun_x * 9
            kien_y += - kien_kizyun_y * 14
          when 6
            kien_x += kien_kizyun_x * 7
            kien_y += - kien_kizyun_y * 17
          when 7 
            kien_x += kien_kizyun_x * 4
            kien_y += - kien_kizyun_y * 19
          when 8 #上
            kien_x += kien_kizyun_x * 0
            kien_y += - kien_kizyun_y * 20
          when 9
            kien_x += - kien_kizyun_x * 4
            kien_y += - kien_kizyun_y * 19
          when 10 
            kien_x += - kien_kizyun_x * 7
            kien_y += - kien_kizyun_y * 17
          when 11
            kien_x += - kien_kizyun_x * 9
            kien_y += - kien_kizyun_y * 14
          when 12 #左
            kien_x += - kien_kizyun_x * 10
            kien_y += - kien_kizyun_y * 10
          when 13
            kien_x += - kien_kizyun_x * 9
            kien_y += - kien_kizyun_y * 6
          when 14 
            kien_x += - kien_kizyun_x * 7
            kien_y += - kien_kizyun_y * 3
          when 15
            kien_x += - kien_kizyun_x * 4
            kien_y += - kien_kizyun_y * 1
          end
          
        end
        
        if @battle_anime_frame >= kienkizyunframe + 50
          Audio.se_stop if @battle_anime_frame == kienkizyunframe + 50
          Audio.se_play("Audio/SE/" + "Z1 気円斬") if @battle_anime_frame == kienkizyunframe + 50
          kien_y += - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
          kien_x += - 8 * (@battle_anime_frame-(kienkizyunframe + 50))
          battle_anime_change 0,4
          #p kien_x,kien_y
        end
        
        @back_window.contents.blt(kien_x,kien_y,picture,rect)
      when 130
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
      when 141..165
        @effect_anime_pattern = 260
      when 166
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
     when 2494 #連続エネルギー波
      if @attackcourse == 0
        back_x = 228
        back_y = 88
        ray_x = 304
        ray_y = 138
      else
        back_x = 228
        back_y = 88
        ray_x = 180
        ray_y = 138
      end
      @ray_color = 3
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
          #@output_anime_type = 1
          
          
          battle_anime_change 0,2
          
          if $partyc[@chanum] == 27 && @attackcourse == 0 || $partyc[@chanum] == 28 && @attackcourse == 0 || $partyc[@chanum] == 29 && @attackcourse == 0 || $partyc[@chanum] == 30 && @attackcourse == 0
            @output_anime_type = 1
            battle_anime_change 0,1
          end
          if @enedatenum == 172 && @attackcourse == 1
            @output_anime_type = 1
            battle_anime_change 0,10
          end
          @ray_color = 3
          @ray_spd_up_flag = true
        when 1..69
          hatudoukaisi = 1
          hatudougofra = 15
          @effect_anime_pattern = 201
          
          if @battle_anime_frame <= hatudoukaisi + hatudougofra*1
            ray_y = 138
            if @battle_anime_frame <= hatudoukaisi+3 + hatudougofra*0
              @ax = -2 
            elsif @battle_anime_frame <= hatudoukaisi+5 + hatudougofra*0
              battle_anime_change 0,0
              @ax = 2 
            elsif @battle_anime_frame <= hatudoukaisi+7 + hatudougofra*0
              @ax = 0 
            end
            
          elsif @battle_anime_frame <= hatudoukaisi + hatudougofra*2
            @effect_anime_frame = 0 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*1
            battle_anime_change 0,1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*1
            @effect_anime_frame = 1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*1 && @enedatenum == 172 && @attackcourse == 1
            battle_anime_change 0,1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*1 && @enedatenum == 172 && @attackcourse == 1
            ray_y = 78
            if @battle_anime_frame <= hatudoukaisi+3 + hatudougofra*1
              @ax = -2 
            elsif @battle_anime_frame <= hatudoukaisi+5 + hatudougofra*1
              battle_anime_change 0,0
              @ax = 2 
            elsif @battle_anime_frame <= hatudoukaisi+7 + hatudougofra*1
              @ax = 0 
            end
            
          elsif @battle_anime_frame <= hatudoukaisi + hatudougofra*3
            @effect_anime_frame = 0 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*2
            battle_anime_change 0,2 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*2
            
            if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*2
              if $partyc[@chanum] == 27 && @attackcourse == 0 || $partyc[@chanum] == 28 && @attackcourse == 0 || $partyc[@chanum] == 29 && @attackcourse == 0 || $partyc[@chanum] == 30 && @attackcourse == 0
                @output_anime_type = 1
                battle_anime_change 0,1
              end
            end
            @effect_anime_frame = 1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*2 && @enedatenum == 172 && @attackcourse == 1
            battle_anime_change 0,10 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*2 && @enedatenum == 172 && @attackcourse == 1
            ray_y = 138
            if @battle_anime_frame <= hatudoukaisi+3 + hatudougofra*2
              @ax = -2 
            elsif @battle_anime_frame <= hatudoukaisi+5 + hatudougofra*2
              battle_anime_change 0,0
              @ax = 2 
            elsif @battle_anime_frame <= hatudoukaisi+7 + hatudougofra*2
              @ax = 0 
            end
            
          elsif @battle_anime_frame <= hatudoukaisi + hatudougofra*4
            @effect_anime_frame = 0 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*3
            @output_anime_type = 1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*3
            battle_anime_change 0,1 if @battle_anime_frame == hatudoukaisi+1 + hatudougofra*3
            ray_y = 98
            if @battle_anime_frame <= hatudoukaisi+3 + hatudougofra*3
              @ax = -2 
            elsif @battle_anime_frame <= hatudoukaisi+5 + hatudougofra*3
              battle_anime_change 0,0
              @ax = 2 
            elsif @battle_anime_frame <= hatudoukaisi+7 + hatudougofra*3
              @ax = 0 
            end
            #@effect_anime_frame = 0 if @battle_anime_frame == hatudoukaisi + hatudougofra*4
          end
            
          #back_anime_pattern 201,back_x,back_y
        when 70
          Audio.se_stop
          #battle_anime_change 0,3
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 80
          set_chr_display_out
          @ray_spd_up_flag = false
          #@tec_output_back = false
          #@chr_cutin_flag = false
          #@tec_output_back_no = 1
        when 81..109
          #back_anime_pattern 9
          @effect_anime_pattern = 202
        when 110
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        when 0
          set_chr_display_out
        when 1..29
          @effect_anime_pattern = 202
        when 30
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2495 #デスボールとスーパーノヴァ
      
      case @enedatenum
      
      when 238,252 #チルド
        ray_x = 262
        ray_y = 64
      when 120,239 #クウラ
        ray_x = 250
        ray_y = 10  
      else
        ray_x = 242
        ray_y = 20      
      end
      
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,3
        battle_anime_change 0,11 if @enedatenum == 120 || @enedatenum == 239 #クウラ
        battle_anime_change 0,4 if @enedatenum == 121 #クウラ(最終形態)
        battle_anime_change 0,5 if @enedatenum == 136
        battle_anime_change 0,5 if @enedatenum == 238 || @enedatenum == 252 #チルド
        @ray_color = 0
      when 1..130
        @effect_anime_pattern = 10
        @effect_anime_frame += 1 if @battle_anime_frame % 3 == 0 && @enedatenum == 121
        #@effect_anime_type -= 1 if @battle_anime_frame % 25 == 0
        
        case @enedatenum
        
        when 121,238,252 #クウラ(最終形態)、チルド
          @effect_anime_type = 4 if @effect_anime_type > 4
        else
          @effect_anime_type = 3 if @effect_anime_type > 3
        end
      when 131..170
        battle_anime_change 0,1
        battle_anime_change 0,6 if @enedatenum == 238 || @enedatenum == 252
        @tec_output_back_no = 0 if @battle_anime_frame == 131
        Audio.se_play("Audio/SE/" + "Z1 繰気弾") if @battle_anime_frame == 131
        ray_x -= 12*(@battle_anime_frame - 131)
        ray_y += 2*(@battle_anime_frame - 131)
      when 171
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 180
        set_chr_display_out
      when 181..207
        @effect_anime_pattern = 271
        @effect_anime_type = 3
        @effect_anime_type = 4 if @enedatenum == 121 #クウラ(最終形態)
        @effect_anime_type = 4 if @enedatenum == 238 || @enedatenum == 252 #チルド
      when 208
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2498 #爆発波(クウラ,セル完全体,合体13号,ターレス系,スラッグ系)
      @ray_color = 3
      
      back_x = 248
      back_y = 88
      if @all_attack_count == 1
        
        #@battle_anime_frame = 129 if @enedatenum == 172 && @battle_anime_frame == 0
        case @battle_anime_frame
        when 0 #初期化
          if @enedatenum != 172 && @enedatenum != 173 && @enedatenum != 71 && @enedatenum != 223
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          else
            Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
          end
          #@ray_color = 0
        when 1..128
          if @enedatenum != 172 && @enedatenum != 173 && @enedatenum != 71 && @enedatenum != 223
            back_anime_pattern 201,back_x,back_y 
          end
        when 129
          #@chr_cutin = false
          @tec_output_back = false
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          #back_anime_pattern 2
        when 130..210
          back_anime_pattern 2
          @output_anime_type = 1
          if @enedatenum == 129 || @enedatenum == 135 || @enedatenum == 269 #セル完全体
            battle_anime_change 0,5
          elsif @enedatenum == 139 || @enedatenum == 267 #13号合体
            battle_anime_change 0,4
          elsif @enedatenum == 152 || @enedatenum == 270 #ブロリー(フルパワー)
            battle_anime_change 0,7
            @eney -= 2 if @battle_anime_frame == 130
          elsif @enedatenum == 165 || @enedatenum == 166 #ターレス系
            battle_anime_change 0,4
          elsif @enedatenum == 167 || @enedatenum == 168 #スラッグ系
            battle_anime_change 0,4
            @enex += 8 if @battle_anime_frame == 130
          elsif @enedatenum == 172 || @enedatenum == 273 #ゴーストライチー
            battle_anime_change 0,2
            @enex += 10 if @battle_anime_frame == 130
          elsif @enedatenum == 173 || @enedatenum == 274 #ハッチヒャック
            battle_anime_change 0,2
            @enex += 8 if @battle_anime_frame == 130
          elsif @enedatenum == 71 || @enedatenum == 223 || @enedatenum == 259 #スラッグ巨大化
            battle_anime_change 0,4
            @enex += 8 if @battle_anime_frame == 130
          else
            battle_anime_change 0,3
          end
        when 211
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 212..272
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
          back_anime_pattern 1
        when 273
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー") if @enedatenum == 152
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
          
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 1
          @chr_cutin = true
          @chr_cutin_mirror_flag = true
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2499 #強力エネルギー波
      ray_color = 3
      if @attackcourse == 0
        kitamenasi = true
        ray_big = true
        back_x = 228
        back_y = 88
        
        case $partyc[@chanum]
        
        when 21,22
          ray_x = 300
          ray_y = 120

        when 23
          ray_x = 324
          ray_y = 120
        when 27
          ray_x = 318
          ray_y = 122
          
          if $cha_bigsize_on[@chanum] == true
            ray_big = false
            ray_x = 316
            ray_y = 98
          end
        when 28
          ray_x = 306
          ray_y = 124
          if $cha_bigsize_on[@chanum] == true
            ray_big = false
            ray_x = 304
            ray_y = 86
          end
        when 29
          ray_x = 324
          ray_y = 110
          if $cha_bigsize_on[@chanum] == true
            ray_big = false
            ray_x = 314
            ray_y = 96
          end
        when 30
          ray_x = 312
          ray_y = 120
          if $cha_bigsize_on[@chanum] == true
            ray_big = false
            ray_x = 310
            ray_y = 86
          end
        end
      else
        back_x = 248
        back_y = 88
      
        kitamenasi = false
        ray_big = false
         
        case @enedatenum #敵キャラによって光線の位置を変える
        when 111..113,114..116,241,242 #ネイズ、ドーレ系
          ray_x = 210
          ray_y = 116
        when 117..119,240 #サウザー系
          ray_x = 216
          ray_y = 126
        when 120,136,169,239 #クウラ系
          ray_x = 222
          ray_y = 120
          ray_big = true
        when 121,261 #クウラ(最終形態)系
          ray_x = 208
          ray_y = 116
          ray_big = true
        when 122,262 #20号
          ray_x = 230
          ray_y = 112
          kitamenasi = true
          ray_big = true
          #@battle_anime_frame = 129 if @battle_anime_frame == 0
        when 123,263 #19号
          ray_x = 222
          ray_y = 120
          kitamenasi = true
          ray_big = true
          #@battle_anime_frame = 129 if @battle_anime_frame == 0
        when 124,125 #18,17号
          ray_x = 230
          ray_y = 120
          kitamenasi = true
          ray_big = true
        when 126 #16号
          ray_x = 208
          ray_y = 120
          kitamenasi = true
          ray_big = true
        when 138 #13号
          ray_x = 210
          ray_y = 112
          kitamenasi = true
          ray_big = true
        when 139 #13号(合体)
          ray_x = 200
          ray_y = 112
          kitamenasi = true
          ray_big = true
        when 140 #14号
          ray_x = 198
          ray_y = 112
          kitamenasi = true
          ray_big = true
        when 141 #15号
          ray_x = 234
          ray_y = 136
          kitamenasi = true
          ray_big = true
        when 142 #ボージャック
          ray_x = 200
          ray_y = 112
          kitamenasi = true
          ray_big = true
        when 143,271 #ボージャック(フルパワー)
          ray_x = 200
          ray_y = 112
          #kitamenasi = true
          ray_big = true
        when 144 #ゴクア
          ray_x = 202
          ray_y = 114
          #kitamenasi = true
          ray_big = true
        when 145 #ザンギャ
          ray_x = 232
          ray_y = 118
          kitamenasi = true
          ray_big = false
        when 146 #ビドー
          ray_x = 202
          ray_y = 116
          kitamenasi = true
          ray_big = false
        when 147 #ブージン
          ray_x = 232
          ray_y = 134
          kitamenasi = false
          ray_big = false
        when 151 #ブロリー(超)
          ray_x = 202
          ray_y = 116
          kitamenasi = false
          ray_big = true
        when 152,270 #ブロリー(フルパワー)
          ray_x = 202
          ray_y = 100
          kitamenasi = false
          ray_big = true
        when 154,275 #オゾット
          ray_x = 202
          ray_y = 108
          kitamenasi = true
          ray_big = true
        when 172,273 #ライチー
          ray_x = 224
          ray_y = 118
          kitamenasi = true
          ray_big = true
        when 173,274 #ハッチヒャック
          ray_x = 212
          ray_y = 112
          kitamenasi = true
          ray_big = true
        when 177 #ガッシュ
          ray_x = 210
          ray_y = 116
          kitamenasi = false
          ray_big = true
        when 178 #タード
          ray_x = 218
          ray_y = 118
          kitamenasi = false
          ray_big = true
        when 179 #ビネガー
          ray_x = 210
          ray_y = 116
          kitamenasi = false
          ray_big = true
        when 180 #ゾルド
          ray_x = 240
          ray_y = 134
          kitamenasi = false
          ray_big = true
        when 213 #ロボット兵
          ray_x = 206
          ray_y = 108
          kitamenasi = true
          ray_big = true
        when 215,277 #パイクーハン
          ray_x = 216
          ray_y = 116
          kitamenasi = false
          ray_big = true
        when 216 #タオパイパイ
          ray_x = 228
          ray_y = 120
          kitamenasi = true
          ray_big = true
        when 70,222 #ターレス大猿
          ray_x = 216
          ray_y = 98
          kitamenasi = true
          ray_big = true
        when 71,223,259 #スラッグ巨大化
          ray_x = 160
          ray_y = 102
          kitamenasi = true
          ray_big = true
          ray_color = 1
        when 238,252,272 #チルド系
          ray_x = 220
          ray_y = 130
          kitamenasi = false
          ray_big = true
        when 253,276 #オゾット(変身)
          ray_x = 180
          ray_y = 124
          kitamenasi = true
          ray_big = true
        
        when 254,278 #ブウ
          ray_x = 222
          ray_y = 118
          kitamenasi = true
          ray_big = true
        else
          ray_x = 210
          ray_y = 120
        end
      end
      if ray_big == true && @battle_anime_frame >= 140
        if @attackcourse == 0
          ray_x -= -40
          ray_y -= 18
        else
          ray_x -= 88
          ray_y -= 18
        end
      end
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
        if kitamenasi == false
          
          if @attackcourse != 0
            case @enedatenum #敵キャラによってSEを変える
            when 177,178,179,180
              Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
            else
              Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
            end
          else
            Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
          end
          battle_anime_change 0,2 if @enedatenum == 238 || @enedatenum == 252 #チルド
        else
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          battle_anime_change 0,1
          battle_anime_change 0,2 if @enedatenum == 145 && @attackcourse == 1 #ザンギャ
          battle_anime_change 0,4 if @enedatenum == 191 || @enedatenum == 192 #ザーボン系
          battle_anime_change 0,3 if @enedatenum == 195 || @enedatenum == 196 #ドドリア系
          @ax = 2 if @enedatenum == 126 && @attackcourse == 1
        end
        
        @ray_color = ray_color
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = ray_x +48
        @genkityuushin_y = ray_y +32
        
        if $cha_bigsize_on[@chanum] == true && @attackcourse == 0
           @genkityuushin_x -= 44
           @genkityuushin_y += 4
        end
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 1..128
        @ax = 0 if @enedatenum == 126
        if kitamenasi == false
          back_anime_pattern 201,back_x,back_y
        else
          tame_end = 125
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        end
          
      when 129
        #@ray_color = 3
        #@output_anime_type = 1
        Audio.se_stop
        battle_anime_change 0,1 
        battle_anime_change 0,2 if @enedatenum == 143 && @attackcourse == 1  #ボージャックフルパワー
        battle_anime_change 0,2 if @enedatenum == 145 && @attackcourse == 1 #ザンギャ
        battle_anime_change 0,3 if @enedatenum == 238 || @enedatenum == 252 #チルド
        @ax = 2 if @enedatenum == 121
      when 130
        @ax = 0
      when 140
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        battle_anime_change 0,2 if @enedatenum == 143 && @attackcourse == 1 #ボージャックフルパワー
        battle_anime_change 0,2 if @enedatenum == 145 && @attackcourse == 1 #ザンギャ
        battle_anime_change 0,3 if @enedatenum == 238 || @enedatenum == 252 #チルド
        if ray_big == true
          @effect_anime_pattern = 239
        else
          @effect_anime_pattern = 233
        end
        #back_anime_pattern 101,back_x,back_y
      when 141..178
        #back_anime_pattern 101,back_x,back_y
      when 179
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 189
        set_chr_display_out
      when 190..215
        if ray_big == true
          @effect_anime_pattern = 240
        else
          @effect_anime_pattern = 234
        end
        
        @effect_anime_pattern = 240 if $cha_bigsize_on[@chanum] == true && @attackcourse == 0
      when 216
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2501 #マシーナリーレイン
      back_x = 248
      back_y = 88
        ray_x = 250
        ray_y = 116
        sframe = 0
        color = Color.new(255,255,255,260)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @output_anime_type = 0
        @ray_color = 3
      when 1..57
        picture = Cache.picture("Z3_戦闘_敵_メタルクウラ")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642+24-8*@battle_anime_frame,STANDARD_ENEY-64,picture,rect)
        @back_window.contents.blt(642+24-8*@battle_anime_frame,STANDARD_ENEY+64,picture,rect)
      when 58..70
        picture = Cache.picture("Z3_戦闘_敵_メタルクウラ")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642+24-8*57,STANDARD_ENEY-64,picture,rect)
        @back_window.contents.blt(642+24-8*57,STANDARD_ENEY+64,picture,rect)
      when 71..139
        sframe = 70
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe + 1
        picture = Cache.picture("Z3_戦闘_必殺技_敵_メタルクウラ")
        rect = Rect.new(0, 6*96, 96, 96)
        @back_window.contents.blt(642+24-8*57-16*(@battle_anime_frame-sframe),STANDARD_ENEY-64-4*(@battle_anime_frame-sframe),picture,rect)
        @back_window.contents.blt(642+24-8*57-16*(@battle_anime_frame-sframe),STANDARD_ENEY+64,picture,rect)
        battle_anime_change 0,16
        @eney -= 16
      when 140
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
      when 141..164
        sframe = 141
        @output_anime_type = 1
        battle_anime_change 0,6
        @enex = 640-16*(@battle_anime_frame-sframe)
        @eney = STANDARD_ENEY
      when 165..169
        ray_x = 270
        ray_y = 156
        sframe = 165
        @effect_anime_pattern = 123
        Audio.se_play("Audio/SE/" + "ZG 打撃3") if @battle_anime_frame == sframe
        @enex = 272
        if @battle_anime_frame <= sframe + 2
          @chax -= 8
          battle_anime_change 1,16
        elsif @battle_anime_frame <= sframe + 4
          @chax += 8
        end
      when 170..182
        ray_x = 270
        ray_y = 156
        battle_anime_change 1,0
        sframe = 170
        #Audio.se_play("Audio/SE/" + "ZG 打撃3") if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        
        when sframe
          @eney = STANDARD_ENEY - 16
        when sframe + 1
          @eney = STANDARD_ENEY - 32
        when sframe + 2
          @eney = STANDARD_ENEY - 48
        when sframe + 3
          @effect_anime_pattern = 0
          @enex = 288
          @eney = STANDARD_ENEY - 64
        when sframe + 3
          @enex = 304
          @eney = STANDARD_ENEY - 72
        when sframe + 4
          @enex = 320
          @eney = STANDARD_ENEY - 80
        when sframe + 5
          @enex = 344
        when sframe + 6
          @enex = 368
        when sframe + 7
          @enex = 384
          @eney = STANDARD_ENEY - 72
        when sframe + 8
          @enex = 400
          @eney = STANDARD_ENEY - 64
        when sframe + 9
          @enex = 416
          @eney = STANDARD_ENEY - 48
        when sframe + 10
          @enex = 416
          @eney = STANDARD_ENEY - 32
        when sframe + 11
          @enex = 416
          @eney = STANDARD_ENEY - 16
        when sframe + 12
          @enex = 416
          @eney = STANDARD_ENEY
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
      when 183..190
        sframe = 183
        ray_x = 250
        ray_y = 140
        
        if @battle_anime_frame == sframe + 7
          @output_anime_type = 0
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          battle_anime_change 1,16
          @gx = -16
          @effect_anime_pattern = 123
        end
        @enex = 416-24*(@battle_anime_frame-sframe)
        @eney = STANDARD_ENEY
      when 191..229
        sframe = 191
        ray_x = 250
        ray_y = 140
        @effect_anime_pattern = 0 if @battle_anime_frame == sframe + 7
        @enex = 248
      when 230..250
        @effect_anime_frame = 0
          @effect_anime_type = 0
        @gx = 0
        battle_anime_change 1,0
        @tec_output_back_no = 2
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @eney = -96
      when 251..264
        sframe = 251
        ray_x = 280
        ray_y = 156
        @output_anime_type = 1 if @battle_anime_frame == sframe
        battle_anime_change 0,6 if @battle_anime_frame == sframe
        
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        
        if @battle_anime_frame == sframe + 9
          #@output_anime_type = 0
          #battle_anime_change 0,4
        elsif @battle_anime_frame == sframe + 13
          battle_anime_change 1,16
          @gx = -16
          @gy = 16
          @effect_anime_pattern = 123
          Audio.se_play("Audio/SE/" + "Z1 強打")
        end
        @enex = 500-16*(@battle_anime_frame-sframe)
        @eney = -96+16*(@battle_anime_frame-sframe)
      when 265..300
        sframe = 265
        ray_x = 280
        ray_y = 156
        if @battle_anime_frame == sframe + 7
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        
      when 301..329
        sframe = 301
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe
        @eney= -160
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,134,picture,rect)
        end
        #@effect_anime_pattern = 121
        
        if @battle_anime_frame == sframe + 28
          @tec_output_back_no = 1
          @chax = CENTER_CHAX
          @chay = -96 #STANDARD_CHAY
          @gx = 0
          @gy = 16
        end
      when 330..341
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20+16,134+16,picture,rect)
        end
      when 342..370
        ray_x = 280
        ray_y = 156
        @tec_output_back_no = 3
        sframe = 342
        @effect_anime_pattern = 123 if @battle_anime_frame == sframe
        @effect_anime_pattern = 0 if @battle_anime_frame == sframe + 7
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        @gx = -16 if @battle_anime_frame == sframe
        @gy = -16 if @battle_anime_frame == sframe
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @output_anime_type = 0
        battle_anime_change 0,3
        battle_anime_change 1,17
      when 381
        @gx = -0
        @gy = 0
        battle_anime_change 1,16
        @tec_output_back_no = 0
        @eney = STANDARD_ENEY
        @enex = CENTER_ENEX
        @output_anime_type = 1
        battle_anime_change 0,0
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 401
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 431..432
        sframe = 431
        Audio.se_play("Audio/SE/" + "Z3 バリア") if @battle_anime_frame == sframe
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
      when 433
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 440
        set_chr_display_out
      when 441..501
        @tec_output_back = false
        back_anime_pattern 1
      when 502
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2503 #ネイズバインドウェーブ
      
      
      ray_x = 284
      ray_y = 146
        backhai_no = 201
        back_x = 240
        back_y = 88

        
      case @battle_anime_frame
      when 0 #初期化
       
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する

        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..89
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        battle_anime_change 0,2
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")    # 効果音を再生する
        #battle_anime_change 0,1
        @ray_color = 4
        @effect_anime_pattern = 283
        #@effect_anime_mirror = 1
        #back_anime_pattern 101,back_x,back_y
      when 91..128
        #back_anime_pattern 101,back_x,back_y
      when 129
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 139
        set_chr_display_out
      when 140..166
        @effect_anime_pattern = 44
      when 167
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2505 #ドーレテリブルラッシュ
      back_x = 248
      back_y = 88
        ray_x = 250
        ray_y = 116
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        battle_anime_change 0,0
      when 140..169
        @ax = 16
        @chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..184
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,16
      when 185..190
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,1
      when 191..219
        if @battle_anime_frame == 191
          Audio.se_play("Audio/SE/" + "ZG 打撃2")    # 効果音を再生する
          
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        if @battle_anime_frame >= 201
          Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 201
          @eney= -160
          if @battle_anime_frame % 4 == 0
            picture = Cache.picture("戦闘アニメ") #ダメージ表示用
            rect = Rect.new(0, 48,64,64)
            @back_window.contents.blt(@enex + 20,144,picture,rect)
          end
        end
        @ax = 0
        @ay = 0
        @gx = -16
        battle_anime_change 1,16
        @effect_anime_pattern = 121
      when 230
        @chax = 640+16
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @effect_anime_pattern = 0
      when 231..256
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20-96,144,picture,rect)
        end
      when 257..270
        @tec_output_back_no = 2
        @eney = STANDARD_ENEY if @battle_anime_frame == 257
        @enex -= 96 if @battle_anime_frame == 257
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 257
        @output_anime_type = 1
        battle_anime_change 0,3
        #@output_anime_type = 0
        battle_anime_change 1,17
        @gx = 16
        @gy = -16
        ray_x = @enex+84
        ray_y = @eney+24
        @effect_anime_pattern = 123
      when 271..296
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 271
        @eney= -160 if @battle_anime_frame == 271
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        end
      when 305
        @gx = 0
        @gy = 0
        set_chr_display_out
        @chax -= 16*14
        @chay += 16*14 + 8
      when 306..320
        @enex = CENTER_ENEX if @battle_anime_frame == 306
        @gx = 16
        @gy = -16
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        end
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 321..340
        @gx = 0
        @gy = 16
        @tec_output_back_no = 1
        @eney = STANDARD_ENEY if @battle_anime_frame == 321
        @enex = CENTER_ENEX if @battle_anime_frame == 321
        Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == 321
        @output_anime_type = 0
        battle_anime_change 0,2
        @eney= -160 if @battle_anime_frame == 325
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == 330
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        end
        ray_x = CENTER_ENEX-24
        ray_y = STANDARD_ENEY+36

        @effect_anime_pattern = 123
      when 341
        @effect_anime_pattern = 0
        set_chr_display_out
        @chay -= 16*19 + 8
        @chax += 24
      when 350..360
        
        @gy = 16
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        end
      when 361
        Audio.se_play("Audio/SE/" + "Z1 強打")
        @gy = 0
        @eney = STANDARD_ENEY if @battle_anime_frame == 361
        @output_anime_type = 1
        battle_anime_change 0,2
        #battle_anime_change 1,16
      when 371
        @tec_output_back_no = 0
        Audio.se_play("Audio/SE/" + "ZG 打撃1")
        @output_anime_type = 1
        battle_anime_change 0,0
        @chax += 16
      when 401
        Audio.se_play("Audio/SE/" + "ZG 打撃6")
        battle_anime_change 0,1
        @gx = -16
        @effect_anime_frame = 0 
      when 430
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 431..468
        #back_anime_pattern 101,back_x,back_y
      when 469
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 479
        
        set_chr_display_out
        @chax = 600
      when 480..505
        @gx = -12
        @effect_anime_pattern = 234
      when 506
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2510 #ドレインライフ
      ray_x = 280
      ray_y = 140
      case @battle_anime_frame
      when 0 #初期化
        @ray_color = 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 1..40
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if @enedatenum == 127 || @enedatenum == 128
            @back_window.contents.blt(@enex + 30,144,picture,rect)
          else  
            @back_window.contents.blt(@enex + 40,144,picture,rect)
          end
        else
          
        end
      when 41
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        set_chr_display_out
        @tec_output_back = false
          #@enex = CENTER_ENEX
          #@eney = STANDARD_ENEY
      when 42..82
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          if @enedatenum == 127 || @enedatenum == 128
            @back_window.contents.blt(@enex + 50,144,picture,rect)
          else  
            @back_window.contents.blt(@enex + 40,144,picture,rect)
          end
        else
          
        end
        back_anime_pattern 1
        #@effect_anime_pattern = 49
        @eney = STANDARD_ENEY if @battle_anime_frame == 82
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 82
        @effect_anime_frame += 3 if @battle_anime_frame >= 82
        @effect_anime_pattern = 123 if @battle_anime_frame == 82
        @output_anime_type = 1 if @battle_anime_frame == 82
        if @enedatenum == 122 && $partyc[@chanum] == 7
          battle_anime_change 0,3 if @battle_anime_frame == 82
        else
          if @enedatenum == 122
            battle_anime_change 0,2 if @battle_anime_frame == 82
          elsif @enedatenum == 123
            @enex += 10 if @battle_anime_frame == 82
            battle_anime_change 0,1 if @battle_anime_frame == 82
          elsif @enedatenum == 127
            @enex += 36 if @battle_anime_frame == 82
            battle_anime_change 0,6 if @battle_anime_frame == 82
          elsif @enedatenum == 128
            @enex += 36 if @battle_anime_frame == 82
            battle_anime_change 0,5 if @battle_anime_frame == 82
          end
        end
      when 83..84
        @gx = -4
        back_anime_pattern 1
      when 85..86
        @gx = 4
        back_anime_pattern 1
      when 87..89
        @gx = 0
        back_anime_pattern 1
      when 90
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 怪しい気")
        back_anime_pattern 1
      when 91..200
        back_anime_pattern 1

        if @battle_anime_frame % 2 == 0
          @gx = 6
        elsif @battle_anime_frame % 2 == 1
          @gx = -6
        end
        
        if @enedatenum == 122 && $partyc[@chanum] == 7 && @battle_anime_frame == 200 #20号対ヤムチャならば
          @gx = 0
          @chax += 20
          @chay -= 10 
          Audio.se_play("Audio/SE/" + "ZG 打撃6")
          @output_anime_type = 0
          battle_anime_change 0,1
          #battle_anime_change 1,16
        elsif @battle_anime_frame == 200
          @battle_anime_frame = 2000
          
        end
      when 201..239
         back_anime_pattern 1
        @output_anime_type = 1
        battle_anime_change 0,1
      when 240
         back_anime_pattern 1
        @ray_color = 3
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
      when 241..280
         back_anime_pattern 1
        ray_x = 328
        ray_y = 140
        @effect_anime_pattern = 227
      when 281
         back_anime_pattern 1
        @battle_anime_frame = 2000
      when 2001
        @eney = -160
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2519 #アクセルダンス
      
      ray_x = 242
      ray_y = 20
      enezyouge = 44
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        @output_anime_type = 0
        @ray_color = 3
      when 1..11
        if $battleenemy[@enenum] == 124 #18号なら
          @eney-=4
          picture = Cache.picture("Z3_戦闘_敵_17号")
          rect = Rect.new(0, 0*96, 96, 96)
          @back_window.contents.blt(640-8*@battle_anime_frame,STANDARD_ENEY+enezyouge,picture,rect)
        else
          @eney+=4
          picture = Cache.picture("Z3_戦闘_敵_18号")
          rect = Rect.new(0, 0*96, 96, 96)
          @back_window.contents.blt(640-8*@battle_anime_frame,STANDARD_ENEY-enezyouge,picture,rect)
        end
        
      when 12..47
        if $battleenemy[@enenum] == 124 #18号なら
          picture = Cache.picture("Z3_戦闘_敵_17号")
          rect = Rect.new(0, 0*96, 96, 96)
          @back_window.contents.blt(642-8*@battle_anime_frame,STANDARD_ENEY+enezyouge,picture,rect)
        else
          picture = Cache.picture("Z3_戦闘_敵_18号")
          rect = Rect.new(0, 0*96, 96, 96)
          @back_window.contents.blt(642-8*@battle_anime_frame,STANDARD_ENEY-enezyouge,picture,rect)
        end
      when 48..100
        @eney=-100
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-8*47,STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-8*47,STANDARD_ENEY-enezyouge,picture,rect)
      when 101..159
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 101
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-8*47-16*(@battle_anime_frame-101),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-8*47-16*(@battle_anime_frame-101),STANDARD_ENEY-enezyouge,picture,rect)
      when 160
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
      when 161..176
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(@battle_anime_frame-161),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(@battle_anime_frame-161),STANDARD_ENEY-enezyouge,picture,rect)
      when 177..183
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(@battle_anime_frame-161),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(@battle_anime_frame-161),STANDARD_ENEY-enezyouge,picture,rect)
      when 184..191
        battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 184
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 1*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 192..200
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 192
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 3*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 4*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 201..208
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 201
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 1*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 209..216
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 209
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 3*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 4*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 217..224
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 217
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 1*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 225..232
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 225
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 3*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 4*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 233..240
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 233
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 1*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 241..248
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 241
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 3*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 4*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 249..256
        Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == 249
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 1*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
      when 257..270
        Audio.se_play("Audio/SE/" + "Z3 打撃") if @battle_anime_frame == 257
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 3*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(22),STANDARD_ENEY-enezyouge,picture,rect)
        @chax -= 8
      when 271..275
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(@battle_anime_frame-271)*16,STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(@battle_anime_frame-271)*16,STANDARD_ENEY-enezyouge,picture,rect)
      when 276..280
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 280
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(@battle_anime_frame-271)*16,STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(@battle_anime_frame-271)*16,STANDARD_ENEY-enezyouge,picture,rect)
      when 281..300
        battle_anime_change 1,17
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(9)*16,STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 16*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(9)*16,STANDARD_ENEY-enezyouge,picture,rect)
        @chax -= 16
      when 301..320
        picture = Cache.picture("Z3_戦闘_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(9)*16,STANDARD_ENEY+enezyouge,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_18号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(642-16*(22)-(9)*16,STANDARD_ENEY-enezyouge,picture,rect)
      when 321..364
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 321
        picture = Cache.picture("Z3_戦闘_必殺技_敵_17号")
        rect = Rect.new(0, 0*96, 96, 96)
        @back_window.contents.blt(640-(@battle_anime_frame-321)*8,STANDARD_ENEY,picture,rect)
        picture = Cache.picture("Z3_戦闘_必殺技_敵_18号")
        rect = Rect.new(0, 6*96, 96, 96)
        @back_window.contents.blt(-96+(@battle_anime_frame-321)*8,STANDARD_ENEY,picture,rect)
      when 365..490
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 365
        picture = Cache.picture("Z3_戦闘_必殺技_敵_17号")
        rect = Rect.new(0, 2*96, 96, 96)
        @back_window.contents.blt(640-(364-321)*8+8,STANDARD_ENEY,picture,rect)
        picture = Cache.picture("Z3_戦闘_必殺技_敵_18号")
        rect = Rect.new(0, 5*96, 96, 96)
        @back_window.contents.blt(-96+(364-321)*8-8,STANDARD_ENEY,picture,rect)
        @effect_anime_pattern = 290
      when 491..549
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == 491
        @effect_anime_pattern = 0
        @back_window.contents.fill_rect(0,0,640,378,color)
      when 550
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @tec_output_back_no = 1
      when 551..579
        @tec_output_back_no = 1
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame % 6 == 0
      when 580
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2552 #サウザーブレードスラッシュ
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 139
        battle_anime_change 0,5
      when 140..169
        
        @ax = 24
        @chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        @ax = 24
        @output_anime_type = 0
        battle_anime_change 0,16
      when 181..185
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,1
      when 186..280
        @ax = 0
        strfra = 186
        akifra = 3
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          battle_anime_change 0,0
        when strfra + akifra * 4
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          battle_anime_change 0,0
        when strfra + akifra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          @ax = -8
        when strfra + akifra * 16
          @ax = 0
        when strfra + akifra * 17..strfra + akifra * 20
          @enex -= 24
          if @battle_anime_frame > strfra + akifra * 18
            color = Color.new(255,255,255,260)
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          end
        when strfra + akifra * 21
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "DB3 刀")
        when strfra + akifra * 22
          @ax = 0
          @output_anime_type = 1
          battle_anime_change 0,2
          @enex += 14
        end
       
      when 281..299
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 281
        battle_anime_change 0,0
        @enex -= 14 if @battle_anime_frame == 281
        @enex -= 24
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0

      when 320
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2530 #カメハメ波(セル1)
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,3
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @effect_anime_pattern = 203
        if @enedatenum == 127 || @enedatenum == 264
          ray_x = 214
          ray_y = 134
        elsif @enedatenum == 128 || @enedatenum == 268
          ray_x = 206
          ray_y = 134
        elsif @enedatenum == 129 || @enedatenum == 135 || @enedatenum == 269
          ray_x = 202
          ray_y = 128
        elsif @enedatenum == 130
          ray_x = 202
          ray_y = 146
        else
          ray_x = 214
          ray_y = 134
        end
        
        case @battle_anime_frame
        
        when 47..49
          @ax = 2
        when 50..52
          @ax = -2
        when 53
          @ax = 0
        end
        
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 107
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 108
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2531 #魔貫光殺砲(セル1)
        back_x = 180
        back_y = 0
        if @enedatenum == 127
          ray_x = 200
          ray_y = 128
        else
          ray_x = 224
          ray_y = 142
        end
        color = Color.new(255,255,255,260)
    
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める3")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,5
        @ray_color = 0
        @eney = -160
        @chr_cutin_flag = false

      when 1..130
        shake_dot = 4
        shake_x,shake_y= pic_shake_cal shake_dot
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 116
        if @enedatenum == 127 || @enedatenum == 264
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(セル第１形態)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_カットイン_魔貫光殺砲(セルジュニア)") #ダメージ表示用
        end
        rect = Rect.new(0, 0, 648, 64)
        
        @back_window.contents.blt(-4+shake_x,146+shake_y,picture,rect)
        
        @back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 118
        Audio.se_stop if @battle_anime_frame == 130
        @tec_output_back = true if @battle_anime_frame == 130
        @output_anime_type = 1
         battle_anime_change 0,4
      when 131..220
        @chr_cutin = true
        @chr_cutin_flag = true
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-14
        @eney = STANDARD_CHAY    
        #@back_window.contents.fill_rect(0,0,640,378,color) if @battle_anime_frame >= 200-10
        
        if @battle_anime_frame == 160
          battle_anime_change 0,5
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")
          @effect_anime_pattern = 272
        end
      when 221
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @chr_cutin = true
        @chr_cutin_flag = true
        set_chr_display_out
        @tec_output_back_no = 0
        
        #@chr_cutin = true
      when 222..247
        ray_y = 134
        @effect_anime_pattern = 255
      when 248
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2532 #太陽拳(セル1)
        #back_x = 222
        #back_y = 60
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
        color = Color.new(255,255,255,260)
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          #@output_anime_type = 1
          #battle_anime_change 0,3
          @ray_color = 0
        when 1
          #@chr_cutin = true
          #@tec_output_back = false
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 2..90
          if @enedatenum == 127 || @enedatenum == 264
            picture = Cache.picture("Z3_必殺技_カットイン_太陽拳(セル第１形態)")
          elsif @enedatenum == 128 || @enedatenum == 268
            picture = Cache.picture("Z3_必殺技_カットイン_太陽拳(セル第２形態)")
          elsif @enedatenum == 129 || @enedatenum == 135 || @enedatenum == 269
            picture = Cache.picture("Z3_必殺技_カットイン_太陽拳(セル完全体)")
          else
            picture = Cache.picture("Z3_必殺技_カットイン_太陽拳(セル第１形態)")
          end
          rect = Rect.new(0, 64*0, 640, 64)
          sisinkizyun = 2
          akizyouge = 146
          purasuryou = 20
          kat_haitiiti = akizyouge
          if @battle_anime_frame <= sisinkizyun + purasuryou
            @enex += 32
            @back_window.contents.blt(-640+32*(@battle_anime_frame-sisinkizyun),kat_haitiiti,picture,rect)
          else
            if @battle_anime_frame >= sisinkizyun + purasuryou
              Audio.se_play("Audio/SE/" + "Z2 吹っ飛ぶ") if @battle_anime_frame == sisinkizyun + purasuryou +1
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
            end
          end
          
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 101
          set_chr_display_out
        when 111..151
          sisinkizyun = 101
          purasuryou = 10
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 152
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        case @battle_anime_frame
        
        when 0
          Audio.se_play("Audio/SE/" + "Z2 吹っ飛ぶ")    # 効果音を再生する
          set_chr_display_out
          
        when 1..41
          sisinkizyun = 1
          purasuryou = 10
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 42
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2537 #ビッグバンアタック(セル２)
        back_x = 248
        back_y = 88
        #ray_x = 338
        #ray_y = 156
        ray_x = -52
        ray_y = 208
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
        
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 2 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        Audio.se_stop if @battle_anime_frame == 129
        
        @eney = -160
        kienkizyunframe = 175
        kiptan = 0
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック(セル第２形態)")
          bezikat_x = 220
          bezikat_y = 112
          rect = Rect.new(0, 0, 232, 244)
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x -= 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x -= 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x -= 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x -= 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 140..230
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 140
          ray_x = 196
          ray_y = 250
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336

        ray_y = 112
        @effect_anime_pattern = 265

      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2544 #スーパーカメハメ波(セル)
        @ray_color = 3
        back_x = 164
        back_y = 112
        #ray_x = back_x +82
        #ray_y = back_y +60
        ray_x = 130
        ray_y = 0
      case @battle_anime_frame
      when 0 #初期化
      #  if @attackcourse == 0
      #    @output_anime_type = 0
      #    @chay = -120 #キャラ画面範囲外へ
      #  else
      #    @eney = -200 #キャラ画面範囲外へ
      #  end
      #  @tec_output_back = false
      #  @chr_cutin = false
      #  @chr_cutin_flag = false
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..100

          back_x = 248
          back_y = 88
          back_anime_pattern 201,back_x,back_y
          ray_x = 336
          ray_y = 154
          @effect_anime_pattern = 237
          
        #end
      when 101..170

        if @battle_anime_frame == 170
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
          @effect_anime_frame = 0
          @tec_output_back = false
          @chr_cutin = false
          @chr_cutin_flag = false
          @eney = -200 #キャラ画面範囲外へ
          ray_x = -100
          ray_y = -100
        else
          back_x = 248
          back_y = 88
          back_anime_pattern 201,back_x,back_y
          @effect_anime_pattern = 235
          ray_x = 336 - 8
          ray_y = 154 - 8
        end
      when 171..260
        #ray_y = 6
        @effect_anime_frame*RAY_SPEED
        back_x += (@battle_anime_frame-141)/2
        ray_x +=  (@battle_anime_frame-141)/2 - @effect_anime_frame*RAY_SPEED
        picture = Cache.picture("Z3_必殺技_超カメハメ波(セル完全体)")
        rect = Rect.new(0, 0,288,234)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        @effect_anime_pattern = 236
      when 261
        @chr_cutin = true
        @chr_cutin_flag = true
        @tec_output_back = true
        set_chr_display_out
        @effect_anime_type = 0
        @effect_anime_frame = 0
        @effect_anime_pattern = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
        #@chr_cutin_mirror_flag = true
        @tec_back_small = true if $btl_progress >= 2
      when 262
        #battle_anime_change 0,1
        #@effect_anime_pattern = 0
        #@effect_anime_frame = 0
        #@effect_anime_type = 0
        
      when 263..289
        #ここでエラーが発生する可能性がある
        
        @effect_anime_pattern = 48
      when 290
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2570 #痺れ液
      
      ray_x = 266
      ray_y = 108
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,1
        @ray_color = 0
      when 30
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波3")    # 効果音を再生する
      when 31..70
        battle_anime_change 0,2
        @effect_anime_pattern = 16
      when 71
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 75
        @tec_output_back_no = 0
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -120 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 76..102
        @effect_anime_pattern = 44
      when 103
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2573 #サイレントアサシン13
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..41
        @enex -= 24
      when 42
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 43..52
        @ax = 24
        @output_anime_type = 0
        #battle_anime_change 0,16
        
        battle_anime_change 0,16 if @battle_anime_frame == 51
      when 53..119
        ray_x = 266
        ray_y = 148
        @output_anime_type = 0
        case @battle_anime_frame
        
        when 53..56
          @ax = 16
        when 57
          @ax = 0
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @gx = -8
          battle_anime_change 1,16
          @effect_anime_pattern = 123
          
        when 59
          @gx = 8
          
        when 61
          @gx = 0
          battle_anime_change 1,0
          @effect_anime_pattern = 0
        when 65
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @gx = -8
          battle_anime_change 1,16
          @effect_anime_pattern = 132
          ray_x = 266
          ray_y = 148 + 32
        when 66
          ray_x = 266
          ray_y = 148 + 32
        when 67
          @gx = 8
          ray_x = 266
          ray_y = 148 + 32
        when 68..70
          ray_x = 266
          ray_y = 148 + 32
        when 71
          @effect_anime_pattern = 0
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          @gx = 16
          @enex -= 24
          #battle_anime_change 1,0
          battle_anime_change 0,0
        when 72..80
          @gx = -8
          @enex -= 8
        when 81
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          @gx = -16
          battle_anime_change 1,17
        when 100
        end
        
      when 120
        set_chr_display_out
        battle_anime_change 0,0
        @chax = STANDARD_ENEX + 192
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX + 192
        @eney = STANDARD_ENEY
      when 121..163
        @gx = -16
        battle_anime_change 1,16 if @battle_anime_frame == 148
        
        case @battle_anime_frame
        when 140..163
          @enex -= 24
          @enex = CENTER_ENEX - 32 if @enex <= CENTER_ENEX - 32
        end
        if @chax <= CENTER_CHAX #155
          @chax = CENTER_CHAX
          @gx = 0
        end
      when 164..222
        
        @ax = 0
        strfra = 164
        akifra = 3
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          battle_anime_change 0,0
        when strfra + akifra * 4
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          battle_anime_change 0,0
        when strfra + akifra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,16
          @ax = -8
          
        when strfra + akifra * 16
          @ax = 0
        when strfra + akifra * 17..strfra + akifra * 17 + 2
          @enex -= 24
        when strfra + akifra * 17 + 3 
          @ax = 0
          @output_anime_type = 0
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打")
          #@gx = -16
          #battle_anime_change 0,17
        end
        
      when 223
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2574 #デッドリィアサルト
      back_x = 248
      back_y = 88
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..41
        @enex -= 24
      when 42
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 43..55
        @ax = 24
        @output_anime_type = 0
        #battle_anime_change 0,16
        
        battle_anime_change 0,16 if @battle_anime_frame == 51
      when 56
        @ax = 0
      when 57..137
        
        @ax = 0
        strfra = 57
        akifra = 8
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          battle_anime_change 0,0
        when strfra + akifra * 4
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          battle_anime_change 0,0
        when strfra + akifra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          battle_anime_change 0,3
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == strfra + akifra * 10
          @gx = -16
          battle_anime_change 1,17
          @effect_anime_pattern = 0
        end
      when 138
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 171..219
        sframe = 171
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 怪光線") if @battle_anime_frame == sframe
        ray_x = 338
        ray_y = 136
        @output_anime_type = 1
        @effect_anime_pattern = 227
      when 220
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 225
        set_chr_display_out
        @chax =  640
        @gx = - 10
        battle_anime_change 1,16
      when 234..263
        @effect_anime_pattern = 228
        #@tec_output_back = false
        #back_anime_pattern 1
      when 264
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2575 #13号)SSデッドリィボンバー
      
      ray_x = 250
      ray_y = 100
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 4
      when 1..100
        @effect_anime_pattern = 16
        
        @effect_anime_frame -= 1 if @battle_anime_frame % 2 == 0
        
        if @effect_anime_type == 3
          @effect_anime_type = 2
        end
        
      when 101
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @effect_anime_pattern = 16
        battle_anime_change 0,3
      when 141
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 144
        @tec_back_small = true
        @tec_output_back_no = 0
      when 145
        

          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
      when 146..172
        sframe = 146
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(5*128, 0,128,128)
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
        
        case @battle_anime_frame
        when 163
          @gy -= 24
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        end
      when 173..180
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(5*128, 0,128,128)
        @back_window.contents.blt(224,STANDARD_CHAY - 16,picture,rect)
      when 181..189
        @tec_output_back_no = 1
        sframe = 181
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(5*128, 0,128,128)
        @back_window.contents.blt(224,STANDARD_CHAY - 16-24*(@battle_anime_frame-sframe),picture,rect)
      when 200
        @chax = CENTER_CHAX
        @chay = 480
      when 201..259
        sframe = 201
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        @gy = -24
        
        case @battle_anime_frame
        when 210..230
          picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
          rect = Rect.new(5*128, 0,128,128)
          @back_window.contents.blt(224,480-24*(@battle_anime_frame-(sframe + 9)),picture,rect)
        end
      when 260
        set_chr_display_out
        @tec_output_back_no = 0
        @chax = 640
        @chay = STANDARD_CHAY
        battle_anime_change 1,0
        @gx = -16
        @gy = 0
        
      when 261..283
        sframe = 261
        
        case @battle_anime_frame
        when sframe +10..sframe + 23
          picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
          rect = Rect.new(5*128, 0,128,128)
          @back_window.contents.blt(640-32*(@battle_anime_frame-(sframe+10)),STANDARD_CHAY - 16,picture,rect)
        end
        
        battle_anime_change 1,16 if @battle_anime_frame == sframe + 19
      when 284
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2579 #合体13号)SSデッドリィボンバー
      
      ray_x = 250
      ray_y = 100
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 4
      when 1..100
        @effect_anime_pattern = 16
        
        @effect_anime_frame -= 1 if @battle_anime_frame % 2 == 0
        
        if @effect_anime_type == 3
          @effect_anime_type = 2
        end
        
      when 101
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
        @effect_anime_pattern = 16
        battle_anime_change 0,3
      when 161
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 164
        @tec_back_small = true
        @tec_output_back_no = 0
      when 165
        
        set_chr_display_out
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
      when 176..198
        sframe = 176
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(5*128, 0,128,128)
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 199
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2580 #合体13号)フルパワーSSデッドリィボンバー
      back_x = 164
        back_y = 112
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..41
        @enex -= 24
      when 42
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 43..55
        @ax = 24
        @output_anime_type = 0
        #battle_anime_change 0,16
        
        battle_anime_change 0,16 if @battle_anime_frame == 51
      when 56
        @ax = 0
        battle_anime_change 0,1
        @gx = -16
        battle_anime_change 1,17
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 57..70
      when 71..99
        
        sframe = 71
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")  if @battle_anime_frame == sframe
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(合体13号)")
        rect = Rect.new(0*140, 0,140,96)
        @back_window.contents.blt(TEC_CENTER_CHAX-32*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 100
        @chax = STANDARD_ENEX
        @chay = STANDARD_CHAY
      when 109..118
        sframe = 109
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(合体13号)")
        rect = Rect.new(0*140, 0,140,96)
        @back_window.contents.blt(STANDARD_ENEX+24-32*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 119..206
        sframe = 119
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(合体13号)")
        @gx = -2
        n = 0
        
        raytyouseiy = 0
        strfra = 119
        akifra = 8
        ray_x = 316 -2*(@battle_anime_frame-sframe)
        ray_y = 160
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame >= strfra + akifra * 2 && @battle_anime_frame <= strfra + akifra * 9
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          #Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          n = 0
        when strfra + akifra * 2..strfra + akifra * 3-1
          n = 1
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          n = 0
        when strfra + akifra * 4..strfra + akifra * 5-1
          n = 2
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          n = 0
        when strfra + akifra * 6..strfra + akifra * 7-1
          n = 1
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          n = 0
        when strfra + akifra * 8..strfra + akifra * 9-1
          n = 2
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          n = 0
        when strfra + akifra * 10..strfra + akifra * 11-1
          n = 1
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 10
          @gx = -16
          battle_anime_change 1,17
          @effect_anime_pattern = 0
        when strfra + akifra * 11
          n = 0
          p STANDARD_ENEX+24-288-2*(@battle_anime_frame-sframe)
        else
          
        end
        
        rect = Rect.new(n*140, 0,140,96)
        @back_window.contents.blt(STANDARD_ENEX+24-288-2*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)

      when 207..229
        sframe = 207
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(合体13号)")
        rect = Rect.new(1*140, 0,140,96)
        @back_window.contents.blt(162,STANDARD_CHAY - 16,picture,rect)
      when 230
        @eney = STANDARD_ENEY
        @enex = 162+16
        battle_anime_change 0,0
      when 231..279
        sframe = 231
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        @eney -= 16
        battle_anime_change 0,16
        @tec_output_back_no = 1 if @battle_anime_frame == 279
      when 280
        @enex = TEC_CENTER_CHAX
        @eney = STANDARD_ENEY
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 4
      when 281..380
        ray_x = 250
        ray_y = 100
        @effect_anime_pattern = 16
        
        @effect_anime_frame -= 1 if @battle_anime_frame % 2 == 0
        
        if @effect_anime_type == 3
          @effect_anime_type = 2
        end
        if @battle_anime_frame == 380
          @effect_anime_type = 0
          @effect_anime_frame = 0
          @effect_anime_pattern = 0
          @chr_cutin = false
          @tec_output_back = false
        end
      when 381..520
        sframe = 381
        @eney = -200
        ray_x = -400 - (@battle_anime_frame-sframe) * 6
        ray_y = 0
        back_x = 240
        back_y = 90
        
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        #@effect_anime_frame*RAY_SPEED
        #back_x += (@battle_anime_frame-sframe)/2
        #ray_x +=  (@battle_anime_frame-sframe)/2 - @effect_anime_frame*RAY_SPEED
        picture = Cache.picture("Z3_必殺技_フルパワーSSデッドリィボンバー(合体13号)")
        rect = Rect.new(0, 0,312,192)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        #@effect_anime_pattern = 236
        picture = Cache.picture("Z2_戦闘_必殺技_デスボール(極大玉)_反転")
        rect = Rect.new(900-640, 78,640,356)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      when 521
        @gx = 0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 524
        @tec_back_small = true
        @tec_output_back_no = 0
        battle_anime_change 1,0
      when 525
        @chr_cutin = true
        @tec_output_back = true
        set_chr_display_out
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
      when 536..558
        sframe = 536
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(赤)")
        rect = Rect.new(5*128, 0,128,128)
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 559
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2583 #14号)アンドロイドチャージ14
      back_x = 164
        back_y = 112
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..41
        @enex -= 24
      when 42
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 43..55
        @ax = 24
        @output_anime_type = 0
        #battle_anime_change 0,16
        
        battle_anime_change 0,16 if @battle_anime_frame == 51
      when 56
        @ax = 0
        battle_anime_change 0,1
        @gx = -16
        battle_anime_change 1,17
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 57..70
      when 71..99
        
        sframe = 71
        @eney = -200
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")  if @battle_anime_frame == sframe
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(14号)")
        rect = Rect.new(0*140, 0,140,96)
        @back_window.contents.blt(TEC_CENTER_CHAX-32*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 100
        set_chr_display_out
        @chax = STANDARD_ENEX
        @chay = STANDARD_CHAY
      when 109..118
        sframe = 109
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(14号)")
        rect = Rect.new(0*140, 0,140,96)
        @back_window.contents.blt(STANDARD_ENEX+24-32*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 119..159
        sframe = 119
        picture = Cache.picture("Z3_戦闘_必殺技_突進連打(14号)")
        @gx = -2
        n = 0
        
        raytyouseiy = 0
        strfra = 119
        akifra = 8
        ray_x = 316 -2*(@battle_anime_frame-sframe)
        ray_y = 160
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame >= strfra + akifra * 2 && @battle_anime_frame <= strfra + akifra * 9
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          #Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          n = 0
        when strfra + akifra * 2..strfra + akifra * 3-1
          n = 1
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          n = 0
        when strfra + akifra * 4..strfra + akifra * 5-1
          n = 2
          Audio.se_play("Audio/SE/" + "ZG 打撃5") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          n = 0
          @effect_anime_pattern = 0
        end
       
        rect = Rect.new(n*140, 0,140,96)
        @back_window.contents.blt(STANDARD_ENEX+24-288-2*(@battle_anime_frame-sframe),STANDARD_CHAY - 16,picture,rect)
      when 160..275
        sframe = 160
        akifra = 8
        case @battle_anime_frame
        when sframe
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          @enex = CENTER_ENEX-72
          @eney = STANDARD_CHAY
          @gx = 0
          @output_anime_type = 1
          battle_anime_change 0,6

        when sframe + akifra * 2,sframe + akifra * 6
          Audio.se_play("Audio/SE/" + "Z1 強打")
          @output_anime_type = 1
          battle_anime_change 0,5
          @gx = -8
        when sframe + akifra * 2 + 2,sframe + akifra * 6 + 2
          @gx = 8
        when sframe + akifra * 2 + 4,sframe + akifra * 6 + 4
          @gx = 0
        when sframe + akifra * 4
          @output_anime_type = 1
          battle_anime_change 0,6

        when sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          @enex = CENTER_ENEX-48
          Audio.se_play("Audio/SE/" + "ZG 打撃6")
          @output_anime_type = 1
          battle_anime_change 0,2
          @gx = -8
        when sframe + akifra * 8 + 2,sframe + akifra * 10 + 2,sframe + akifra * 12 + 2
          @gx = 8
        when sframe + akifra * 8 + 4,sframe + akifra * 10 + 4,sframe + akifra * 12 + 4
          @gx = 0 
        when sframe + akifra * 9,sframe + akifra * 11,sframe + akifra * 13
          Audio.se_play("Audio/SE/" + "ZG 打撃6")
          @output_anime_type = 1
          battle_anime_change 0,3
          @gx = -8
        when sframe + akifra * 9 + 2,sframe + akifra * 11 + 2,sframe + akifra * 13 + 2
          @gx = 8
        when sframe + akifra * 9 + 4,sframe + akifra * 11 + 4,sframe + akifra * 13 + 4
          @gx = 0
        when sframe + akifra * 14
          @enex = CENTER_ENEX-48
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          @output_anime_type = 1
          battle_anime_change 0,2
          #@gx = -16
        end


      when 276
        @tec_kyouda_se = true
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2586 #15号)アンドロイドストライク15
      back_x = 164
        back_y = 112
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..41
        @enex -= 24
      when 42
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 43..55
        @ax = 24
        #battle_anime_change 0,16

      when 56
        @ax = 0
        @output_anime_type = 1
        battle_anime_change 0,2
        @gx = -16
        battle_anime_change 1,17
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
      when 57..70
      when 71..99
        @output_anime_type = 1
        sframe = 71
        @enex -= 32
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        
      when 100
        set_chr_display_out
        @chax = STANDARD_ENEX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX + 56
        @eney = STANDARD_ENEY
      when 109..118
        sframe = 109
        @enex -= 32
        @ax = 0
        battle_anime_change 0,0 if @battle_anime_frame == sframe + 9
        battle_anime_change 1,16 if @battle_anime_frame == sframe + 9
      when 119..170
        sframe = 119
        akifra = 8
        case @battle_anime_frame

        when sframe + akifra * 0 ,sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @output_anime_type = 1
          battle_anime_change 0,3
          @gx = -8
        when sframe + akifra * 0 + 2,sframe + akifra * 2 + 2,sframe + akifra * 4 + 2,sframe + akifra * 6 + 2
          @gx = 8
        when sframe + akifra * 0 + 4,sframe + akifra * 2 + 4,sframe + akifra * 4 + 4,sframe + akifra * 6 + 4
          @gx = 0 
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @output_anime_type = 1
          battle_anime_change 0,5
          @gx = -8
        when sframe + akifra * 1 + 2,sframe + akifra * 3 + 2,sframe + akifra * 5 + 2,sframe + akifra * 7 + 2
          @gx = 8
        when sframe + akifra * 1 + 4,sframe + akifra * 3 + 4,sframe + akifra * 5 + 4,sframe + akifra * 7 + 4
          @gx = 0
        end

      when 171..219
        sframe = 171
        @gx = 0
        case @battle_anime_frame
        when sframe,sframe + 1
          #@enex -= 8
          @output_anime_type = 0
          battle_anime_change 0,16
          @eney -= 16
          @enex -= 8
        when sframe + 10
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 強打")
          @eney += 12
          @enex -= 12
          @tec_output_back_no = 2
        when sframe + 11..sframe + 100
          @eney += 12
          @enex -= 12
          @chay += 12
          @chax -= 12
          battle_anime_change 1,17
        end
      when 220
        @chax += 720
        @chay -= 720
        @enex += 720
        @eney -= 720
      when 221..242
        
        sframe = 221
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        case @battle_anime_frame
        when sframe..sframe + 100
          @eney += 12
          @enex -= 12
          @chay += 12
          @chax -= 12
          #battle_anime_change 1,17
        end
      when 243..250
        @tec_output_back_no = 0
        @output_anime_type = 0
        battle_anime_change 0,16
        battle_anime_change 1,16
        
        sframe = 243
        
        case @battle_anime_frame
        when sframe
          @eney -= 4
          @enex += 4
        when sframe + 1
          @enex += 4
        when sframe + 2..sframe + 3
          @eney += 4
          @enex += 4
        when sframe + 4..sframe + 5
          @eney += 4
          
        end
        
      when 251..302
        sframe = 251
        akifra = 8
        case @battle_anime_frame

        when sframe + akifra * 0 ,sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @output_anime_type = 1
          battle_anime_change 0,3
          @gx = -8
        when sframe + akifra * 0 + 2,sframe + akifra * 2 + 2,sframe + akifra * 4 + 2,sframe + akifra * 6 + 2
          @gx = 8
        when sframe + akifra * 0 + 4,sframe + akifra * 2 + 4,sframe + akifra * 4 + 4,sframe + akifra * 6 + 4
          @gx = 0 
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          @output_anime_type = 1
          battle_anime_change 0,5
          @gx = -8
        when sframe + akifra * 1 + 2,sframe + akifra * 3 + 2,sframe + akifra * 5 + 2,sframe + akifra * 7 + 2
          @gx = 8
        when sframe + akifra * 1 + 4,sframe + akifra * 3 + 4,sframe + akifra * 5 + 4,sframe + akifra * 7 + 4
          @gx = 0
        end
      when 303..323
        @enex += 8
        @gx = 0
        @output_anime_type = 0
        battle_anime_change 0,16
      when 324..334
        sframe = 324
        case @battle_anime_frame

        when sframe..sframe + 4
          @enex -= 16
          #Audio.se_play("Audio/SE/" + "Z1 高速移動") if @battle_anime_frame == sframe + 2
        when sframe + 5..sframe + 9
          @enex -= 16
          @output_anime_type = 1
          battle_anime_change 0,3
        end
      when 335
        @tec_kyouda_se = true
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2595 #ボーフル)ギャラテクティックタイラント
        back_x = 248
        back_y = 88
        ray_x = 214
        ray_y = 120
        @ray_color = 1
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,5
      when 1..89
        back_anime_pattern 201,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        battle_anime_change 0,4
      when 91..119
        @ax = 16
      
      when 126
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 127..133
        @ax = 16
      when 134..140
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,16
      when 141..147
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,1
      when 148..150
        if @battle_anime_frame == 148
          Audio.se_play("Audio/SE/" + "Z1 強打")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
        @ax = 0
        @ay = 0
        @gx = -16
        battle_anime_change 1,16
        @effect_anime_pattern = 121
      when 151..153
        @gx = 16
      when 154
        @gx = 0
        @output_anime_type = 1
        battle_anime_change 0,3
        @effect_anime_pattern = 0
        #Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "ZG 打撃4")    # 効果音を再生する
      when 155..164
        battle_anime_change 0,3
        @gx = 8
      when 165..174
        battle_anime_change 0,6
        @gx = -8
      when 175..200
        battle_anime_change 0,3
        @gx = -16
        
        if @battle_anime_frame == 175
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ")    # 効果音を再生する
        end
        battle_anime_change 1,17
      when 201..230
        if @battle_anime_frame == 201
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        end
        @ax = 24
        battle_anime_change 0,4
      when 249
        @ax = 0
        set_chr_display_out
        @chax = (STANDARD_ENEX + 96)
        @enex = (STANDARD_ENEX + 96)
        @eney = STANDARD_ENEY
        @gx = -16
      when 260..276
        @ax = 24
        
        if @battle_anime_frame == 276
          @ax = 0
          @gx = 0
          battle_anime_change 1,16
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "ZG 打撃5")    # 効果音を再生する
        end
      when 300..390
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 300
        @effect_anime_pattern = 252
        ray_x = 336 - 88
        ray_y = 154 - 32
      when 391
        @gx  = 0
        #@chax = CENTER_CHAX
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2596 #ギャラクティックバスター
        back_x = 248
        back_y = 88
        #ray_x = 338
        #ray_y = 156
        ray_x = -52
        ray_y = 208
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        #@ray_color = 3
        @ray_color = 1
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @tec_output_back_no = 2 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        @chr_cutin = false if @battle_anime_frame == 128
      when 129..300
        Audio.se_stop if @battle_anime_frame == 129
        
        @eney = -160
        kienkizyunframe = 175
        kiptan = 0
          picture = Cache.picture("Z3_必殺技_ギャラクティックバスター(ボージャック)")
          bezikat_x = 140
          bezikat_y = 62
          rect = Rect.new(0, 0, 280, 260)
        if @battle_anime_frame == 231 || @battle_anime_frame == 232 || @battle_anime_frame == 233
          bezikat_x += 2
          bezikat_y -= 2
        elsif @battle_anime_frame == 232
          bezikat_x += 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 233
          bezikat_x += 6
          bezikat_y -= 6
        elsif @battle_anime_frame == 234
          bezikat_x += 4
          bezikat_y -= 4
        elsif @battle_anime_frame == 235
          bezikat_x += 2
          bezikat_y -= 2
        end
        @back_window.contents.blt(bezikat_x,bezikat_y,picture,rect)
        
        case @battle_anime_frame
        
        when 140..230
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 140
          ray_x = 196
          ray_y = 250
          @effect_anime_pattern = 235
        when 231
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")
          Audio.se_play("Audio/SE/" + "Z1 ゴー")
          @ray_anime_type = 0
          @ray_anime_frame = 0
          @effect_anime_pattern = 264
        end

      when 301
        #@tec_output_back = false
        @chr_cutin = true
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @tec_output_back_no = 0
        set_chr_display_out
        #Audio.se_play("Audio/SE/" + "Z1 ザー")
      when 311..336

        ray_y = 112
        @effect_anime_pattern = 265

      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2601 #ゴクア)ギャラクティックアタック
        back_x = 248
        back_y = 88

        ray_x = -52
        ray_y = 208
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        #@ray_color = 3
        @ray_color = 3
      when 1..128
        back_anime_pattern 201,back_x,back_y
        #@tec_output_back_no = 2 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        #@chr_cutin = false if @battle_anime_frame == 128
      when 129
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,0
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 131..171
        
        @enex -= 24
      when 172
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 173..185
        @ax = 24
        #battle_anime_change 0,16

      when 186
        @ax = 0
        @output_anime_type = 0
        battle_anime_change 0,1
        #@gx = -16
        battle_anime_change 1,16
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 打撃")
      when 190
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 打撃")
      when 194
        battle_anime_change 0,3
        Audio.se_play("Audio/SE/" + "Z1 打撃")
      when 198
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "Z1 打撃")
      when 206
        @output_anime_type = 1
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "ZG 打撃1")
        @gx = 8
        #@enex -= 16
      when 208..216
        @output_anime_type = 0
        battle_anime_change 0,16
        @enex += 2
      when 217
        @ax = 0
        @enex -= 48
        @gx = -16
        @output_anime_type = 1
        battle_anime_change 0,2
        Audio.se_play("Audio/SE/" + "ZG 打撃4")
        battle_anime_change 1,17
      when 250..269
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 250
        @output_anime_type = 0
        battle_anime_change 0,16
        @eney -= 24
      when 280
        @gx = 0
        @tec_output_back_no = 1
        set_chr_display_out
        #@chax = STANDARD_ENEX
        #@chay = STANDARD_CHAY
        @enex = CENTER_ENEX - 16
        @eney = -200
        @output_anime_type = 1
        battle_anime_change 0,3
        
      when 281..320
        @eney += 16
        Audio.se_play("Audio/SE/" + "DB3 刀") if @battle_anime_frame == 295
        battle_anime_change 0,4 if @battle_anime_frame == 295
          
      when 321
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2605 #ザンギャ)スカイザッパー
      back_x = 264
      back_y = 88

      ray_x = 270
      ray_y = 100
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        #@ray_color = 3
        @ray_color = 3
      when 1..128
        back_anime_pattern 201,back_x,back_y
        #@tec_output_back_no = 2 if @battle_anime_frame == 128
        #@tec_back_color = 0 if @battle_anime_frame == 128
        #@chr_cutin = false if @battle_anime_frame == 128
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -120
      when 130..168
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@enex + 44,144,picture,rect)
        end
      when 169
        #set_chr_display_out
        #@tec_output_back = false
        #Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
      when 170..208
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@enex + 48,144,picture,rect)
        end
      when 209
        @enex = CENTER_ENEX - 32
        @eney = STANDARD_ENEY
        
      when 218..310
        sframe = 218
        akiframe = 8
        se_on = false
        @output_anime_type = 0
        battle_anime_change 1,16
        case @battle_anime_frame
        when sframe + 0 * akiframe,sframe + 4 * akiframe,sframe + 8 * akiframe
          battle_anime_change 0,3
          se_on = true
          @gx = -8
        when sframe + 1 * akiframe,sframe + 5 * akiframe,sframe + 9 * akiframe
          battle_anime_change 0,2
          se_on = true
          @gx = -8
        when sframe + 2 * akiframe,sframe + 6 * akiframe,sframe + 10 * akiframe
          battle_anime_change 0,4
          se_on = true
          @gx = -8
        when sframe + 3 * akiframe,sframe + 7 * akiframe,sframe + 11 * akiframe
          battle_anime_change 0,1
          se_on = true
          @gx = -8
        when sframe + 0 * akiframe + 2,sframe + 1 * akiframe + 2,sframe + 2 * akiframe + 2,sframe + 3 * akiframe + 2,sframe + 4 * akiframe + 2,sframe + 5 * akiframe + 2,sframe + 6 * akiframe + 2,sframe + 7 * akiframe + 2,sframe + 8 * akiframe + 2,sframe + 9 * akiframe + 2,sframe + 10 * akiframe + 2,sframe + 11 * akiframe + 2
          @gx = 8
        when sframe + 0 * akiframe + 4,sframe + 1 * akiframe + 4,sframe + 2 * akiframe + 4,sframe + 3 * akiframe + 4,sframe + 4 * akiframe + 4,sframe + 5 * akiframe + 4,sframe + 6 * akiframe + 4,sframe + 7 * akiframe + 4,sframe + 8 * akiframe + 4,sframe + 9 * akiframe + 4,sframe + 10 * akiframe + 4,sframe + 11 * akiframe + 4
          @gx = 0
          
        end
        
        Audio.se_play("Audio/SE/" + "Z1 打撃") if se_on == true
      when 311
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        battle_anime_change 0,16
        @eney -= 8
        @enex += 16
      when 312..321
        @eney -= 8
        @enex += 16
      when 332..336
        @eney += 16
        @enex -= 32
        
        if @battle_anime_frame == 333
          Audio.se_play("Audio/SE/" + "Z1 強打")
          battle_anime_change 0,4
        elsif @battle_anime_frame == 336
          @gx = -16
          battle_anime_change 1,17
        end
      when 360
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @output_anime_type = 1
        battle_anime_change 0,3
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
        @effect_anime_pattern = 231
      when 399
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 409
        @gx = 0
        battle_anime_change 1,0
        set_chr_display_out
      when 410..436
        @effect_anime_pattern = 232
      when 437
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2606 #ザンギャビドーブージン単体超能力
      back_x = 228
      back_y = 88
      ray_x = 325
      ray_y = 138

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,4
        battle_anime_change 0,2 if @enedatenum == 147 #ブージン
        @enex += 8
        @ray_color = 0
      when 1..108
        #back_anime_pattern 201,back_x,back_y
      when 109
        Audio.se_stop
        #battle_anime_change 0,3
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        set_chr_display_out
        #@tec_output_back = false
        #@chr_cutin_flag = false
        @tec_output_back_no = 1
      when 120..146
        #back_anime_pattern 9
        
      when 147
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2612 #ビドー)ギャラクティッククラッシュ
      back_x = 248
      back_y = 88

      ray_x = 128
      ray_y = 92
      case @battle_anime_frame
      

      when 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -120
      when 1..38
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@enex + 24,144,picture,rect)
        end
      when 39
        #set_chr_display_out
        #@tec_output_back = false
        #Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
      when 40..78
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@enex + 40,144,picture,rect)
        end
      when 79
        @enex = CENTER_ENEX - 20
        @eney = STANDARD_ENEY
      when 100
        @output_anime_type = 1
        battle_anime_change 0,5
        Audio.se_play("Audio/SE/" + "Z1 強打")
        battle_anime_change 1,16
        @enex -= 16
        @gy = -16
      when 101..198
        @gy = 0
        
        if @battle_anime_frame % 4 == 0
          @gx = 4
        elsif @battle_anime_frame % 2 == 0
          @gx = -4
        end
      when 199
        @gx = 0
        @gy = 2
        @enex += 16
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        @output_anime_type = 0
        battle_anime_change 0,16
      when 200..212
        @gy = 0 if @battle_anime_frame == 206
        @enex += 16
      when 232..238
        @enex -= 32
        
        if @battle_anime_frame == 235
          @output_anime_type = 1
          battle_anime_change 0,6
        end
        if @battle_anime_frame == 238
          Audio.se_play("Audio/SE/" + "ZG 打撃4")
          @gx = -24
          battle_anime_change 1,17
        end
      when 270
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 3
      when 271..398
        back_anime_pattern 201,back_x,back_y
        @effect_anime_pattern = 235
        ray_x = 306
        ray_y = 158
      when 399
        Audio.se_stop
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        battle_anime_change 0,3
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")
      when 400..438
        @effect_anime_pattern = 239
        
      when 439
        battle_anime_change 1,0
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 449
        @gx = 0
        battle_anime_change 1,0
        set_chr_display_out
      when 450..476
        @effect_anime_pattern = 240
      when 477
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2618 #ブージン)合体超能力
      back_x = 248
      back_y = 88

      ray_x = 128
      ray_y = 92
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
      when 1..26
        sframe = 1
        picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe)-16,STANDARD_ENEY - 60,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_敵_ビドー")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-16*(@battle_anime_frame-sframe),STANDARD_ENEY + 60,picture,rect)
      when 27..59
        picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416-16,STANDARD_ENEY - 60,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_敵_ビドー")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416,STANDARD_ENEY + 60,picture,rect)
      when 60
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        #@eney = -120
      when 61..99
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(640-416 + 24,STANDARD_ENEY - 40,picture,rect)
          @back_window.contents.blt(640-416 + 24,STANDARD_ENEY + 76,picture,rect)
        end
      when 121..179
        sframe = 121
        Audio.se_play("Audio/SE/" + "Z3 バリア") if sframe == @battle_anime_frame
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if sframe == @battle_anime_frame || sframe + 1 == @battle_anime_frame
        @output_anime_type = 1
        battle_anime_change 0,4
      when 180
        #set_chr_display_out
        #@tec_output_back = false
        #Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @eney = -200
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        set_chr_display_out
      when 190..219
        sframe = 190
        Audio.se_play("Audio/SE/" + "Z3 バリア") if sframe == @battle_anime_frame
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if sframe == @battle_anime_frame || sframe + 1 == @battle_anime_frame
        if @battle_anime_frame % 4 == 0
          @gx = 4
        elsif @battle_anime_frame % 2 == 0
          @gx = -4
        end
      when 220..258
        sframe = 220
        Audio.se_play("Audio/SE/" + "Z1 高速移動") if sframe == @battle_anime_frame
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          
          @back_window.contents.blt(640-416 + 92,STANDARD_ENEY - 20,picture,rect)
          @back_window.contents.blt(640-416 + 92,STANDARD_ENEY + 56,picture,rect)
        end
        if @battle_anime_frame % 4 == 0
          @gx = 4
        elsif @battle_anime_frame % 2 == 0
          @gx = -4
        end
      when 259..290
        picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-32,STANDARD_ENEY - 40,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_敵_ビドー")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        if @battle_anime_frame % 4 == 0
          @gx = 4
        elsif @battle_anime_frame % 2 == 0
          @gx = -4
        end
      when 291..398
        sframe = 291
        tameframe = 12
        idoux = 24
        idouy = 12
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        

        when sframe + tameframe * 1 - 12 , sframe + tameframe * 3 - 12 , sframe + tameframe * 5 - 12 , sframe + tameframe * 7 - 12 , sframe + tameframe * 9 - 12
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*1,STANDARD_ENEY - 40-idouy*1,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 0*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 1 - 11 , sframe + tameframe * 3 - 11 , sframe + tameframe * 5 - 11 , sframe + tameframe * 7 - 11 , sframe + tameframe * 9 - 11
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*2,STANDARD_ENEY - 40-idouy*2,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 0*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 1 - 10 , sframe + tameframe * 3 - 10 , sframe + tameframe * 5 - 10 , sframe + tameframe * 7 - 10 , sframe + tameframe * 9 - 10
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*3,STANDARD_ENEY - 40-idouy*3,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 0*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 1 - 9 , sframe + tameframe * 3 - 9 , sframe + tameframe * 5 - 9 , sframe + tameframe * 7 - 9 , sframe + tameframe * 9 - 9
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 0*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 1 - 8 , sframe + tameframe * 3 - 8 , sframe + tameframe * 5 - 8 , sframe + tameframe * 7 - 8 , sframe + tameframe * 9 - 8
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*1,STANDARD_ENEY + 40+idouy*1,picture,rect)
        when sframe + tameframe * 1 - 7 , sframe + tameframe * 3 - 7 , sframe + tameframe * 5 - 7 , sframe + tameframe * 7 - 7 , sframe + tameframe * 9 - 7
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*2,STANDARD_ENEY + 40+idouy*2,picture,rect)
        when sframe + tameframe * 1 - 6 , sframe + tameframe * 3 - 6 , sframe + tameframe * 5 - 6 , sframe + tameframe * 7 - 6 , sframe + tameframe * 9 - 6
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*2,STANDARD_ENEY - 40-idouy*2,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*3,STANDARD_ENEY + 40+idouy*3,picture,rect)
        when sframe + tameframe * 1 - 5 , sframe + tameframe * 3 - 5 , sframe + tameframe * 5 - 5 , sframe + tameframe * 7 - 5 , sframe + tameframe * 9 - 5
          Audio.se_play("Audio/SE/" + "ZG 打撃1")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 2*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 1 - 4 , sframe + tameframe * 3 - 4 , sframe + tameframe * 5 - 4 , sframe + tameframe * 7 - 4 , sframe + tameframe * 9 - 4
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 2*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 1 - 3 , sframe + tameframe * 3 - 3 , sframe + tameframe * 5 - 3 , sframe + tameframe * 7 - 3 , sframe + tameframe * 9 - 3
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 2*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 1 - 2 , sframe + tameframe * 3 - 2 , sframe + tameframe * 5 - 2 , sframe + tameframe * 7 - 2 , sframe + tameframe * 9 - 2
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 2*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*2,STANDARD_ENEY + 40+idouy*2,picture,rect)
        when sframe + tameframe * 1 - 1 , sframe + tameframe * 3 - 1 , sframe + tameframe * 5 - 1 , sframe + tameframe * 7 - 1 , sframe + tameframe * 9 - 1
          Audio.se_play("Audio/SE/" + "ZG 打撃5")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 2*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*0,STANDARD_ENEY + 40+idouy*0,picture,rect)
        when sframe + tameframe * 2 - 12 , sframe + tameframe * 4 - 12 , sframe + tameframe * 6 - 12 , sframe + tameframe * 8 - 12
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*1,STANDARD_ENEY - 40-idouy*1,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 2 - 11 , sframe + tameframe * 4 - 11 , sframe + tameframe * 6 - 11 , sframe + tameframe * 8 - 11
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*2,STANDARD_ENEY - 40-idouy*2,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 2 - 10 , sframe + tameframe * 4 - 10 , sframe + tameframe * 6 - 10 , sframe + tameframe * 8 - 10
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*3,STANDARD_ENEY - 40-idouy*3,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 2 - 9 , sframe + tameframe * 4 - 9 , sframe + tameframe * 6 - 9 , sframe + tameframe * 8 - 9
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)
        when sframe + tameframe * 2 - 8 , sframe + tameframe * 4 - 8 , sframe + tameframe * 6 - 8 , sframe + tameframe * 8 - 8
          #Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*1,STANDARD_ENEY + 40+idouy*1,picture,rect)
        when sframe + tameframe * 2 - 7 , sframe + tameframe * 4 - 7 , sframe + tameframe * 6 - 7 , sframe + tameframe * 8 - 7
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*4,STANDARD_ENEY - 40-idouy*4,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*2,STANDARD_ENEY + 40+idouy*2,picture,rect)
        when sframe + tameframe * 2 - 6 , sframe + tameframe * 4 - 6 , sframe + tameframe * 6 - 6 , sframe + tameframe * 8 - 6
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*2,STANDARD_ENEY - 40-idouy*2,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*3,STANDARD_ENEY + 40+idouy*3,picture,rect)
        when sframe + tameframe * 2 - 5 , sframe + tameframe * 4 - 5 , sframe + tameframe * 6 - 5 , sframe + tameframe * 8 - 5
          Audio.se_play("Audio/SE/" + "Z1 打撃")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 4*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 2 - 4 , sframe + tameframe * 4 - 4 , sframe + tameframe * 6 - 4 , sframe + tameframe * 8 - 4
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 4*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 2 - 3 , sframe + tameframe * 4 - 3 , sframe + tameframe * 6 - 3 , sframe + tameframe * 8 - 3
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 4*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*4,STANDARD_ENEY + 40+idouy*4,picture,rect)
        when sframe + tameframe * 2 - 2 , sframe + tameframe * 4 - 2 , sframe + tameframe * 6 - 2 , sframe + tameframe * 8 - 2
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 4*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 16*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*2,STANDARD_ENEY + 40+idouy*2,picture,rect)
        when sframe + tameframe * 2 - 1 , sframe + tameframe * 4 - 1 , sframe + tameframe * 6 - 1 , sframe + tameframe * 8 - 1
          Audio.se_play("Audio/SE/" + "ZG 打撃3")
          picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
          rect = Rect.new(0, 4*96,96,96)
          @back_window.contents.blt(640-416+96-32+idoux*0,STANDARD_ENEY - 40-idouy*0,picture,rect)
          picture = Cache.picture("Z3_戦闘_敵_ビドー")
          rect = Rect.new(0, 1*96,96,96)
          @back_window.contents.blt(640-416+96-16+idoux*0,STANDARD_ENEY + 40+idouy*0,picture,rect)

        end

        if @battle_anime_frame % 4 == 0
          @gx = 4
        elsif @battle_anime_frame % 2 == 0
          @gx = -4
        end
      when 399
        #set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        @gx = 0
        picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-32,STANDARD_ENEY - 40,picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_ビドー")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40,picture,rect)

        @output_anime_type = 0
        battle_anime_change 0,16
        #@ray_color = 3
        @enex = 640#CENTER_ENEX
        @eney = STANDARD_ENEY - 6
      when 400..415
        sframe = 400
        @enex -= 24
        
        if @battle_anime_frame == 407
          @output_anime_type = 1
          battle_anime_change 0,3
        end
        picture = Cache.picture("Z3_戦闘_敵_ザンギャ")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-32,STANDARD_ENEY - 40-2*(@battle_anime_frame-sframe),picture,rect)
        picture = Cache.picture("Z3_戦闘_敵_ビドー")
        rect = Rect.new(0, 0*96,96,96)
        @back_window.contents.blt(640-416+96-16,STANDARD_ENEY + 40+2*(@battle_anime_frame-sframe),picture,rect)
      when 416
        @tec_kyouda_se = true
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2624 #ブロ超)イレイザーキャノン
        back_x = 258
        back_y = 88
        ray_x = 348
        ray_y = 134
        
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..39
        @enex -= 24
      when 40
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX + 12
        @eney = STANDARD_ENEY
      when 41..54
        @ax = 24
        #battle_anime_change 0,16

      when 55
        @ax = 0
        battle_anime_change 0,5
        @chay -= 16
        battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 強打")
      when 56..120
        
        if @battle_anime_frame % 4 == 0
          @chax += 4
        elsif @battle_anime_frame % 2 == 0
          @chax -= 4
        end
      when 121..140
        sframe = 121
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        
        when sframe
          battle_anime_change 0,0
          @eney -= 16
          @chay +=2
        when sframe + 1
          @eney -= 16
          @chay +=2
        when sframe + 2
          @eney -= 16
          @chay +=2
        when sframe + 3
          @effect_anime_pattern = 0
          @enex += 16
          @eney -= 16
          @chay +=2
        when sframe + 3
          @enex += 16
          @eney -= 8
          @chay +=2
        when sframe + 4
          @enex += 16
          @eney -= 8
          @chay +=2
        when sframe + 5
          @enex += 24
          @chay +=2
        when sframe + 6
          @enex += 24
          @chay +=2
        when sframe + 7
          @enex += 16
          @eney += 8
        when sframe + 8
          @enex += 16
          @eney += 8
        when sframe + 9
          @enex += 16
          @eney += 16
        when sframe + 10
          #@enex = 416
          @eney += 16
        when sframe + 11
          #@enex = 416
          @eney += 16
        when sframe + 12
          #@enex = 416
          @eney += 16
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        end
      when 141..148
        
        @enex -= 16
        @output_anime_type = 0
        battle_anime_change 0,16
      when 149..180
        sframe = 149
        Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == sframe
        @chax -= 20
        @output_anime_type = 0
        battle_anime_change 0,3
        battle_anime_change 1,17
      when 181..308
        sframe = 181
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == sframe
        @output_anime_type = 1
        battle_anime_change 0,2
        #@ray_color = 3
        @ray_color = 3
        ray_x = 348
        ray_y = 134
        @effect_anime_pattern = 237
        if sframe + 60 <= @battle_anime_frame
          ray_x = 348 - 8
          ray_y = 134 - 16
          @effect_anime_pattern = 235
        end
        back_anime_pattern 201,back_x,back_y
      when 309..350
        sframe = 309
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        ray_x = 230 - 16*(@battle_anime_frame-sframe)
        ray_y = 140
        battle_anime_change 0,3
        @effect_anime_pattern = 261
      when 351
        @effect_anime_pattern = 0
      when 360
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax = STANDARD_ENEX
        #@chay = STANDARD_CHAY
        @eney = -200
        @output_anime_type = 1
        battle_anime_change 1,16
      when 361..386
        ray_y = 140
        @effect_anime_pattern = 262
          
      when 387
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2630 #ブロフル)イレイザーブロウ
        back_x = 258
        back_y = 88
        ray_x = 348
        ray_y = 134
        
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,3
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 1..39
        @enex -= 24
      when 40
        
        @ax = 0
        #set_chr_display_out
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
        @enex = STANDARD_ENEX + 20
        @eney = STANDARD_ENEY
      when 41..54
        @ax = 24
        #battle_anime_change 0,16

      when 55
        @ax = 0
        battle_anime_change 0,2
        #@chay -= 16
        #battle_anime_change 1,16
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
      when 56..130
        ray_x = 288
        ray_y = 164
        @effect_anime_pattern = 237
      when 131
        #battle_anime_change 0,19 #演出上例外的に移動しないで残す
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2631 #ブロフル)イレイザーキャノン
        back_x = 242
        back_y = 88
        ray_x = 348
        ray_y = 134
        
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0
        @output_anime_type = 1
        @ray_color = 0
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        Audio.se_play("Audio/SE/" + "Z3 変身")
      when 1..128
        sframe = 1
        
        @output_anime_type = 1
        battle_anime_change 0,4
        #@ray_color = 3
        
        ray_x = 268
        ray_y = 154
        @effect_anime_pattern = 237
        if sframe + 40 <= @battle_anime_frame
          ray_x = 268 - 8
          ray_y = 154 - 8
          @effect_anime_pattern = 235
        end
        
        if sframe + 80 <= @battle_anime_frame
          @ray_anime_type = 0 if sframe + 80 == @battle_anime_frame
          ray_x = 268 - 24
          ray_y = 154 - 24
          @effect_anime_pattern = 252
        end
        @ray_color = 3
        back_anime_pattern 201,back_x,back_y
        @ray_color = 0
      when 129..180
        ray_x = 268 - 24
        ray_y = 154 - 24
        @effect_anime_pattern = 252
      when 181..222
        @ray_anime_type = 1
        sframe = 181
        Audio.se_stop if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        ray_x = 268 - 24 - 16*(@battle_anime_frame-sframe)
        ray_y = 154 - 24
        battle_anime_change 0,5
        @effect_anime_pattern = 252 #261
      when 223
        @effect_anime_pattern = 0
      when 233
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax = STANDARD_ENEX
        #@chay = STANDARD_CHAY
        @eney = -200
        @output_anime_type = 1
        #battle_anime_change 1,16
      when 234..259
        ray_y = 140
        #ray_x = 268 - 24 - 16*(@battle_anime_frame-sframe)
        #@ray_anime_type = 1
        @effect_anime_pattern = 262
          
      when 260
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2632 #ブロフル)スローイングブラスター
        back_x = 242
        back_y = 88
        ray_x = 348
        ray_y = 134
        
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0
        @output_anime_type = 1
        @ray_color = 0
        battle_anime_change 0,4
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        Audio.se_play("Audio/SE/" + "Z3 変身")
      when 1..128
        sframe = 1
        
        @output_anime_type = 1
        battle_anime_change 0,4
        #@ray_color = 3
        
        ray_x = 348
        ray_y = 136
        @effect_anime_pattern = 237
        if sframe + 40 <= @battle_anime_frame
          ray_x = 348 - 8
          ray_y = 136 - 8
          @effect_anime_pattern = 235
        end
        
        if sframe + 80 <= @battle_anime_frame
          @ray_anime_type = 0 if sframe + 80 == @battle_anime_frame
          ray_x = 348 - 24
          ray_y = 136 - 24
          @effect_anime_pattern = 252
        end
        @ray_color = 3
        back_anime_pattern 201,back_x,back_y
        @ray_color = 0
      when 129..180
        ray_x = 348 - 24
        ray_y = 136 - 24
        @effect_anime_pattern = 252
      when 181..222
        @ray_anime_type = 1
        sframe = 181
        Audio.se_stop if @battle_anime_frame == sframe
        @effect_anime_frame = 0 if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        ray_x = 78 #- 24 - 16*(@battle_anime_frame-sframe)
        ray_y = 110 #- 24
        battle_anime_change 0,6
        @effect_anime_pattern = 293
      when 223
        @effect_anime_pattern = 0
      when 233
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax = STANDARD_ENEX
        #@chay = STANDARD_CHAY
        @eney = -200
        @output_anime_type = 1
        #battle_anime_change 1,16
      when 234..259
        ray_y = 110
        #ray_x = 268 - 24 - 16*(@battle_anime_frame-sframe)
        #@ray_anime_type = 1
        @effect_anime_pattern = 266
          
      when 260
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2633 #ブロフル)オメガブラスター
        back_x = 242
        back_y = 88
        ray_x = 348
        ray_y = 134
        
        color = Color.new(255,255,255,260)
        #@back_window.contents.fill_rect(0,0,640,378,color)
      case @battle_anime_frame
       
      when 0
        @output_anime_type = 1
        @ray_color = 0
        battle_anime_change 0,0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")
        #Audio.se_play("Audio/SE/" + "Z3 変身")
      when 1..128
        sframe = 1
        
        @output_anime_type = 1
        battle_anime_change 0,0
        #@ray_color = 3
        
        ray_x = 318
        ray_y = 154
        @effect_anime_pattern = 237
        if sframe + 40 <= @battle_anime_frame
          battle_anime_change 0,4
          ray_x = 348 - 8
          ray_y = 136 - 8
          @effect_anime_pattern = 235
        end
        
        if sframe + 80 <= @battle_anime_frame
          @ray_anime_type = 0 if sframe + 80 == @battle_anime_frame
          ray_x = 348 - 24
          ray_y = 136 - 24
          @effect_anime_pattern = 252
        end
        #@ray_color = 3
        #back_anime_pattern 201,back_x,back_y
        @ray_color = 1
      when 129..180
        ray_x = 348 - 24
        ray_y = 136 - 24
        @effect_anime_pattern = 252
      when 181..222
        @ray_anime_type = 1
        sframe = 181
        Audio.se_stop if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "ZG 打撃4") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        ray_x = 268 - 24 - 16*(@battle_anime_frame-sframe)
        ray_y = 154 - 24
        battle_anime_change 0,5
        @effect_anime_pattern = 252 #261
      when 223
        @effect_anime_pattern = 0
      when 233
        set_chr_display_out
        @effect_anime_frame = 0
        @effect_anime_type = 0
        #@chax = STANDARD_ENEX
        #@chay = STANDARD_CHAY
        @eney = -200
        @output_anime_type = 1
        #battle_anime_change 1,16
      when 234..289#259
        sframe = 234
        ray_y = 140
        #ray_x = 268 - 24 - 16*(@battle_anime_frame-sframe)
        #@ray_anime_type = 1
        @ray_color = 1
        @effect_anime_pattern = 262
        if @battle_anime_frame == sframe + 24
          battle_anime_change 1,16
        end
        
        if @battle_anime_frame > 259
          @effect_anime_frame -= 1
        end
      when 290..417
        @effect_anime_pattern = 0
        battle_anime_change 0,0
        sframe = 290
        Audio.se_stop if @battle_anime_frame == sframe
        @chay = -200
        @eney = STANDARD_ENEY
        Audio.se_play("Audio/SE/" + "Z3 変身") if @battle_anime_frame == sframe
        @ray_color = 3
        back_anime_pattern 201,back_x,back_y
        
      when 418..530
        sframe = 418
        back_x = 82
        back_y = 88
        Audio.se_stop if @battle_anime_frame == sframe
        @eney = -200
        @effect_anime_pattern = 0
        @tec_output_back = false
        @chr_cutin = false
        picture = Cache.picture("Z3_必殺技_オメガブラスター(ブロリーフルパワー)")
        rect = Rect.new(0, 0,412,208)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        back_anime_pattern 106
        
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == sframe
        
      when 531..630
        @ray_color = 1
        sframe = 531
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        ray_x = 268 + 22 
        ray_y = 140
        @chay = STANDARD_ENEY
        @effect_anime_pattern = 252
        @tec_output_back = true
        @chr_cutin = true
        if sframe + 60 && @battle_anime_frame % 12 == 0
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        end
      when 631
        @eney = - 200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2635 #アラレ)ウンチ攻撃
      
      ray_x = 328
      ray_y = 148
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 SE107")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,14
        @ray_color = 0
      when 1..120
        
        #@effect_anime_pattern = 227
      when 121..190
        sframe = 121
        battle_anime_change 0,15
        Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == sframe
        back_x = 298 - 12 *(@battle_anime_frame-sframe+ 1) 
        back_y = 162
        picture = Cache.picture("Z3_必殺技_アラレ_うんち")
        rect = Rect.new(0, 0,14,14)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 191
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 195
        set_chr_display_out
      when 196..225
        sframe = 196
        back_x = 656 - 12 *(@battle_anime_frame-sframe+ 1) 
        back_y = 166
        picture = Cache.picture("Z3_必殺技_アラレ_うんち")
        rect = Rect.new(0, 0,14,14)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        #@effect_anime_pattern = 228
      when 226
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2636 #キーン
      @ray_color = 3
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "DB3 SE109")    # 効果音を再生する
          @output_anime_type = 1
          #battle_anime_change 0,6
          @ray_color = 3
        when 1..99
          
          case @battle_anime_frame
          
          when 0..15
            @eney -= 2
            battle_anime_change 0,7
          when 16..30
            @eney += 2
          when 31
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
            battle_anime_change 0,6
          when 32..100
            @enex -= 12
            if @battle_anime_frame % 4 == 0
              if @effect_anime_type == 0
                battle_anime_change 0,16
              elsif @effect_anime_type == 1
                battle_anime_change 0,18
              elsif @effect_anime_type == 2
                battle_anime_change 0,17
              elsif @effect_anime_type == 3
                battle_anime_change 0,18
              end
              @effect_anime_type += 1
              if @effect_anime_type == 4
                @effect_anime_type = 0
              end
            end
          end
        when 110
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 119
          @tec_output_back = false
          
          set_chr_display_out
        when 120
          #sframe = 121
          back_anime_pattern 1
          kin_rand = rand(3)+1
          #Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          if kin_rand == 1
            @battle_anime_frame = 200
          elsif kin_rand == 2
            @battle_anime_frame = 300
          elsif kin_rand == 3
            @battle_anime_frame = 500
          end
          @eney = STANDARD_ENEY
          @enex = 640
        when 201..231
          sframe = 201
          eframe = 231
          @eney = STANDARD_ENEY if @battle_anime_frame == sframe
          battle_anime_change 0,16 if @battle_anime_frame == sframe
          @enex = 640 if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          
          @enex -= 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
            
          @battle_anime_frame = 3100 if @battle_anime_frame == eframe
        when 301..380
          sframe = 301
          eframe = 380
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @eney += 108 
            if $cha_bigsize_on[@chanum.to_i] == true
              @eney += 42
            end
          end
          @enex -= 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
            
          
        when 381..460
          sframe = 381
          eframe = 460
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          battle_anime_change 0,20 if @battle_anime_frame == sframe
          @eney = STANDARD_ENEY if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @eney -= 136
            if $cha_bigsize_on[@chanum.to_i] == true
              @eney -= 42
            end
            @enex = -96
          end
          @enex += 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,20
            elsif @effect_anime_type == 1
              battle_anime_change 0,22
            elsif @effect_anime_type == 2
              battle_anime_change 0,21
            elsif @effect_anime_type == 3
              battle_anime_change 0,22
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
          
          @battle_anime_frame = 200 if @battle_anime_frame == eframe
        when 501..580
          sframe = 501
          eframe = 580
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          #@eney -= 136 if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @eney -= 136
            if $cha_bigsize_on[@chanum.to_i] == true
              @eney -= 42
            end
            #@enex = -96
          end
          @enex -= 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
            
          
        when 581..660
          sframe = 581
          eframe = 660
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          battle_anime_change 0,20 if @battle_anime_frame == sframe
          @eney = STANDARD_ENEY if @battle_anime_frame == sframe
          if @battle_anime_frame == sframe
            @eney += 108
            if $cha_bigsize_on[@chanum.to_i] == true
              @eney += 42
            end
            
            @enex = -96
          end
          @enex += 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,20
            elsif @effect_anime_type == 1
              battle_anime_change 0,22
            elsif @effect_anime_type == 2
              battle_anime_change 0,21
            elsif @effect_anime_type == 3
              battle_anime_change 0,22
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
          
          @battle_anime_frame = 200 if @battle_anime_frame == eframe
        when 3101
          @eney = -200
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        case @battle_anime_frame
        when 0
          @output_anime_type = 1
          @tec_output_back = false
          set_chr_display_out
          #sframe = 121
          back_anime_pattern 1
          @eney = STANDARD_ENEY
          @enex = 640
        when 1..31
          sframe = 1
          eframe = 31
          @eney = STANDARD_ENEY if @battle_anime_frame == sframe
          battle_anime_change 0,16 if @battle_anime_frame == sframe
          @enex = 640 if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
          
          @enex -= 12
          back_anime_pattern 1
          
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
        when 32
          @eney = -200
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2637 #アラレ)岩攻撃
      
      ray_x = 328
      ray_y = 148
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..29
        sframe = 1
        back_x = 292
        back_y = -118 + 8 *(@battle_anime_frame-sframe) 
        battle_anime_change 0,10 if @battle_anime_frame == 18
        picture = Cache.picture("Z3_必殺技_アラレ_大岩")
        rect = Rect.new(0, 0,80,56)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        #@effect_anime_pattern = 227
        #104
      when 30..120
        sframe = 30
        akifra = 4
        zyougey = 6
        back_x = 292
        back_y = 106
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        case @battle_anime_frame
        
        when sframe
          @eney += zyougey
        when sframe + akifra * 1
          @eney += 0
        when sframe + akifra * 2
          @eney -= zyougey
        end
        
        case @battle_anime_frame
        
        when sframe..sframe + akifra * 1 -1
          back_y += zyougey
        when sframe + akifra * 1..sframe + akifra * 2 -1
          back_y += zyougey
        when sframe + akifra * 2..sframe + akifra * 3 -1
          #back_y -= zyougey
        end
        picture = Cache.picture("Z3_必殺技_アラレ_大岩")
        rect = Rect.new(0, 0,80,56)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 121..190
        sframe = 121
        battle_anime_change 0,11
        @tec_output_back_no = 0
        Audio.se_play("Audio/SE/" + "ZG エネルギー弾1") if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "Z2 SE115") if @battle_anime_frame == sframe
        back_x = 292 - 12 *(@battle_anime_frame-sframe+ 1) 
        back_y = 106
        akifra = 4
        zyougey = 2
        case @battle_anime_frame
        
        when sframe..sframe + akifra * 1 -1
          back_y += zyougey * 1
        when sframe + akifra * 1..sframe + akifra * 2 -1
          back_y += zyougey * 2
        when sframe + akifra * 2..sframe + akifra * 3 -1
          back_y += zyougey * 3
        when sframe + akifra * 3..sframe + akifra * 4 -1
          back_y += zyougey * 4
        when sframe + akifra * 4..sframe + akifra * 5 -1
          back_y += zyougey * 5
        when sframe + akifra * 5..sframe + akifra * 6 -1
          back_y += zyougey * 6
        when sframe + akifra * 6..sframe + akifra * 7 -1
          back_y += zyougey * 7
        when sframe + akifra * 7..sframe + akifra * 8 -1
          back_y += zyougey * 8
        when sframe + akifra * 8..sframe + akifra * 9 -1
          back_y += zyougey * 9
        end
        
        picture = Cache.picture("Z3_必殺技_アラレ_大岩")
        rect = Rect.new(0, 0,80,56)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 191
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 195
        set_chr_display_out
      when 196..225
        sframe = 196
        back_x = 656 - 12 *(@battle_anime_frame-sframe+ 1) 
        back_y = 136
        picture = Cache.picture("Z3_必殺技_アラレ_大岩")
        rect = Rect.new(0, 0,80,56)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        #@effect_anime_pattern = 228
      when 226
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2638 #ブンブン

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 SE109")    # 効果音を再生する
        @output_anime_type = 1
        #battle_anime_change 0,6
        @ray_color = 3
      when 1..99
        
        case @battle_anime_frame
        
        when 0..15
          @eney -= 2
          battle_anime_change 0,7
        when 16..30
          @eney += 2
        when 31
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
          battle_anime_change 0,6
        when 32..100
          @enex -= 12
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
        end
      when 110
        #battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        @tec_output_back = false
        
        set_chr_display_out
      when 120
        #sframe = 121
        back_anime_pattern 1
        @eney = STANDARD_ENEY
        @enex = 640
      when 121..149
        sframe = 121
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        battle_anime_change 0,16 if @battle_anime_frame == sframe
        @enex = 640 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
        
        @enex -= 12
        back_anime_pattern 1
        
        if @battle_anime_frame % 4 == 0
          if @effect_anime_type == 0
            battle_anime_change 0,16
          elsif @effect_anime_type == 1
            battle_anime_change 0,18
          elsif @effect_anime_type == 2
            battle_anime_change 0,17
          elsif @effect_anime_type == 3
            battle_anime_change 0,18
          end
          @effect_anime_type += 1
          if @effect_anime_type == 4
            @effect_anime_type = 0
          end
        end
      when 150..180
        sframe = 150
        battle_anime_change 0,7 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる") if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        
        when sframe..sframe+11
          @enex -= 2
        end
        back_anime_pattern 1
      when 181..240
        sframe = 181
        battle_anime_change 0,0
        back_anime_pattern 1
      when 241..350
        sframe = 241
        Audio.se_play("Audio/SE/" + "Z1 パワーアップ") if @battle_anime_frame == sframe
        if @battle_anime_frame % 4 == 0
          if @effect_anime_type == 0
            battle_anime_change 0,3
          elsif @effect_anime_type == 1
            battle_anime_change 0,2
          elsif @effect_anime_type == 2
            battle_anime_change 0,4
          elsif @effect_anime_type == 3
            battle_anime_change 0,2
          end
          @effect_anime_type += 1
          if @effect_anime_type == 4
            @effect_anime_type = 0
          end
        end
        back_anime_pattern 1
      when 351..380
        sframe = 351
        Audio.se_play("Audio/SE/" + "DB3 SE041") if @battle_anime_frame == sframe
        battle_anime_change 0,5
        back_anime_pattern 1
      when 381
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2639 #アラレ)んちゃ砲
      
      ray_x = 366
      ray_y = 168
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
      when 1..64
        sframe = 1
        akifra = 4
        case @battle_anime_frame
        
        when akifra*1,akifra*2,akifra*3,akifra*4,akifra*9,akifra*10,akifra*11,akifra*12
          @eney += 2
        when akifra*5,akifra*6,akifra*7,akifra*8,akifra*13,akifra*14,akifra*15,akifra*16
          @eney -= 2
        end
      when 65
        sframe = 65
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        battle_anime_change 0,8
      when 120..190
        sframe = 120
        battle_anime_change 0,9
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "Z2 SE115") if @battle_anime_frame == sframe
        back_x = 80
        back_y = 106
        @effect_anime_pattern = 225
        picture = Cache.picture("Z3_必殺技_アラレ_んちゃーっ")
        rect = Rect.new(0, 0,180,52)
        @back_window.contents.blt(back_x,back_y,picture,rect)
        
        if sframe + 30 >= @battle_anime_frame && @battle_anime_frame % 8 == 0
          #@back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        end
        
      when 191
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 195
        set_chr_display_out
      when 196..220
        @effect_anime_pattern = 226
      when 221
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2640 #プロレスごっこ
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 SE109")    # 効果音を再生する
        @output_anime_type = 1
        #battle_anime_change 0,6
        @ray_color = 3
      when 1..99
        
        case @battle_anime_frame
        
        when 0..15
          @eney -= 2
          battle_anime_change 0,7
        when 16..30
          @eney += 2
        when 31
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 ダッシュ")
          battle_anime_change 0,6
        when 32..100
          @enex -= 12
          if @battle_anime_frame % 4 == 0
            if @effect_anime_type == 0
              battle_anime_change 0,16
            elsif @effect_anime_type == 1
              battle_anime_change 0,18
            elsif @effect_anime_type == 2
              battle_anime_change 0,17
            elsif @effect_anime_type == 3
              battle_anime_change 0,18
            end
            @effect_anime_type += 1
            if @effect_anime_type == 4
              @effect_anime_type = 0
            end
          end
        end
      when 110
        #battle_anime_change 0,2
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 119
        #@tec_output_back = false
        
        set_chr_display_out
        #@chr_cutin_mirror_flag = false
      when 120
        #sframe = 121
        #back_anime_pattern 1
        @eney = STANDARD_ENEY
        @enex = 640
      when 121..151
        sframe = 121
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        battle_anime_change 0,16 if @battle_anime_frame == sframe
        @enex = 640 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
        
        @enex -= 12
        #back_anime_pattern 1
        
        if @battle_anime_frame % 4 == 0
          if @effect_anime_type == 0
            battle_anime_change 0,16
          elsif @effect_anime_type == 1
            battle_anime_change 0,18
          elsif @effect_anime_type == 2
            battle_anime_change 0,17
          elsif @effect_anime_type == 3
            battle_anime_change 0,18
          end
          @effect_anime_type += 1
          if @effect_anime_type == 4
            @effect_anime_type = 0
          end
        end
        Audio.se_play("Audio/SE/" + "Z1 避ける") if @battle_anime_frame == sframe+15
        battle_anime_change 0,12 if @battle_anime_frame >= sframe+15
      when 152..180
        sframe = 152
        #back_anime_pattern 1
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe
        battle_anime_change 1,17
        @chax -= 12
        @chay -= 8
      when 181..240
        sframe = 181
        
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        battle_anime_change 0,18 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
        
        @enex -= 12
        #back_anime_pattern 1
        
        if @battle_anime_frame % 4 == 0
          if @effect_anime_type == 0
            battle_anime_change 0,16
          elsif @effect_anime_type == 1
            battle_anime_change 0,18
          elsif @effect_anime_type == 2
            battle_anime_change 0,17
          elsif @effect_anime_type == 3
            battle_anime_change 0,18
          end
          @effect_anime_type += 1
          if @effect_anime_type == 4
            @effect_anime_type = 0
          end
        end
      when 241..273
        sframe = 241
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        battle_anime_change 0,16 if @battle_anime_frame == sframe
        @enex = 640 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 ダッシュ") if @battle_anime_frame == sframe
        
        @enex -= 12
        #back_anime_pattern 1
        
        if @battle_anime_frame % 4 == 0
          if @effect_anime_type == 0
            battle_anime_change 0,16
          elsif @effect_anime_type == 1
            battle_anime_change 0,18
          elsif @effect_anime_type == 2
            battle_anime_change 0,17
          elsif @effect_anime_type == 3
            battle_anime_change 0,18
          end
          @effect_anime_type += 1
          if @effect_anime_type == 4
            @effect_anime_type = 0
          end
        end
      when 274..360
        sframe = 274
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        @chay = -96 if @battle_anime_frame == sframe
        @chax = CENTER_CHAX + 32 + 60 if @battle_anime_frame == sframe
        battle_anime_change 0,7 if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 SE109") if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        
        when sframe..sframe+14
          @chay += 8
          @chax -= 4
          @eney -= 4
          battle_anime_change 0,7
        when sframe+15..sframe+29
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == sframe+15
          @chay -= 8
          @chax -= 8
          @eney += 4
        when sframe+30
          battle_anime_change 0,0
        end
      when 361..449
        sframe = 361
        Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ") if @battle_anime_frame == sframe
        @eney = -200 if @battle_anime_frame == sframe
        @enex = 640 if @battle_anime_frame == sframe
        @chay = -200 if @battle_anime_frame == sframe
        @chax = CENTER_CHAX + 74 if @battle_anime_frame == sframe
        
        case @battle_anime_frame
        
        when sframe..sframe+39
          @chay += 8
          @chax -= 2
        when sframe+40..sframe+45
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 吹っ飛ぶ止まる") if @battle_anime_frame == sframe+40
          @chay -= 4
        when sframe+46..sframe+50
          @chay += 4
        when sframe+51..sframe+55
          @chay -= 2
        when sframe+56..sframe+60
          @chay += 2
        when sframe+61
          battle_anime_change 1,0
        end
      when 450
        sframe = 450
        @eney = STANDARD_ENEY if @battle_anime_frame == sframe
        @enex = 640 if @battle_anime_frame == sframe
        battle_anime_change 0,0
      when 451..485  
        sframe = 451
        @enex -= 6
        picture = Cache.picture("Z3_戦闘_必殺技_敵_アラレ")
        rect = Rect.new(0, 13*96,96,96) #9
        @back_window.contents.blt(@enex+40,@eney-40,picture,rect)
        @back_window.contents.blt(@enex+10,@eney-60,picture,rect)
      when 486..530
        sframe = 486
        picture = Cache.picture("Z3_戦闘_必殺技_敵_アラレ")
        battle_anime_change 0,23
        Audio.se_play("Audio/SE/" + "DB3 キラーン") if @battle_anime_frame == sframe
        rect = Rect.new(0, 13*96,96,96) #9
        @back_window.contents.blt(@enex+40,@eney-40,picture,rect)
        @back_window.contents.blt(@enex+10,@eney-60,picture,rect)
      when 531..620
        sframe = 531
        picture = Cache.picture("Z3_戦闘_必殺技_敵_アラレ")
        Audio.se_play("Audio/SE/" + "DB3 SE075") if @battle_anime_frame == sframe
        rect = Rect.new(0, 19*96,96,96) #9
        @back_window.contents.blt(@enex+40,@eney-40,picture,rect)
        @back_window.contents.blt(@enex+10,@eney-60,picture,rect)
        if sframe + 60 >= @battle_anime_frame && @battle_anime_frame % 16 == 0
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        end
      when 621
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2645 #ミストカメハメ波
      
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..110
        sframe = 1
        akifra = 8
        
        case @battle_anime_frame
        
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7,sframe + akifra * 9,sframe + akifra * 11
          battle_anime_change 0,2
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6,sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          battle_anime_change 0,3
        end
      when 111..129
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        battle_anime_change 0,4
      when 150 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      when 191..195
        battle_anime_change 0,6
      when 196
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      when 197..225
        sframe = 197
        
        case @battle_anime_frame
        
        when sframe..sframe + 2
          @ax = -2
        when sframe + 3..sframe + 5
          @ax = 2
        when sframe + 6
          @ax = 0
        end
        @effect_anime_pattern = 203
        ray_x = 184
        ray_y = 134 #スーパーサイヤ人

      when 226
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 230
        set_chr_display_out
      when 231..255
        @effect_anime_pattern = 204
      when 256
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2646 #ミストまこうほう
      ray_x = 80
        ray_y = 96
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..110
        sframe = 1
        akifra = 8
        
        case @battle_anime_frame
        
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7,sframe + akifra * 9,sframe + akifra * 11
          battle_anime_change 0,2
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6,sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          battle_anime_change 0,3
        end
      when 111..129
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        battle_anime_change 0,7
      when 150 #初期化
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する

        @output_anime_type = 1
        battle_anime_change 0,8
        @ray_color = 1
      when 151..239
        back_anime_pattern backhai_no,back_x,back_y
      when 240
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,9
        @effect_anime_pattern = 206
        back_anime_pattern backhai_no,back_x,back_y
  
      when 241..278
        sframe = 241
        back_anime_pattern backhai_no,back_x,back_y
        
        case @battle_anime_frame
        when sframe..sframe + 2
          @ax = -2
        when sframe + 3..sframe + 5
          @ax = 2
        when sframe + 6
          @ax = 0
        end
      when 279
        battle_anime_change 0,9
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        
      when 289
        set_chr_display_out
      when 290..316
        @effect_anime_pattern = 207
      when 317
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2647 #ミストませんこう
      back_x = 198
      back_y = 34
      ray_x = 204
      ray_y = 134
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..110
        sframe = 1
        akifra = 8
        
        case @battle_anime_frame
        
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7,sframe + akifra * 9,sframe + akifra * 11
          battle_anime_change 0,2
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6,sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          battle_anime_change 0,3
        end
      when 111..129
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        battle_anime_change 0,10
      when 150 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,11
        @ray_color = 0
      when 151..239
        #back_anime_pattern 101,back_x,back_y
      when 240
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,12
        @effect_anime_pattern = 203
        #back_anime_pattern 101,back_x,back_y
      when 241..278
        #back_anime_pattern 101,back_x,back_y
      when 279
        battle_anime_change 0,12
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 289
        set_chr_display_out
      when 290..316
        @effect_anime_pattern = 204
      when 317
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2648 #ミストギャリック砲
      back_x = 198
      back_y = 34
      ray_x = 350-120
      ray_y = 124
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..110
        sframe = 1
        akifra = 8
        
        case @battle_anime_frame
        
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7,sframe + akifra * 9,sframe + akifra * 11
          battle_anime_change 0,2
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6,sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          battle_anime_change 0,3
        end
      when 111..129
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        battle_anime_change 0,13
      when 150 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,14
      when 151..239
        #back_anime_pattern backhai_no,back_x,back_y
      when 240
        Audio.se_stop
        battle_anime_change 0,15
      when 260
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        #battle_anime_change 0,1
        @effect_anime_pattern = 233
        #back_anime_pattern 101,back_x,back_y
      when 261..298
        #back_anime_pattern 101,back_x,back_y
      when 299
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 309
        set_chr_display_out
      when 310..336
        @effect_anime_pattern = 234
      when 337
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2649 #ミスト剣攻撃
      back_x = 198
      back_y = 34
      ray_x = 350-120
      ray_y = 124
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
      when 1..110
        sframe = 1
        akifra = 8
        
        case @battle_anime_frame
        
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7,sframe + akifra * 9,sframe + akifra * 11
          battle_anime_change 0,2
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6,sframe + akifra * 8,sframe + akifra * 10,sframe + akifra * 12
          battle_anime_change 0,3
        end
      when 111..129
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
        battle_anime_change 0,16
      when 150 #初期化
        Audio.se_play("Audio/SE/" + "Z3 剣攻撃")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,17
        @enex +=14
        @ray_color = 0
      when 151..190
        @effect_anime_pattern = 267
        ray_x = 228
        ray_y = 134
      when 191
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 195
        set_chr_display_out
      when 196..225
        #@effect_anime_pattern = 202
      when 226
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2653 #アービー系)パワードレイン
      back_x = 248
      back_y = 88

      ray_x = 128
      ray_y = 92
      case @battle_anime_frame
      

      when 0
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -120
      when 1..38
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 32,144,picture,rect)
        end
      when 39
        #set_chr_display_out
        #@tec_output_back = false
        #Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @chax = CENTER_CHAX
        @chay = STANDARD_CHAY
      when 40..78
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)

          @back_window.contents.blt(@enex + 48,144,picture,rect)
        end
      when 79
        @enex = CENTER_ENEX - 20
        @eney = STANDARD_ENEY
      when 100
        @output_anime_type = 1
        battle_anime_change 0,5
        Audio.se_play("Audio/SE/" + "Z1 強打")
        battle_anime_change 1,16
        @enex -= 28
      when 101..198
        sframe = 101
        akifra = 16
        case @battle_anime_frame
        
        when sframe + akifra * 0
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")
        when sframe + akifra * 1,sframe + akifra * 3,sframe + akifra * 5,sframe + akifra * 7
          battle_anime_change 0,6
        when sframe + akifra * 2,sframe + akifra * 4,sframe + akifra * 6
          battle_anime_change 0,5
        end
      when 199
        @enex += 16
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")
        @output_anime_type = 0
        battle_anime_change 0,16
      when 200..212
        @enex += 16
      when 232..238
        @enex -= 32
        
        if @battle_anime_frame == 235
          @output_anime_type = 0
          battle_anime_change 0,2
        end
      when 239
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2669 #ゴッドガ)テイルザンバー
      
      ray_x = 202
      ray_y = 108
      kitamenasi = true
      ray_big = true
      @ray_color = 3
      if ray_big == true && @battle_anime_frame >= 140
        if @attackcourse == 0
          ray_x -= -40
          ray_y -= 18
        else
          ray_x -= 88
          ray_y -= 18
        end
      end
      case @battle_anime_frame
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,0
        if kitamenasi == false
          Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        else
          Audio.se_play("Audio/SE/" + "DB3 気を溜める2")    # 効果音を再生する
          battle_anime_change 0,1
          battle_anime_change 0,2 if @enedatenum == 145 #ザンギャ
            
          @ax = 2 if @enedatenum == 126
        end
        
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = ray_x +48
        @genkityuushin_y = ray_y +32
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 1..128
        @ax = 0 if @enedatenum == 126
        if kitamenasi == false
          back_anime_pattern 201,back_x,back_y
        else
          tame_end = 125
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
        end
          
      when 129
        #@ray_color = 3
        #@output_anime_type = 1
        Audio.se_stop
        battle_anime_change 0,1 
      when 130
        @ax = 0
      when 140..178
        sframe = 140
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        battle_anime_change 0,1
        @effect_anime_pattern = 252
        ray_x += 86
        ray_y += 18
        ray_x -= 16*(@battle_anime_frame-sframe)
      when 179
        #battle_anime_change 0,1
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 189
        set_chr_display_out
      when 190..215
        ray_y += 50
        @effect_anime_pattern = 262
      when 216
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2670 #ゴッドガ)ガードンクラッシャー
      back_x = 700 
      back_y = 120
      ray_x = 366
      ray_y = 168
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,7
        @ray_color = 3
        @eney = -200
      when 1..32
        sframe = 1
        back_x -= 16*(@battle_anime_frame-sframe)
        #back_y = 120
        
        picture = Cache.picture("ZG_必殺技_ガードンクラッシャー_ゴッドガードン")
        rect = Rect.new(0, 148*0,328,148)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 33..96
        sframe = 33
        akifra = 16
        back_x = 204
        rect = Rect.new(0, 148*1,328,148)
        Audio.se_play("Audio/SE/" + "ZG 打撃1") if @battle_anime_frame == sframe || @battle_anime_frame == sframe + akifra - 1 || @battle_anime_frame == sframe + akifra * 2 - 1
        case @battle_anime_frame
        
        when sframe-1+akifra*1..sframe-1+akifra*2-1
          rect = Rect.new(0, 148*2,328,148)
        when sframe-1+akifra*2..sframe-1+akifra*8
          rect = Rect.new(0, 148*3,328,148)
        end
        picture = Cache.picture("ZG_必殺技_ガードンクラッシャー_ゴッドガードン")
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 97..200
        sframe = 97
        akifra = 16
        back_x = 204
        back_x = 212 if @battle_anime_frame == sframe || @battle_anime_frame == sframe + akifra || @battle_anime_frame == sframe + akifra * 2 || @battle_anime_frame == sframe + akifra * 3
        back_x = 212 if @battle_anime_frame == sframe || @battle_anime_frame == sframe + akifra + 1 || @battle_anime_frame == sframe + akifra * 2 + 1 || @battle_anime_frame == sframe + akifra * 3 + 1
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if @battle_anime_frame == sframe || @battle_anime_frame == sframe + akifra - 1 || @battle_anime_frame == sframe + akifra * 2 - 1 || @battle_anime_frame == sframe + akifra * 3 - 1
        Audio.se_play("Audio/SE/" + "ZG SE047") if @battle_anime_frame == sframe || @battle_anime_frame == sframe + akifra - 1 || @battle_anime_frame == sframe + akifra * 2 - 1 || @battle_anime_frame == sframe + akifra * 3 - 1
        rect = Rect.new(0, 148*3,328,148)
        picture = Cache.picture("ZG_必殺技_ガードンクラッシャー_ゴッドガードン")
        @back_window.contents.blt(back_x,back_y,picture,rect)
        rect = Rect.new(0, 0,48,32)
        picture = Cache.picture("ZG_必殺技_ガードンクラッシャー_ゴッドガードン_エネルギー弾")
        ray_x = back_x-48-16*(@battle_anime_frame-sframe)
        ray_y = back_y+34 #+20
        
        case @battle_anime_frame
        
        when sframe-1+akifra*1..sframe-1+akifra*2-1
          ray_y = back_y+34+20
          ray_x = back_x-48-16*(@battle_anime_frame-sframe-akifra*1+1)
        when sframe-1+akifra*2..sframe-1+akifra*3-1
          ray_y = back_y+34+40
          ray_x = back_x-48-16*(@battle_anime_frame-sframe-akifra*2+1)
        when sframe-1+akifra*3..sframe-1+akifra*4-1
          ray_y = back_y+34+20
          ray_x = back_x-48-16*(@battle_anime_frame-sframe-akifra*3+1)
        end
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
        
      when 211
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 215
        set_chr_display_out
      when 216..240
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == 216
        @effect_anime_pattern = 207
      when 241
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2675 #ライチ)ビッグスマッシャー
      back_x = 198
      back_y = 34
      ray_x = 284
      ray_y = 114
      @ray_color = 3
      color = Color.new(255,255,255,260)
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..89
        #back_anime_pattern 101,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        battle_anime_change 0,1
        @effect_anime_pattern = 256
        #back_anime_pattern 101,back_x,back_y
      when 169
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 170..193
        @effect_anime_pattern = 265
      when 197
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2678 #ライチ)イレイサーショック
      back_x = 280 
      back_y = 112
      ray_x = 370
      ray_y = back_y + 2
      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      
      case @battle_anime_frame
      
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,7
        @ray_color = 3
        @eney = -200
      when 1..72
        sframe = 1
        #back_x -= 16*(@battle_anime_frame-sframe)
        #back_y = 120
        
        picture = Cache.picture("ZG_必殺技_イレイサーショック_ゴーストライチー")
        rect = Rect.new(0, 0,124,128)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 73..328
        sframe = 73
        picname = (@battle_anime_frame-sframe+1).to_s
        tyousei_x = -156
        tyousei_y = -14
        
        Audio.se_play("Audio/SE/" + "ZG SE053") if @battle_anime_frame == sframe
        
        case (@battle_anime_frame-sframe+1)
        
        when 245..248
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color1)
        when 249..252
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color2)
        when 253..256
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
        end
        
        picture = Cache.picture("raichi_ire/raichi_ire_" + picname)
        rect = Rect.new(0, 0,376,160)
        @back_window.contents.blt(back_x + tyousei_x,back_y + tyousei_y,picture,rect)
        
        #picture = Cache.picture("ZG_必殺技_イレイサーショック_ゴーストライチー")
        #rect = Rect.new(0, 0,124,128)
        #@back_window.contents.blt(back_x,back_y,picture,rect)
      when 329..369
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
      when 370
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "ZG 光線1")    # 効果音を再生する
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color3)
      when 370..460
        picture = Cache.picture("ZG_必殺技_イレイサーショック_ゴーストライチー")
        rect = Rect.new(0, 0,124,128)
        @back_window.contents.blt(back_x+92,back_y,picture,rect)
        
        @effect_anime_pattern = 256
        
      when 461
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 465
        set_chr_display_out
      when 466..490
        #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == 216
        @effect_anime_pattern = 265
      when 491
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2683 #ハッチ)リベンジャーチャージ
      back_x = 186 
      back_y = 52
      ray_x = 370
      ray_y = back_y + 2
      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      
      case @battle_anime_frame
      
      when 0 #初期化
        #Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
        #@output_anime_type = 1
        #battle_anime_change 0,7
        @ray_color = 3
        @eney = -200
      when 1..520#431
        sframe = 1
        #back_x -= 16*(@battle_anime_frame-sframe)
        #back_y = 120
        Audio.se_play("Audio/SE/" + "ZG SE053") if @battle_anime_frame == sframe + 161
        case (@battle_anime_frame-sframe+1)
        
        when 1..128
          picname = 1.to_s
        when 129..136
          picname = 129.to_s
        when 162..192
          picname = 162.to_s
        when 209..262
          picname = 209.to_s
        when 369..520#431
          picname = 369.to_s
        else
          picname = (@battle_anime_frame-sframe+1).to_s
        end
        
        picture = Cache.picture("hatchiyack_charge/hatchiyack_charge_" + picname)
        rect = Rect.new(0, 0,268,304)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      when 521
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2684 #ハッチ)リベンジャーカノン
      back_x = 176 
      back_y = 44
      ray_x = 370
      ray_y = 114
      color1 = Color.new(127,127,127,260)
      color2 = Color.new(188,188,188,260)
      color3 = Color.new(255,255,255,260)
      
      if @all_attack_count == 1
      
        case @battle_anime_frame
        
        when 0 #初期化
          #Audio.se_play("Audio/SE/" + "Z2 SE103")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,7
          @ray_color = 3
          @eney = -200
        when 1..644#431
          sframe = 1
          #back_x -= 16*(@battle_anime_frame-sframe)
          #back_y = 120
          Audio.se_play("Audio/SE/" + "ZG SE053") if @battle_anime_frame == sframe + 161
          case (@battle_anime_frame-sframe+1)
          
          when 1..128
            picname = 1.to_s
          when 129..136
            picname = 129.to_s
          when 162..184
            picname = 162.to_s
          when 201..252
            picname = 201.to_s
          when 361..422,603..636#431
            picname = 361.to_s
          when 637..640
            picname = (@battle_anime_frame-sframe+1).to_s
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color1)
          when 641..644
            picname = (@battle_anime_frame-sframe+1).to_s
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color2)
          else
            picname = (@battle_anime_frame-sframe+1).to_s
          end
          
          picture = Cache.picture("hatchiyack_cannon/hatchiyack_cannon_" + picname)
          rect = Rect.new(0, 0,288,312)
          @back_window.contents.blt(back_x,back_y,picture,rect)
        when 645..679
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color3)
          @tec_output_back_no = 4
        when 680..800
          sframe = 680
          itiy = 54
          Audio.se_stop if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
          
          picture = Cache.picture("ZG_必殺技_リベンジャーカノン_ハッチヒャック")
          rect = Rect.new(0, 0,220,126)
          @back_window.contents.blt(210,itiy,picture,rect)
          
          picture = Cache.picture("ZG_必殺技_光線_大(青)")
          rect = Rect.new(0, 0,316,158)
          @back_window.contents.blt(162,itiy+126,picture,rect)
          
        when 801
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          
        when 805
          @tec_output_back_no = 0
          set_chr_display_out
          @ray_color = 9
        when 806..830
          #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == 216
          @effect_anime_pattern = 265
        when 831
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        @ray_color = 9
        @tec_output_back_no = 0
        @tec_output_back = true
        if @battle_anime_frame == 0
          sframe = 0
          Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
          #@effect_anime_frame = 27
          @effect_anime_pattern = 0
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 265
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
   when 2694 #ガッシュ)ラッシュ
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 201,back_x,back_y
        battle_anime_change 0,0 if @battle_anime_frame == 128
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 139
        #battle_anime_change 0,3
      when 140..169
        
        @ax = 24
        #@chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        @ax = 24
        @output_anime_type = 0
        battle_anime_change 0,16
      when 181..185
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,0
      when 186..230
        @ax = 0
        strfra = 186
        akifra = 4
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          battle_anime_change 0,0
        when strfra + akifra * 4
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          battle_anime_change 0,0
        when strfra + akifra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          @ax = -8
        when strfra + akifra * 16
          @ax = 0
        when strfra + akifra * 17..strfra + akifra * 20
          @enex -= 24
          if @battle_anime_frame > strfra + akifra * 18
            color = Color.new(255,255,255,260)
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          end
        when strfra + akifra * 21
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "DB3 刀")
        when strfra + akifra * 22
          @ax = 0
          @output_anime_type = 1
          battle_anime_change 0,2
          @enex += 14
        end
      when 231..270
        @ax = 0
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 231
        @enex += 16
        @eney += 2
        @output_anime_type = 0
        battle_anime_change 0,16
      when 271..297
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 271
        @output_anime_type = 1
        battle_anime_change 0,3
        @enex -= 24
        @eney = STANDARD_ENEY
        
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 298..309
        Audio.se_stop if @battle_anime_frame == 298
        Audio.se_play("Audio/SE/" + "ZG 打撃6") if @battle_anime_frame == 298
        battle_anime_change 1,16
        @gx = -16
      when 310..321
        @gx = 16
      when 322..390
        @gx = 0
        battle_anime_change 1,0
        Audio.se_stop if @battle_anime_frame == 322
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 322
        battle_anime_change 0,2
        #back_x = 260
        #back_y = 88
        @enex += 2
        back_x = (@enex - 22)
        back_y = (@eney - 32)
        back_anime_pattern 201,back_x,back_y
      when 391..430
        Audio.se_stop if @battle_anime_frame == 381
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == 391
        @output_anime_type = 1
        battle_anime_change 0,1
        back_x = (@enex - 22)
        back_y = (@eney - 32)
        back_anime_pattern 201,back_x,back_y
      when 431
        @eney = -200
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
  when 2698 #ビネガー)ラッシュ
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 201,back_x,back_y
        @output_anime_type = 1
        battle_anime_change 0,3 if @battle_anime_frame == 128
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        back_anime_pattern 201,back_x,back_y
      when 130..139
        back_anime_pattern 201,back_x,back_y
        #battle_anime_change 0,3
      when 140..169
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
        @ax = 24
        #@chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
        @ax = 24
        #@output_anime_type = 0
        #battle_anime_change 0,16
      when 181..185
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
        @ax = 16
        #@output_anime_type = 0
        #battle_anime_change 0,0
      when 186..210
        @gx = -16
        battle_anime_change 1,16
        @ax = 0
        Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == 186
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
      when 211
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200
      when 212..230
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        else
          
        end
      when 236
        @ax = 0
        @gx = 0
        set_chr_display_out
        battle_anime_change 1,0
        @enex = CENTER_ENEX
        @eney = STANDARD_ENEY
        @eney = -200
      when 237..254
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@enex + 20,144,picture,rect)
        else
          
        end
      when 255
        @eney = STANDARD_ENEY
        @output_anime_type = 0
        battle_anime_change 0,0
        
      when 256..350
        back_x = (@enex - 18)
        back_anime_pattern 201,back_x,back_y
        @ax = 0
        strfra = 256
        akifra = 8
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          @gx = -16
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == strfra + akifra * 0
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          @gx = 16
          battle_anime_change 1,0
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          @gx = -16
          battle_anime_change 1,16
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          @gx = 16
          battle_anime_change 1,0
          battle_anime_change 0,0
        when strfra + akifra * 4
          @gx = -16
          battle_anime_change 1,16
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          @gx = 16
          battle_anime_change 1,0
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          @gx = -16
          battle_anime_change 1,16
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          @gx = 16
          battle_anime_change 1,0
          battle_anime_change 0,0
        when strfra + akifra * 8
          @gx = -16
          battle_anime_change 1,16
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          @gx = 16
          battle_anime_change 1,0
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          @gx = -16
          battle_anime_change 1,16
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 強打") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @gx = 16
          
          battle_anime_change 1,0
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          #@ax = -8
        when strfra + akifra * 12 + 1
          @gx = 0
        when strfra + akifra * 16
          @ax = 0
        when strfra + akifra * 17..strfra + akifra * 20
          @enex -= 24
          if @battle_anime_frame > strfra + akifra * 18
            color = Color.new(255,255,255,260)
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          end
        when strfra + akifra * 21
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "DB3 刀")
        when strfra + akifra * 22
          @ax = 0
          @output_anime_type = 1
          battle_anime_change 0,2
          @enex += 14
        end
      when 351..390
        @ax = 0
        @gx = 0
        @effect_anime_pattern = 0
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 351
        #@enex += 16
        @eney -= 16
        @output_anime_type = 0
        battle_anime_change 0,16
        back_x = (@enex - 18)
        back_y = (@eney - 32)
        back_anime_pattern 201,back_x,back_y
      when 391..417
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 391
        @eney = STANDARD_ENEY + 4 * 26 if @battle_anime_frame == 391
        @enex = 900 if @battle_anime_frame == 391
        @output_anime_type = 1
        battle_anime_change 0,3
        @enex -= 24
        @eney -= 4
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        back_x = (@enex - 18)
        back_y = (@eney - 32)
        back_anime_pattern 201,back_x,back_y
      when 418
        @eney = -200
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 2702 #タード)ラッシュ
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 201,back_x,back_y
        battle_anime_change 0,0 if @battle_anime_frame == 128
      when 129
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ")    # 効果音を再生する
        
      when 139
        #battle_anime_change 0,3
      when 140..169
        
        @ax = 24
        #@chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        @ax = 24
        @output_anime_type = 0
        battle_anime_change 0,16
      when 181..185
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,0
      when 186..249
        @ax = 0
        strfra = 186
        akifra = 4
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          @gx = -8
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          @gx = 8
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          @gx = -8
          battle_anime_change 0,3
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          @gx = 8
          battle_anime_change 0,0
        when strfra + akifra * 4
          @gx = -8
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          @gx = 8
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          @gx = -8
          battle_anime_change 0,3
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          @gx = 8
          battle_anime_change 0,0
        when strfra + akifra * 8
          @gx = -8
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          @gx = 8
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          @gx = -8
          battle_anime_change 0,3
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @gx = 8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          @ax = -24
          @gx = 0 if @battle_anime_frame == strfra + akifra * 11+8
          Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == strfra + akifra * 11
        when strfra + akifra * 16
          @ax = 0
        when strfra + akifra * 17..strfra + akifra * 20
          @enex -= 24          
        when strfra + akifra * 21
          @output_anime_type = 1
          battle_anime_change 0,2
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "DB3 刀")
          
        when strfra + akifra * 22
          @ax = 0
          @output_anime_type = 1
          battle_anime_change 0,2
          @enex += 14
        end
      when 250..350
        @gx = 0
        battle_anime_change 1,0
        Audio.se_stop if @battle_anime_frame == 250
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 250
        @output_anime_type = 1
        battle_anime_change 0,2
        #back_x = 260
        #back_y = 88
        back_x = (@enex - 22)
        back_y = (@eney - 32)
        back_anime_pattern 201,back_x,back_y
      when 351..359
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 351
        @output_anime_type = 0 if @battle_anime_frame == 351
        battle_anime_change 0,16 if @battle_anime_frame == 351
        battle_anime_change 0,1 if @battle_anime_frame == 355
        @enex -= 24
      when 360
        @eney = -200
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
  when 2706 #ゾルト)ラッシュ
      back_x = 258
      back_y = 88
      akifra = 10
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129..299
        strfra = 129

        #back_anime_pattern 201,back_x,back_y
        
        if (@battle_anime_frame - strfra) % (akifra * 2) == 0 || (@battle_anime_frame - strfra) == 0
          fratype = 1
        elsif (@battle_anime_frame - strfra) % (akifra) == 0
          fratype = 2
        else
          fratype = 0
        end
        
        case fratype
        when 1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,1
        when 2
          battle_anime_change 0,2
        end
        rect = Rect.new(0, 96, 96, 96)
        if @enerect == rect
          back_anime_pattern 1
        end
        
      when 300
        set_chr_display_out
      when 331..510
        strfra = 331
        
        #back_anime_pattern 201,back_x,back_y
        
        if (@battle_anime_frame - strfra) % (akifra * 2) == 0 || (@battle_anime_frame - strfra) == 0
          fratype = 1
        elsif (@battle_anime_frame - strfra) % (akifra) == 0
          fratype = 2
        else
          fratype = 0
        end
        
        case fratype
        when 1
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波")    # 効果音を再生する
          battle_anime_change 0,1
          battle_anime_change 1,16
          @gx = -12
        when 2
          battle_anime_change 0,2
          #battle_anime_change 1,0
          @gx = 12
        end
        rect = Rect.new(0, 96, 96, 96)
        if @enerect == rect
          back_anime_pattern 1
        end
      when 511
        @eney = -200
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2707 #タード&ゾルト)ダブルアタック
       ray_x = 340-160
        ray_y = 96
        
        backhai_no = 102
        back_x = 194-160
        back_y = 32
        
      @ray_color = 3
      idougo = 212+24
      idouryou = 8
      case @battle_anime_frame
      
      when 0
        #set_chr_display_out
        #@tec_output_back = false
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        #@enex = CENTER_ENEX
        #@eney = STANDARD_ENEY
        @output_anime_type = 1
        battle_anime_change 0,3
        #@eney = -200
        #p @enex,CENTER_ENEX,STANDARD_ENEY -120
      when 1..39
        sframe = 1
        if @enedatenum == 178 #タード
          #@scombo_cha1 = 10
          if @battle_anime_frame <= 21
            @ax = -2
            #battle_anime_change 0,3
            #@ay = -5
          else
            @ax = 0
          end
        
          picture = Cache.picture("Z3_戦闘_必殺技_敵_ゾルド")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(CENTER_ENEX - 84,-520 + 16*(@battle_anime_frame-sframe),picture,rect)
          
          #picture = Cache.picture("Z3_戦闘_必殺技_敵_タード")
          #rect = Rect.new(0, 3*96,96,96)
          #@back_window.contents.blt(CENTER_ENEX+4,STANDARD_ENEY,picture,rect)
        
        else
          if @battle_anime_frame <= 23
            @ax = 2
            #battle_anime_change 0,3
            #@ay = -5
          else
            @ax = 0
          end
          picture = Cache.picture("Z3_戦闘_必殺技_敵_タード")
          rect = Rect.new(0, 3*96,96,96)
          @back_window.contents.blt(CENTER_ENEX+4,-520 + 16*(@battle_anime_frame-sframe),picture,rect)
        end
        
      when 40..59

        
        @eney = -200
        picture = Cache.picture("Z3_戦闘_必殺技_敵_ゾルド")
        rect = Rect.new(0, 3*96,96,96)
        @back_window.contents.blt(CENTER_ENEX - 84,STANDARD_ENEY,picture,rect)
          
        
        picture = Cache.picture("Z3_戦闘_必殺技_敵_タード")
        rect = Rect.new(0, 3*96,96,96)
        @back_window.contents.blt(CENTER_ENEX+4,STANDARD_ENEY,picture,rect)
        
        
      when 60..599
        Audio.se_play("Audio/SE/" + "DB3 SE041") if @battle_anime_frame == 60
        Audio.se_play("Audio/SE/" + "DB3 SE041") if @battle_anime_frame == 120
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5") if @battle_anime_frame == 180
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 240
        Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 400
        Audio.se_play("Audio/SE/" + "Z1 気を溜める") if @battle_anime_frame == 400
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == 520
        #ゾルド
        back_anime_pattern 201,CENTER_ENEX - 84 - 24,STANDARD_ENEY - 32 if @battle_anime_frame >= 180
        
        #タード
        back_anime_pattern 201,CENTER_ENEX+4 - 20,STANDARD_ENEY - 32 if @battle_anime_frame >= 180

        picture = Cache.picture("Z3_戦闘_必殺技_敵_ゾルド")
        rect = Rect.new(0, 3*96,96,96)
        rect = Rect.new(0, 4*96,96,96) if @battle_anime_frame >= 120
        rect = Rect.new(0, 5*96,96,96) if @battle_anime_frame >= 400
        rect = Rect.new(0, 6*96,96,96) if @battle_anime_frame >= 520
        @back_window.contents.blt(CENTER_ENEX - 84,STANDARD_ENEY,picture,rect)
          
        
        picture = Cache.picture("Z3_戦闘_必殺技_敵_タード")
        rect = Rect.new(0, 4*96,96,96)
        rect = Rect.new(0, 5*96,96,96) if @battle_anime_frame >= 400
        rect = Rect.new(0, 6*96,96,96) if @battle_anime_frame >= 520
        @back_window.contents.blt(CENTER_ENEX+4,STANDARD_ENEY,picture,rect)        
        
        if  @battle_anime_frame >= 240
          
          if  @battle_anime_frame < 400
            picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(赤)") #ダメージ表示用
            rect = Rect.new(32*@ray_anime_type, 0,32,32)
            #ゾルド
            @back_window.contents.blt(CENTER_ENEX - 84 + 38,STANDARD_ENEY + 60,picture,rect)
            #タード
            @back_window.contents.blt(CENTER_ENEX + 4 + 36,STANDARD_ENEY + 32,picture,rect)
            if @ray_anime_frame >= 4  && @ray_anime_type != 4
              @ray_anime_type += 1
              @ray_anime_frame = 0
            elsif @ray_anime_frame >= 4
              @ray_anime_type = 0
              @ray_anime_frame = 0
            end
            
          elsif  @battle_anime_frame < 520
            picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅大)(赤)") #ダメージ表示用
            rect = Rect.new(64*@ray_anime_type, 0,64,64)
            #玉
            @back_window.contents.blt(CENTER_ENEX + 4 + 36 - 58,STANDARD_ENEY + 32-14,picture,rect)
            if @ray_anime_frame >= 4  && @ray_anime_type != 4
              @ray_anime_type += 1
              @ray_anime_frame = 0
            elsif @ray_anime_frame >= 4
              @ray_anime_type = 0
              @ray_anime_frame = 0
            end
          else
            @ray_anime_type = 3 if @battle_anime_frame == 520
            @ray_anime_frame = 0 if @battle_anime_frame == 520
            picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用

            rect = Rect.new(@ray_anime_type*128, 0,128,128)
            @back_window.contents.blt(CENTER_ENEX + 4 + 36 - 58 - 32,STANDARD_ENEY + 32 - 14 - 32,picture,rect)
            if @ray_anime_frame >= 16 
              @ray_anime_type += 1
              @ray_anime_frame = 0
            end
          end
          
          @ray_anime_frame += 1
        end
      when 600
        set_chr_display_out
      when 601..627
        @ray_color = 4
        @tec_output_back_no = 0
        @effect_anime_pattern = 207
      when 628
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
   when 1708 #刀攻撃強(ジンジャー系)
      ray_x = 210
      ray_y = 118
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..60
        if $btl_progress >= 2
          battle_anime_change 0,11
        end
        back_anime_pattern 4
      when 61
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 刀")    # 効果音を再生する
        back_anime_pattern 4
      when 62..89
        battle_anime_change 0,3
        back_anime_pattern 4
      when 90
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
      when 91..100
        battle_anime_change 0,4
      when 101..110
        battle_anime_change 0,5
      when 111..120
        battle_anime_change 0,6
      when 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 126
        if $btl_progress >= 2
          @tec_output_back = false
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 127..408
        back_anime_pattern 1
        
        sfra = 127
        @output_anime_type = 1
        attack_se = "Z1 刀" 
        case @battle_anime_frame - sfra
        
        when 0..10
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          battle_anime_change 0,4
        when 11..20
          battle_anime_change 0,5
        when 21..30
          battle_anime_change 0,6
        when 31..40
          battle_anime_change 0,7
        when 41..50
          battle_anime_change 0,8
        when 51..60,71..80,91..100,111..120,131..140,151..160
          battle_anime_change 0,9
          
          if (@battle_anime_frame - sfra -1) % 10 == 0
            Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
            @effect_anime_pattern = 267
            @ray_anime_type = 0
            @ray_anime_frame = 0
          end
          
          if (@battle_anime_frame - sfra -1) % 10 == 0 || (@battle_anime_frame - sfra -2) % 10 == 0
            @chax -= 12
            battle_anime_change 1,16
          end
          if (@battle_anime_frame - sfra -3) % 10 == 0 || (@battle_anime_frame - sfra -4) % 10 == 0
            @chax += 12
          end
          if (@battle_anime_frame - sfra -5) % 10 == 0
            #battle_anime_change 1,0
          end
        when 61..70,81..90,101..110,121..130,141..150,161..170
          battle_anime_change 0,10
          if (@battle_anime_frame - sfra -1) % 10 == 0
            Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
            @effect_anime_pattern = 268
            @ray_anime_type = 0
            @ray_anime_frame = 0
          end
          if (@battle_anime_frame - sfra -1) % 10 == 0 || (@battle_anime_frame - sfra -2) % 10 == 0
            @chax -= 12
            #battle_anime_change 1,16
          end
          if (@battle_anime_frame - sfra -3) % 10 == 0 || (@battle_anime_frame - sfra -4) % 10 == 0
            @chax += 12
          end
          if (@battle_anime_frame - sfra -5) % 10 == 0
            battle_anime_change 1,0
          end
        when 171..250
          back_anime_pattern 4,@enex - 20,@eney - 62
          if (@battle_anime_frame - sfra) == 171
            battle_anime_change 0,7
            Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          end
        when 251..260
          if (@battle_anime_frame - sfra) == 251
            Audio.se_play("Audio/SE/" + "DB3 刀")    # 効果音を再生する
            
          end
          @enex -= 20
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          battle_anime_change 0,10
        when 261..290
          
        else
          #battle_anime_change 0,10
        end
        
        
      when 409
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 1709 #刀攻撃強(ニッキー系)
      ray_x = 210
      ray_y = 118
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 0
      when 1..60
        if $btl_progress >= 2
          battle_anime_change 0,11
        end
        back_anime_pattern 4
      when 61
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 刀")    # 効果音を再生する
        back_anime_pattern 4
      when 62..89
        battle_anime_change 0,3
        back_anime_pattern 4
      when 90
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
      when 91..100
        battle_anime_change 0,4
      when 101..110
        battle_anime_change 0,5
      when 111..120
        battle_anime_change 0,6
      when 125
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 126
        if $btl_progress >= 2
          @tec_output_back = false
          @tec_output_back_no = 0
        end
        if @attackcourse == 0
          @output_anime_type = 0
          @chay = -200 #キャラ画面範囲外へ
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
        else
          @eney = -200 #キャラ画面範囲外へ
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
        end
      when 127..408
        back_anime_pattern 1
        
        sfra = 127
        @output_anime_type = 1
        attack_se = "Z1 刀" 
        case @battle_anime_frame - sfra
        
        when 0..10
          @enex = CENTER_ENEX
          @eney = STANDARD_ENEY
          battle_anime_change 0,4
        when 11..20
          battle_anime_change 0,5
        when 21..30
          battle_anime_change 0,6
        when 31..40
          battle_anime_change 0,7
        when 41..50
          battle_anime_change 0,8
        when 51..60
          battle_anime_change 0,9
          if (@battle_anime_frame - sfra -1) % 10 == 0
            Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
            #p @effect_anime_pattern,@effect_anime_frame,@effect_anime_type
            @effect_anime_pattern = 268
            @ray_anime_type = 0
            @ray_anime_frame = 0
          end
          
          if (@battle_anime_frame - sfra -1) % 10 == 0 || (@battle_anime_frame - sfra -2) % 10 == 0
            @chax -= 12
            battle_anime_change 1,16
          end
          if (@battle_anime_frame - sfra -3) % 10 == 0 || (@battle_anime_frame - sfra -4) % 10 == 0
            @chax += 12
          end
          if (@battle_anime_frame - sfra -5) % 10 == 0
            #battle_anime_change 1,0
          end
        when 71..80,91..100,111..120,131..140,151..160
          battle_anime_change 0,8
          if (@battle_anime_frame - sfra -1) % 10 == 0
            Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
            
            @effect_anime_pattern = 268
            @ray_anime_type = 0
            @ray_anime_frame = 0
          end
          
          if (@battle_anime_frame - sfra -1) % 10 == 0 || (@battle_anime_frame - sfra -2) % 10 == 0
            @chax -= 12
            battle_anime_change 1,16
          end
          if (@battle_anime_frame - sfra -3) % 10 == 0 || (@battle_anime_frame - sfra -4) % 10 == 0
            @chax += 12
          end
          if (@battle_anime_frame - sfra -5) % 10 == 0
            #battle_anime_change 1,0
          end
        when 61..70,81..90,101..110,121..130,141..150,161..170
          battle_anime_change 0,10
          if (@battle_anime_frame - sfra -1) % 10 == 0
            Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
            @effect_anime_pattern = 267
            @ray_anime_type = 0
            @ray_anime_frame = 0
          end
          if (@battle_anime_frame - sfra -1) % 10 == 0 || (@battle_anime_frame - sfra -2) % 10 == 0
            @chax -= 12
            #battle_anime_change 1,16
          end
          if (@battle_anime_frame - sfra -3) % 10 == 0 || (@battle_anime_frame - sfra -4) % 10 == 0
            @chax += 12
          end
          if (@battle_anime_frame - sfra -5) % 10 == 0
            battle_anime_change 1,0
          end
        when 171..250
          back_anime_pattern 4,@enex - 20,@eney - 62
          if (@battle_anime_frame - sfra) == 171
            battle_anime_change 0,7
            Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          end
        when 251..260
          if (@battle_anime_frame - sfra) == 251
            Audio.se_play("Audio/SE/" + "DB3 刀")    # 効果音を再生する
            
          end
          @enex -= 20
          color = Color.new(255,255,255,260)
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          battle_anime_change 0,10
        when 261..290
          
        else
          #battle_anime_change 0,10
        end
        
        
      when 409
        @eney = -200
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 1710 #連続強力エネルギー波(サンショ系)
      
      if @all_attack_count == 1
        if @battle_anime_frame == 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める2")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 4
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 60 
          back_anime_pattern 4
        elsif @battle_anime_frame == 61
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,1
          @effect_anime_pattern = 18
          back_anime_pattern 4
        elsif @battle_anime_frame >= 62 && @battle_anime_frame <= 124
          back_anime_pattern 4
        elsif @battle_anime_frame == 125
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,6
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 18
          back_anime_pattern 4
          ray_x = 230+38
          ray_y = 104
        elsif @battle_anime_frame >= 126 && @battle_anime_frame <= 188
          ray_x = 230+38
          ray_y = 104
          back_anime_pattern 4
        elsif @battle_anime_frame == 189
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,1
          @effect_anime_pattern = 18
          back_anime_pattern 4
          @effect_anime_frame = 0
          @effect_anime_type = 0
        elsif @battle_anime_frame >= 190 && @battle_anime_frame <= 252
          back_anime_pattern 4
        elsif @battle_anime_frame == 253
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
          battle_anime_change 0,6
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @effect_anime_pattern = 18
          back_anime_pattern 4
          ray_x = 230+38
          ray_y = 104
        elsif @battle_anime_frame >= 254 && @battle_anime_frame <= 316
          ray_x = 230+38
          ray_y = 104
          back_anime_pattern 4
        elsif @battle_anime_frame == 317
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        elsif  @battle_anime_frame == 318
          if $btl_progress >= 2
            @tec_output_back_no = 0
          end
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 319 && @battle_anime_frame <= 345
          @effect_anime_pattern = 47
        elsif @battle_anime_frame == 346
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        @ray_color = 4
        if  @battle_anime_frame == 0
          if $btl_progress >= 2
            @tec_output_back_no = 0
          end
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -200 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 26
          @effect_anime_pattern = 47
        elsif @battle_anime_frame == 27
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
        
      end
    when 1711 #デッドゾーン
      if $btl_progress >= 2
          @tec_output_back = false
        end
      if @all_attack_count == 1
        
        case @battle_anime_frame
        when 0 #初期化
          
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 0
        when 1..10
          back_anime_pattern 13
          battle_anime_change 0,2
        when 11..20
          back_anime_pattern 13
          battle_anime_change 0,3
        when 21..30
          back_anime_pattern 13
          battle_anime_change 0,2
        when 31..40
          back_anime_pattern 13
          battle_anime_change 0,3
        when 41..50
          back_anime_pattern 13
          battle_anime_change 0,2
        when 51..60
          back_anime_pattern 13
          battle_anime_change 0,3
        when 61..70
          back_anime_pattern 13
          battle_anime_change 0,2
        when 71..100
          back_anime_pattern 13
          battle_anime_change 0,4
        when 101..200
          Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == 101   # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "DB3 気を溜める2") if @battle_anime_frame == 101   # 効果音を再生する
          @tec_output_back = true
          @chr_cutin = false
          @tec_output_back_no = 1
          @eney = -200
          #picture = Cache.picture("Z3_必殺技_ガーリック_デッドゾーン")
          #rect = Rect.new(0, 0,344,232)
          #@back_window.contents.blt(150,60,picture,rect)
          picture = Cache.picture("Z3_必殺技_ガーリック_デッドゾーン2")
          rect = Rect.new(0, 0,452,356)
          @back_window.contents.blt(96,0,picture,rect)
        when 201
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if $btl_progress >= 2
            @tec_output_back = false
            @tec_output_back_no = 0
          end
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        when 202..262
          back_anime_pattern 9
          
        when 263
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          if @attackcourse == 0
            @output_anime_type = 0
            @chay = -120 #キャラ画面範囲外へ
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @eney = -200 #キャラ画面範囲外へ
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 61
          back_anime_pattern 9
        elsif @battle_anime_frame == 62
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2713 #ロボット兵 バルカン砲
      ray_x = 210
      ray_y = 118
      case @battle_anime_frame
      
      when 0
        Audio.se_play("Audio/SE/" + "Z1 刀")
        @output_anime_type = 1
        battle_anime_change 0,1
      when 1..60
        
      when 61
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")
        battle_anime_change 0,2
        back_anime_pattern 214,282,134
        @enex += 12
        #@back_anime_frame = 1
      when 62..110
        back_anime_pattern 214,282,134
        @enex += 12
        #@back_anime_frame = 1
      when 111..179
        @back_anime_frame = 0 if @battle_anime_frame == 111
        back_anime_pattern 215,282,134
      when 180
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        @back_anime_frame = 0
      when 181
        set_chr_display_out
        #@attack_hit = false
      when 182..500
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波1") if @battle_anime_frame == 182
        back_anime_pattern 215,720,134
        @back_anime_frame = 36 if @back_anime_frame >= 36
        
        if @battle_anime_frame == 217 && @attack_hit == false
          @battle_anime_frame = 500
          
        end
        
        if @battle_anime_frame == 217
          Audio.se_play("Audio/SE/" + "Z1 強打") 
          battle_anime_change 1,16
        end

        @gx = 2 if @battle_anime_frame == 217
        @gx = -2 if @battle_anime_frame == 220
        @gx = 0 if @battle_anime_frame == 223
        
        if @battle_anime_frame == 285
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") 
          @effect_anime_pattern = 322
        end
        ray_x = 800 - ((@battle_anime_frame - 285) * 8)
        ray_x = 800 - ((349 - 285) * 8) if @battle_anime_frame >= 349
        ray_y = 134
        
        if @battle_anime_frame == 349
          @effect_anime_pattern = 323
          Audio.se_play("Audio/SE/" + "DB3 刀")
        end
        
        if @battle_anime_frame == 379
          #撃つ
          Audio.se_play("Audio/SE/" + "DB3 SE059")
          Audio.se_play("Audio/SE/" + "Z3 ダイナマイト爆発(最後なし)")
        end
        
      when 501
        @eney = -200
        Audio.se_stop
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2714 #メタルクウラコア エネルギー波
      ray_x = 260
      ray_y = 116
      case @battle_anime_frame
      
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
      when 60 #初期化
        Audio.se_play("Audio/SE/" + "Z1 怪光線")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @ray_color = 3
        
      when 61..100
        @effect_anime_pattern = 227
      when 141
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 145
        set_chr_display_out
      when 146..173
        @effect_anime_pattern = 234
        #@effect_anime_pattern = 228 if $cha_bigsize_on[@chanum] == true && @attackcourse == 1
        ray_y = 136
      when 174
        anime_pattern_fromat
        return @battle_anime_result + 1
      end

    when 2715 #メタルクウラコア クチエネルギー波
      #ray_big = true
        #back_x = 228
        #back_y = 88
      ray_x = 180
      ray_y = 90
      case @battle_anime_frame
      
      when 0 #初期化
        @output_anime_type = 1
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
      when 60 #初期化
        @output_anime_type = 1
        battle_anime_change 0,1
        Audio.se_play("Audio/SE/" + "Z1 気を溜める5")    # 効果音を再生する
       
        @ray_color = 3
        @genkitama_kanri_frame = []
        @genkitama_kanri_maxflame = 15
        @genkitama_kanri_spdup = 10
        @genkityuushin_x = 286
        @genkityuushin_y = 102
        
        @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
      when 61..188
        #p @battle_anime_frame
          tame_end = 185#125
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
          
      when 189
        #@ray_color = 3
        #@output_anime_type = 1
        Audio.se_stop
        

      when 190
        @ax = 0
      when 200
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        battle_anime_change 0,3
        @effect_anime_pattern = 233
      when 201..238
      when 239
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 249
        set_chr_display_out
      when 250..275
        #if ray_big == true
          @effect_anime_pattern = 240
        #else
        #  @effect_anime_pattern = 234
        #end
      when 276
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2716 #エネルギー吸収
        
      if @all_attack_count == 1

        back_x = 180
        back_y = 0
        ray_x = 178
        ray_y = 84
        
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "DB3 SE096")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          @output_anime_type = 1
          battle_anime_change 0,2
        when 1..60 #ケーブル発動
          @effect_anime_pattern = 327
          @enex += 8
        when 61..159 #ケーブル伸びる
          @effect_anime_frame = 1 if @battle_anime_frame == 61
          @effect_anime_pattern = 328
        when 160
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          @back_anime_frame = 0
        when 161
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 SE096")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
        when 162..232
          ray_y = 116
          ray_x = 780
          @effect_anime_pattern = 329
        when 233
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "DB3 SE096")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "DB3 エネルギー波1")
          Audio.se_play("Audio/SE/" + "Z1 ザー")
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          @tec_output_back = true
        when 1..71
          ray_y = 116
          ray_x = 780
          @effect_anime_pattern = 329
        when 72
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2717 #スーパービッグノヴァ
        
      if @all_attack_count == 1
        
        
        back_x = 180
        back_y = 0
        ray_x = 0#(640-246)
        ray_y = 0
        
        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + "Z1 気を溜める5(長い)")    # 効果音を再生する
          #@output_anime_type = 1
          #battle_anime_change 0,5
          @ray_color = 0
          @eney = -160 
          @chr_cutin_flag = false
          @genkitama_kanri_frame = []
          @genkitama_kanri_maxflame = 40
          @genkitama_kanri_spdup = 25
          @genkityuushin_x = 180
          @genkityuushin_y = 70
          @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
        when 1..220
          picture = Cache.picture("Z3_必殺技_スーパービッグノヴァ(メタルクウラ・コア)")
          rect = Rect.new(0, 0,242,222)
          @back_window.contents.blt(200,100,picture,rect)

          
          #ray_x = @genkityuushin_x - 12
          #ray_y = @genkityuushin_y - 12
          tame_end = 300
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #左
                  idou_x = 4
                  idou_y = 2

                when 1 #左下
                  idou_x = 2
                  idou_y = 4

                when 2 #左足元
                  idou_x = 4
                  idou_y = 4
                  
                when 3 #右足元
                  idou_x = -2
                  idou_y = 4
                  
                when 4 #右下
                  idou_x = -4
                  idou_y = 4
                when 5 #右
                  idou_x = -4
                  idou_y = 2
                when 6 #左上
                  idou_x = 4
                  idou_y = 0
                when 7 #左上
                  idou_x = 4
                  idou_y = -2
                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(4) == 0
                end
                
              end
            end
            if @battle_anime_frame == 60
              @effect_anime_pattern = 324
            end
          end
        when 221..286 #発動
          if @battle_anime_frame == 221
            @effect_anime_frame = 0 
            Audio.se_stop
            Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
            Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
            @tec_output_back_no = 0
            @eney = STANDARD_ENEY
            @output_anime_type = 1
            battle_anime_change 0,4
            @effect_anime_pattern = 325
          end
          
          ray_x = 62
          ray_y = -276
        
          @effect_anime_pattern = 0 if @battle_anime_frame == 286
        when 287
          #Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          @tec_output_back_no = 0
          @tec_back_small = true
        when 288..334
          ray_x = 640
          ray_y = -200
          @effect_anime_pattern = 326
        when 335
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2

        case @battle_anime_frame
        
        when 0
          Audio.se_play("Audio/SE/" + "Z1 衝撃波")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
          set_chr_display_out
          @tec_output_back_no = 0
          @tec_back_small = true
          @tec_output_back = true
        when 1..46
          ray_x = 640
          ray_y = -200
          @effect_anime_pattern = 326
        when 47
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2723 #カタナ攻撃(タオパイパイ
      back_x = 248
      back_y = 88
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "Z3 変身")    # 効果音を再生する
        @output_anime_type = 0
        @ray_color = 3
        battle_anime_change 0,0
      when 1..128
        back_anime_pattern 201,back_x,back_y
      when 129
        Audio.se_stop
        
        
      when 139
        battle_anime_change 0,16
      when 140..169
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 140
        @ax = 24
        @chr_cutin_flag = false if @battle_anime_frame == 169
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        @ax = 24
        @output_anime_type = 0
        battle_anime_change 0,16
      when 181..185
        @ax = 16
        @output_anime_type = 0
        battle_anime_change 0,1
      when 186..310
        @ax = 0
        strfra = 186
        akifra = 3
        @effect_anime_frame = 0
        @effect_anime_pattern = 123 if @battle_anime_frame <= strfra + akifra * 11
        ray_x = 266
        ray_y = 148
        raytyouseiy = 32
        case @battle_anime_frame
        when strfra + akifra * 0
          battle_anime_change 1,16
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 0
        when strfra + akifra * 1
          battle_anime_change 0,0
        when strfra + akifra * 2..strfra + akifra * 3-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 2
        when strfra + akifra * 3
          battle_anime_change 0,0
        when strfra + akifra * 4
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 4
        when strfra + akifra * 5
          battle_anime_change 0,0
        when strfra + akifra * 6..strfra + akifra * 7-1
          battle_anime_change 0,4
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 6
        when strfra + akifra * 7
          battle_anime_change 0,0
        when strfra + akifra * 8
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 8
        when strfra + akifra * 9
          battle_anime_change 0,0
        when strfra + akifra * 10..strfra + akifra * 11-1
          battle_anime_change 0,2
          ray_y += raytyouseiy
          Audio.se_play("Audio/SE/" + "Z1 打撃") if @battle_anime_frame == strfra + akifra * 10
        when strfra + akifra * 11..strfra + akifra * 11+8
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          battle_anime_change 0,0
          @ax = -8
        when strfra + akifra * 16
          @ax = 0
          
          @output_anime_type = 1
          battle_anime_change 0,2
          @enex +=12
        when strfra + akifra * 20
          #color = Color.new(255,255,255,260)
          #@back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
          Audio.se_play("Audio/SE/" + "DB3 SE041") if @battle_anime_frame == (strfra + akifra * 20)
          battle_anime_change 0,3
        when strfra + akifra * 27..strfra + akifra * 29
          @enex -= 24
          if @battle_anime_frame >= strfra + akifra * 27
            color = Color.new(255,255,255,260)
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color)
            Audio.se_play("Audio/SE/" + "DB3 刀") if strfra + akifra * 27 == @battle_anime_frame
            battle_anime_change 0,4
            @enex -= 12
          end
        when strfra + akifra * 30
          @ax = 0
        end
       
      when 311..339
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 311
        battle_anime_change 0,0
        @enex -= 14 if @battle_anime_frame == 311
        @enex -= 24
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0

      when 340
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=begin
      case @battle_anime_frame
      
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "DB3 SE041")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
        @enex +=12
      when 60
        Audio.se_play("Audio/SE/" + "DB3 刀")    # 効果音を再生する
        battle_anime_change 0,3
      when 120 #
        Audio.se_play("Audio/SE/" + "Z3 剣攻撃")    # 効果音を再生する
        battle_anime_change 0,4
        @enex -12
        @ray_color = 0
      when 121..160
        @effect_anime_pattern = 267
        ray_x = 228
        ray_y = 134
      when 161
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      when 165
        set_chr_display_out
      when 166..195
        #@effect_anime_pattern = 202
      when 196
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
=end

    when 2763 #チルド 爆発波
      @ray_color = 3
      

      back_x = 246
      back_y = 86
      backhai_no = 201
      se_name = "Z3 変身"

      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,2
          @ray_color = 3
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          battle_anime_change 0,2
          back_anime_pattern backhai_no,back_x,back_y
        when 91..140
          back_anime_pattern backhai_no,back_x,back_y
        when 141
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          battle_anime_change 0,4
          @effect_anime_pattern = 229
          #back_anime_pattern 101,back_x,back_y
        when 142..179
          #back_anime_pattern 101,back_x,back_y
        when 180
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 190
          set_chr_display_out
        when 191..217
          @effect_anime_pattern = 230
        when 218
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z1 ゴー")    # 効果音を再生する
          #@effect_anime_frame = 27
          @effect_anime_pattern = 230
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 25
          @effect_anime_pattern = 230
        elsif @battle_anime_frame == 26
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2773 #超体当たり パイクーハン

        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
        @ray_color = 3

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
      when 1..89
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 90
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z1 高速移動")    # 効果音を再生する
        @eney = -200 #キャラ画面範囲外へ
        @chax = CENTER_CHAX+20
        
      when 91..130
          #back_x = 220
          #back_y = 32
          back_anime_pattern backhai_no,back_x,back_y
        if @battle_anime_frame % 4 == 0
          picture = Cache.picture("戦闘アニメ") #ダメージ表示用
          rect = Rect.new(0, 48,64,64)
          @back_window.contents.blt(@chax + 20,144,picture,rect)
        else
          
        end
      when 131
        set_chr_display_out
        Audio.se_play("Audio/SE/" + "Z1 逃げる")    # 効果音を再生する
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2")    # 効果音を再生する
          @chax = CENTER_CHAX
          @chay = STANDARD_CHAY
      when 132..159
        #back_anime_pattern 1
        @effect_anime_pattern = 350
      when 160
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2775 #サンダーフラッシュ パイクーハン

        back_x = 242
        back_y = 86
        backhai_no = 201
        se_name = "Z3 変身"
        

      case @battle_anime_frame
      when 0 #初期化
        @ray_color = 3
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,2
      when 1..89
        #back_x = 220
        #back_y = 32
        back_anime_pattern backhai_no,back_x,back_y
      when 90..190
        sframe = 90
        kirikaefre = 16
        
        case (@battle_anime_frame - sframe)
        
        when 0 * kirikaefre 
          Audio.se_stop
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        when 1 * kirikaefre 
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        when 2 * kirikaefre 
          battle_anime_change 0,5
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        when 3 * kirikaefre 
          battle_anime_change 0,6
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        when 4 * kirikaefre 
          battle_anime_change 0,7
          Audio.se_play("Audio/SE/" + "DB3 刀")
        end
      when 191..260
        sframe = 191
        Audio.se_play("Audio/SE/" + "DB3 SE103") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "DB3 エネルギー波2") if @battle_anime_frame == sframe
        @ray_color = 0
        ray_x = 288
        ray_y = 102
        #@effect_anime_pattern = 295
        @effect_anime_pattern = 256
      when 261
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        set_chr_display_out
      when 262..289
        ray_x = 288
        ray_y = 102
        #back_anime_pattern 1
        @effect_anime_pattern = 265
      when 290
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2779 #カメハメ波(ブウ)
      ray_x = 200
      ray_y = 134
      if @battle_anime_frame == 0 #初期化
        Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,5
        @ray_color = 0
      elsif @battle_anime_frame >= 41 && @battle_anime_frame <= 45
        battle_anime_change 0,6
      elsif @battle_anime_frame == 46
        Audio.se_stop
        Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
      elsif @battle_anime_frame >= 47 && @battle_anime_frame <= 75
        @effect_anime_pattern = 203
        case @battle_anime_frame
        
        when 47..49
          @ax = 2
        when 50..52
          @ax = -2
        when 53
          @ax = 0
        end
        
      elsif @battle_anime_frame == 76
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
      elsif  @battle_anime_frame == 80
        set_chr_display_out
      elsif @battle_anime_frame >= 81 && @battle_anime_frame <= 107
        @effect_anime_pattern = 204
      elsif @battle_anime_frame == 108
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2780 #巻きつき攻撃(ブウ)
      ray_x = 274
      ray_y = 118
      case @battle_anime_frame #初期化
      
      when 0
        Audio.se_play("Audio/SE/" + "DB3 SE041")
        #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,7
        @ray_color = 0
      when 31..90
        sframe = 31
        Audio.se_play("Audio/SE/" + "DB3 SE061") if @battle_anime_frame == sframe
        battle_anime_change 0,2
        
        @effect_anime_frame = 0
        
        case (@battle_anime_frame - sframe)
          
        when 0
          @effect_anime_pattern = 351
        when 16
          @effect_anime_type = 1
        when 24
          @effect_anime_type = 2
        when 32
          @effect_anime_type = 3
        end
      when 91..120
        sframe = 91
        Audio.se_play("Audio/SE/" + "Z1 ブン") if @battle_anime_frame == sframe
        battle_anime_change 0,8
        @effect_anime_type = 4
        ray_x = 274
        ray_y = 120
      when 121..159
        sframe = 121
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        battle_anime_change 0,9
        @enex -= 16
      when 160
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
        @effect_anime_type = 4
        Audio.se_play("Audio/SE/" + "DB3 SE096")
      when 161..187
        @effect_anime_pattern = 351
        ray_x = 640
        ray_y = 120
        
        
      when 188
        sframe = 188
        if @battle_anime_frame == sframe && @attack_hit == false
          @battle_anime_frame = 264
          @effect_anime_pattern = 0
        else
          Audio.se_play("Audio/SE/" + "DB3 SE041")
        end
        battle_anime_change 1,16
        @eney = STANDARD_ENEY
        @enex = 640
        ray_x = @chax
        ray_y = @chay
        @effect_anime_type = 5
        @effect_anime_frame = 0
        
        if $cha_bigsize_on[@chanum.to_i] == true
          ray_x -= 96
          ray_y -= 32
          @effect_anime_type = 0
          @effect_anime_pattern = 354
        end
        
      when 189..208
        @effect_anime_frame = 0
        sframe = 189
        #p @chax,@chay
        ray_x = 240 #@chax
        ray_y = 120 #@chay
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        @enex -= 16
        battle_anime_change 0,9
        
        if $cha_bigsize_on[@chanum.to_i] == true
          ray_x -= 96
          ray_y -= 32
          @effect_anime_type = 0
          @effect_anime_pattern = 354
        end
        
      when 209..250
        sframe = 209
        battle_anime_change 0,10
        Audio.se_play("Audio/SE/" + "ZG 打撃2") if @battle_anime_frame == sframe
        #@chax -= 16
        @chay =  -300
        #@chax -= 16
        #@chay -= 8
        ray_x = 240 - (16 * (@battle_anime_frame - sframe))
        ray_y = 120 - 8 * (@battle_anime_frame - sframe)
        @effect_anime_type = 6
        @effect_anime_frame = 0
        battle_anime_change 1,16
        if $cha_bigsize_on[@chanum.to_i] == true
          ray_x -= 128
          ray_y -= 48
          @effect_anime_pattern = 354
          @effect_anime_type = 1
        end
      when 251..264
        sframe = 251
        ray_x = 640 - (16 * (@battle_anime_frame - sframe))
        ray_y = 240 - (8 * (@battle_anime_frame - sframe))
        if @battle_anime_frame == sframe
          @eney = -88
          @enex = CENTER_CHAX
          battle_anime_change 0,11
        end
        
        if $cha_bigsize_on[@chanum.to_i] == true
          ray_x -= 240
          ray_y -= 48

          #@chax = ray_x + 96
          #@chay = ray_y
          
        end
        
        @eney += 12
      when 265
        @chay = 120
        @eney = -200
        battle_anime_change 1,17
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2781 #お菓子光線(ブウ)
      ray_x = 192
      ray_y = 110
      case @battle_anime_frame #初期化
      
      when 0
        Audio.se_play("Audio/SE/" + "DB3 SE075")
        @output_anime_type = 1
        battle_anime_change 0,12
        
        @ray_color = 0
      when 1..36
        picture = Cache.picture("Z3_戦闘_必殺技_お菓子光線_前中後繋ぎ")
        rect = Rect.new(608 - 48, 0, 48, 52) #発動側
        @back_window.contents.blt(ray_x + 48,ray_y,picture,rect)
        rect = Rect.new(0, 0, 48, 52) #ヒット側
        @back_window.contents.blt(ray_x - RAY_SPEED*@effect_anime_frame,ray_y,picture,rect)
        rect = Rect.new(48, 0, RAY_SPEED*@effect_anime_frame, 52) #中
        @back_window.contents.blt(ray_x + 48 - RAY_SPEED*@effect_anime_frame,ray_y,picture,rect)
        @effect_anime_frame += 1
      when 37
        @effect_anime_pattern = 0
        @effect_anime_frame = 0
        @effect_anime_type = 0
        set_chr_display_out
      when 38..64
        ray_y = 124
        @effect_anime_pattern = 352
      when 65
        anime_pattern_fromat
        #Audio.se_play("Audio/SE/" + "Z3 稲妻")
        return @battle_anime_result + 1
      end
    when 2782 #ブウ 超爆発波
      @ray_color = 3
      

      back_x = 254
      back_y = 86
      backhai_no = 201
      se_name = "Z3 変身"

      ray_x = 270
      ray_y = 96
      if @all_attack_count == 1

        case @battle_anime_frame
        when 0 #初期化
          Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
          @output_anime_type = 1
          battle_anime_change 0,4
          @ray_color = 3
        when 1..89
          back_anime_pattern backhai_no,back_x,back_y
        when 90 #初期化
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める5")
          #Audio.se_play("Audio/SE/" + "Z1 気を溜める")    # 効果音を再生する
          #battle_anime_change 0,2
          #back_anime_pattern backhai_no,back_x,back_y
          @enex = -200
          #@tec_output_back_no = 0
          #@tec_back_small = false
          @tec_output_back = false
        when 91..210
          sframe = 91
          back_anime_pattern 219,176,0
          picture = Cache.picture("Z3_必殺技_超爆発波_1_ブウ溜め")
          rect = Rect.new(0, 0, 300, 300) #発動側
          @back_window.contents.blt(176,0,picture,rect)
          
          picture = Cache.picture("Z3_必殺技_超爆発波_岩")
          rect = Rect.new(0, 0, 300, 160) #発動側
          @back_window.contents.blt(130,240-(@battle_anime_frame - sframe)*6,picture,rect)
          @back_window.contents.blt(160,240-(@battle_anime_frame - sframe)*4,picture,rect)
          case (@battle_anime_frame - sframe)
          
          when 92..99
            color = Color.new(64,64,64,260)
          when 100..107
            color = Color.new(128,128,128,260)
          when 108..115
            color = Color.new(192,192,192,260)
          when 116..130 
            color = Color.new(255,255,255,260)
          end
          @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_ON,color) if 92 <= (@battle_anime_frame - sframe)
        when 211..349
          sframe = 211
          Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
          picture = Cache.picture("Z3_必殺技_超爆発波_2_ブウ発動")
          rect = Rect.new(0, 0, 300, 300) #発動側
          @back_window.contents.blt(176,0,picture,rect)
          back_anime_pattern 220,0,0
          #@tec_output_back_no = 0
          #@tec_output_back = true
          #@tec_back_small = true
        when 350
          #Audio.se_stop
          set_chr_display_out
        when 351..397
          sframe = 351
          #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
          #Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == sframe
          back_anime_pattern 1
        when 398
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      elsif @all_attack_count >= 2
        
        if @battle_anime_frame == 0
          sframe = 0
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
          Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == sframe
          #@effect_anime_frame = 27
          @effect_anime_pattern = 0
          @output_anime_type = 0
          if @attackcourse == 0
            @enex = CENTER_ENEX
            @eney = STANDARD_ENEY
          else
            @chax = CENTER_CHAX
            @chay = STANDARD_CHAY
          end
        elsif @battle_anime_frame >= 1 && @battle_anime_frame <= 47
          back_anime_pattern 1
        elsif @battle_anime_frame == 48
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2788 #ラッシュ(オゾット(変身))
      ray_x = 274
      ray_y = 118
      back_x = 172
      back_y = 30
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "ZG 気をためる")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 221,back_x,back_y
      when 129
        Audio.se_stop
        
        
      when 139
        @output_anime_type = 0
        battle_anime_change 0,16
      when 140..169
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == 140
        @ax = 28
      when 170
        
        @ax = 0
        set_chr_display_out
        @enex = STANDARD_ENEX
        @eney = STANDARD_ENEY
      when 171..180
        @ax = 28
        @output_anime_type = 0
        battle_anime_change 0,16
      when 181..368
        @ax = 0
        sframe = 181
        @effect_anime_frame = 0
        frapattern1 = 24
        sepattern1 = "Z1 強打"
        frapattern2 = 16
        frapattern3 = 8
        frapattern4 = 4
        #攻撃側
        case (@battle_anime_frame - sframe)
        
        when frapattern1 * 0
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 1
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 2
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 1
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 2
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 3
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 1
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 2
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 3
          battle_anime_change 0,1
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4
          battle_anime_change 0,2
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 1
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 2
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 3
          battle_anime_change 0,3
          Audio.se_play("Audio/SE/" + sepattern1)
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 4
          battle_anime_change 0,4
          Audio.se_play("Audio/SE/" + sepattern1)
        end
       
        #防御側
        backframe = 3
        backframe2 = 1
        case (@battle_anime_frame - sframe)
        
        when frapattern1 * 0..frapattern1 * 0 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 0 + backframe + 1..frapattern1 * 0 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 1..frapattern1 * 1 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 1 + backframe + 1..frapattern1 * 1 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 2..frapattern1 * 2 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 2 + backframe + 1..frapattern1 * 2 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3..frapattern1 * 3 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3 + backframe + 1..frapattern1 * 3 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 1..frapattern1 * 3 + frapattern2 * 1 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 1 + backframe + 1..frapattern1 * 3 + frapattern2 * 1 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 2..frapattern1 * 3 + frapattern2 * 2 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 2 + backframe + 1..frapattern1 * 3 + frapattern2 * 2 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 3..frapattern1 * 3 + frapattern2 * 3 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 3 + backframe + 1..frapattern1 * 3 + frapattern2 * 3 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4..frapattern1 * 3 + frapattern2 * 4 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + backframe + 1..frapattern1 * 3 + frapattern2 * 4 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 1 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 1 + backframe + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 1 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 2..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 2 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 2 + backframe + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 2 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 3..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 3 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 3 + backframe + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 3 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + backframe
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 4 + backframe + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + backframe * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 1 + backframe2
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 1 + backframe2 + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 1 + backframe2 * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 2..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 2 + backframe2
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 2 + backframe2 + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 2 + backframe2 * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 3..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 3 + backframe2
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 3 + backframe2 + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 3 + backframe2 * 2 + 1
          battle_anime_change 1,16
          @chax += 16
        when frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 4..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 4 + backframe2
          battle_anime_change 1,16
          @chax -= 16
        when frapattern1 * 3  + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 4 + backframe2 + 1..frapattern1 * 3 + frapattern2 * 4 + frapattern3 * 4 + frapattern4 * 4 + backframe2 * 2 + 1
          battle_anime_change 1,16
          @chax += 16
          
        end
      when 369..388
        sframe = 369
        idou_x = 8
        idou_addx = 0
        Audio.se_play("Audio/SE/" + "ZG 気をためる") if @battle_anime_frame == sframe
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,16
        idou_addx = idou_x * (1 + @battle_anime_frame - sframe)
        @enex += idou_x
        back_anime_pattern 221,back_x + idou_addx + 40,back_y
      when 389..432
        sframe = 389
        idou_x = 8
        idou_addx = idou_x * 20
        back_anime_pattern 221,back_x + idou_addx + 40,back_y
      when 433..440
        sframe = 433
        Audio.se_play("Audio/SE/" + "Z1 飛ぶ") if @battle_anime_frame == sframe
        idou_x = 8
        idou_addx = idou_x * 20
        idou_x = 24
        idou_addx -= (idou_x * (1 + @battle_anime_frame - sframe))
        @enex -= idou_x
        back_anime_pattern 221,back_x + idou_addx + 40,back_y
        
        
      when 441
        battle_anime_change 0,4
        @tec_kyouda_se = true
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2789 #イグナイトビジョン(オゾット／オゾット変身)
        #back_x = 222
        #back_y = 60
        ray_x = CENTER_CHAX
        ray_y = STANDARD_CHAY
        color = Color.new(255,255,255,260)
        
        #恐らくここにないからエラー
        sisinkizyun = 2
        akizyouge = 146
        purasuryou = 20
        kat_haitiiti = akizyouge
        
      if @all_attack_count == 1
        case @battle_anime_frame
        when 0 #初期化
          #@output_anime_type = 1
          #battle_anime_change 0,3
          @ray_color = 0
        when 1
          #@chr_cutin = true
          #@tec_output_back = false
          #battle_anime_change 0,2
          @effect_anime_pattern = 0
          @effect_anime_frame = 0
          @effect_anime_type = 0
        when 2..120
          
          #sisinkizyun = 2
          #akizyouge = 146
          #purasuryou = 20
          #kat_haitiiti = akizyouge
          
          if @battle_anime_frame < sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2 - 10
          
            if @enedatenum == 154 #オゾット
              picture = Cache.picture("Z3_必殺技_カットイン_イグナイトビジョン(オゾット)")
            else #253
              picture = Cache.picture("Z3_必殺技_カットイン_イグナイトビジョン(オゾット変身)")
            end
            rect = Rect.new(0, 64*0, 640, 64)
          else
            picture = Cache.picture("Z3_敵カットイン")
            rect = Rect.new(0, 64*(@enedatenum-101), 640, 64)
          end

          if @battle_anime_frame <= sisinkizyun + purasuryou
            @enex += 32
            @back_window.contents.blt(-640+32*(@battle_anime_frame-sisinkizyun),kat_haitiiti,picture,rect)
          else
            if @battle_anime_frame >= sisinkizyun + purasuryou
              Audio.se_play("Audio/SE/" + "Z1 衝撃波") if @battle_anime_frame == sisinkizyun + purasuryou +1
              Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == sisinkizyun + purasuryou +1
              Audio.se_play("Audio/SE/" + "Z2 吹っ飛ぶ") if @battle_anime_frame == sisinkizyun + purasuryou +1
              @back_window.contents.blt(0,kat_haitiiti,picture,rect)
            end
          end
          
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2,sisinkizyun + purasuryou+30..sisinkizyun + purasuryou+30+2,sisinkizyun + purasuryou+40..sisinkizyun + purasuryou+40+2,sisinkizyun + purasuryou+50..sisinkizyun + purasuryou+50+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 130
          @chr_cutin = true
          @chr_cutin_flag = true
          @chr_cutin_mirror_flag = true
        when 131
          set_chr_display_out
        when 141..181
          sisinkizyun = 101
          purasuryou = 10
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 182
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      else
        case @battle_anime_frame
        
        when 0
          Audio.se_play("Audio/SE/" + "Z1 衝撃波") if @battle_anime_frame == sisinkizyun + purasuryou +1
          Audio.se_play("Audio/SE/" + "Z1 怪しい気") if @battle_anime_frame == sisinkizyun + purasuryou +1
          Audio.se_play("Audio/SE/" + "Z2 吹っ飛ぶ")    # 効果音を再生する
          set_chr_display_out
          
        when 1..41
          sisinkizyun = 1
          purasuryou = 10
          case @battle_anime_frame
          
          when sisinkizyun + purasuryou..sisinkizyun + purasuryou+2,sisinkizyun + purasuryou+10..sisinkizyun + purasuryou+10+2,sisinkizyun + purasuryou+20..sisinkizyun + purasuryou+20+2
            @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color)
          end
        when 42
          anime_pattern_fromat
          return @battle_anime_result + 1
        end
      end
    when 2790 #オゾット変身(カオスバースト)
      @ray_color = 3
      

      back_x = 254
      back_y = 86
      backhai_no = 201
      se_name = "Z3 変身"

      ray_x = 274
      ray_y = 118
      back_x = 172
      back_y = 30
        
      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + "ZG 気をためる")    # 効果音を再生する
        @output_anime_type = 1
        @ray_color = 3
        battle_anime_change 0,2
      when 1..128
        back_anime_pattern 221,back_x,back_y
      when 129..330
        sframe = 129
        if @battle_anime_frame == sframe
          #@tec_output_back = false
          @tec_output_back_no = 1
          #@tec_back_color = 3
          @chr_cutin = false
          #@chr_cutin_flag = true
          #@chr_cutin_mirror_flag = true
          @enex = -200
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
          Audio.se_play("Audio/SE/" + "ZG 気をためる2")

          @genkitama_kanri_frame = []
          @genkitama_kanri_maxflame = 15
          @genkitama_kanri_spdup = 10
          @genkityuushin_x = ray_x +40
          @genkityuushin_y = ray_y +76
          
          @genkitama_kanri_frame = [0,0,0,0,0,0,0,0]
        end
        #back_anime_pattern 219,176,0
        picture = Cache.picture("Z3_必殺技_カオスバースト(オゾット変身)")
        rect = Rect.new(0, 0, 512, 224) #発動側
        @back_window.contents.blt(66,50,picture,rect)

          tame_end = 350
          
          if @battle_anime_frame == tame_end
            
          elsif @battle_anime_frame >= tame_end
            
          else
            #picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
            #rect = Rect.new(0, 0, 8, 10)
            #@back_window.contents.blt(@genkityuushin_x,@genkityuushin_y,picture,rect)
            
            for i in 0..(@genkitama_kanri_frame.size - 1)
              if @genkitama_kanri_frame[i] >= @genkitama_kanri_maxflame
                @genkitama_kanri_frame[i] = 0
              elsif @genkitama_kanri_frame[i] > 0
                picture = Cache.picture("Z3_戦闘_必殺技_超元気玉(元気)") #ダメージ表示用
                rect = Rect.new(0, 0, 8, 10)
                #idou_x_moto = 4
                #idou_y_moto = 2
                case i

                when 0 #上
                  idou_x = 0
                  idou_y = -2

                when 1 #左上
                  idou_x = 2
                  idou_y = -2

                when 2 #左
                  idou_x = 2
                  idou_y = 0
                  
                when 3 #左下
                  idou_x = 2
                  idou_y = 2
                  
                when 4 #下
                  idou_x = 0
                  idou_y = 2
                  
                when 5 #右下
                  idou_x = -2
                  idou_y = 2

                when 6 #右
                  idou_x = -2
                  idou_y = 0
                  
                when 7 #右上
                  idou_x = -2
                  idou_y = -2

                end
                
                  idou_x_goukei = idou_x*@genkitama_kanri_spdup+idou_x*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
                  idou_y_goukei = idou_y*@genkitama_kanri_spdup+idou_y*2*(@genkitama_kanri_maxflame-@genkitama_kanri_spdup-1)
            
                if @genkitama_kanri_frame[i] <= @genkitama_kanri_spdup
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei)+@genkitama_kanri_frame[i] * idou_x,(@genkityuushin_y+idou_y_goukei)-@genkitama_kanri_frame[i] * idou_y,picture,rect)
                else
                  @back_window.contents.blt((@genkityuushin_x-idou_x_goukei+@genkitama_kanri_spdup*idou_x)+(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_x*2),(@genkityuushin_y+idou_y_goukei-@genkitama_kanri_spdup*idou_y)-(@genkitama_kanri_frame[i]-@genkitama_kanri_spdup) * (idou_y*2),picture,rect)
                end
                @genkitama_kanri_frame[i] += 1
                
              else
                if (tame_end - @battle_anime_frame) > @genkitama_kanri_maxflame
                  @genkitama_kanri_frame[i] = 1 if rand(7) == 0
                end
                
              end
            end
          end
      when 331..350
        color3 = Color.new(255,255,255,260)
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color3)
        #@tec_output_back_no = 4
      when 351..470
        sframe = 351
        itiy = 54
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        
        picture = Cache.picture("Z3_必殺技_カオスバースト(オゾット変身)")
        rect = Rect.new(0, 0, 512, 224) #発動側
        @back_window.contents.blt(66,50,picture,rect)
        
        picture = Cache.picture("ZG_必殺技_光線_大(青)")
        rect = Rect.new(0, 0,316,158)
        @back_window.contents.blt(162,itiy+126,picture,rect)
      when 479
        @tec_output_back_no = 0
      when 480
        #Audio.se_stop
        set_chr_display_out
        
      when 481..506
        sframe = 481
        #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == sframe
        @effect_anime_pattern = 353
      when 507
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    when 2793 #オゾット(カオスバースト)
      @ray_color = 3
 
      back_x = 250
      back_y = 86
      backhai_no = 201
      se_name = "Z3 変身"

      ray_x = 270
      ray_y = 96

      case @battle_anime_frame
      when 0 #初期化
        Audio.se_play("Audio/SE/" + se_name)    # 効果音を再生する
        @output_anime_type = 1
        battle_anime_change 0,0
        @ray_color = 3
      when 1..128
        back_anime_pattern backhai_no,back_x,back_y
      when 129..250
        sframe = 129
        if @battle_anime_frame == sframe
          #@tec_output_back = false
          @tec_output_back_no = 1
          #@tec_back_color = 3
          @chr_cutin = false
          #@chr_cutin_flag = true
          #@chr_cutin_mirror_flag = true
          @enex = -200
          Audio.se_stop
          Audio.se_play("Audio/SE/" + "Z1 気を溜める6")
          Audio.se_play("Audio/SE/" + "Z1 気を溜める7")
          Audio.se_play("Audio/SE/" + "Z1 怪しい気")
          
        end
        #back_anime_pattern 219,176,0
        picture = Cache.picture("Z3_必殺技_カオスバースト(オゾット)")
        rect = Rect.new(0, 0, 350, 222) #発動側
        @back_window.contents.blt(142,50,picture,rect)

      when 251..270
        color3 = Color.new(255,255,255,260)
        @back_window.contents.fill_rect(0,0,640,FLASH_Y_SIZE_CUTIN_OFF,color3)
        #@tec_output_back_no = 4
      when 271..390
        sframe = 271
        itiy = 54
        Audio.se_stop if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        
        picture = Cache.picture("Z3_必殺技_カオスバースト(オゾット)")
        rect = Rect.new(0, 0, 512, 224) #発動側
        @back_window.contents.blt(142,50,picture,rect)
        
        picture = Cache.picture("ZG_必殺技_光線_大(青)")
        rect = Rect.new(0, 0,316,158)
        @back_window.contents.blt(162,itiy+126,picture,rect)
      when 399
        @tec_output_back_no = 0
      when 400
        #Audio.se_stop
        set_chr_display_out
        
      when 401..426
        sframe = 401
        #Audio.se_play("Audio/SE/" + "ZG 光線1") if @battle_anime_frame == sframe
        #Audio.se_play("Audio/SE/" + "Z1 エネルギー波") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 ザー") if @battle_anime_frame == sframe
        Audio.se_play("Audio/SE/" + "Z1 ゴー") if @battle_anime_frame == sframe
        @effect_anime_pattern = 48 #353
      when 427
        anime_pattern_fromat
        return @battle_anime_result + 1
      end
    end
    #@back_anime_frame
      
    #結果反映
    output_battle_anime @output_anime_type,@output_anime_type_y,@btl_ani_cha_chg_no
    
    if @effect_anime_pattern != 0
      if @effect_anime_mirror == 255
        effect_pattern @effect_anime_pattern,ray_x,ray_y
      else
        effect_pattern @effect_anime_pattern,ray_x,ray_y,@effect_anime_mirror
      end
    end
    return @battle_anime_result

  end
  #--------------------------------------------------------------------------
  # ● 戦闘キャラ画面範囲外へ
  #--------------------------------------------------------------------------
  def set_chr_display_out
    if @attackcourse == 0
      @output_anime_type = 0
      @chay = -200 #キャラ画面範囲外へ
      @enex = CENTER_ENEX
      @eney = STANDARD_ENEY
    else
      @eney = -200 #キャラ画面範囲外へ
      @chax = CENTER_CHAX
      @chay = STANDARD_CHAY
    end
    
    if @chr_cutin_flag == true
      @chr_cutin_mirror_flag = true
    end
  end
  #--------------------------------------------------------------------------
  # ● 背景アニメパターン
  # mirror_pattern:強制的に逆のモードにする
  #--------------------------------------------------------------------------
  def back_anime_pattern n ,back_x=0,back_y=0,mirror_pattern=@attackcourse
    
    case n
    
    when 1 #衝撃波系横
      
      if @attackcourse == 0 && $data_enemies[@enedatenum].element_ranks[23] == 1 || @attackcourse == 1 && $cha_bigsize_on[@chanum] == true #|| @attackcourse == 1 && $data_enemies[@enedatenum].element_ranks[23] == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_衝撃波系") #ダメージ表示用
        rect = Rect.new(0, @back_anime_type*180,640,42)
        @back_window.contents.blt(0,80-48,picture,rect)
        rect = Rect.new(0, 138+@back_anime_type*180,640,42)
        @back_window.contents.blt(0,80+180-42+48,picture,rect)
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_衝撃波系") #ダメージ表示用
        rect = Rect.new(0, @back_anime_type*180,640,180)
        @back_window.contents.blt(0,80,picture,rect)
      end
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
      
    when 2 #必殺技発動時縦

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_魔族系(縦)") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*480,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 3 #必殺技発動時横

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_魔族系(横)") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*304,640,304)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 4 #気を溜める(小)？
      if @ray_color == 0
        picture = Cache.picture("Z1_戦闘_必殺技_気を溜める") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z1_戦闘_必殺技_気を溜める(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z1_戦闘_必殺技_気を溜める(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z1_戦闘_必殺技_気を溜める") #ダメージ表示用
      end
      
      if back_x == 0 || back_x == nil
        
        back_x = 234
        back_y = 70
      end 
      rect = Rect.new(0,@back_anime_type*222,160,222)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 5 #気を溜める(中)？

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*192,128,192)
      @back_window.contents.blt(250,56,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 6 #気を溜める(魔閃光)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*160,160,160)
      
      if back_x == 0 || back_x == nil
        
        back_x = 234
        back_y = 112
      end 
      
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 7 #気を溜める(気功砲)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める4") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*360,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 8 #気を溜める(四身の拳気功砲)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(四身の拳気功砲)") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*360,640,360)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 9 #四身の拳気功砲系縦

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_背景_気功砲系") #ダメージ表示用
      
      if @attackcourse == 0 && $data_enemies[@enedatenum].element_ranks[23] == 1 || @attackcourse == 1 && $cha_bigsize_on[@chanum] == true
        if @attackcourse == 0 
          rect = Rect.new(0, @back_anime_type*360,142,356)
          @back_window.contents.blt(170-14,0,picture,rect)
          rect = Rect.new(242, @back_anime_type*360,142,356)
          @back_window.contents.blt(170-14+142+200,0,picture,rect)
        else
          rect = Rect.new(0, @back_anime_type*360,142,356)
          @back_window.contents.blt(-20,0,picture,rect)
          rect = Rect.new(242, @back_anime_type*360,142,356)
          @back_window.contents.blt(-20+142+200,0,picture,rect)
        end
      else
        if @attackcourse == 0 
          rect = Rect.new(0, @back_anime_type*360,384,356)
          @back_window.contents.blt(170,0,picture,rect)
        else
          rect = Rect.new(0, @back_anime_type*360,384,356)
          @back_window.contents.blt(90,0,picture,rect)
        end
      end
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 10 #気を溜める(超能力)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_超能力") #ダメージ表示用
      
      rect = Rect.new(0, @back_anime_type*160,128,160)
      @back_window.contents.blt(248,110,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 11 #気を溜める(ラディッツ)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_手に気を溜める_片手") #ダメージ表示用
      
      rect = Rect.new(0, @back_anime_type*48,40,48)
      @back_window.contents.blt(266,116,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 9
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 12 #気を溜める両手(ラディッツ)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_手に気を溜める_両手") #ダメージ表示用
      
      rect = Rect.new(0, @back_anime_type*48,100,48)
      @back_window.contents.blt(266,116,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 9
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 13 #気を溜める(ブラックホール波)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める5") #ダメージ表示用
      if $btl_progress >= 2
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める10") #ダメージ表示用
      end
      rect = Rect.new(0,@back_anime_type*378,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 14 #気を溜める(ナッパエネルギー波)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める6") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*178,190,178)
      @back_window.contents.blt(220,100,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 15 #気を溜める(ナッパ口からエネルギー波)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める7") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*256,256,256)
      @back_window.contents.blt(190,60,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 16 #気を溜める(ギャリック砲)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める8") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*380,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 17 #気を溜める(界王拳カメハメは)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める9") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*378,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 18 #捨て身攻撃まかんこうさっぽうため

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*192,128,192)
      @back_window.contents.blt(250-120-36,56,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 19 #捨て身悟空現れる
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用
      
      if $btl_progress == 0
        rect = Rect.new(0,11*96,96,96)
        @back_window.contents.blt(CENTER_ENEX+12,STANDARD_ENEY-90,picture,rect)
      elsif $btl_progress == 1 || $btl_progress == 2
        rect = Rect.new(0,16*96,96,96)
        @back_window.contents.blt(CENTER_ENEX+12,STANDARD_ENEY-90+6,picture,rect)
      end
    when 20 #捨て身悟空離れる
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用
      
      rect = Rect.new(0,10*96,96,96)
      rect = Rect.new(0,7*96,96,96) if $btl_progress == 1
      if @back_anime_type == 0
        #rect = Rect.new(0,10*96,96,96)
        @back_window.contents.blt(CENTER_ENEX+12+@back_anime_frame*8,STANDARD_ENEY-6,picture,rect)
      else
        rect = Rect.new(0,11*96,96,96)
        rect = Rect.new(0,16*96,96,96) if $btl_progress == 1 || $btl_progress == 2
        @back_window.contents.blt(CENTER_ENEX+12+8*4,STANDARD_ENEY+6-6-(@back_anime_frame-8)*16,picture,rect)
      end
      
      if @back_anime_frame == 8 #  && @back_anime_type != 2
        @back_anime_type += 1
      end
    when 21 #気を溜める(小)(操気円斬ヤムチャ
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める") #ダメージ表示用
      end
      rect = Rect.new(0,@back_anime_type*222,160,222)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 22 #気を溜める(小)(操気円斬ヤムチャ自身
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 3*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 23 #気を溜める(小)(操気円斬ヤムチャ自身
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 4*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 24 #気を溜める(小)(操気円斬ヤムチャ自身
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 5*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 25 #気を溜める(小)(操気円斬ヤムチャ自身
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 6*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 26 #気を溜める(小)(操気円斬ヤムチャ自身
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 7*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 27 #気を溜める(小)(操気円斬クリリン自身
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 28 #気を溜める(小)(操気円斬クリリン自身
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 7*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 29 #気を溜める(小)(操気円斬クリリン自身
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 8*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 30 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(-450+@back_anime_frame*16,-290+@back_anime_frame*8,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 31 #操気円斬
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 32 #操気円斬
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 5*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 33 #操気円斬
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 6*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 34 #操気円斬
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 7*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 35 #操気円斬
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 1*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 36 #ダブルどどんぱ_キャラ現れる
      
      if $partyc[@chanum.to_i] == 8
        picture = Cache.picture(set_battle_character_name 9,0)
        picture = Cache.picture(set_battle_character_name 9,1) if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ") if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_チャオズ") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ") if @back_anime_frame >= 31
      else
        
        picture = Cache.picture(set_battle_character_name 8,0) #ダメージ表示用
        picture = Cache.picture(set_battle_character_name 8,1) if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_テンシンハン") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") if @back_anime_frame >= 31

      end
      #attack_se = "Z3 打撃" 
      case @back_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 0*96,96,96)
      else
        rect = Rect.new(0, 0*96,96,96)
      end
      if $partyc[@chanum.to_i] == 8
        @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
      end
    when 37 #ダブルどどんぱ_ゆびたて
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 7*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 38 #ダブルどどんぱ_ゆびまえ
      rect = Rect.new(0, 3*96,96,96)
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 8*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 39 #ダブルどどんぱ(Z2)_キャラ現れる
        if $partyc[@chanum.to_i] == 8
          picture = Cache.picture(set_battle_character_name 9,1)
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
        elsif $partyc[@chanum.to_i] == 9
          picture = Cache.picture(set_battle_character_name 8,1)
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
        end
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        if $partyc[@chanum.to_i] == 8
          @back_window.contents.blt(STANDARD_CHAX+@back_anime_frame*idouryou+30,STANDARD_CHAY-50,picture,rect)
          #p STANDARD_CHAX+@effect_anime_frame*idouryou,TEC_CENTER_CHAX if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
        else
          @back_window.contents.blt(STANDARD_CHAX+@back_anime_frame*idouryou+30,STANDARD_CHAY+50,picture,rect)
        end
    when 40 #ダブルどどんぱ(Z2)_キャラ現れる(放置)
      rect = Rect.new(0, 0*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 41 #ダブルどどんぱ(Z2)_放つ
      rect = Rect.new(0, 5*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      rect = Rect.new(0, 1*96,96,96)
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 42 #超能力きこうほう
      rect = Rect.new(0, 1*96,96,96)
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 43 #気を溜める(超能力きこうほう)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_超能力") #ダメージ表示用
      
      rect = Rect.new(0, @back_anime_type*160,128,160)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 44 #Z2超能力きこうほう
      rect = Rect.new(0, 0*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      if $btl_progress == 2
        rect = Rect.new(0, 6*96,96,96)
      else
        rect = Rect.new(0, 2*96,96,96)
      end
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 45 #Z2超能力きこうほう
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 8,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      if $btl_progress == 2
        rect = Rect.new(0, 6*96,96,96)
      else
        rect = Rect.new(0, 2*96,96,96)
      end
      picture = Cache.picture(set_battle_character_name 9,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 46 #師弟の絆_キャラ現れる
      
      if $partyc[@chanum.to_i] == 4
        picture = Cache.picture(set_battle_character_name 5,0)
        #picture = Cache.picture(set_battle_character_name 5,1)
        #if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        #  picture = Cache.picture(set_battle_character_name 18,0)
        #  picture = Cache.picture(set_battle_character_name 18,1)
        #end
        picture = Cache.picture(set_battle_character_name 5,1) if @back_anime_frame >= 31
        #if ($super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true) && @back_anime_frame >= 31
        #  picture = Cache.picture(set_battle_character_name 18,1)
        #end
        #picture = Cache.picture($btl_top_file_name + "戦闘_ゴハン") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") if @back_anime_frame >= 31
      else
        picture = Cache.picture(set_battle_character_name 4,0)
        picture = Cache.picture(set_battle_character_name 4,1) if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_ピッコロ") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") if @back_anime_frame >= 31

      end
      #attack_se = "Z3 打撃" 
      case @back_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 0*96,96,96)
      else
        rect = Rect.new(0, 0*96,96,96)
      end
      if $partyc[@chanum.to_i] == 4
        @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
      end
    when 47 #師弟の絆_キャラ現れる(ゴハンのみ表示
      picture = Cache.picture(set_battle_character_name 5,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)

    when 48 #師弟の絆_高速移動
      if @back_anime_frame % 4 == 0
        picture = Cache.picture("戦闘アニメ") #ダメージ表示用
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      end
    when 49 #師弟の絆_技溜
      
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 5,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 5*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)

     when 50 #師弟の絆_技発動
      
      rect = Rect.new(0, 3*96,96,96)
      picture = Cache.picture(set_battle_character_name 5,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 6*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)

    when 51 #師弟の絆_気を溜める
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(緑)") #ダメージ表示用

      rect = Rect.new(0,@back_anime_type*222,160,222)
      @back_window.contents.blt(234-90,70,picture,rect)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*160,160,160)
      @back_window.contents.blt(234+96,112,picture,rect)
      
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 52 #Z2師弟の絆_気を溜める
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 5,1)
      if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        picture = Cache.picture(set_battle_character_name 18,1)
      end
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 53 #Z2師弟の絆_発動
      rect = Rect.new(0, 3*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      rect = Rect.new(0, 3*96,96,96)
      picture = Cache.picture(set_battle_character_name 5,1)
      if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        picture = Cache.picture(set_battle_character_name 18,1)
      end
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 54 #狼鶴相打陣_ヤムチャ表示
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY,picture,rect)
    when 55 #師弟の絆_キャラ現れる
      
      if $partyc[@chanum.to_i] == 4
        picture = Cache.picture(set_battle_character_name 6,0)
        picture = Cache.picture(set_battle_character_name 6,1) if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_ゴハン") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン") if @back_anime_frame >= 31
      else
        picture = Cache.picture(set_battle_character_name 4,0)
        picture = Cache.picture(set_battle_character_name 4,1) if @back_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_ピッコロ") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") if @back_anime_frame >= 31

      end
      #attack_se = "Z3 打撃" 
      case @back_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 0*96,96,96)
      else
        rect = Rect.new(0, 0*96,96,96)
      end
      if $partyc[@chanum.to_i] == 4
        @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
      end
    when 56 #行くぞ！クリリン_技溜
      
      rect = Rect.new(0, 1*96,96,96)
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 5*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 57 #行くぞ！クリリン_気を溜める
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(緑)") #ダメージ表示用

      rect = Rect.new(0,@back_anime_type*222,160,222)
      @back_window.contents.blt(234-90,70,picture,rect)

      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3") #ダメージ表示用
      
      #rect = Rect.new(0,@back_anime_type*160,160,160)
      #@back_window.contents.blt(234+96,112,picture,rect)
      
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
     when 58 #師弟の絆_技発動
      
      rect = Rect.new(0, 2*96,96,96)
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      
      rect = Rect.new(0, 6*96,96,96)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
    when 59 #ダブルアイビーム_キャラ現れる(ピッコロ、天津飯
      if $partyc[@chanum.to_i] == 8
        picture = Cache.picture(set_battle_character_name 4,0)
        picture = Cache.picture(set_battle_character_name 4,1) if @back_anime_frame >= 31
      else
        picture = Cache.picture(set_battle_character_name 8,0)
        picture = Cache.picture(set_battle_character_name 8,1) if @back_anime_frame >= 31

      end

      case @back_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 0*96,96,96)
      else
        rect = Rect.new(0, 0*96,96,96)
      end
      if $partyc[@chanum.to_i] == 4
        @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
      end

##########################################################
# Z2
##########################################################

    when 101 #気を溜める(大)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める3(赤)") #ダメージ表示用
      end
      
      rect = Rect.new(@back_anime_type*184,0,184,240)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 102 #気を溜める(特大)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める4") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める4(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める4(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める4(赤)") #ダメージ表示用
      end
      rect = Rect.new(@back_anime_type*224,0,224,288)
      @back_window.contents.blt(back_x,back_y-36,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 103 #気を溜める(元気弾)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める5") #ダメージ表示用
      
      rect = Rect.new(@back_anime_type*236,0,236,254)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 11
        @back_anime_type += 1
        @back_anime_frame = 0
      #elsif @back_anime_frame >= 6
        #@back_anime_type = 0
        #@back_anime_frame = 0
      end
    when 104 #気を溜める(超元気弾)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める6") #ダメージ表示用
      
      rect = Rect.new(@back_anime_type*512,0,256,320)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 11
        @back_anime_type += 1
        @back_anime_frame = 0
      #elsif @back_anime_frame >= 6
        #@back_anime_type = 0
        #@back_anime_frame = 0
      end
    when 105 #気を溜める(中)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める2(赤)") #ダメージ表示用
      end
      
      rect = Rect.new(@back_anime_type*152,0,152,192)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 106 #背景スーパーカメハメ波
      if @attackcourse == 0 && mirror_pattern == 0
        picture = Cache.picture("Z3_必殺技_超カメハメ波(バック上)") #ダメージ表示用
        rect = Rect.new(0,128*@back_anime_type,384,128)
        @back_window.contents.blt(0,0,picture,rect)
        picture = Cache.picture("Z3_必殺技_超カメハメ波(バック下)") #ダメージ表示用
        rect = Rect.new(0,64*@back_anime_type,192,64)
        @back_window.contents.blt(0,292,picture,rect)
      else
        picture = Cache.picture("Z3_必殺技_超カメハメ波(バック上)_反転") #ダメージ表示用
        rect = Rect.new(0,128*@back_anime_type,384,128)
        @back_window.contents.blt(640-384,0,picture,rect)
        picture = Cache.picture("Z3_必殺技_超カメハメ波(バック下)_反転") #ダメージ表示用
        rect = Rect.new(0,64*@back_anime_type,192,64)
        @back_window.contents.blt(640-192,292,picture,rect)
      end
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 107 #気を溜める(パープルコメットクラッシュ)

      
      if @back_anime_type == 0
        if @ray_color == 3
          picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
        elsif @ray_color == 4
          picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(赤)") #ダメージ表示用
        end
        rect = Rect.new(5*128,0,128,128)
        @back_window.contents.blt(back_x,back_y,picture,rect)
      else
        if @ray_color == 3
          picture = Cache.picture("Z2_戦闘_必殺技_敵_バータ") #ダメージ表示用
        else
          picture = Cache.picture("Z2_戦闘_必殺技_敵_ジース") #ダメージ表示用
        end
        rect = Rect.new(0 , 0+(96*2), 96, 96)
        @back_window.contents.blt(@enex,STANDARD_ENEY,picture,rect)
      end
      
      if @back_anime_frame >= 2  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 2
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 108 #気が交わる(パープルコメットクラッシュ)
      picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      rect = Rect.new(5*128,0,128,128)
      @back_window.contents.blt(STANDARD_CHAX + @back_anime_frame*10,STANDARD_ENEY,picture,rect)
      
      picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(赤)") #ダメージ表示用
      @back_window.contents.blt(STANDARD_ENEX - @back_anime_frame*10 +60,STANDARD_ENEY,picture,rect)
    when 109 #気が交わる青赤(パープルコメットクラッシュ)
      if @back_anime_type == 0
        picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      else
        picture = Cache.picture("Z2_戦闘_必殺技_エネルギー弾(赤)") #ダメージ表示用
      end
      rect = Rect.new(5*128,0,128,128)

      @back_window.contents.blt(CENTER_ENEX,STANDARD_ENEY,picture,rect)
      if @back_anime_frame >= 2  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 2
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 110 #合体攻撃発動者
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用
      rect = Rect.new(0,@scombo_cha1_anime_type*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY,picture,rect)
    when 111 #ピッコロ後ろの現れる
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") #ダメージ表示用
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(STANDARD_CHAX+@scombo_cha_anime_frame*8,STANDARD_CHAY,picture,rect)
    when 112 #悟空前に現れる
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(STANDARD_CHAX+@scombo_cha_anime_frame*16,STANDARD_CHAY,picture,rect)
    when 113 #合体攻撃発動者
      picture = Cache.picture(set_battle_character_name $partyc[@chanum.to_i],1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha1_anime_type*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX-@scombo_cha_anime_frame*8,STANDARD_CHAY,picture,rect)
    when 114 #ヤムチャ前に現れる
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ") #ダメージ表示用
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(STANDARD_CHAX+@scombo_cha_anime_frame*16,STANDARD_CHAY,picture,rect)
    when 115 #スパーキング用1人目
      picture = Cache.picture(set_battle_character_name @scombo_cha1,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha1].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha1_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 116 #スパーキング用1人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha1,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha1].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha1_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 117 #スパーキング用2人目
      picture = Cache.picture(set_battle_character_name @scombo_cha2,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha2].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 118 #スパーキング用2人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 119 #スパーキング用3人目
      picture = Cache.picture(set_battle_character_name @scombo_cha3,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha3_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 120 #スパーキング用3人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha3,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha3_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 121 #スパーキング用4人目
      picture = Cache.picture(set_battle_character_name @scombo_cha4,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha4_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 122 #スパーキング用4人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha4_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 123 #スパーキング用5人目
      picture = Cache.picture(set_battle_character_name @scombo_cha5,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha5_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 124 #スパーキング用5人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha5,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha5_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 125 #スパーキング用6人目
      picture = Cache.picture(set_battle_character_name @scombo_cha6,0)
      #picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha6_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 126 #スパーキング用6人目必殺技
      picture = Cache.picture(set_battle_character_name @scombo_cha6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha3].name) #ダメージ表示用
      rect = Rect.new(0,@scombo_cha6_anime_type*96,96,96)
      @back_window.contents.blt(back_x,back_y,picture,rect)
    when 127 #ヤムチャ前に現れる
      picture = Cache.picture(set_battle_character_name 7,1)
      rect = Rect.new(0,@scombo_cha2_anime_type*96,96,96)
      @back_window.contents.blt(STANDARD_CHAX+@scombo_cha_anime_frame*16,STANDARD_CHAY,picture,rect)
    when 128 #発動キャラ前に現れる(汎用)
      picture = Cache.picture(set_battle_character_name @scombo_cha1,1)
      rect = Rect.new(0,@scombo_cha1_anime_type*96,96,96)
      @back_window.contents.blt(STANDARD_CHAX+@scombo_cha_anime_frame*16,STANDARD_CHAY,picture,rect)
    when 129 #気を溜める(超元気弾)溜め続ける

      picture = Cache.picture("Z2_戦闘_必殺技_気を溜める(超元気玉全開)") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*320,816,320)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 2
        @back_anime_type += 1
        @back_anime_frame = 0
        if @back_anime_type == 3
          @back_anime_type = 0
        end
      #elsif @back_anime_frame >= 6
        #@back_anime_type = 0
        #@back_anime_frame = 0
      end
##########################################################
# Z3
##########################################################
    when 201 #気を溜める(Z3)

      if @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める(青)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める") #ダメージ表示用
      end
      
      rect = Rect.new(@back_anime_type*136,0,136,142)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 16  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 16
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 202 #気を溜める(ZG)

      picture = Cache.picture("ZG_戦闘_必殺技_気を溜める") #ダメージ表示用
      
      rect = Rect.new(@back_anime_type*156,0,156,144)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 8
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 211 #17号バリア
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾(青)")
      rect = Rect.new(5*128,0,128,128)
      
      if @back_anime_frame <= 2
        @back_window.contents.blt(CENTER_ENEX,STANDARD_ENEY,picture,rect)
      elsif @back_anime_frame >= 4
        @back_anime_frame = 0
      end
    when 212 #超元気玉吸収
      picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_弾")
      rect = Rect.new(@back_anime_type*126,0,126,126)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      
      if @back_anime_frame >= 8  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 8
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 213 #気を溜める(#超元気玉吸収)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気を溜める9") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*378,640,378)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 214 #ロボット兵手先発動
      scllorspd = 12
      picture = Cache.picture("Z3_戦闘_必殺技_ロボット兵腕1") #ダメージ表示用
      rect = Rect.new(0, 0,@back_anime_frame*scllorspd,24)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      
    when 215 #ロボット兵手先発動前に移動
      scllorspd = 12
      picture = Cache.picture("Z3_戦闘_必殺技_ロボット兵腕1") #ダメージ表示用
      rect = Rect.new(0, 0,1280,24)
      @back_window.contents.blt(back_x-@back_anime_frame*scllorspd,back_y,picture,rect)

    when 216 #アンギラ手が伸びる
      picture = Cache.picture("Z2_戦闘_必殺技_アンギラ手が伸びる") #ダメージ表示用
      rect = Rect.new(0, 0,26+@back_anime_frame*RAY_SPEED,24)
      @back_window.contents.blt(back_x-@back_anime_frame*RAY_SPEED,back_y,picture,rect)
    when 217 #アンギラ手を縮める
      picture = Cache.picture("Z2_戦闘_必殺技_アンギラ手が伸びる") #ダメージ表示用
      rect = Rect.new(0, 0,640-@back_anime_frame*RAY_SPEED,24)
      @back_window.contents.blt(back_x+@back_anime_frame*RAY_SPEED,back_y,picture,rect)
      
    when 218 #気を溜める 11
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める11(赤)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める11(赤)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める11(赤)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める11(赤)") #ダメージ表示用
      end
      
      rect = Rect.new(@back_anime_type*156,0,156,144)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 8
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 219 #気を溜めるブウ超爆発波
      picture = Cache.picture("Z3_必殺技_超爆発波_気を溜める")
      rect = Rect.new(0,@back_anime_type*300,300,300)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 8
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 220 #気を溜めるブウ超爆発波必殺技発動時縦

      picture = Cache.picture("Z3_戦闘_必殺技_背景_ブウ_超爆発波") #ダメージ表示用
      
      rect = Rect.new(0,@back_anime_type*356,640,356)
      @back_window.contents.blt(0,0,picture,rect)
      if @back_anime_frame >= 4  && @back_anime_type != 2
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 4
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    when 221 #気を溜める 12
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める12(赤)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める12(赤)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める12(赤)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_戦闘_必殺技_気を溜める12(赤)") #ダメージ表示用
      end
      
      rect = Rect.new(@back_anime_type*300,0,300,300)
      @back_window.contents.blt(back_x,back_y,picture,rect)
      if @back_anime_frame >= 8  && @back_anime_type != 1
        @back_anime_type += 1
        @back_anime_frame = 0
      elsif @back_anime_frame >= 8
        @back_anime_type = 0
        @back_anime_frame = 0
      end
    end
    @back_anime_frame += 1
  end
  
  #--------------------------------------------------------------------------
  # ● エフェクトアニメパターン：エネルギー弾、爆発等
  #mirror_pattern:強制的に逆のモードにする
  #--------------------------------------------------------------------------
  def effect_pattern n,ray_x=0,ray_y=0,mirror_pattern=@attackcourse

    case n
    
    when 1 #エネルギー弾系(正面)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if ray_x == 0 || ray_x == nil
        ray_x = 240
        ray_y = 100
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      
    when 2 #カメハメ波系(正面)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if ray_x == 0 || ray_x == nil
        ray_x = 240
        ray_y = 110
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end 
    when 3 #エネルギー弾系(正面)緑(手の位置)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240,110,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 4 #エネルギー弾系(正面)緑_双方向
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240-@effect_anime_frame*2,122-@effect_anime_frame*2,picture,rect)
      @back_window.contents.blt(262+@effect_anime_frame*2,122-@effect_anime_frame*2,picture,rect)
      if @effect_anime_frame % 15 == 0
        @effect_anime_type += 1
      end
    when 5 #エネルギー弾系(正面)緑(口の位置)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      
      if ray_x == 0 || ray_x == nil
        ray_x = 250
        ray_y = 140
      end
      
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 6 #エネルギー弾系(正面)緑(中心の位置)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(250,114,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 7 #魔貫光殺砲(正面)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_魔貫光殺砲系(緑)") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(238,124,picture,rect)
      if @effect_anime_frame >= 6 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 8 #エネルギー弾系(正面)(悟飯センター)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用
      end
      if ray_x == 0 || ray_x == nil
        ray_x = 252
        ray_y = 130
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 9 #気円斬(クリリン)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用
      
      rect = Rect.new(@effect_anime_type*128, 0,128,28)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 30
          #@back_window.contents.blt(252,120,picture,rect)
      elsif @effect_anime_frame == 31
          @effect_anime_type += 1
      elsif @effect_anime_frame == 41
          @effect_anime_type += 1
      elsif @effect_anime_frame == 51
          @effect_anime_type += 1
      end
      @back_window.contents.blt(252,120,picture,rect)
    when 10 #繰気弾(ヤムチャ)
      if ray_x == 0 || ray_x == nil
        ray_x = 230
        ray_y = 66
      end
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 30
      elsif @effect_anime_frame == 51
          @effect_anime_type += 1
      elsif @effect_anime_frame == 71
          @effect_anime_type += 1
      elsif @effect_anime_frame == 91
          @effect_anime_type += 1
      elsif @effect_anime_frame == 111 && $btl_progress >= 2
          @effect_anime_type += 1
      end
    when 11 #エネルギー弾系(正面)(テンシンハンの手)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(230,114,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 12 #四身の拳系(正面)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(@chax - 2 * @effect_anime_frame,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 2 * @effect_anime_frame,STANDARD_CHAY,picture,rect)
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax - 60 - 2 * (@effect_anime_frame-60),STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60 + 2 * (@effect_anime_frame-60),STANDARD_CHAY,picture,rect)
      else
        if @effect_anime_frame == 121
          Audio.se_play("Audio/SE/" + "Z1 エネルギー波2")    # 効果音を再生する
        end
        rect = Rect.new(0 , 0+(96*6), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax - 180,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 180,STANDARD_CHAY,picture,rect)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(紫)") #ダメージ表示用
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(68,114,picture,rect)
        @back_window.contents.blt(68+120,114,picture,rect)
        @back_window.contents.blt(68+240,114,picture,rect)
        @back_window.contents.blt(68+360,114,picture,rect)
        if @effect_anime_frame == 130 
          @effect_anime_type += 1
        elsif @effect_anime_frame == 140
          @effect_anime_type += 1
        elsif @effect_anime_frame == 150
          @effect_anime_type += 1
        end
      end
    when 13 #四身の拳気功砲(正面)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(@chax - 2 * @effect_anime_frame,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 2 * @effect_anime_frame,STANDARD_CHAY,picture,rect)
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax - 60 - 2 * (@effect_anime_frame-60),STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60 + 2 * (@effect_anime_frame-60),STANDARD_CHAY,picture,rect)
      else
        if @effect_anime_frame == 121
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z1 気を溜める4")    # 効果音を再生する
        end
        rect = Rect.new(0 , 0+(96*2), 96, 96)
        @back_window.contents.blt(@chax - 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 60,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax - 180,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(@chax + 180,STANDARD_CHAY,picture,rect)
        back_anime_pattern 8
      end
    when 14 #エネルギー弾系(正面)(ラディッツ)手の位置
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾_敵") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾_敵(黄)") #ダメージ表示用
      elsif @ray_color == 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾_敵(赤)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(228,102,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 15 #エネルギー弾系(正面)(ラディッツ)正面
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾_敵") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(248,112,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 16 #エネルギー弾系(正面)(カイワレマン系頭)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(赤)") #ダメージ表示
      end
      
      if ray_x == 0 || ray_x == nil
        ray_x = 249
        ray_y = 112
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 17 #貫光線(正面)(ラディッツ)手の位置
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_貫光線_正面") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(228,102,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 18 #エネルギー弾系(正面)(サンショ手の位置)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用
      end
      if ray_x == 0 || ray_x == nil
        ray_x = 230
        ray_y = 104
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 19 #エネルギー弾系(正面)(ベジータ)手の位置
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾_敵") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(238,122,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 20 #元気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(230,76,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 21 #パワーボール(べジータ)
      #p ray_x,ray_y
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x.to_i,ray_y.to_i,picture,rect)
    when 31 #エネルギー波系(小)横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波(緑)") #ダメージ表示用
      end
      
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,28)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 28,400,28)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end

    when 32 #かめはめ波系(中)横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中(桃)") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,60)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,140,picture,rect)
      else
        rect = Rect.new(0, 60,400,60)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,140,picture,rect)
      end
    when 33 #爆裂魔光砲系(大)横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大(緑)") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,92)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,124,picture,rect)
      else
        rect = Rect.new(0, 92,400,92)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,124,picture,rect)
      end
    when 35 #エネルギー波系(小)横x2(目から怪光線)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波(緑)") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,28)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,144,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,174,picture,rect)
      else
        rect = Rect.new(0, 28,400,28)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,144,picture,rect)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,174,picture,rect)
      end
    when 36 #魔貫光殺砲
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_魔貫光殺砲") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,32)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 32,400,32)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 37 #エネルギー波縦
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_縦") #ダメージ表示用
      rect = Rect.new(60, 0,60,400)
      @back_window.contents.blt(330,-600+@effect_anime_frame*RAY_SPEED/2,picture,rect)
    when 38 #気円斬
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用
      rect = Rect.new(128, 0,128,28)
      if @attackcourse == 0 
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
      
    when 39 #狼牙風風拳
      
      end_frame = 85
      if @btl_ani_cha_chg_no == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
      end
      attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..35
        rect = Rect.new(0, 0*96,96,96)
      when 36..39
        rect = Rect.new(0, 3*96,96,96)
      when 40..43
        rect = Rect.new(0, 1*96,96,96)
      when 44..46
        rect = Rect.new(0, 2*96,96,96)
      when 47..50
        rect = Rect.new(0, 4*96,96,96)
      when 51..53
        rect = Rect.new(0, 2*96,96,96)
      when 54..56
        rect = Rect.new(0, 1*96,96,96)
      when 57..60
        rect = Rect.new(0, 2*96,96,96)
      when 61..80
        rect = Rect.new(0, 16*96,96,96)
      else
        #when 81..85
        
        if @btl_ani_cha_chg_no == 0
          if $cha_set_action[@chanum] == 758
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          elsif $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
        else
          
          if $cha_set_action[@chanum] == 758
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          elsif $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
          
        end
      #else
        
        #if @btl_ani_cha_chg_no == 0
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
        #else
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
        #end
        #if $btl_progress >= 2
        #  rect = Rect.new(0, 3*96,96,96)
        #else
        #  rect = Rect.new(0, 3*96,96,96)
        #end
      end
      
      if @effect_anime_frame >= 36 && @effect_anime_frame % 5 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      
      if @effect_anime_frame >= 61 && @effect_anime_frame <= 80
        @back_window.contents.blt(CENTER_CHAX-(@effect_anime_frame-60)*8,STANDARD_CHAY,picture,rect)
      elsif @effect_anime_frame >= 81 && @effect_anime_frame <= 84
        @back_window.contents.blt(80+(@effect_anime_frame-80)*16,STANDARD_CHAY,picture,rect)
      else #if @effect_anime_frame < 86
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY,picture,rect)
      end
      
    when 40 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,120,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
      
    when 41 #四身の拳用エネルギー波系(小)横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波(緑)") #ダメージ表示用
      elsif @ray_color == 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波(紫)") #ダメージ表示用
      end
      
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,28)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,120,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,120+30,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,120+60,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,120+90,picture,rect)
      else
        rect = Rect.new(0, 28,400,28)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 42 #エネルギー波中横(敵)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_敵_中") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_敵_中(黄)") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,60)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 60,400,60)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 43 #エネルギー波大横(敵)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_敵_大") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,88)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,134,picture,rect)
      else
        rect = Rect.new(0, 88,400,88)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,134,picture,rect)
      end
    when 44 #エネルギー液横(敵)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(緑)") #ダメージ表示用
      elsif @ray_color == 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(水色)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(桃)") #ダメージ表示用
      end
      if @attackcourse == 0 && mirror_pattern == 0
        rect = Rect.new(0, 0,400,32)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 32,400,32)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 45 #貫光線
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_貫光線_横") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,32)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 32,400,32)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 46 #刀攻撃
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_敵_" + $data_enemies[@enedatenum].name) #ダメージ表示用
      attack_se = "Z1 刀攻撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 4*96,96,96)
      when 11..20
        rect = Rect.new(0, 5*96,96,96)
      when 21..30
        rect = Rect.new(0, 6*96,96,96)
      when 31..40
        rect = Rect.new(0, 7*96,96,96)
      when 41..50
        rect = Rect.new(0, 8*96,96,96)
      when 51..60
        rect = Rect.new(0, 9*96,96,96)
      when 61..70
        rect = Rect.new(0, 10*96,96,96)
      else
        rect = Rect.new(0, 10*96,96,96)
      end
      
      if @effect_anime_frame == 55 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      
      @back_window.contents.blt(CENTER_ENEX,STANDARD_ENEY,picture,rect)
    when 47 #かめはめ波系(中)円つき横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_円_中(桃)") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,60)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,140,picture,rect)
      else
        rect = Rect.new(0, 60,400,60)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,140,picture,rect)
      end
    when 48 #かめはめ波系(特大)横
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_緑") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_青") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,192)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,76,picture,rect)
      else
        rect = Rect.new(0, 192,400,192)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,76,picture,rect)
      end
    when 49 #界王拳
      
      end_frame = 85
      picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      attack_se = "Z1 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..35
        rect = Rect.new(0, 0*96,96,96)
      when 36..39
        rect = Rect.new(0, 1*96,96,96)
      when 40..43
        rect = Rect.new(0, 2*96,96,96)
      when 44..46
        rect = Rect.new(0, 1*96,96,96)
      when 47..50
        rect = Rect.new(0, 2*96,96,96)
      when 51..53
        rect = Rect.new(0, 3*96,96,96)
      when 54..56
        rect = Rect.new(0, 4*96,96,96)
      when 57..60
        rect = Rect.new(0, 3*96,96,96)
      when 61..63
        rect = Rect.new(0, 1*96,96,96)
      when 64..66
        rect = Rect.new(0, 2*96,96,96)
      when 67..70
        rect = Rect.new(0, 1*96,96,96)
      when 71..73
        rect = Rect.new(0, 2*96,96,96)
      else
        rect = Rect.new(0, 2*96,96,96)
      end
      
      if @effect_anime_frame >= 36 && @effect_anime_frame % 4 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      
      if @effect_anime_frame >= 61 && @effect_anime_frame <= 80
        @back_window.contents.blt(CENTER_CHAX-(@effect_anime_frame-60)*8,STANDARD_CHAY,picture,rect)
      elsif @effect_anime_frame >= 81 && @effect_anime_frame <= 84
        @back_window.contents.blt(80+(@effect_anime_frame-80)*16,STANDARD_CHAY,picture,rect)
      else #if @effect_anime_frame < 86
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY,picture,rect)
      end
    when 50 #ダブル衝撃波_キャラ現れる
      
      end_frame = 85

      if $partyc[@chanum.to_i] == 3
        picture = Cache.picture(set_battle_character_name 10,0)
        #picture = Cache.picture($btl_top_file_name + "戦闘_チチ") #ダメージ表示用
      else
        picture = Cache.picture(set_battle_character_name 3,0)
        #picture = Cache.picture($btl_top_file_name + "戦闘_ゴクウ") #ダメージ表示用
      end
      #attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 8*96,96,96)
      else
        rect = Rect.new(0, 8*96,96,96)
      end
      
      @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
    when 51 #ダブル衝撃波発動
      
      end_frame = 85
      if $partyc[@chanum.to_i] == 3
        picture = Cache.picture(set_battle_character_name 10,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チチ") #ダメージ表示用
      else
        picture = Cache.picture(set_battle_character_name 3,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用
      end
        #attack_se = "Z3 打撃" 
      rect = Rect.new(0, 1*96,96,96)
      
      @back_window.contents.blt(CENTER_CHAX+120-16,STANDARD_CHAY,picture,rect)
    when 52 #捨て身攻撃_キャラ現れる
      
      end_frame = 85

      if $partyc[@chanum.to_i] == 3
        picture = Cache.picture(set_battle_character_name 4,0)
        #picture = Cache.picture($btl_top_file_name + "戦闘_ピッコロ") #ダメージ表示用
      else
        picture = Cache.picture(set_battle_character_name 3,0)
        #picture = Cache.picture($btl_top_file_name + "戦闘_ゴクウ") #ダメージ表示用
      end
      

      #attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 8*96,96,96)
      else
        rect = Rect.new(0, 8*96,96,96)
      end
      
      if $partyc[@chanum.to_i] == 3
        @back_window.contents.blt(CENTER_CHAX-120+6,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX+180,STANDARD_CHAY,picture,rect)
      end
    when 53 #捨て身攻撃_エネルギー波発動
      
      picture = Cache.picture(set_battle_character_name 3,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") #ダメージ表示用 
      rect = Rect.new(0, 2*96,96,96)
      if $partyc[@chanum.to_i] == 3
        @back_window.contents.blt(CENTER_CHAX+180-2,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX+180-12,STANDARD_CHAY,picture,rect)
      end
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") #ダメージ表示用 
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-120-10,STANDARD_CHAY,picture,rect)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240+158-10,100,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 54 #捨て身攻撃_悟空ダッシュ発動
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") #ダメージ表示用 
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-120-10,STANDARD_CHAY,picture,rect)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240+158-10,100,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 55 #捨て身攻撃_ピッコロ_まかんこうさっぽうため1
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ") #ダメージ表示用 
      rect = Rect.new(0, 5*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-120-10,STANDARD_CHAY,picture,rect)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240+158,100,picture,rect)
      if @effect_anime_frame >= 10
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 56 #捨て身攻撃_ピッコロ_まかんこうさっぽうため2ゆびあたま
      picture = Cache.picture(set_battle_character_name 4,1) #ダメージ表示用 
      rect = Rect.new(0, 7*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-120-10,STANDARD_CHAY,picture,rect)
      
      #if @effect_anime_frame % 4 == 0
      #  picture = Cache.picture("戦闘アニメ") #ダメージ表示用
      #  rect = Rect.new(0,48, 64, 64)
      #  @back_window.contents.blt(CENTER_ENEX+64,STANDARD_ENEY+32,picture,rect)
      #end
    when 57 #捨て身攻撃_ピッコロ_まかんこうさっぽうため2ゆびまえ
      picture = Cache.picture(set_battle_character_name 4,1) #ダメージ表示用 
      rect = Rect.new(0, 8*96,96,96)
      @back_window.contents.blt(CENTER_CHAX-120-10,STANDARD_CHAY,picture,rect)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_魔貫光殺砲系(緑)") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(238-120-30,124,picture,rect)
      if @effect_anime_frame >= 6 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 58 #捨て身攻撃_悟空敵の後ろに出現
      if @effect_anime_frame % 4 == 0
        picture = Cache.picture("戦闘アニメ") #ダメージ表示用
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(CENTER_ENEX+64,STANDARD_ENEY-60,picture,rect)
      end
    when 59 #捨て身攻撃_Z2悟空敵の後ろに出現
      if @effect_anime_frame % 4 == 0
        picture = Cache.picture("戦闘アニメ") #ダメージ表示用
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(TEC_CENTER_CHAX+16,STANDARD_CHAY+16,picture,rect)
      end
    when 60 #かめはめ乱舞_キャラ現れる
      
      x = 0
      
      for x in 0..1
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14
          picture = Cache.picture(set_battle_character_name 6,0) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 7,0) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_クリリン") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_ヤムチャ") if x == 1#ダメージ表示用
        elsif $partyc[@chanum.to_i] == 6
          picture = Cache.picture(set_battle_character_name 3,0) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 7,0) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_ゴクウ") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_ヤムチャ") if x == 1#ダメージ表示用
        elsif $partyc[@chanum.to_i] == 7
          picture = Cache.picture(set_battle_character_name 3,0) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 6,0) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_ゴクウ") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_クリリン") if x == 1#ダメージ表示用
        end

        #attack_se = "Z3 打撃" 
        case @effect_anime_frame
        
        when 0..10
          rect = Rect.new(0, 14*96,96,96)
        when 11..20
          rect = Rect.new(0, 13*96,96,96)
        when 21..30
          rect = Rect.new(0, 12*96,96,96)
        when 31..40
          rect = Rect.new(0, 8*96,96,96)
        else
          rect = Rect.new(0, 8*96,96,96)
        end
        
        if x == 0
          @back_window.contents.blt(CENTER_CHAX-120+8,STANDARD_CHAY,picture,rect) if $partyc[@chanum.to_i] == 3
          @back_window.contents.blt(TEC_CENTER_CHAX+18,STANDARD_CHAY,picture,rect) if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
          
        else
          @back_window.contents.blt(CENTER_CHAX+180+38,STANDARD_CHAY,picture,rect) if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 6
          @back_window.contents.blt(CENTER_CHAX-120+8,STANDARD_CHAY,picture,rect) if $partyc[@chanum.to_i] == 7
        end
      end
    when 61 #かめはめ乱舞_発動
      tameframe = 120
      hatudouframe = 30
      picture = Cache.picture(set_battle_character_name 3,1) #ダメージ表示用
      case @effect_anime_frame
        
      when 0..tameframe
          rect = Rect.new(0, 3*96,96,96)
      else
          rect = Rect.new(0, 4*96,96,96)
      end
      @back_window.contents.blt(TEC_CENTER_CHAX+4,STANDARD_CHAY,picture,rect)
      
      picture = Cache.picture(set_battle_character_name 6,1) #ダメージ表示用
      case @effect_anime_frame
        
      when 0..tameframe
          rect = Rect.new(0, 1*96,96,96)
      else
          rect = Rect.new(0, 2*96,96,96)
      end
      @back_window.contents.blt(CENTER_CHAX-120+8-28,STANDARD_CHAY+2,picture,rect)
      
      picture = Cache.picture(set_battle_character_name 7,1) #ダメージ表示用
      @back_window.contents.blt(CENTER_CHAX+180+38-20,STANDARD_CHAY-2,picture,rect)
      
      if @effect_anime_frame >= tameframe + hatudouframe
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(242,114,picture,rect)
        @back_window.contents.blt(-18+CENTER_CHAX-120+8-28,-2+STANDARD_CHAY+2,picture,rect)
        @back_window.contents.blt(-24+CENTER_CHAX+180+38-20,-6+STANDARD_CHAY-2,picture,rect)
        if @effect_anime_frame >= tameframe + hatudouframe + (@effect_anime_type+1)*10
          @effect_anime_type += 1
        end
      end
    when 62 #かめはめ波乱舞横
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_カメハメ乱舞エネルギー波") #ダメージ表示用
        
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,152)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,100,picture,rect)
      else
        rect = Rect.new(0, 192,400,192)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,76,picture,rect)
      end
    when 63 #かめはめ乱舞(Z2)_キャラ現れる
      
      x = 0
      
      for x in 0..1
        if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14
          picture = Cache.picture(set_battle_character_name 6,1) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 7,1) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ") if x == 1#ダメージ表示用
        elsif $partyc[@chanum.to_i] == 6
          picture = Cache.picture(set_battle_character_name 3,1) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 14,1) if x == 0 && $super_saiyazin_flag[1] == true
          picture = Cache.picture(set_battle_character_name 7,1) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ") if x == 1#ダメージ表示用
        elsif $partyc[@chanum.to_i] == 7
          picture = Cache.picture(set_battle_character_name 3,1) if x == 0#ダメージ表示用
          picture = Cache.picture(set_battle_character_name 14,1) if x == 0 && $super_saiyazin_flag[1] == true
          picture = Cache.picture(set_battle_character_name 6,1) if x == 1#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ") if x == 0#ダメージ表示用
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン") if x == 1#ダメージ表示用
        end

        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        if x == 0
          @back_window.contents.blt(STANDARD_CHAX-ushirox+@effect_anime_frame*idouryou,STANDARD_CHAY+64,picture,rect) if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 14
          @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY,picture,rect) if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
          #p STANDARD_CHAX+@effect_anime_frame*idouryou,TEC_CENTER_CHAX if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
        else
          @back_window.contents.blt(STANDARD_CHAX-ushirox+@effect_anime_frame*idouryou,STANDARD_CHAY-64,picture,rect) if $partyc[@chanum.to_i] == 3 || $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 14
          @back_window.contents.blt(STANDARD_CHAX-ushirox+@effect_anime_frame*idouryou,STANDARD_CHAY+64,picture,rect) if $partyc[@chanum.to_i] == 7
        end
      end
      #p STANDARD_CHAX-ushirox+@effect_anime_frame*idouryou
    when 64 #かめはめ乱舞(Z2)_キャラ現れたあと放置
      ushirox=0
      idougo = 212+24
      rect = Rect.new(0, 0*96,96,96)
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY,picture,rect)
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)

    when 65 #かめはめ乱舞(Z2)_キャラ現れたあと発動
      ushirox=0
      idougo = 212+24
      tameframe = 120
      hatudouframe = 30
      
      case @effect_anime_frame
        
      when 0..tameframe
          rect = Rect.new(0, 2*96,96,96)
      else
          rect = Rect.new(0, 3*96,96,96)
      end
      picture = Cache.picture(set_battle_character_name 3,1)
      picture = Cache.picture(set_battle_character_name 14,1) if $super_saiyazin_flag[1] == true
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ")
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY,picture,rect)
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      @back_window.contents.blt(idougo,STANDARD_CHAY+64,picture,rect)
      picture = Cache.picture(set_battle_character_name 7,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
      @back_window.contents.blt(idougo,STANDARD_CHAY-64,picture,rect)
      
      if @effect_anime_frame > tameframe
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_カメハメ乱舞エネルギー波")
        #p 168+(@effect_anime_frame - tameframe)*RAY_SPEED
        rect = Rect.new(0,0,168+(@effect_anime_frame - tameframe)*RAY_SPEED,204)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end
    when 66 #かめはめ乱舞(Z2)_キャラ現れたあと発動ヒット
      picture = Cache.picture("Z1_戦闘_必殺技_カメハメ乱舞エネルギー波") #ダメージ表示用
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴクウ")
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,152)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,100,picture,rect)
      else
        rect = Rect.new(0, 192,400,192)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,76,picture,rect)
      end
    when 67 #元気玉受け系(正面)(悟飯センター)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用
      end
      rect = Rect.new((5-@effect_anime_type)*128, 0,128,128)
      @back_window.contents.blt(252,130,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 68 #元気玉はじく系(正面)(悟飯センター)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(桃)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(252,130-@effect_anime_frame*4,picture,rect)
      if @effect_anime_frame >= (@effect_anime_type+1) * 5
        @effect_anime_type += 1
        #@effect_anime_frame = 0
      end
    when 69 #元気玉はじく(ヒット)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      #if @attackcourse == 0
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y-@effect_anime_frame*4,picture,rect)
      #else
        #@back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      #end
    when 70 #操気円斬_キャラ現れる
      
      if $partyc[@chanum.to_i] == 6
        picture = Cache.picture(set_battle_character_name 7,0)
        #picture = Cache.picture($btl_top_file_name + "戦闘_ヤムチャ") #ダメージ表示用
        picture = Cache.picture(set_battle_character_name 7,1) if @effect_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ") if @effect_anime_frame >= 31
      else
        picture = Cache.picture(set_battle_character_name 6,0)
        picture = Cache.picture(set_battle_character_name 6,1) if @effect_anime_frame >= 31
        #picture = Cache.picture($btl_top_file_name + "戦闘_クリリン") #ダメージ表示用
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン") if @effect_anime_frame >= 31

      end
      #attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..40
        rect = Rect.new(0, 0*96,96,96)
      else
        rect = Rect.new(0, 0*96,96,96)
      end
      if $partyc[@chanum.to_i] == 6
        @back_window.contents.blt(CENTER_CHAX+120,STANDARD_CHAY,picture,rect)
      else
        @back_window.contents.blt(CENTER_CHAX-66,STANDARD_CHAY,picture,rect)
      end
    when 71 #繰気弾(ヤムチャ)
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 30
      elsif @effect_anime_frame == 51
          @effect_anime_type += 1
      elsif @effect_anime_frame == 71
          @effect_anime_type += 1
      elsif @effect_anime_frame == 91
          @effect_anime_type += 1
        end
    when 72 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,40+@effect_anime_frame*2,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 73 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(450-@effect_anime_frame*2,278-@effect_anime_frame*RAY_SPEED,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end

    when 74 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(320-@effect_anime_frame*2,-100+@effect_anime_frame*RAY_SPEED,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end 

    when 75 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(200+@effect_anime_frame*16,278-@effect_anime_frame*RAY_SPEED,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 76 #繰気弾
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(桃)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      end
      
      rect = Rect.new(256, 0,128,128)
      if @attackcourse == 0 
        @back_window.contents.blt(660-@effect_anime_frame*20,110-@effect_anime_frame*2,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 77 #気円斬(クリリン)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用
      
      rect = Rect.new(@effect_anime_type*128, 0,128,28)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 30
          #@back_window.contents.blt(252,120,picture,rect)
      elsif @effect_anime_frame == 31
          @effect_anime_type += 1
      elsif @effect_anime_frame == 41
          @effect_anime_type += 1
      elsif @effect_anime_frame == 51
          @effect_anime_type += 1
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 78 #操気円斬(Z2)_キャラ現れる
      

        if $partyc[@chanum.to_i] == 6
          picture = Cache.picture(set_battle_character_name 7,1)
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ")
        elsif $partyc[@chanum.to_i] == 7
          picture = Cache.picture(set_battle_character_name 6,1)
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
        end
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        if $partyc[@chanum.to_i] == 6
          @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY-50,picture,rect)
          #p STANDARD_CHAX+@effect_anime_frame*idouryou,TEC_CENTER_CHAX if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
        else
          @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY+50,picture,rect)
        end
    when 79 #操気円斬(Z2)_キャラ現れる(放置)
      picture = Cache.picture(set_battle_character_name 6,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_クリリン")
      rect = Rect.new(0, 0*96,96,96)
      #ushirox=0
      #idouryou = 8
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 80 #ダブルどどんぱ(正面)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(240+96,120,picture,rect)
      @back_window.contents.blt(240-98,110,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 81 #ダブルどどんぱエネルギー波系(小)横x2
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,28)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,144,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,174,picture,rect)
      else
        rect = Rect.new(0, 28,400,28)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,144,picture,rect)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,174,picture,rect)
      end
    when 82 #師弟の絆発動たま
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(250-94,114,picture,rect)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(252+96,130,picture,rect)
      
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 83 #師弟の絆発動たま横
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大(師弟の絆)") #ダメージ表示用
      rect = Rect.new(0, @ray_anime_type*92,400,92)
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,124,picture,rect)

      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 84 #師弟の絆(Z2)_キャラ現れる
      

        if $partyc[@chanum.to_i] == 4
          picture = Cache.picture(set_battle_character_name 5,1)
          if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
            picture = Cache.picture(set_battle_character_name 18,1)
          end
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
        else
          picture = Cache.picture(set_battle_character_name 4,1)
          #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
        end
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        if $partyc[@chanum.to_i] == 4
          @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY-50,picture,rect)
          #p STANDARD_CHAX+@effect_anime_frame*idouryou,TEC_CENTER_CHAX if $partyc[@chanum.to_i] == 6 || $partyc[@chanum.to_i] == 7
        else
          @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY+50,picture,rect)
        end
    when 85 #師弟の絆(Z2)_キャラ現れる(放置)
      picture = Cache.picture(set_battle_character_name 4,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ピッコロ")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
      picture = Cache.picture(set_battle_character_name 5,1)
      if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        picture = Cache.picture(set_battle_character_name 18,1)
      end
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 86 #師弟の絆(Z2)_キャラ現れる(放置)
      picture = Cache.picture(set_battle_character_name 5,1)
      if $super_saiyazin_flag[2] == true || $super_saiyazin_flag[5] == true
        picture = Cache.picture(set_battle_character_name 18,1)
      end
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ゴハン")
      rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)

    when 87 #界王拳
      
      end_frame = 41
      picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      attack_se = "Z1 打撃" 
      case @effect_anime_frame
      when 0..4
        battle_anime_change 0,7
        battle_anime_change 0,11 if $super_saiyazin_flag[1] == true
      when 5..8
        battle_anime_change 0,9
        battle_anime_change 0,13 if $super_saiyazin_flag[1] == true
      when 9..12
        battle_anime_change 0,10
        battle_anime_change 0,14 if $super_saiyazin_flag[1] == true
      when 13..16
        battle_anime_change 0,9
        battle_anime_change 0,13 if $super_saiyazin_flag[1] == true
      when 17..20
        battle_anime_change 0,10
        battle_anime_change 0,14 if $super_saiyazin_flag[1] == true
      when 21..23
        battle_anime_change 0,11
        battle_anime_change 0,15 if $super_saiyazin_flag[1] == true
      when 24..26
        battle_anime_change 0,12
        battle_anime_change 0,16 if $super_saiyazin_flag[1] == true
      when 27..30
        battle_anime_change 0,11
        battle_anime_change 0,15 if $super_saiyazin_flag[1] == true
      when 31..33
        battle_anime_change 0,9
        battle_anime_change 0,13 if $super_saiyazin_flag[1] == true
      when 34..36
        battle_anime_change 0,10
        battle_anime_change 0,14 if $super_saiyazin_flag[1] == true
      when 37..40
        battle_anime_change 0,12
        battle_anime_change 0,16 if $super_saiyazin_flag[1] == true
      when 41..43
        battle_anime_change 0,11
        battle_anime_change 0,15 if $super_saiyazin_flag[1] == true
      else
        battle_anime_change 0,10
        battle_anime_change 0,14 if $super_saiyazin_flag[1] == true
      end
      
      if @effect_anime_frame % 4 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
    when 88 #サイコアタック
      if @btl_ani_cha_chg_no == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
      end
      rect = Rect.new(0, 4*96,96,96)
      
      rect = Rect.new(0, 5*96,96,96) if @effect_anime_frame > 21
      if @effect_anime_frame <= 21
        @back_window.contents.blt(STANDARD_ENEX+60-@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-24,picture,rect)
      else
        @back_window.contents.blt(STANDARD_ENEX+74-21*RAY_SPEED,STANDARD_CHAY-8,picture,rect)
      end
    when 89 #スパーキングコンボキャラ現れる2人目上
        picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY-50,picture,rect)
    when 90 #スパーキングコンボキャラ現れる2人目下
        picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou+30,STANDARD_CHAY+50,picture,rect)
    when 91 #スパーキングコンボキャラ現れる2人目放置(上)
      picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY-50,picture,rect)
    when 92 #スパーキングコンボキャラ現れる2人目放置(下)
      picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        rect = Rect.new(0, 0*96,96,96)
      @back_window.contents.blt(TEC_CENTER_CHAX,STANDARD_CHAY+50,picture,rect)
    when 93 #ダイナマイトキック
      
      end_frame = 50
      end_frame2 = 150
      tyousei_x = 0
      tyousei_y = 0
      if @btl_ani_cha_chg_no == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
      end
      attack_se = "Z1 打撃" 
      case @effect_anime_frame
      
      when 0..7
        rect = Rect.new(0, 1*96,96,96)
      when 8..15
        rect = Rect.new(0, 2*96,96,96)
      when 16..23
        rect = Rect.new(0, 1*96,96,96)
      when 24..31
        rect = Rect.new(0, 2*96,96,96)
      when 32..39
        rect = Rect.new(0, 1*96,96,96)
      when 40..47
        rect = Rect.new(0, 2*96,96,96)
      when 51..60
        rect = Rect.new(0, 3*96,96,96)
        tyousei_x -= (@effect_anime_frame-end_frame) * 8
        tyousei_y -= (@effect_anime_frame-end_frame) * 4
      when 61..70
        rect = Rect.new(0, 4*96,96,96)
        tyousei_x -= (@effect_anime_frame-end_frame) * 8
        tyousei_y -= (@effect_anime_frame-end_frame) * 4
      when 71..80
        rect = Rect.new(0, 5*96,96,96)
        tyousei_x -= (@effect_anime_frame-end_frame) * 8
        tyousei_y -= (@effect_anime_frame-end_frame) * 4
      else
        rect = Rect.new(0, 0*96,96,96)
=begin  
        when 44..46
        rect = Rect.new(0, 2*96,96,96)
      when 47..50
        rect = Rect.new(0, 4*96,96,96)
      when 51..53
        rect = Rect.new(0, 2*96,96,96)
      when 54..56
        rect = Rect.new(0, 1*96,96,96)
      when 57..60
        rect = Rect.new(0, 2*96,96,96)
      when 61..80
        rect = Rect.new(0, 16*96,96,96)
      else
        #when 81..85
        
        if @btl_ani_cha_chg_no == 0
          if $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
        else
          if $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
          
        end
=end
      #else
        
        #if @btl_ani_cha_chg_no == 0
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
        #else
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
        #end
        #if $btl_progress >= 2
        #  rect = Rect.new(0, 3*96,96,96)
        #else
        #  rect = Rect.new(0, 3*96,96,96)
        #end
      end
      
      if @effect_anime_frame % 8 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      
      #if @effect_anime_frame >= 61 && @effect_anime_frame <= 80
      #  @back_window.contents.blt(CENTER_CHAX-(@effect_anime_frame-60)*8,STANDARD_CHAY,picture,rect)
      #elsif @effect_anime_frame >= 81 && @effect_anime_frame <= 84
      #  @back_window.contents.blt(80+(@effect_anime_frame-80)*16,STANDARD_CHAY,picture,rect)
      #else #if @effect_anime_frame < 86
        #@back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY,picture,rect)

        @back_window.contents.blt(TEC_CENTER_CHAX+tyousei_x,STANDARD_CHAY+tyousei_y,picture,rect)
      if end_frame == @effect_anime_frame
        #@enerect = Rect.new(0 , 0+(96*1), 96, 96)
        Audio.se_play("Audio/SE/" + "ZG 打撃2")
      end
      #end
    when 94 #氷結攻撃
      if ray_x == 0 || ray_x == nil
        ray_x = 230
        ray_y = 120
      end
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_氷(FF3)") #ダメージ表示用
      
      rect = Rect.new(@effect_anime_type*96, 0,96,96)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame == 8
          @effect_anime_type += 1
        elsif @effect_anime_frame == 16
          @effect_anime_type += 1
        #elsif @effect_anime_frame == 76
        #  @effect_anime_type += 1
      end
    when 95 #亀仙流かめはめは_発動Z1
     picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        @back_window.contents.blt(-44+CENTER_CHAX-120+8-28,-2+STANDARD_CHAY+4,picture,rect) #クリリン
        @back_window.contents.blt(172,116,picture,rect)
        @back_window.contents.blt(310,126,picture,rect)
        
        @back_window.contents.blt(-8+CENTER_CHAX+180+38-20,-6+STANDARD_CHAY+4,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 96 #亀仙流かめはめは_発動Z2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大") #ダメージ表示用
        rect = Rect.new(0, 192,192+@effect_anime_frame*RAY_SPEED,192)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 97 #エネルギー弾系(正面)フォトンストライク
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      end

      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(212,102,picture,rect)
      @back_window.contents.blt(288,102,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 98 #エネルギー波大横(敵)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_敵_大") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,88)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,134-44,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,134+44,picture,rect)
      else
        rect = Rect.new(0, 88,400,88)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,134+44,picture,rect)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,134-44,picture,rect)
      end
    when 99 #師弟の絆発動たま
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(250-94,114,picture,rect)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(252+90,122,picture,rect)
      
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
    when 101 #爆発小
      picture = Cache.picture("戦闘アニメ_爆発1") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*96, 0,96,96)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      
      if @damage_center == false
        if @attackcourse == 0 
          @back_window.contents.blt(320,120,picture,rect)
        else
          @back_window.contents.blt(230,120,picture,rect)
        end
      else
        if @attackcourse == 0 
          @back_window.contents.blt(320-64,120,picture,rect)
        else
          @back_window.contents.blt(230,120,picture,rect)
        end
      end
    when 102 #爆発中
      picture = Cache.picture("戦闘アニメ_爆発3") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*112, 0,112,120)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      if @damage_center == false
        if @attackcourse == 0 
          @back_window.contents.blt(318,120,picture,rect)
        else
          @back_window.contents.blt(230,120,picture,rect)
        end
      else
        if @attackcourse == 0 
          @back_window.contents.blt(254,120,picture,rect)
        else
          @back_window.contents.blt(254,120,picture,rect)
        end
      end
    when 103 #爆発大
      picture = Cache.picture("戦闘アニメ_爆発4") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*176, 0,176,144)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      if @damage_center == false
        if @attackcourse == 0 
          @back_window.contents.blt(298,120,picture,rect)
        else
          @back_window.contents.blt(204,120,picture,rect)
        end
      else
        if @attackcourse == 0 
          @back_window.contents.blt(234,120,picture,rect)
        else
          @back_window.contents.blt(234,120,picture,rect)
        end
      end
    when 104 #爆発大Z2
      picture = Cache.picture("戦闘アニメ_爆発5") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*158, 0,158,160)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      if @damage_center == false
        if @attackcourse == 0 
          @back_window.contents.blt(298-16,120-16,picture,rect)
        else
          @back_window.contents.blt(204-16,120-16,picture,rect)
        end
      else
        if @attackcourse == 0 
          @back_window.contents.blt(298-16-64,120-16,picture,rect)
        else
          @back_window.contents.blt(204-16,120-16,picture,rect)
        end
      end
    when 105 #爆発特大Z2
      picture = Cache.picture("戦闘アニメ_爆発6") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*256, 0,256,256)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      if @damage_center == false
        if @attackcourse == 0 
          @back_window.contents.blt(298-64,110-64,picture,rect)
        else
          @back_window.contents.blt(204-56,110-64,picture,rect)
        end
      else
        if @attackcourse == 0 
          @back_window.contents.blt(298-64-64,110-64,picture,rect)
        else
          @back_window.contents.blt(204-56,110-64,picture,rect)
        end
      end
    when 106 #爆発大(縦センター
      picture = Cache.picture("戦闘アニメ_爆発4") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*176, 0,176,144)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
        if @attackcourse == 0
          @back_window.contents.blt(270,88,picture,rect)
          #@back_window.contents.blt(234,88,picture,rect)
        else
          @back_window.contents.blt(200,88,picture,rect)
          #@back_window.contents.blt(214,88,picture,rect)
        end
    when 107 #巻きつく
      
      if $cha_bigsize_on[@chanum] == true
        picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル") #ダメージ表示用
        rect = Rect.new(146,38, 640,26)
        @back_window.contents.blt(ray_x+48,ray_y+6,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル_巻きつく(大)") #ダメージ表示用
        rect = Rect.new(0, 0,128,80)
        @back_window.contents.blt(ray_x-72,ray_y-12,picture,rect)

      else
        picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル") #ダメージ表示用
        rect = Rect.new(146,38, 640,26)
        @back_window.contents.blt(ray_x+56,ray_y+6,picture,rect)
        
        picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル_巻きつく") #ダメージ表示用
        rect = Rect.new(0, 0,64,40)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)

      end
    when 118 #攻撃回避(任意位置攻撃側を巨大判定)
      
      if @effect_anime_frame % 4 == 0
        if @attackcourse == 0
          if $cha_bigsize_on[@chanum] != true
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(ray_x,ray_y,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(ray_x-32,ray_y-32,picture,rect)
          end
          
          #@back_window.contents.blt(@chax+96,@chay+32,picture,rectb)
          #@back_window.contents.blt(@enex+32,@eney+16+500,picture,rect)
        else
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(ray_x,ray_y,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(ray_x-32,ray_y-32,picture,rect)
          end
          
          #@back_window.contents.blt(@enex-96,@chay+32,picture,rectb)
          
        end
        
      end
    when 119 #攻撃回避(任意位置防御側を巨大判定)
      
      if @effect_anime_frame % 4 == 0
        if @attackcourse == 0
          
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(ray_x,ray_y,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(ray_x-32,ray_y-32,picture,rect)
          end
          #@back_window.contents.blt(@chax+96,@chay+32,picture,rectb)
          #@back_window.contents.blt(@enex+32,@eney+16+500,picture,rect)
        else
          
          if $cha_bigsize_on[@chanum] != true
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(ray_x,ray_y,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(ray_x-32,ray_y-32,picture,rect)
          end
          #@back_window.contents.blt(@enex-96,@chay+32,picture,rectb)
          
        end
        
      end
    when 120 #攻撃回避
      
      if @effect_anime_frame % 4 == 0
        if @attackcourse == 0
          
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(@enex+32,@eney+16+500,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(@enex+32,@eney+16+500-32,picture,rect)
          end
          #@back_window.contents.blt(@chax+96,@chay+32,picture,rectb)
          #@back_window.contents.blt(@enex+32,@eney+16+500,picture,rect)
        else
          
          if $cha_bigsize_on[@chanum] != true
            picture = Cache.picture("戦闘アニメ") #ダメージ表示
            rect = Rect.new(0,48, 64, 64)
            @back_window.contents.blt(@chax+8,@chay+16+500,picture,rect)
          else
            picture = Cache.picture("戦闘アニメ96×96用回避") #ダメージ表示
            rect = Rect.new(0,0, 128, 128)
            @back_window.contents.blt(@chax+8-64,@chay+16+500-32,picture,rect)
          end
          #@back_window.contents.blt(@enex-96,@chay+32,picture,rectb)
          
        end
        
      end
    when 121 #攻撃ヒット
      picture = Cache.picture("戦闘アニメ") #ダメージ表示用
      rectb = Rect.new(32*0,16, 32, 32)
      rectc = Rect.new(32,0, 32, 16)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 4
        if @attackcourse == 0
          @back_window.contents.blt(@chax+96,@chay+32,picture,rectb)
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            @back_window.contents.blt(@enex,@eney,picture,rectc)
          else
            @back_window.contents.blt(@enex,@eney-48,picture,rectc)
          end
        else
          @back_window.contents.blt(@enex-32,@eney+32,picture,rectb)
          @back_window.contents.blt(@chax+64,@chay,picture,rectc)
        end
      elsif @effect_anime_frame >= 5 && @effect_anime_frame <= 10
        rectb = Rect.new(32*1,16, 32, 32)
        if @attackcourse == 0
          @back_window.contents.blt(@chax+96,@chay+32,picture,rectb)
          if $data_enemies[@enedatenum].element_ranks[23] != 1
            @back_window.contents.blt(@enex,@eney,picture,rectc)
          else
            @back_window.contents.blt(@enex,@eney-48,picture,rectc)
          end
        else
          @back_window.contents.blt(@enex-32,@chay+32,picture,rectb)
          @back_window.contents.blt(@chax+64,@chay,picture,rectc)
        end
        
      end
    when 122 #キャラぶつかる(センター)
      picture = Cache.picture("戦闘アニメ") #ダメージ表示用
      rectb = Rect.new(32,16, 32, 32)
      @back_window.contents.blt(640/2-16,480/2-90,picture,rectb)
    when 123 #キャラぶつかる自由位置
      picture = Cache.picture("戦闘アニメ") #ダメージ表示用
      
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 4
        rectb = Rect.new(32*0,16, 32, 32)
      elsif @effect_anime_frame >= 5 #&& @effect_anime_frame <= 10
        rectb = Rect.new(32*1,16, 32, 32)
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rectb)
    when 124 #キラーン自由位置
      picture = Cache.picture("戦闘アニメ_キラーン") #ダメージ表示用
      
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 7
        rect = Rect.new(32*0,0, 32, 32)
      elsif @effect_anime_frame >= 8 && @effect_anime_frame <= 15
        rect = Rect.new(32*1,0, 32, 32)
      elsif @effect_anime_frame >= 16 && @effect_anime_frame <= 23
        rect = Rect.new(32*2,0, 32, 32)
      elsif @effect_anime_frame >= 24 && @effect_anime_frame <= 31
        rect = Rect.new(32*1,0, 32, 32)
      elsif @effect_anime_frame >= 32 && @effect_anime_frame <= 39
        rect = Rect.new(32*0,0, 32, 32)
      else
        rect = Rect.new(0,0,0,0)
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 125 #攻撃ヒット自由位置
      picture = Cache.picture("戦闘アニメ") #ダメージ表示用
      rectb = Rect.new(32*0,16, 32, 32)
      rectc = Rect.new(32,0, 32, 16)
      if @effect_anime_frame >= 0 && @effect_anime_frame <= 4
        if @attackcourse == 0
          @back_window.contents.blt(ray_x,ray_y,picture,rectb)
          #if $data_enemies[@enedatenum].element_ranks[23] != 1
          #  @back_window.contents.blt(ray_x,ray_y,picture,rectc)
          #else
          #  @back_window.contents.blt(ray_x,ray_y-48,picture,rectc)
          #end
        else
          @back_window.contents.blt(ray_x,ray_y,picture,rectb)
          #@back_window.contents.blt(ray_x+64,ray_y,picture,rectc)
        end
      elsif @effect_anime_frame >= 5 && @effect_anime_frame <= 10
        rectb = Rect.new(32*1,16, 32, 32)
        if @attackcourse == 0
          @back_window.contents.blt(ray_x,ray_y,picture,rectb)
          #if $data_enemies[@enedatenum].element_ranks[23] != 1
          #  @back_window.contents.blt(ray_x,ray_y,picture,rectc)
          #else
          #  @back_window.contents.blt(ray_x,ray_y-48,picture,rectc)
          #end
        else
          @back_window.contents.blt(ray_x,ray_y,picture,rectb)
          #@back_window.contents.blt(ray_x+64,ray_y,picture,rectc)
        end
        
      end
#Z2
    when 201 #エネルギー弾系(発動)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        if @ray_spd_up_flag == false
          @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
        else
          @back_window.contents.blt(ray_x+@effect_anime_frame*(RAY_SPEED+@ray_spd_up_num),ray_y,picture,rect)
        end
      else
        if @ray_spd_up_flag == false
          @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
        else
          @back_window.contents.blt(ray_x-@effect_anime_frame*(RAY_SPEED+@ray_spd_up_num),ray_y,picture,rect)
        end
      end
      
      #if @effect_anime_frame >= 10 
      #  @effect_anime_type += 1
      #  @effect_anime_frame = 0
      #end
    when 202 #エネルギー弾系(ヒット)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,96,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,96,picture,rect)
      end
    when 203 #かめはめ波系(発動)
      #@effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2(青)") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,96,64)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 64,96,64)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 204 #かめはめ波系(ヒット)
      #@effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2(青)") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 0,96,64)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,144,picture,rect)
      else
        rect = Rect.new(0, 64,96,64)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,144,picture,rect)
      end
    when 205 #界王拳系(ヒット)
      #@effect_anime_type = 2
      if @ray_color == 0
        
        if $super_saiyazin_flag[1] == true
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_界王拳(超悟空)") #ダメージ表示用
        else
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_界王拳") #ダメージ表示用
        end
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_スピードアタック") #ダメージ表示用
      end
      #if @effect_anime_frame >= 10 && @effect_anime_type == 0
        #@effect_anime_type += 1
        #@effect_anime_frame = 0
      #elsif @effect_anime_frame >= 10 && @effect_anime_type == 1
        #@effect_anime_type = 0
        #@effect_anime_frame = 0
      #end
      if @attackcourse == 0
        rect = Rect.new(0, 0,236,122)
        @back_window.contents.blt(-236+@effect_anime_frame*RAY_SPEED,120,picture,rect)
      else
        rect = Rect.new(0, 0,236,122)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 206 #界王拳かめはめ波系(発動)
      #@effect_anime_type = 2
      
      if $btl_progress < 2
        if @ray_color == 0
          
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3") #ダメージ表示用
        elsif @ray_color == 1
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(緑)") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(青)") #ダメージ表示用
        #elsif @ray_color == 4
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
        end
      else
        if @ray_color == 0
          
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        elsif @ray_color == 1
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
        elsif @ray_color == 4
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
        end
      end

      if @attackcourse == 0
        rect = Rect.new(0, 0,222,134)
        rect = Rect.new(0, 0,190,126) if $btl_progress >= 2
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 128,192,128)
        rect = Rect.new(0, 126,190,126) if $btl_progress >= 2
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 207 #界王拳かめはめ波系(ヒット)
      #@effect_anime_type = 2
      if $btl_progress < 2
        if @ray_color == 0
          
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3") #ダメージ表示用
        elsif @ray_color == 1
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(緑)") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(青)") #ダメージ表示用
        end
      else
        if @ray_color == 0
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        elsif @ray_color == 1
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
        elsif @ray_color == 4
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
        end
      end
      if @attackcourse == 0
        rect = Rect.new(0, 0,222,134)
        rect = Rect.new(0, 0,190,126) if $btl_progress >= 2
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,96,picture,rect)
      else
        rect = Rect.new(0, 128,192,128)
        rect = Rect.new(0, 126,190,126) if $btl_progress >= 2
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,96,picture,rect)
      end
    when 208 #元気弾系(発動)
      @effect_anime_type = 3
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 209 #元気弾系(ヒット)
      @effect_anime_type = 3
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,112,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,112,picture,rect)
      end
    when 210 #超元気弾系(発動)
      @effect_anime_type = 5
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 211 #超元気弾系(ヒット)
      @effect_anime_type = 5
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,112,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,112,picture,rect)
      end
    when 212 #目から怪光線系(発動)
      @effect_anime_type = 1
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end

    when 213 #目から怪光線系(ヒット)
      @effect_anime_type = 1
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,96,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,96,picture,rect)
      end
    when 214 #魔貫光殺砲系(発動)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_魔貫光殺砲") #ダメージ表示用
      rect = Rect.new(0, 46,54+@effect_anime_frame*RAY_SPEED,46)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end

    when 215 #魔貫光殺砲系(ヒット)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_魔貫光殺砲") #ダメージ表示用
      rect = Rect.new(0, 0,400,46)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,140,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,140,picture,rect)
      end
    when 216 #拡散エネルギー波系(発動)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      rect = Rect.new(0, 112,54+@effect_anime_frame*RAY_SPEED,112)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end

    when 217 #拡散エネルギー波系(ヒット)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      rect = Rect.new(0, 0,400,112)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,122,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,122,picture,rect)
      end
    when 218 #気円斬系(発動)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用
      picture = Cache.picture("Z2_戦闘_必殺技_気円斬") #ダメージ表示用
      if @attackcourse == 0
        rect = Rect.new(0, 0,128,44)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 0,128,44)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 219 #気円斬系(ヒット)
      #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用
      picture = Cache.picture("Z2_戦闘_必殺技_気円斬") #ダメージ表示用
      if @attackcourse == 0
        rect = Rect.new(0, 0,192,128)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 0,192,128)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 220 #繰気弾系(発動)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 221 #繰気弾系(ヒット)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,120,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 222 #四身の拳
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * @effect_anime_frame+26,ray_y-1* @effect_anime_frame,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * @effect_anime_frame+26,ray_y+1* @effect_anime_frame,picture,rect)
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * (@effect_anime_frame-30)+26,ray_y-1* (@effect_anime_frame-30),picture,rect)
        @back_window.contents.blt(ray_x-0.5 * (@effect_anime_frame-30)+26,ray_y+1* (@effect_anime_frame-30),picture,rect)
      when 121..150
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)
      else
        if @effect_anime_frame == 151
          #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        end
        rect = Rect.new(0 , 0+(96*1), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)
        @effect_anime_type = 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
        rect = Rect.new(@effect_anime_type*128, 0,128,128)
        if @attackcourse == 0
          @back_window.contents.blt(ray_x+0.5 * 90+26+(@effect_anime_frame-150)*RAY_SPEED,ray_y-20-1* 90,picture,rect)
          @back_window.contents.blt(ray_x+0.5 * 30+26+(@effect_anime_frame-150)*RAY_SPEED,ray_y-20-1*30,picture,rect)
          @back_window.contents.blt(ray_x-0.5 * 30+26+(@effect_anime_frame-150)*RAY_SPEED,ray_y-20+1*30,picture,rect)
          @back_window.contents.blt(ray_x-0.5 * 90+26+(@effect_anime_frame-150)*RAY_SPEED,ray_y-20+1* 90,picture,rect)
        else
          @back_window.contents.blt(ray_x-@effect_anime_frame-150*RAY_SPEED,ray_y,picture,rect)
        end
      end
    when 223 #エネルギー弾系(ヒット)
      @effect_anime_type = 2
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20-1* 90+@effect_anime_frame*3,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20-1*30+@effect_anime_frame*1,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20+1*30-@effect_anime_frame*1,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20+1* 90-@effect_anime_frame*3,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,STANDARD_CHAY,picture,rect)
      end
    when 224 #四身の拳
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * @effect_anime_frame+26,ray_y-1* @effect_anime_frame,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * @effect_anime_frame+26,ray_y+1* @effect_anime_frame,picture,rect)
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * (@effect_anime_frame-30)+26,ray_y-1* (@effect_anime_frame-30),picture,rect)
        @back_window.contents.blt(ray_x-0.5 * (@effect_anime_frame-30)+26,ray_y+1* (@effect_anime_frame-30),picture,rect)
      when 121..150
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)
      else
        if @effect_anime_frame == 151
          Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        end
        rect = Rect.new(0 , 0+(96*2), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)
        @effect_anime_type = 2
      end
    when 225 #エネルギー波_小系(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      
      rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
      end

    when 226 #エネルギー波_小系(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      rect = Rect.new(0, 0,400,48)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,148,picture,rect)
      else
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,148,picture,rect)
      end
    when 227 #エネルギー波_小系(発動)敵
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_赤") #ダメージ表示用
      end
      #rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
      if @attackcourse == 0
        rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
      end
    when 228 #エネルギー波_小系(ヒット敵)敵
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_赤") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,400,48)
        @back_window.contents.blt(-450+@effect_anime_frame*RAY_SPEED,148,picture,rect)
      else
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED+64,148,picture,rect)
      end
    when 229 #衝撃波系(発動)敵
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系_赤") #ダメージ表示用
      end
        
      if @attackcourse == 0
        rect = Rect.new(0, 0,30,116)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 116,30,116)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 230 #衝撃波系(ヒット)敵
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_衝撃系_赤") #ダメージ表示用
      end
        
      if @attackcourse == 0
        rect = Rect.new(0, 0,30,116)
        @back_window.contents.blt(-64+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 116,30,116)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 231 #拡散エネルギー波系(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_青_敵") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_赤_敵") #ダメージ表示用
      end
      rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 112,54+@effect_anime_frame*RAY_SPEED,112)
      if @attackcourse == 0
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end

    when 232 #拡散エネルギー波系(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_青_敵") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_赤_敵") #ダメージ表示用
      end
      
      rect = Rect.new(0, 0,400,112)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,122,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,122,picture,rect)
      end
    when 233 #口から怪光線ドドリア系(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 234 #口から怪光線ドドリア系(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,400,80)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 80,400,80)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 235 #スーパーカメハメ波ため
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(青)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(赤)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)") #ダメージ表示用
      end
      rect = Rect.new(32*@ray_anime_type, 0,32,32)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4  && @ray_anime_type != 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 236 #スーパーカメハメ波発動
      if @attackcourse == 0 && mirror_pattern == 0
        if @ray_color == 0
          picture = Cache.picture("Z3_必殺技_超カメハメ波") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture("Z3_必殺技_超カメハメ波_青") #ダメージ表示用
        end
      else
        if @ray_color == 0
          picture = Cache.picture("Z3_必殺技_超カメハメ波_反転") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture("Z3_必殺技_超カメハメ波_青_反転") #ダメージ表示用
        end
      end
      
      if @attackcourse == 0 && mirror_pattern == 0
        rect = Rect.new(0, 0,54+@effect_anime_frame*RAY_SPEED,350)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        if 500-54-@effect_anime_frame*RAY_SPEED <= 500
          rect = Rect.new(500-54-@effect_anime_frame*RAY_SPEED, 0,500-54+@effect_anime_frame*RAY_SPEED,350)
        else
          rect = Rect.new(0, 0,500,350)
        end
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end
    when 237 #ファイナルリベンジャーため(小)
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅小)(青)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅小)(緑)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅小)(赤)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅小)") #ダメージ表示用
      end
      rect = Rect.new(16*@ray_anime_type, 0,16,16)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4  && @ray_anime_type != 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 238
      #@effect_anime_type = 2
      
      if $super_saiyazin_flag[7] == true
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ファイナルリベンジャー_超") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ファイナルリベンジャー") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(236*@ray_anime_type, 0,236,122)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(0, 0,236,122)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 239 #エネルギーは大(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        if @ray_color == 0
          rect = Rect.new(0, 92,144+@effect_anime_frame*RAY_SPEED,92)
        elsif @ray_color == 1
          rect = Rect.new(0, 92,144+@effect_anime_frame*RAY_SPEED,92)
        elsif @ray_color == 3
          rect = Rect.new(0, 122,144+@effect_anime_frame*RAY_SPEED,122)
        elsif @ray_color == 4
          rect = Rect.new(0, 122,144+@effect_anime_frame*RAY_SPEED,122)
        end
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        if @ray_color == 0
          rect = Rect.new(256-@effect_anime_frame*RAY_SPEED, 0,144+@effect_anime_frame*RAY_SPEED,92)
        elsif @ray_color == 1
          rect = Rect.new(256-@effect_anime_frame*RAY_SPEED, 0,144+@effect_anime_frame*RAY_SPEED,92)
        elsif @ray_color == 3
          rect = Rect.new(256-@effect_anime_frame*RAY_SPEED, 0,144+@effect_anime_frame*RAY_SPEED,122)
        elsif @ray_color == 4
          rect = Rect.new(256-@effect_anime_frame*RAY_SPEED, 0,144+@effect_anime_frame*RAY_SPEED,122)
        end
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 240 #エネルギーは大(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_大_敵_赤") #ダメージ表示用
      end
      
      if @attackcourse == 0
        if @ray_color == 0
          rect = Rect.new(0, 0,400,92)
        elsif @ray_color == 1
          rect = Rect.new(0, 0,400,92)
        elsif @ray_color == 3
          rect = Rect.new(0, 0,400,122)
        elsif @ray_color == 4
          rect = Rect.new(0, 0,400,122)
        end
        
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        if @ray_color == 0
          rect = Rect.new(0, 92,400,92)
        elsif @ray_color == 1
          rect = Rect.new(0, 92,400,92)
        elsif @ray_color == 3
          rect = Rect.new(0, 122,400,122)
        elsif @ray_color == 4
          rect = Rect.new(0, 122,400,122)
        end
        
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 241 #拡散エネルギー波系(発動)
      if @ray_anime_type == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_青_敵") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_赤_敵") #ダメージ表示用
      end
      
      rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 112,54+@effect_anime_frame*RAY_SPEED,112)
      
      if @attackcourse == 0
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
      
      if @ray_anime_frame >= 2  && @ray_anime_type != 2
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 2
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
      
    when 242 #拡散エネルギー波系(ヒット)
      if @ray_anime_type == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_青_敵") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_拡散エネルギー波_赤_敵") #ダメージ表示用
      end
      
      rect = Rect.new(0, 0,400,112)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,122,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,122,picture,rect)
      end
      
      if @ray_anime_frame >= 2  && @ray_anime_type != 2
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 2
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 243 #気円斬系(ヒット)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 0,192,128)
        @back_window.contents.blt(-192-220+@effect_anime_frame*RAY_SPEED,150,picture,rect)
      else
        rect = Rect.new(0, 128,192,128)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,150,picture,rect)
      end
    when 244 #ダブルどどんぱ(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      
      #rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
      if @attackcourse == 0
        rect = Rect.new(0, 48,54+@effect_anime_frame*(RAY_SPEED+2),48)
        if $btl_progress < 2
          @back_window.contents.blt(328,148-50,picture,rect)
        else
          @back_window.contents.blt(322,148-42,picture,rect)
        end
        rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
        if $btl_progress < 2
          @back_window.contents.blt(350,148+32,picture,rect)
        else
          @back_window.contents.blt(366,148+34,picture,rect)
        end
      else
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
      end

    when 245 #ダブルどどんぱ(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      rect = Rect.new(0, 0,400,48)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,148+24,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,148-24,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,148,picture,rect)
      end
    when 246 #師弟の絆(発動)
      #@effect_anime_type = 2
      
      if $btl_progress < 2
        rect = Rect.new(0, 0,192,128)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,96-46+1*@effect_anime_frame,picture,rect)
        
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(緑)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,96+42-1*@effect_anime_frame,picture,rect)
        
      else
        rect = Rect.new(0, 0,190,126)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98-46+1*@effect_anime_frame,picture,rect)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98+50-1*@effect_anime_frame,picture,rect)
        
      end
    when 247 #師弟の絆(ヒット)
      if $btl_progress < 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(師弟の絆)") #ダメージ表示用
        rect = Rect.new(0, @ray_anime_type*134,222,134)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,104,picture,rect)
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(師弟の絆)") #ダメージ表示用
        rect = Rect.new(0, @ray_anime_type*126,190,126)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,126,picture,rect)
        
      end
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 248 #サイヤンアタック界王拳系(追いかけ)
      #@effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_界王拳") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_スピードアタック") #ダメージ表示用
      end
      #if @effect_anime_frame >= 10 && @effect_anime_type == 0
        #@effect_anime_type += 1
        #@effect_anime_frame = 0
      #elsif @effect_anime_frame >= 10 && @effect_anime_type == 1
        #@effect_anime_type = 0
        #@effect_anime_frame = 0
      #end
      if @attackcourse == 0
        rect = Rect.new(0, 0,236,122)
        @back_window.contents.blt(-236+@effect_anime_frame*RAY_SPEED*3,120-20-@effect_anime_frame*2,picture,rect)
      else
        rect = Rect.new(0, 0,236,122)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,120,picture,rect)
      end
    when 249 #ギャリックカメハメは(発動)Z2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
        rect = Rect.new(0, 80,80+@effect_anime_frame*(RAY_SPEED+2),80)
        rect = Rect.new(0, 80,80+5*(RAY_SPEED+2),80) if @effect_anime_frame >= 5
        @back_window.contents.blt(160,118,picture,rect)
        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
        if @effect_anime_frame < 5
          rect = Rect.new(314-@effect_anime_frame*RAY_SPEED, 0,86+@effect_anime_frame*RAY_SPEED,80)
          @back_window.contents.blt(396-@effect_anime_frame*RAY_SPEED,118,picture,rect)
        else
          rect = Rect.new(314-5*RAY_SPEED, 0,86+5*RAY_SPEED,80) 
          @back_window.contents.blt(396-5*RAY_SPEED,118,picture,rect)
        end
        #p @effect_anime_frame
    when 250 #ギャリックカメハメは(発動2)Z2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
        rect = Rect.new(0, 0,400,80)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,76,picture,rect)
        rect = Rect.new(80, 80,320,80)
        @back_window.contents.blt(-720+@effect_anime_frame*RAY_SPEED,76,picture,rect)
        @back_window.contents.blt(-1040+@effect_anime_frame*RAY_SPEED,76,picture,rect)
        @back_window.contents.blt(-1360+@effect_anime_frame*RAY_SPEED,76,picture,rect)
        
        rect = Rect.new(0, 80,400,80)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,160,picture,rect)
        rect = Rect.new(112, 80,288,80)
        @back_window.contents.blt(928-@effect_anime_frame*RAY_SPEED,160,picture,rect)
        @back_window.contents.blt(1216-@effect_anime_frame*RAY_SPEED,160,picture,rect)
        @back_window.contents.blt(1504-@effect_anime_frame*RAY_SPEED,160,picture,rect)
        #p @effect_anime_frame
    when 251 #ギャリックカメハメは(発動2)Z2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
        rect = Rect.new(0, 0,400,80)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,134,picture,rect)
        
        rect = Rect.new(0, 80,400,80)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,134,picture,rect)
        
        #p @effect_anime_frame
    when 252 #元気玉ため
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)(青)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)(緑)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)") #ダメージ表示用
      end
      rect = Rect.new(64*@ray_anime_type, 0,64,64)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4 && @ray_anime_type != 3
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 253 #超元気玉ため

      picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_溜め") #ダメージ表示用

      rect = Rect.new(0, @ray_anime_type*110,246,110)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 20 && @ray_anime_type != 5
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4 && @ray_anime_type == 5
        @ray_anime_type = 4
        @ray_anime_frame = 0
      end
    when 254 #まかんこうさっぽう発動

      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲(発動)") #ダメージ表示用

      rect = Rect.new(@ray_anime_type*166,0,166,176)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 2 && @ray_anime_type != 1
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 2 && @ray_anime_type == 1
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 255 #Z3まかんこうさっぽう(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 0,400,64)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 64,400,64)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 256 #Z3エネルギー波半円発動
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(青)") #ダメージ表示用
      elsif @ray_color == 9
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(紫)") #ダメージ表示用
      end
      
      if @attackcourse == 0 && mirror_pattern == 0
        rect = Rect.new(0, 0,@effect_anime_frame*RAY_SPEED,128)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(700-@effect_anime_frame*RAY_SPEED, 128,@effect_anime_frame*RAY_SPEED,128)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 257 #エネルギー波縦発動
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_縦") #ダメージ表示用
      rect = Rect.new(0, 0,60,@effect_anime_frame*RAY_SPEED+56)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 258 #エネルギー波縦ヒット
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_縦") #ダメージ表示用
      rect = Rect.new(60, 0,60,400)
      @back_window.contents.blt(ray_x,ray_y+@effect_anime_frame*RAY_SPEED,picture,rect)
    when 259 #エネルギー波縦ヒット
      
      picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)") #ダメージ表示用
      rect = Rect.new(0, 0,32,32)
      @back_window.contents.blt(ray_x,ray_y+@effect_anime_frame*RAY_SPEED/2,picture,rect)
    when 260 #Z3気円斬系(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,160,picture,rect)
      else
        rect = Rect.new(0, 30*4,192,30)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,160,picture,rect)
      end
    when 261 #そうきだんため
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)(青)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_繰気弾(球点滅中)") #ダメージ表示用
      end
      rect = Rect.new(64*@ray_anime_type, 0,64,64)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 262 #そうきだん(ヒット)
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)(青)") #ダメージ表示用
        rect = Rect.new(64*3, 0,64,64)
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_元気玉(球点滅中)(緑)") #ダメージ表示用
        rect = Rect.new(64*3, 0,64,64)
      else
        picture = Cache.picture("Z3_必殺技_繰気弾(球点滅中)") #ダメージ表示用
        rect = Rect.new(64*5, 0,64,64)
      end
      
      if @attackcourse == 0
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 263 #四身の拳
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      case @effect_anime_frame

      when 0..15
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * @effect_anime_frame+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * @effect_anime_frame+26,ray_y,picture,rect)
      when 16..29
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(ray_x+4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 15+26,ray_y,picture,rect)
        #if @effect_anime_frame == 59
        #  Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        #end
      when 30..60
        #p @effect_anime_frame
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x+4 * (@effect_anime_frame-15)+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * (@effect_anime_frame-15)+26,ray_y,picture,rect)
      when 61..75
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x+4 * 45+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 45+26,ray_y,picture,rect)
      when 76..110
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * 15+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x+4 * 45+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 45+26,ray_y,picture,rect)
        rect = Rect.new(0 , 0+(96*6), 96, 96)
        @back_window.contents.blt(ray_x-4 * 15+26-2*(@effect_anime_frame-75) ,ray_y-8*(@effect_anime_frame-75),picture,rect)
      when 111..145
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * 45+26,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-4 * 45+26,ray_y,picture,rect)
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        @back_window.contents.blt(ray_x+4 * 15+26+2*(@effect_anime_frame-111),ray_y-8*(@effect_anime_frame-111),picture,rect)
      when 146..180
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+4 * 45+26,ray_y,picture,rect)
        rect = Rect.new(0 , 0+(96*6), 96, 96)
        @back_window.contents.blt(ray_x-4 * 45+26-2*(@effect_anime_frame-146),ray_y-8*(@effect_anime_frame-146),picture,rect)        
      when 181..215
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        @back_window.contents.blt(ray_x+4 * 45+26+2*(@effect_anime_frame-181),ray_y-8*(@effect_anime_frame-181),picture,rect)
      end
    when 264 #ビッグバンアタック
      if @ray_color == 3
        if @attackcourse == 0
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動(青)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動(青)_反転") #ダメージ表示用
        end
      elsif @ray_color == 1
        if @attackcourse == 0
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動(緑)") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動(緑)_反転") #ダメージ表示用
        end
      else
        if @attackcourse == 0
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動") #ダメージ表示用
        else
          picture = Cache.picture("Z3_必殺技_ビッグバンアタック発動_反転") #ダメージ表示用
        end
      end
      if @attackcourse == 0
        rect = Rect.new(302*@ray_anime_type, 0,302,200)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(302*@ray_anime_type, 0,302,200)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end
      if @ray_anime_frame >= 4 && @ray_anime_type != 1
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4 && @ray_anime_type == 1
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 265 #Z3エネルギー波半円ヒット
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(青)") #ダメージ表示用
      elsif @ray_color == 9
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(紫)") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 128,700,128)
        @back_window.contents.blt(-700+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 0,700,128)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 266 #Z3エネルギー弾ヒット
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,190,126)
        @back_window.contents.blt(-162+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 126,190,126)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 267 #Z3_戦闘_必殺技_剣攻撃
      if @attackcourse == 0
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(左右反転)") #ダメージ表示用
      end

      rect = Rect.new(160*@ray_anime_type, 0,160,96)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      
      if @ray_anime_frame >= 2 #&& @ray_anime_type != 6
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
    when 268 #Z3_戦闘_必殺技_剣攻撃上下反転
      if @attackcourse == 0
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(上下反転)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(上下左右反転)") #ダメージ表示用
      end

      rect = Rect.new(160*@ray_anime_type, 0,160,96)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      
      if @ray_anime_frame >= 2 #&& @ray_anime_type != 6
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
    when 269 #Z3_戦闘_必殺技_剣攻撃縦
      if @attackcourse == 0
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(縦)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(左右反転)") #ダメージ表示用
      end

      rect = Rect.new(96*@ray_anime_type, 0,96,160)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      
      if @ray_anime_frame >= 2 #&& @ray_anime_type != 6
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
    when 270 #Z3_戦闘_必殺技_剣攻撃縦上下反転
      if @attackcourse == 0
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(縦上下反転)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_剣攻撃(上下左右反転)") #ダメージ表示用
      end

      rect = Rect.new(96*@ray_anime_type, 0,96,160)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      
      if @ray_anime_frame >= 2 #&& @ray_anime_type != 6
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
    when 271 #デスボール系(ヒット)
      
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,112,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,112,picture,rect)
      end
    when 272 #Z3まかんこうさっぽう(発動横)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 0,400,64)
      if @attackcourse == 0
        rect = Rect.new(0, 64,64+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new((400-64)-@effect_anime_frame*RAY_SPEED, 0,(400-64)+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 273 #ロケットパンチ(発動)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ロケットパンチ") #ダメージ表示用
      
      shake_dot = 4
      shakex,shakey = pic_shake_cal shake_dot
      
      if @effect_anime_frame != 0
        shakex,shakey = 0,0
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,24,14)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED+shakex,ray_y+shakey,picture,rect)
      else
        rect = Rect.new(0, 14,24,14)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED+shakex,ray_y+shakey,picture,rect)
      end
    when 274 #ロケットパンチ(ヒット)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ロケットパンチ") #ダメージ表示用
 
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,24,14)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,144,picture,rect)
      else
        rect = Rect.new(0, 14,24,14)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,144,picture,rect)
      end
    when 275 #ヘルズフラッシュ発動
      if @attackcourse == 0
        if @ray_color == 0
          picture = Cache.picture("Z3_必殺技_超カメハメ波") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture("Z3_必殺技_超カメハメ波_青") #ダメージ表示用
        end
      else
        if @ray_color == 0
          picture = Cache.picture("Z3_必殺技_超カメハメ波_反転") #ダメージ表示用
        elsif @ray_color == 3
          picture = Cache.picture("Z3_必殺技_超カメハメ波_青_反転") #ダメージ表示用
        end
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,54+@effect_anime_frame*RAY_SPEED,350)
        #@back_window.contents.blt(ray_x-76,ray_y-50,picture,rect)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
        
      else
        if 500-54-@effect_anime_frame*RAY_SPEED <= 500
          rect = Rect.new(500-54-@effect_anime_frame*RAY_SPEED, 0,500-54+@effect_anime_frame*RAY_SPEED,350)
        else
          rect = Rect.new(0, 0,500,350)
        end
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end
    when 276 #Z3そうきえんざん(発動)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 30*4,192,30)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 277 #Z3そうきえんざん(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(-192-220+@effect_anime_frame*RAY_SPEED,160,picture,rect)
      else
        rect = Rect.new(0, 30*4,192,30)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,160,picture,rect)
      end
    when 278 #ファイナルフラッシュため
      picture = Cache.picture("ZG_戦闘_必殺技_ファイナルフラッシュ弾") #ダメージ表示用
      rect = Rect.new(32*@ray_anime_type, 0,32,32)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4  && @ray_anime_type != 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4  && @ray_anime_type == 4
        #@ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 279 #気の開放エネルギー弾(発動)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        if @ray_spd_up_flag == false
          @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
          @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y+64,picture,rect)
        else
          @back_window.contents.blt(ray_x+@effect_anime_frame*(RAY_SPEED+@ray_spd_up_num),ray_y,picture,rect)
          @back_window.contents.blt(ray_x+@effect_anime_frame*(RAY_SPEED+@ray_spd_up_num),ray_y+64,picture,rect)
        end
      else
        if @ray_spd_up_flag == false
          @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
        else
          @back_window.contents.blt(ray_x-@effect_anime_frame*(RAY_SPEED+@ray_spd_up_num),ray_y,picture,rect)
        end
      end
      
      #if @effect_anime_frame >= 10 
      #  @effect_anime_type += 1
      #  @effect_anime_frame = 0
      #end
    when 280 #気の開放エネルギー弾(ヒット)
      @effect_anime_type = 2
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,32+54,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,32+40+54,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,96,picture,rect)
      end
    when 281 #どどはめは(発動)
      picture = Cache.picture("Z3_戦闘_必殺技_どどはめはエネルギー波") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 0,144+@effect_anime_frame*RAY_SPEED,204)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(256-@effect_anime_frame*RAY_SPEED, 0,144+@effect_anime_frame*RAY_SPEED,122)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 282 #どどはめは(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_どどはめはエネルギー波_ヒット") #ダメージ表示用
      
      rect = Rect.new(0, 0,400,128)
      if @attackcourse == 0
        @back_window.contents.blt(-20-400+@effect_anime_frame*RAY_SPEED,32+54+24,picture,rect)
        #@back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,32+40+54,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,96,picture,rect)
      end
      
    when 283 #Z2_エネルギー液発動
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(緑)") #ダメージ表示用
      elsif @ray_color == 2
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(水色)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー液(桃)") #ダメージ表示用
      end
      
      if @attackcourse == 0 && mirror_pattern == 0
        rect = Rect.new(0, 32,24+@effect_anime_frame*RAY_SPEED,32)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(400-@effect_anime_frame*RAY_SPEED, 0,@effect_anime_frame*RAY_SPEED,32)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 284 #エネルギー波_小系(発動)敵(イベント用強制敵側)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_赤") #ダメージ表示用
      end
      #rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
    when 285 #エネルギー波_小系(ヒット敵)敵(イベント用強制敵側)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_赤") #ダメージ表示用
      end
      
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED+64,148,picture,rect)
    when 286 #爆発大(イベント用強制味方側)
      picture = Cache.picture("戦闘アニメ_爆発4") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*176, 0,176,144)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      if @damage_center == false
          @back_window.contents.blt(204,120,picture,rect)
      else
          @back_window.contents.blt(234,120,picture,rect)
        end
    when 287 #爆発大Z2(イベント用強制味方側)
      picture = Cache.picture("戦闘アニメ_爆発5") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*158, 0,158,160)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1
        @effect_anime_frame = 0
      end
      
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 288 #高速移動(イベント用)
      if @effect_anime_frame % 4 == 0
        picture = Cache.picture("戦闘アニメ") #ダメージ表示用
        rect = Rect.new(0,48, 64, 64)
        @back_window.contents.blt(CENTER_ENEX-66,STANDARD_ENEY+26,picture,rect)
      end
    when 289 #スピリッツキャノン一枚絵用
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅大)(青)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅大)(緑)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅大)") #ダメージ表示用
      end
      rect = Rect.new(64*@ray_anime_type, 0,64,64)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4  && @ray_anime_type != 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 290 #アクセルダンスエネルギー波ため
      if @ray_color == 3
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(青)") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)(緑)") #ダメージ表示用
      else
        picture = Cache.picture("Z3_必殺技_超カメハメ波(球点滅)") #ダメージ表示用
      end
      rect = Rect.new(32*@ray_anime_type, 0,32,32)
      @back_window.contents.blt(270,164,picture,rect)
      @back_window.contents.blt(340,164,picture,rect)
      if @ray_anime_frame >= 4  && @ray_anime_type != 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 291 #ヒートドームアタック(発動
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_赤") #ダメージ表示用
      end
      
        rect = Rect.new(0,800-140-@effect_anime_frame*RAY_SPEED,192,140+@effect_anime_frame*RAY_SPEED)
        @back_window.contents.blt(ray_x,ray_y-@effect_anime_frame*RAY_SPEED,picture,rect)
    when 292 #ヒートドームアタック(ヒット
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_緑") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_縦_赤") #ダメージ表示用
      end
        rect = Rect.new(0,0,192,400)
        @back_window.contents.blt(ray_x,ray_y-@effect_anime_frame*RAY_SPEED,picture,rect)
    when 293 #Z3エネルギー弾発動
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,190,126)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 126,190,126)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 294 #繰気弾系(ヒット)
      @effect_anime_type = 4
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾") #ダメージ表示用
      #elsif @ray_color == 1
      #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_繰気弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,114,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,114,picture,rect)
      end
    when 295 #Z3エネルギー波_特大発動
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_緑") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_特大_青") #ダメージ表示用
      end
      
      if @attackcourse == 0
        rect = Rect.new(0, 192,192+@effect_anime_frame*RAY_SPEED,192)
        
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        #p @effect_anime_frame,400-192-@effect_anime_frame*RAY_SPEED
        #rect = Rect.new(400-192-@effect_anime_frame*RAY_SPEED, 0,400-192-@effect_anime_frame*RAY_SPEED,192)
        rect = Rect.new(400-192-@effect_anime_frame*RAY_SPEED, 0,400-192+@effect_anime_frame*RAY_SPEED,192)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 296 #エネルギー波_中Z2以降(発動)

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 297 #エネルギー波_中Z2以降(ヒット)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
      
      if @attackcourse == 0
        rect = Rect.new(0, 0,400,80)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 80,400,80)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 298 #ノンステップバイオレンスエネルギー波_小系(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      
      rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
      if @attackcourse == 0
        @back_window.contents.blt(@chax + 72,@chay + 16,picture,rect)
        @back_window.contents.blt(@chax + 80,@chay + 112,picture,rect)
      else
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
      end
    when 299 #ノンステップバイオレンスエネルギー波_小系(ヒット)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      rect = Rect.new(0, 0,400,48)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,148-24,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,148+24,picture,rect)
      else
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,148,picture,rect)
      end
    when 300 #ダブルZ3気円斬系(発動)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(338+@effect_anime_frame*RAY_SPEED,144-50,picture,rect)
        @back_window.contents.blt(338+@effect_anime_frame*RAY_SPEED,144+50,picture,rect)
      else
        rect = Rect.new(0, 30*4,192,30)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,160,picture,rect)
      end
    when 301 #ダブルZ3気円斬系(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 30*4,126,30)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,160-40,picture,rect)
        @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,160+40,picture,rect)
      else
        rect = Rect.new(0, 30*4,192,30)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,160,picture,rect)
      end
    when 302 #ギャリックバスター(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+2,ray_y-124,picture,rect)
        @back_window.contents.blt(ray_x+4,ray_y-32,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 303 #アウトサイダーショット(ピ&バ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-134,picture,rect)
        @back_window.contents.blt(ray_x+2,ray_y-36,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 304 #アウトサイダーショット(ピ&17号)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+2,ray_y-138,picture,rect)
        @back_window.contents.blt(ray_x+6,ray_y-34,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 305 #ダブルませんこう(ゴハン＆トランクス)発動
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(桃)") #ダメージ表示用
      end
      
      if @attackcourse == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4")
        rect = Rect.new(0, 0,190,126)
        @back_window.contents.blt(ray_x-10+@effect_anime_frame*RAY_SPEED,ray_y-146,picture,rect)
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー弾4(青)")
        rect = Rect.new(0, 0,190,126)
        @back_window.contents.blt(ray_x+4+@effect_anime_frame*RAY_SPEED,ray_y-54,picture,rect)
      else
        rect = Rect.new(0, 126,190,126)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 306 #ダブルませんこう(ゴハン＆トランクス)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(ダブルませんこう_ゴハン_トランクス)") #ダメージ表示用
      rect = Rect.new(0, @ray_anime_type*126,190,126)
      @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,126,picture,rect)
      
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 307 #Z3まかんこうさっぽう(発動横)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 0,400,64)
      if @attackcourse == 0
        rect = Rect.new(0, 64,64+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x+20,ray_y-132,picture,rect)
        @back_window.contents.blt(ray_x+18,ray_y-28,picture,rect)
      else
        rect = Rect.new((400-64)-@effect_anime_frame*RAY_SPEED, 0,(400-64)+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 308 #Z3まかんこうさっぽう(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 0,400,64)
      if @attackcourse == 0
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y-32,picture,rect)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y+32,picture,rect)
      else
        rect = Rect.new(0, 64,400,64)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 309 #サイヤンアタック(ピ&バ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      end
      
      rect = Rect.new(0, 48,54+@effect_anime_frame*RAY_SPEED,48)
      if @attackcourse == 0
        @back_window.contents.blt(@chax + 74,@chay + 18,picture,rect)
        @back_window.contents.blt(@chax + 92,@chay + 86,picture,rect)
      else
        rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
        @back_window.contents.blt(ray_x-92-@effect_anime_frame*RAY_SPEED,ray_y-10,picture,rect)
      end
    when 310 #アウトサイダーショット(バーダック&トーマ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-134,picture,rect)
        @back_window.contents.blt(ray_x+14,ray_y-32,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 311 #アウトサイダーショット(バーダック&セリパ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-134,picture,rect)
        @back_window.contents.blt(ray_x+0,ray_y-28,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 312 #アウトサイダーショット(バーダック&トテッポ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-134,picture,rect)
        @back_window.contents.blt(ray_x+12,ray_y-40,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 313 #アウトサイダーショット(バーダック&パンブーキン)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-134,picture,rect)
        @back_window.contents.blt(ray_x+14,ray_y-20,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 314 #地球人ストライク 四身の拳
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      
      x_idou = 1.5
      x_tyousei = 14
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+x_idou * @effect_anime_frame-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * @effect_anime_frame-x_tyousei,ray_y,picture,rect)
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(ray_x+x_idou * 30-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * 30-x_tyousei,ray_y,picture,rect)
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+x_idou * 30-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * 30-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x+x_idou * (@effect_anime_frame-30)-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * (@effect_anime_frame-30)-x_tyousei,ray_y,picture,rect)
      else
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+x_idou * 30-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * 30-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x+x_idou * 90-x_tyousei,ray_y,picture,rect)
        @back_window.contents.blt(ray_x-x_idou * 90-x_tyousei,ray_y,picture,rect)
      end
    when 315 #地球人ストライク サイコアタックと狼牙

      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_チャオズ") #ダメージ表示用
      rect = Rect.new(0, 5*96,96,96)
      @back_window.contents.blt(STANDARD_ENEX+74-21*RAY_SPEED,STANDARD_CHAY-8,picture,rect)
      end_frame = 85
      
      if @btl_ani_cha_chg_no == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
      end
      attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
      when 31..35
        rect = Rect.new(0, 0*96,96,96)
      when 36..39
        rect = Rect.new(0, 3*96,96,96)
      when 40..43
        rect = Rect.new(0, 1*96,96,96)
      when 44..46
        rect = Rect.new(0, 2*96,96,96)
      when 47..50
        rect = Rect.new(0, 4*96,96,96)
      when 51..53
        rect = Rect.new(0, 2*96,96,96)
      when 54..56
        rect = Rect.new(0, 1*96,96,96)
      when 57..60
        rect = Rect.new(0, 2*96,96,96)
      when 61..80
        rect = Rect.new(0, 16*96,96,96)
      else
        #when 81..85
        
        if @btl_ani_cha_chg_no == 0
          if $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
        else
          if $btl_progress >= 2
            picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 3*96,96,96)
          else
            picture = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
            rect = Rect.new(0, 2*96,96,96)
          end
          
        end
      #else
        
        #if @btl_ani_cha_chg_no == 0
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
        #else
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
        #end
        #if $btl_progress >= 2
        #  rect = Rect.new(0, 3*96,96,96)
        #else
        #  rect = Rect.new(0, 3*96,96,96)
        #end
      end
      
      if @effect_anime_frame >= 36 && @effect_anime_frame % 5 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      
      if @effect_anime_frame >= 61 && @effect_anime_frame <= 80
        @back_window.contents.blt(CENTER_CHAX-(@effect_anime_frame-60)*8,STANDARD_CHAY,picture,rect)
      elsif @effect_anime_frame >= 81 && @effect_anime_frame <= 84
        @back_window.contents.blt(80+(@effect_anime_frame-80)*16,STANDARD_CHAY,picture,rect)
      else #if @effect_anime_frame < 86
        @back_window.contents.blt(CENTER_CHAX,STANDARD_CHAY,picture,rect)
      end
    when 316 #エネルギー波_小系(発動)敵
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
      rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
      @back_window.contents.blt(ray_x-92+84-@effect_anime_frame*RAY_SPEED,ray_y-10-96,picture,rect)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      @back_window.contents.blt(ray_x-92+100-@effect_anime_frame*RAY_SPEED,ray_y-10-16,picture,rect)
      
    when 317 #メタルクラッシュ
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小") #ダメージ表示用
        rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED+64,148-24,picture,rect)        
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
        #rect = Rect.new(0, 48,400,48)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED+64,148+24,picture,rect)
    when 318 #四身の拳かめはめは(発動)
      
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_テンシンハン") #ダメージ表示用
      if @btl_ani_cha_chg_no == 0
        picture2 = Cache.picture(set_battle_character_name $partyc[@chanum.to_i],1)
        #picture2 = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
      else
        picture2 = Cache.picture(set_battle_character_name @btl_ani_cha_chg_no,1)
        #picture2 = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
      end

      tasux = 160
      case @effect_anime_frame
      
      when 0..30
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * @effect_anime_frame+26,ray_y-1* @effect_anime_frame,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * @effect_anime_frame+26,ray_y+1* @effect_anime_frame,picture,rect)
        
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        if @battle_anime_frame % 2 == 0
          @back_window.contents.blt(ray_x+0.5 * 30+26+tasux,ray_y-1*30,picture2,rect)
        else
          @back_window.contents.blt(ray_x-0.5 * 30+26+tasux,ray_y+1*30,picture2,rect)
        end
      when 31..59
        
        rect = Rect.new(0 , 0+(96*3), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        if @battle_anime_frame % 2 == 0
          @back_window.contents.blt(ray_x+0.5 * 30+26+tasux,ray_y-1*30,picture2,rect)
        else
          @back_window.contents.blt(ray_x-0.5 * 30+26+tasux,ray_y+1*30,picture2,rect)
        end
        if @effect_anime_frame == 59
          Audio.se_play("Audio/SE/" + "Z1 分身")    # 効果音を再生する
        end
      when 60..120
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * (@effect_anime_frame-30)+26,ray_y-1* (@effect_anime_frame-30),picture,rect)
        @back_window.contents.blt(ray_x-0.5 * (@effect_anime_frame-30)+26,ray_y+1* (@effect_anime_frame-30),picture,rect)
        
        
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        if @battle_anime_frame % 4 == 0
          @back_window.contents.blt(ray_x+0.5 * 30+26+tasux,ray_y-1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 1
          @back_window.contents.blt(ray_x-0.5 * 30+26+tasux,ray_y+1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 2
          @back_window.contents.blt(ray_x-0.5 * 90+26+tasux,ray_y+1* 90,picture2,rect) 
        else
          @back_window.contents.blt(ray_x+0.5 * 90+26+tasux,ray_y-1* 90,picture2,rect)
        end
      when 121..150
        rect = Rect.new(0 , 0+(96*4), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)
        
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        if @battle_anime_frame % 4 == 0
          @back_window.contents.blt(ray_x+0.5 * 30+26+tasux,ray_y-1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 1
          @back_window.contents.blt(ray_x-0.5 * 30+26+tasux,ray_y+1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 2
          @back_window.contents.blt(ray_x-0.5 * 90+26+tasux,ray_y+1* 90,picture2,rect) 
        else
          @back_window.contents.blt(ray_x+0.5 * 90+26+tasux,ray_y-1* 90,picture2,rect)
        end
      else
        if @effect_anime_frame == 151
          #Audio.se_play("Audio/SE/" + "Z1 ザー")    # 効果音を再生する
          #Audio.se_play("Audio/SE/" + "Z3 エネルギー波")    # 効果音を再生する
        end
        rect = Rect.new(0 , 0+(96*0), 96, 96)
        @back_window.contents.blt(ray_x+0.5 * 90+26,ray_y-1* 90,picture,rect)
        @back_window.contents.blt(ray_x+0.5 * 30+26,ray_y-1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 30+26,ray_y+1*30,picture,rect)
        @back_window.contents.blt(ray_x-0.5 * 90+26,ray_y+1* 90,picture,rect)

        rect = Rect.new(0 , 0+(96*0), 96, 96)
        if @battle_anime_frame % 4 == 0
          @back_window.contents.blt(ray_x+0.5 * 30+26+tasux,ray_y-1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 1
          @back_window.contents.blt(ray_x-0.5 * 30+26+tasux,ray_y+1*30,picture2,rect)
        elsif @battle_anime_frame % 4 == 2
          @back_window.contents.blt(ray_x-0.5 * 90+26+tasux,ray_y+1* 90,picture2,rect) 
        else
          @back_window.contents.blt(ray_x+0.5 * 90+26+tasux,ray_y-1* 90,picture2,rect)
        end
      end
    when 319 #四身の拳かめはめは(ヒット)
      @effect_anime_type = 2
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if @attackcourse == 0
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20-1* 90+@effect_anime_frame*3,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20-1*30+@effect_anime_frame*1,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20+1*30-@effect_anime_frame*1,picture,rect)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,STANDARD_CHAY-20+1* 90-@effect_anime_frame*3,picture,rect)
      else
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,STANDARD_CHAY,picture,rect)
      end
      
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾2") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0, 0,96,64)
        @back_window.contents.blt(-128+@effect_anime_frame*RAY_SPEED,144,picture,rect)
      else
        rect = Rect.new(0, 64,96,64)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,144,picture,rect)
      end
    when 320 #行くぞクリリン(発動)
      #@effect_anime_type = 2
      
      if $btl_progress < 2
        rect = Rect.new(0, 0,222,134)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3(緑)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,96-58+1*@effect_anime_frame,picture,rect)

        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾3") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,96+60-1*@effect_anime_frame,picture,rect)
        
      else
        rect = Rect.new(0, 0,190,126)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(緑)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98-56+1*@effect_anime_frame,picture,rect)

        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98+60-1*@effect_anime_frame,picture,rect)

                
      end
    when 321 #アウトサイダーショット(ピ&ベ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+2,ray_y-136,picture,rect)
        @back_window.contents.blt(ray_x+2,ray_y-28,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 322
      picture = Cache.picture("Z3_戦闘_必殺技_ロボット兵腕2") #ダメージ表示用
      rect = Rect.new(0, 0,32,18)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 323
      picture = Cache.picture("Z3_戦闘_必殺技_ロボット兵腕3") #ダメージ表示用
      rect = Rect.new(0, 0,30,24)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @battle_anime_frame >= 379
        picture = Cache.picture("Z3_必殺技_爆発") #ダメージ表示用
        rect = Rect.new(0, 0,32,32)
        tempx = @chax + (rand(18) * 2)
        tempy = @chay + (rand(16) * 2)
        @back_window.contents.blt(tempx,tempy,picture,rect)
      end
    when 324 #超元気玉ため(逆)

      picture = Cache.picture("Z3_戦闘_必殺技_超元気玉_溜め(逆)") #ダメージ表示用

      rect = Rect.new(0, @ray_anime_type*110,246,110)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 20 && @ray_anime_type != 5
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4 && @ray_anime_type == 5
        @ray_anime_type = 4
        @ray_anime_frame = 0
      end
    when 325 #スーパービッグノヴァ発動

      picture = Cache.picture("Z3_戦闘_必殺技_デスボール(極大玉縦)(オレンジ)") #ダメージ表示用

      rect = Rect.new(0, 0,512,250)
      @back_window.contents.blt(ray_x - (@effect_anime_frame * 8),ray_y + (@effect_anime_frame * 2),picture,rect)
    when 326 #スーパービッグノヴァ発動(ヒット)

      picture = Cache.picture("Z3_戦闘_必殺技_デスボール(極大玉)(オレンジ)") #ダメージ表示用

      rect = Rect.new(0, 0,900,512)
      @back_window.contents.blt(ray_x - (@effect_anime_frame * 8),ray_y + (@effect_anime_frame * 2),picture,rect)
    when 327 #メタルクウラコア(ケーブル)発動

      picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル") #ダメージ表示用

      rect = Rect.new(0, 80*@ray_anime_type, 64 + @effect_anime_frame * 8,80)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      
      if @ray_anime_frame >= 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
      
      if @ray_anime_type >= 3
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 328 #メタルクウラコア(ケーブル)伸びる

      picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル") #ダメージ表示用

      rect = Rect.new(0, 80*@ray_anime_type, 1400,80)
      @back_window.contents.blt(ray_x - @effect_anime_frame * 8,ray_y,picture,rect)
      
      if @ray_anime_frame >= 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
      
      if @ray_anime_type >= 3
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 329 #メタルクウラコア(ケーブル)ヒット

      picture = Cache.picture("Z3_戦闘_必殺技_メタルクウラ・コア_ケーブル") #ダメージ表示用

      rect = Rect.new(0, 80*@ray_anime_type, 1400,80)
      @back_window.contents.blt(ray_x - @effect_anime_frame * 8,ray_y,picture,rect)
      
      if @ray_anime_frame >= 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
      
      if @ray_anime_type >= 3
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 330 #Z3気円斬系(発動)
      picture = Cache.picture("Z3_戦闘_必殺技_気円斬") #ダメージ表示用

      rect = Rect.new(0, 30*@ray_anime_type,126,30)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @ray_anime_frame >= 4
        @ray_anime_type += 1
        @ray_anime_frame = 0
      end
      
      if @ray_anime_type >= 4
        @ray_anime_type = 4
        @ray_anime_frame = 0
      end
    when 331 #ナメック戦士発動
      #if @ray_color == 0
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中") #ダメージ表示用
      #elsif @ray_color == 1
      #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中(緑)") #ダメージ表示用
      #elsif @ray_color == 4
      #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中(桃)") #ダメージ表示用
      #end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(326,116,picture,rect)
        @back_window.contents.blt(282,42,picture,rect)
        @back_window.contents.blt(282,172,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 332 #狼牙風風拳 ヤムチャとわかもの
      
      end_frame = 85
      picture = Cache.picture($btl_top_file_name + "戦闘_ヤムチャ") #ダメージ表示用
      picture2 = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの") #ダメージ表示用
      attack_se = "Z3 打撃" 
      case @effect_anime_frame
      
      when 0..10
        rect = Rect.new(0, 14*96,96,96)
        rect2 = Rect.new(0, 26*96,96,96)
      when 11..20
        rect = Rect.new(0, 13*96,96,96)
        rect2 = Rect.new(0, 25*96,96,96)
      when 21..30
        rect = Rect.new(0, 12*96,96,96)
        rect2 = Rect.new(0, 24*96,96,96)
      when 31..35
        rect = Rect.new(0, 0*96,96,96)
        rect2 = Rect.new(0, 19*96,96,96)
      when 36..39
        rect = Rect.new(0, 3*96,96,96)
        rect2 = Rect.new(0, 22*96,96,96)
      when 40..43
        rect = Rect.new(0, 1*96,96,96)
        rect2 = Rect.new(0, 20*96,96,96)
      when 44..46
        rect = Rect.new(0, 2*96,96,96)
        rect2 = Rect.new(0, 21*96,96,96)
      when 47..50
        rect = Rect.new(0, 4*96,96,96)
        rect2 = Rect.new(0, 23*96,96,96)
      when 51..53
        rect = Rect.new(0, 2*96,96,96)
        rect2 = Rect.new(0, 21*96,96,96)
      when 54..56
        rect = Rect.new(0, 1*96,96,96)
        rect2 = Rect.new(0, 20*96,96,96)
      when 57..60
        rect = Rect.new(0, 2*96,96,96)
        rect2 = Rect.new(0, 21*96,96,96)
      when 61..80
        rect = Rect.new(0, 16*96,96,96)
        rect2 = Rect.new(0, 18*96,96,96)
      else
        if $btl_progress >= 2
          picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_ヤムチャ") #ダメージ表示用
          picture2 = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの") #ダメージ表示用
          rect = Rect.new(0, 3*96,96,96)
          rect2 = Rect.new(0, 21*96,96,96)
        else
          picture = Cache.picture($btl_top_file_name + "戦闘_ヤムチャ") #ダメージ表示用
          picture2 = Cache.picture($btl_top_file_name + "戦闘_必殺技_わかもの") #ダメージ表示用
          rect = Rect.new(0, 2*96,96,96)
          rect2 = Rect.new(0, 21*96,96,96)
        end
          
      end
      #else
        
        #if @btl_ani_cha_chg_no == 0
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name) #ダメージ表示用
        #else
        #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@btl_ani_cha_chg_no].name) #ダメージ表示用
        #end
        #if $btl_progress >= 2
        #  rect = Rect.new(0, 3*96,96,96)
        #else
        #  rect = Rect.new(0, 3*96,96,96)
        #end
      
      if @effect_anime_frame >= 36 && @effect_anime_frame % 5 == 0 && end_frame > @effect_anime_frame 
        Audio.se_play("Audio/SE/" + attack_se)    # 効果音を再生する
      end
      yamux = 10
      wakamonox = 154
      
      if @effect_anime_frame >= 61 && @effect_anime_frame <= 80
        @back_window.contents.blt(CENTER_CHAX + yamux,STANDARD_CHAY-(@effect_anime_frame-60)*4,picture,rect)
        @back_window.contents.blt(CENTER_CHAX + wakamonox,STANDARD_CHAY-(@effect_anime_frame-60)*4,picture2,rect2)
      elsif @effect_anime_frame >= 81 && @effect_anime_frame <= 85
        @back_window.contents.blt(CENTER_CHAX + yamux,STANDARD_CHAY - 80 +(@effect_anime_frame-80)*16,picture,rect)
        @back_window.contents.blt(CENTER_CHAX + wakamonox,STANDARD_CHAY - 80 +(@effect_anime_frame-80)*16,picture2,rect2)
      else #if @effect_anime_frame < 86
        @back_window.contents.blt(CENTER_CHAX + yamux,STANDARD_CHAY,picture,rect)
        @back_window.contents.blt(CENTER_CHAX + wakamonox,STANDARD_CHAY,picture2,rect2)
      end
    when 333 #エネルギー弾系(正面)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if ray_x == 0 || ray_x == nil
        ray_x = 240
        ray_y = 100
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1 if @effect_anime_type != 5
        @effect_anime_frame = 0
      end
    when 334 #アウトサイダーショット(トーマ&セリパ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+12,ray_y-130,picture,rect)
        @back_window.contents.blt(ray_x+0,ray_y-28,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 335 #アウトサイダーショット(トーマ&トテッポ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+12,ray_y-130,picture,rect)
        @back_window.contents.blt(ray_x+18,ray_y-40,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 336 #アウトサイダーショット(セリパ&パンブーキン)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+0,ray_y-128,picture,rect)
        @back_window.contents.blt(ray_x+6,ray_y-32,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 337 #アウトサイダーショット(トテッポ&パンブーキン)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x+18,ray_y-142,picture,rect)
        @back_window.contents.blt(ray_x+6,ray_y-32,picture,rect)
      else
        rect = Rect.new(346-@effect_anime_frame*RAY_SPEED, 0,54+@effect_anime_frame*RAY_SPEED,80)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 338 #ダブルエネルギー波_小系(発動)敵
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      rect = Rect.new(352-@effect_anime_frame*RAY_SPEED, 0,48+@effect_anime_frame*RAY_SPEED,48)
      @back_window.contents.blt(ray_x-92+84-@effect_anime_frame*RAY_SPEED,ray_y-10-96+2,picture,rect)
      @back_window.contents.blt(ray_x-92+84-@effect_anime_frame*RAY_SPEED,ray_y-10-96+2+100,picture,rect)
    when 339 #ダブルエネルギー波_小系(ヒット)敵
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      rect = Rect.new(0, 48,640,48)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y-10-96+2+24,picture,rect)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y-10-96+2+100-24,picture,rect)
    when 340 #エビルコメットヒット
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_小_敵_青") #ダメージ表示用
      rect = Rect.new(0, 48,640,48)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y-24*1,picture,rect)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y+24*1,picture,rect)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y-24*2,picture,rect)
      @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y+24*2,picture,rect)

    when 341 #カエル攻撃ヒット
      picture = Cache.picture("Z2_戦闘_必殺技_敵_メダマッチャ") #ダメージ表示用
      
      if @effect_anime_frame < 16
        rect = Rect.new(0, 96*12,96,96)
      else
        rect = Rect.new(0, 96*11,96,96)
      end
      tyouseifre = @effect_anime_frame
      fremax = 27
      if @effect_anime_frame > fremax
        tyouseifre = fremax
      end
      kx = tyouseifre * 16
      ky = -tyouseifre * 2
      kkx = 640
      kky = 80
      @back_window.contents.blt(kkx-8+7*2-kx,kky-34-7*2-ky,picture,rect)
      @back_window.contents.blt(kkx-16-kx,kky-42-7*2-ky,picture,rect)
      @back_window.contents.blt(kkx-32-kx,kky-42-7*2-ky,picture,rect)
      @back_window.contents.blt(kkx-40-7*2-kx,kky-34-7*2-ky,picture,rect)
    when 342 #Z3まかんこうさっぽう(発動横)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 0,400,64)
      if @attackcourse == 0
        rect = Rect.new(0, 64,64+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x+20,ray_y-132,picture,rect)
        @back_window.contents.blt(ray_x+22,ray_y-36,picture,rect)
      else
        rect = Rect.new((400-64)-@effect_anime_frame*RAY_SPEED, 0,(400-64)+@effect_anime_frame*RAY_SPEED,64)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 343 #Z3トリプル魔閃光(発動横)
      picture = Cache.picture("Z3_戦闘_必殺技_トリプル魔閃光") #ダメージ表示用

        rect = Rect.new(0, 0,64+@effect_anime_frame*RAY_SPEED,204)
        #@back_window.contents.blt(ray_x+20,ray_y-132,picture,rect)
        @back_window.contents.blt(ray_x-8,ray_y-10,picture,rect)
    when 344 #Z3トリプルまかんこうさっぽう(発動横)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用

      rect = Rect.new(0, 64,64+@effect_anime_frame*RAY_SPEED,64)
      @back_window.contents.blt(ray_x-10,ray_y-144,picture,rect)
      @back_window.contents.blt(ray_x+22,ray_y-86,picture,rect)
      @back_window.contents.blt(ray_x-8,ray_y-20,picture,rect)
    when 345 #Z3トリプルまかんこうさっぽう(ヒット)
      picture = Cache.picture("Z3_戦闘_必殺技_魔貫光殺砲") #ダメージ表示用
      rect = Rect.new(0, 0,400,64)
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y-32-32+8,picture,rect)
      @back_window.contents.blt(-340+@effect_anime_frame*RAY_SPEED,ray_y+0,picture,rect)
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,ray_y+32+32-8,picture,rect)
    when 346 #アウトサイダーショット(ピ&16号)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end
      
      rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
      @back_window.contents.blt(ray_x+2,ray_y-138,picture,rect)
      @back_window.contents.blt(ray_x+26,ray_y-34,picture,rect)
    when 347 #アウトサイダーショット(未来悟飯&17号)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end

      rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
      @back_window.contents.blt(ray_x+24,ray_y-132,picture,rect)
      @back_window.contents.blt(ray_x+6,ray_y-36,picture,rect)
    when 348 #アウトサイダーショット(未来悟飯&16号)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end

      rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
      @back_window.contents.blt(ray_x+24,ray_y-132,picture,rect)
      @back_window.contents.blt(ray_x+26,ray_y-34,picture,rect)

    when 349 #アウトサイダーショット(未来悟飯&ベジータ)(発動)
      if @ray_color == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 3
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_青") #ダメージ表示用
      elsif @ray_color == 4
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_中_敵_赤") #ダメージ表示用
      end

      rect = Rect.new(0, 80,54+@effect_anime_frame*RAY_SPEED,80)
      @back_window.contents.blt(ray_x+24,ray_y-132,picture,rect)
      @back_window.contents.blt(ray_x+2,ray_y-28,picture,rect)
    when 350 #超体当たり(ヒット)
      picture = Cache.picture("Z3_必殺技_超体当たり(パイクーハン)") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(190*@ray_anime_type, 0,190,126)
        @back_window.contents.blt(-236+@effect_anime_frame*RAY_SPEED,100,picture,rect)
      else
        rect = Rect.new(190*@ray_anime_type, 0,190,126)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,100,picture,rect)
      end
      
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 351 #巻きつき攻撃 引き抜く
      picture = Cache.picture("Z3_戦闘_必殺技_ブウ_巻きつく") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0,@effect_anime_type * 96,96,96)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0,@effect_anime_type * 96,96,96)
        @back_window.contents.blt(ray_x-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
  
    when 352 #光線
      picture = Cache.picture("Z3_戦闘_必殺技_お菓子光線_前中後繋ぎ") #ダメージ表示用

      if @attackcourse == 0
        rect = Rect.new(0,@effect_anime_type * 96,96,96)
        @back_window.contents.blt(ray_x+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 0,608,52)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
  
    when 353 #かめはめ波系(特大_加工)横 ヒット
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_加工") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_緑_加工") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_青_加工") #ダメージ表示用
      end
      if @attackcourse == 0 
        rect = Rect.new(0, 0,400,192)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,76,picture,rect)
      else
        rect = Rect.new(0, 192,400,192)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,76,picture,rect)
      end
    when 354 #ブウ巻きつきヒット

      picture = Cache.picture("Z3_戦闘_必殺技_ブウ_巻きつく(巨大)") #ダメージ表示用

      rect = Rect.new(192*@effect_anime_type, 0, 192,192)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 355 #ダブルアタック(天津飯とトランクス)(発動)
      #@effect_anime_type = 2

        rect = Rect.new(0, 0,190,126)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98-56+1*@effect_anime_frame,picture,rect)

        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98+50-1*@effect_anime_frame,picture,rect)

    when 356 #ダブルアタック(天津飯とトランクス)(ヒット)
      if @ray_anime_type == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4")
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(青)")
      end#ダメージ表示用
      rect = Rect.new(0, 0,190,126)
      @back_window.contents.blt(-192+@effect_anime_frame*RAY_SPEED,126,picture,rect)
        
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 357 #ダブルアタック(チャオズとトランクス)(発動)
      #@effect_anime_type = 2

        rect = Rect.new(0, 0,190,126)
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98-46+1*@effect_anime_frame,picture,rect)

        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾4(青)") #ダメージ表示用
        @back_window.contents.blt(340+@effect_anime_frame*RAY_SPEED,98+50-1*@effect_anime_frame,picture,rect)
    when 358 #かめはめ波系(特大_加工)横 発動
      if @ray_color == 0
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_加工") #ダメージ表示用
      elsif @ray_color == 1
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_緑_加工") #ダメージ表示用
      else
        picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_青_加工") #ダメージ表示用
      end
      
      rey_kizyunx = 54 + @effect_anime_frame * RAY_SPEED
      if @attackcourse == 0 
        rect = Rect.new(0, 192,rey_kizyunx,192)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
        
      else
        rect = Rect.new(400 - rey_kizyunx,0, rey_kizyunx,192)
        @back_window.contents.blt(ray_x - rey_kizyunx,ray_y,picture,rect)
      end
    when 359 #ダブルかめはめ波(悟空、亀仙人)
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      
      rect = Rect.new(0, 92,54+@effect_anime_frame*RAY_SPEED,92)
      if $super_saiyazin_flag[1] == true
        @back_window.contents.blt(ray_x+14,ray_y-132,picture,rect)
      else
        @back_window.contents.blt(ray_x+4,ray_y-126,picture,rect)
      end
      @back_window.contents.blt(ray_x-10,ray_y-20,picture,rect)
    when 360 #ダブルかめはめ波(悟飯／クリリン、亀仙人)
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      
      rect = Rect.new(0, 92,54+@effect_anime_frame*RAY_SPEED,92)
      #if $super_saiyazin_flag[1] == true
      #  @back_window.contents.blt(ray_x+14,ray_y-132,picture,rect)
      #else
      #  @back_window.contents.blt(ray_x+4,ray_y-126,picture,rect)
      #end
      @back_window.contents.blt(ray_x-10,ray_y-122,picture,rect)
      @back_window.contents.blt(ray_x-10,ray_y-20,picture,rect)
    when 361 #ダブルかめはめ波(ヤムチャ、亀仙人)
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      
      rect = Rect.new(0, 92,54+@effect_anime_frame*RAY_SPEED,92)
      #if $super_saiyazin_flag[1] == true
      #  @back_window.contents.blt(ray_x+14,ray_y-132,picture,rect)
      #else
      #  @back_window.contents.blt(ray_x+4,ray_y-126,picture,rect)
      #end
      @back_window.contents.blt(ray_x+ 6 ,ray_y-130,picture,rect)
      @back_window.contents.blt(ray_x-10,ray_y-20,picture,rect)
    when 362 #ダブルかめはめ波(未来悟飯、亀仙人)
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      
      rect = Rect.new(0, 92,54+@effect_anime_frame*RAY_SPEED,92)
      #if $super_saiyazin_flag[1] == true
      #  @back_window.contents.blt(ray_x+14,ray_y-132,picture,rect)
      #else
      #  @back_window.contents.blt(ray_x+4,ray_y-126,picture,rect)
      #end
      @back_window.contents.blt(ray_x+ 22 ,ray_y-134,picture,rect)
      @back_window.contents.blt(ray_x-10,ray_y-20,picture,rect)
    when 363 #スパーキングコンボキャラ現れる2人目右
        picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 12
        @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou-30 + 12,STANDARD_CHAY,picture,rect)
    when 364 #スパーキングコンボキャラ現れる2人目左
        picture = Cache.picture(set_battle_character_name @scombo_cha2,1)
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[@scombo_cha2].name)
        
        rect = Rect.new(0, 0*96,96,96)
        ushirox=0
        idouryou = 8
        @back_window.contents.blt(STANDARD_CHAX+@effect_anime_frame*idouryou-48,STANDARD_CHAY,picture,rect)
    when 365 #スピリッツかめはめ波系(特大_加工)横 ヒット
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_加工(スピリッツかめはめ波)") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, @ray_anime_type*192,400,192)
        @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,76,picture,rect)
      else
        rect = Rect.new(0, 192,400,192)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,76,picture,rect)
      end
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 366 #エネルギー弾系(正面:スピリッツかめはめ波系)
      if @ray_anime_type == 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(青)") #ダメージ表示用
      end
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      if ray_x == 0 || ray_x == nil
        ray_x = 240
        ray_y = 100
      end
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
      if @effect_anime_frame >= 10 
        @effect_anime_type += 1 if @effect_anime_type != 5
        @effect_anime_frame = 0
      end
      
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    when 367 #絶好のチャンス(悟飯／クリリン)
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_大") #ダメージ表示用
      
      rect = Rect.new(0, 92,54+@effect_anime_frame*RAY_SPEED,92)
      #if $super_saiyazin_flag[1] == true
      #  @back_window.contents.blt(ray_x+14,ray_y-132,picture,rect)
      #else
      #  @back_window.contents.blt(ray_x+4,ray_y-126,picture,rect)
      #end
      @back_window.contents.blt(ray_x-14,ray_y-128,picture,rect)
      @back_window.contents.blt(ray_x-10,ray_y-22,picture,rect)
    when 368 #界王拳系(自由)
      if $super_saiyazin_flag[1] == true
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_界王拳(超悟空)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_界王拳") #ダメージ表示用
      end
      if @effect_anime_frame >= 10 && @effect_anime_type == 0
        @effect_anime_type += 1
        @effect_anime_frame = 0
      elsif @effect_anime_frame >= 10 && @effect_anime_type == 1
        @effect_anime_type = 0
        @effect_anime_frame = 0
      end
      rect = Rect.new(236*@effect_anime_type, 0,236,122)
      @back_window.contents.blt(ray_x,ray_y,picture,rect)
    when 369 #Z3エネルギー波半円ヒット(赤、青斑点)
      #if @ray_color == 0
      #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円") #ダメージ表示用
      #elsif @ray_color == 1
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(緑)") #ダメージ表示用
      #elsif @ray_color == 3
      #  picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(青)") #ダメージ表示用
      #elsif @ray_color == 9
        #picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(紫)") #ダメージ表示用
      #end
      

      if @ray_anime_frame >= 4 && @effect_anime_type == 0
        @effect_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 4 && @effect_anime_type == 1
        @effect_anime_type = 0
        @ray_anime_frame = 0
      end
      
      case @effect_anime_type
      
      when 0
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円") #ダメージ表示用
      when 1
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円(青)") #ダメージ表示用
      else
        picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波_半円") #ダメージ表示用
      end
      if @attackcourse == 0
        rect = Rect.new(0, 128,700,128)
        @back_window.contents.blt(-700+@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      else
        rect = Rect.new(0, 0,700,128)
        @back_window.contents.blt(640-@effect_anime_frame*RAY_SPEED,ray_y,picture,rect)
      end
    when 370 #Z1ダブルアイビーム発動
      #ピッコロ
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾(緑)") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(160-(@effect_anime_frame)*2,100-(@effect_anime_frame)*2,picture,rect)
      @back_window.contents.blt(166+(@effect_anime_frame)*2,100-(@effect_anime_frame)*2,picture,rect)
      
      #天津飯
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー弾") #ダメージ表示用
      rect = Rect.new(@effect_anime_type*128, 0,128,128)
      @back_window.contents.blt(342,98-(@effect_anime_frame)*2,picture,rect)
    when 371 #Z1ダブルアイビームヒット
      rect = Rect.new(0, 0,400,28)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波(緑)") #ダメージ表示用
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,129,picture,rect)
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,189,picture,rect)
      picture = Cache.picture($btl_top_file_name + "戦闘_必殺技_エネルギー波") #ダメージ表示用
      @back_window.contents.blt(-400+@effect_anime_frame*RAY_SPEED,159,picture,rect)
    when 372 #ファイナルかめはめ波(特大_加工)横 発動
      picture = Cache.picture("Z3_戦闘_必殺技_エネルギー波_特大_加工(スピリッツかめはめ波)_発動") #ダメージ表示用
      if @attackcourse == 0 
        rect = Rect.new(0, @ray_anime_type*192,@effect_anime_frame*RAY_SPEED,192)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      else
        rect = Rect.new(0, @ray_anime_type*192,@effect_anime_frame*RAY_SPEED,192)
        @back_window.contents.blt(ray_x,ray_y,picture,rect)
      end
      if @ray_anime_frame >= 8  && @ray_anime_type == 0
        @ray_anime_type += 1
        @ray_anime_frame = 0
      elsif @ray_anime_frame >= 8
        @ray_anime_type = 0
        @ray_anime_frame = 0
      end
    else
    end
    @ray_anime_frame +=1
    @effect_anime_frame += 1
  end
  #--------------------------------------------------------------------------
  # ● ダメージ表示
  #--------------------------------------------------------------------------
  def output_battle_damage
    
    tyousei_x = 16
    tyousei_y = 10
    picturez = Cache.picture("数字英語") #ダメージ表示用
    for y in 1..@battledamage.to_s.size #HP
      rect = Rect.new(@battledamage.to_s[-y,1].to_i*16, 32, 16, 16)
      if @attackcourse == 0 # 味方
        if $game_variables[29] == 0 || $game_variables[29] == 2 #下
          @status_window.contents.blt(@@enestex+tyousei_x+232-(y-1)*16,48+tyousei_y,picturez,rect)
        end
        
        if $game_variables[29] == 1 || $game_variables[29] == 2 #上
          if @damage_center == false
            @back_window.contents.blt(CENTER_ENEX+72-(y-1)*16,100,picturez,rect)
          else
            @back_window.contents.blt((CENTER_ENEX+72-50)-(y-1)*16,100,picturez,rect)
          end
        end
      else
        if $game_variables[29] == 0 || $game_variables[29] == 2 #下
          @status_window.contents.blt(@@chastex+tyousei_x+48-(y-1)*16,48+tyousei_y,picturez,rect)
        end
        
        
        
        if $game_variables[29] == 1 || $game_variables[29] == 2 #上
          if @damage_center == false
            @back_window.contents.blt(CENTER_CHAX+40-(y-1)*16,100,picturez,rect)
          else
            @back_window.contents.blt((CENTER_CHAX+40-50)-(y-1)*16,100,picturez,rect)
          end
        end
        
        #吸収
        if $data_skills[@ene_set_action-10].element_set.index(15) != nil#下
          rect = Rect.new(@battledamage.to_s[-y,1].to_i*16, 64, 16, 16)
          @status_window.contents.blt(@@enestex+tyousei_x+232-(y-1)*16,48+tyousei_y,picturez,rect)
        end
      end
    end
  end

  #--------------------------------------------------------------------------
  # ● 戦闘アニメ表示(キャラ)
  #引数n[キャラチップの種類 0:通常攻撃 1:必殺技],y[y軸も反転 0:する 1:しない]
  #--------------------------------------------------------------------------
  def output_battle_anime n=0,y=0,cha_chg_no=0
    
    top_name = set_ene_str_no @enedatenum
    
    if n == 0
      if cha_chg_no == 0
        #chpicturea = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name)
        chpicturea = Cache.picture(set_battle_character_name $partyc[@chanum.to_i],n)
      else
        #chpicturea = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[cha_chg_no].name)
        chpicturea = Cache.picture(set_battle_character_name cha_chg_no,n)
      end
      enpicturea = Cache.picture(top_name + "戦闘_敵_" + $data_enemies[@enedatenum].name)
    end
    if n == 1 && @attackcourse == 0 #味方が必殺
      if cha_chg_no == 0
        #chpicturea = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[$partyc[@chanum.to_i]].name)
        chpicturea = Cache.picture(set_battle_character_name $partyc[@chanum.to_i],n)
      else
        #chpicturea = Cache.picture($btl_top_file_name + "戦闘_必殺技_" + $data_actors[cha_chg_no].name)
        chpicturea = Cache.picture(set_battle_character_name cha_chg_no,n)
      end
      enpicturea = Cache.picture(top_name + "戦闘_敵_" + $data_enemies[@enedatenum].name)
    elsif n == 1 && @attackcourse == 1 #敵が必殺
      #chpicturea = Cache.picture($btl_top_file_name + "戦闘_" + $data_actors[$partyc[@chanum.to_i]].name)
      chpicturea = Cache.picture(set_battle_character_name $partyc[@chanum.to_i])
      enpicturea = Cache.picture(top_name + "戦闘_必殺技_敵_" + $data_enemies[@enedatenum].name)
    end
    
    #結果反映
    if @attackcourse == 0
      @gx = -@gx
      if y != 0 
        @gy = -@gy
      end
      @chax += @ax
      @chay += @ay
      @enex += @gx
      @eney += @gy
      @backx += @bx
      @backy += @by
      
      #敵巨大キャラ
      if $data_enemies[@enedatenum].element_ranks[23] != 1
        @back_window.contents.blt(@enex,@eney,enpicturea,@enerect)
      else
        @back_window.contents.blt(@enex,@eney-48,enpicturea,@enerect)
      end
      
      #味方巨大キャラ
      if $cha_bigsize_on[@chanum.to_i] != true
        @back_window.contents.blt(@chax,@chay,chpicturea,@charect)
      else
        @back_window.contents.blt(@chax-96,@chay-48,chpicturea,@charect)
      end
      
    else
      @ax = -@ax
      if y != 0
        @ay = -@ay
      end
      @bx = -@bx
      @chax += @gx
      @chay += @gy
      @enex += @ax
      @eney += @ay
      @backx += @bx
      @backy += @by
      
      #味方巨大キャラ
      if $cha_bigsize_on[@chanum.to_i] != true
        @back_window.contents.blt(@chax,@chay,chpicturea,@charect)
      else
        @back_window.contents.blt(@chax-96,@chay-48,chpicturea,@charect)
      end
      
      #敵巨大キャラ
      if $data_enemies[@enedatenum].element_ranks[23] != 1
        @back_window.contents.blt(@enex,@eney,enpicturea,@enerect)
      else
        @back_window.contents.blt(@enex-48,@eney-48,enpicturea,@enerect)
      end
    end
  end
  #--------------------------------------------------------------------------
  # ● 戦闘アニメパターンで使用する変数の初期化
  #--------------------------------------------------------------------------
  def anime_pattern_fromat
    output_battle_anime @output_anime_type,@output_anime_type_y,@btl_ani_cha_chg_no
    Audio.se_stop
    @output_anime_type = 0
    @output_anime_type_y = 0
    @back_anime_type = 0
    @back_anime_frame = 0
    @ray_anime_type = 0
    @ray_anime_frame = 0
    @effect_anime_pattern = 0
    @effect_anime_frame = 0
    @effect_anime_type = 0
    @effect_anime_mirror = 255
    @ax = 0
    @ay = 0
    @gx = 0
    @gy = 0
    @bx = 0
    @by = 0
    @anime_frame_format = true
  end
  #--------------------------------------------------------------------------
  # ● 敵の攻撃セット
  #--------------------------------------------------------------------------  
  def ene_action_set
    
    #必殺をもっていないケースを想定していないIF分のため変更
    #if $enecardi[@enenum] == 0 || $enecardi[@enenum] == $data_enemies[@enedatenum].hit-1
    
    if ($enecardi[@enenum] == 0 || $enecardi[@enenum] == $data_enemies[@enedatenum].hit-1) && $data_enemies[@enedatenum].actions.size != 0
      if $data_enemies[@enedatenum].actions.size != 0
        #必殺技
        #@ene_set_action = $data_enemies[@enedatenum].actions[rand($data_enemies[@enedatenum].actions.size)].skill_id + 10 #敵必殺
        begin
          ene_action_ok = false
          tmp_ene_set_action = rand($data_enemies[@enedatenum].actions.size)
          
          
          #通常技
          if $data_enemies[@enedatenum].actions[tmp_ene_set_action].condition_type == 0
              ene_action_ok = true
              if $data_skills[$data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id].element_set[0] == 4
                ene_action_ok = chk_scombo_flag $data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id
              end
          elsif $data_enemies[@enedatenum].actions[tmp_ene_set_action].condition_type == 2
              #p $data_enemies[@enedatenum].actions[tmp_ene_set_action].condition_param2
              #p ($enehp[@enenum]*100/ $data_enemies[@enedatenum].maxhp),$data_enemies[@enedatenum].actions[tmp_ene_set_action].condition_param2.to_i
              if ($enehp[@enenum]*100 / $data_enemies[@enedatenum].maxhp) <= $data_enemies[@enedatenum].actions[tmp_ene_set_action].condition_param2.to_i
                ene_action_ok = true
                #合体攻撃
                #合体攻撃属性を持っているかチェック
                #p $data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id,$data_skills[$data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id].element_set
                
                if $data_skills[$data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id].element_set[0] == 4
                  ene_action_ok = chk_scombo_flag $data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id
                end
              end
          end
            
          #1ターンに1回しか使えない技を選択していないか
          if @one_turntec.index($data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id) != nil
            ene_action_ok = false
          end
        end until ene_action_ok == true
        
        
        if $data_skills[$data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id].element_set.index(24) != nil
          @one_turntec << $data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id
        end
        #p @one_turntec
        if $game_variables[96] == 0
          @ene_set_action = $data_enemies[@enedatenum].actions[tmp_ene_set_action].skill_id + 10 #敵必殺
        else
          @ene_set_action = @tmp_ene_set_action
        end
      else
        @ene_set_action = 1
      end
    else
      #elsif $enecardi[@enenum] != 0

      @ene_set_action = 1   #敵通常攻撃
    end
  end
  #--------------------------------------------------------------------------
  # ● 合体攻撃を初めて使用したかチェック
  #--------------------------------------------------------------------------
  def chk_new_get_scombo #action_no

    if $game_switches[@btl_ani_scombo_get_flag] == false
      $game_switches[@btl_ani_scombo_new_flag] = true
      $game_switches[30] = true
    end

  end
  #--------------------------------------------------------------------------
  # ● 合体攻撃対象の技を探し使用可能かチェックする
  #　set_action:確認対象必殺技No
  #  chknewonlyflag:未取得のスキルのみチェックするフラグ
  #-------------------------------------------------------------------------- 
  def chk_scombo_flag_num set_action,chknewonlyflag
    #$cha_set_action[@chanum] - 10
    chk_result = false
    
    tmp_scombo_renban = Marshal.load(Marshal.dump($scombo_renban))
    tmp_scombo_count = Marshal.load(Marshal.dump($scombo_count))
    tmp_scombo_cha_count = Marshal.load(Marshal.dump($scombo_cha_count))
    tmp_scombo_get_flag = Marshal.load(Marshal.dump($scombo_get_flag))
    tmp_scombo_new_flag = Marshal.load(Marshal.dump($scombo_new_flag))
    tmp_scombo_no = Marshal.load(Marshal.dump($scombo_no))
    tmp_scombo_cha = Marshal.load(Marshal.dump($scombo_cha))
    tmp_scombo_flag_tec = Marshal.load(Marshal.dump($scombo_flag_tec))
    tmp_scombo_skill_level_num = Marshal.load(Marshal.dump($scombo_skill_level_num))
    tmp_scombo_card_attack_num = Marshal.load(Marshal.dump($scombo_card_attack_num))
    tmp_scombo_card_gard_num = Marshal.load(Marshal.dump($scombo_card_gard_num))
    tmp_scombo_chk_flag_oozaru_put = Marshal.load(Marshal.dump($scombo_chk_flag_oozaru_put))
    
    #Sコンボの並びを自分で変えるときだけ処理する
    if $game_variables[358] == 1
      #処理用に再格納
      ttmp_scombo_renban = Marshal.load(Marshal.dump($scombo_renban))
      ttmp_scombo_count = Marshal.load(Marshal.dump($scombo_count))
      ttmp_scombo_cha_count = Marshal.load(Marshal.dump($scombo_cha_count))
      ttmp_scombo_get_flag = Marshal.load(Marshal.dump($scombo_get_flag))
      ttmp_scombo_new_flag = Marshal.load(Marshal.dump($scombo_new_flag))
      ttmp_scombo_no = Marshal.load(Marshal.dump($scombo_no))
      ttmp_scombo_cha = Marshal.load(Marshal.dump($scombo_cha))
      ttmp_scombo_flag_tec = Marshal.load(Marshal.dump($scombo_flag_tec))
      ttmp_scombo_skill_level_num = Marshal.load(Marshal.dump($scombo_skill_level_num))
      ttmp_scombo_card_attack_num = Marshal.load(Marshal.dump($scombo_card_attack_num))
      ttmp_scombo_card_gard_num = Marshal.load(Marshal.dump($scombo_card_gard_num))
      ttmp_scombo_chk_flag_oozaru_put = Marshal.load(Marshal.dump($scombo_chk_flag_oozaru_put))
      
      ttmp_scombo_chk_flag_ssaiya = Marshal.load(Marshal.dump($scombo_chk_flag_ssaiya))
      ttmp_scombo_chk_flag_ssaiya_cha = Marshal.load(Marshal.dump($scombo_chk_flag_ssaiya_cha))
      ttmp_scombo_chk_flag_ssaiya_put = Marshal.load(Marshal.dump($scombo_chk_flag_ssaiya_put))
      
      #Sコンボが一つもないかどうかで処理を変える
      if $player_scombo_priority[$partyc[@chanum]] == nil
        scomsize = 0
      else
        scomsize = $player_scombo_priority[$partyc[@chanum]].size
      end
      
      #配列系はサイズを縮める
      tmp_scombo_count = scomsize - 1
      tmp_scombo_renban = tmp_scombo_renban[0..scomsize - 1]
      tmp_scombo_cha_count = tmp_scombo_cha_count[0..scomsize - 1]
      tmp_scombo_get_flag = tmp_scombo_get_flag[0..scomsize - 1]
      tmp_scombo_new_flag = tmp_scombo_new_flag[0..scomsize - 1]
      tmp_scombo_no = tmp_scombo_no[0..scomsize - 1]
      tmp_scombo_cha = tmp_scombo_cha[0..scomsize - 1]
      tmp_scombo_flag_tec = tmp_scombo_flag_tec[0..scomsize - 1]
      tmp_scombo_skill_level_num = tmp_scombo_skill_level_num[0..scomsize - 1]
      tmp_scombo_card_attack_num = tmp_scombo_card_attack_num[0..scomsize - 1]
      tmp_scombo_card_gard_num = tmp_scombo_card_gard_num[0..scomsize - 1]
      tmp_scombo_chk_flag_oozaru_put = tmp_scombo_chk_flag_oozaru_put[0..scomsize - 1]
      
      #初期化 
      for x in 0..scomsize - 1
        tmp_scombo_renban[x] = ttmp_scombo_renban[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_cha_count[x] = ttmp_scombo_cha_count[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_get_flag[x] = ttmp_scombo_get_flag[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_new_flag[x] = ttmp_scombo_new_flag[$player_scombo_priority[$partyc[@chanum]][x]]
        
        tmp_scombo_no[x] = ttmp_scombo_no[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_cha[x] = ttmp_scombo_cha[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_flag_tec[x] = ttmp_scombo_flag_tec[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_skill_level_num[x] = ttmp_scombo_skill_level_num[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_card_attack_num[x] = ttmp_scombo_card_attack_num[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_card_gard_num[x] = ttmp_scombo_card_gard_num[$player_scombo_priority[$partyc[@chanum]][x]]
        tmp_scombo_chk_flag_oozaru_put[x] = ttmp_scombo_chk_flag_oozaru_put[$player_scombo_priority[$partyc[@chanum]][x]]
      end
        
      #p tmp_scombo_no,$player_scombo_priority[$partyc[@chanum]]
    end
    
    #Sコンボ配列内に対象技があるかチェック
    #なければループ抜ける
    #あれば
    x = 0
    loop do
      
      for x in 0..tmp_scombo_count
        chk_loop_result = tmp_scombo_flag_tec[x].index(set_action)
        #p "最初のループ",chk_loop_result,x,tmp_scombo_flag_tec[x]
        if chk_loop_result != nil || x >= tmp_scombo_count
          break
        end
        x += 1 if chk_loop_result == nil
      end
      
      #p "最初のループ抜けた",chk_loop_result,x,tmp_scombo_flag_tec[x]
      if chk_loop_result != nil
        #スパーキングコンボチェック用
        @btl_ani_scombo_cha_count = tmp_scombo_cha_count[x]
        @btl_ani_scombo_get_flag = tmp_scombo_get_flag[x]
        @btl_ani_scombo_new_flag = tmp_scombo_new_flag[x]
        @btl_ani_scombo_no = tmp_scombo_no[x]
        @btl_ani_scombo_cha = tmp_scombo_cha[x]
        @btl_ani_scombo_flag_tec = tmp_scombo_flag_tec[x]
        @btl_ani_scombo_skill_level_num = tmp_scombo_skill_level_num[x]
        @btl_ani_scombo_card_attack_num = tmp_scombo_card_attack_num[x]
        @btl_ani_scombo_card_gard_num = tmp_scombo_card_gard_num[x]
        @btl_ani_scombo_chk_flag_oozaru_put = tmp_scombo_chk_flag_oozaru_put[x]
        #@btl_ani_scombo_tec_no = x
        @btl_ani_scombo_tec_no = tmp_scombo_renban[x]
        tmp_scombo_flag_tec[x] = [0,0] #検索に引っかからないように値を変更
        #tmp_loop_count += 1
        #p @btl_ani_scombo_cha_count,@btl_ani_scombo_get_flag,@btl_ani_scombo_new_flag,@btl_ani_scombo_no,@btl_ani_scombo_cha,@btl_ani_scombo_flag_tec,@btl_ani_scombo_skill_level_num,@btl_ani_scombo_card_attack_num,@btl_ani_scombo_card_gard_num
        #p "スパーキングコンボチェック前",chk_loop_result,x,tmp_scombo_flag_tec[x]
        chk_result = chk_scombo_flag @btl_ani_scombo_no,chknewonlyflag
      end
      
      if chk_result == true || x >= tmp_scombo_count
        break
        
      end 
    end 
    
    #もし条件が一致するなら合体攻撃を格納
    if chk_result == true
      @scombo_flag = true
      $cha_set_action[@chanum] = @btl_ani_scombo_no + 10
      $tmp_btl_ani_scombo_cha =@btl_ani_scombo_cha
      chk_new_get_scombo #@btl_ani_scombo_no
    end
  end
  #--------------------------------------------------------------------------
  # ● 合体攻撃が使用可能かチェック
  # tmp_set_action:チェック対象のSコンボNo
  # newonlyflag:未取得のSコンボのみ対象とする
  #--------------------------------------------------------------------------  
  def chk_scombo_flag tmp_set_action,chknewonlyflag = false
 #p $cha_set_action キャラごとの攻撃スキル番号をセット、攻撃しないのであれば値は0
 #p $cardset_cha_no 指定の枚目にキャラ番号が振ってある1人目は0,2人目は1
    
    #p @attackcourse,tmp_set_action
    if @attackcourse == 1
      
      x = 0
      card_attack_num = []    #攻撃星の数
      card_gard_num = []    #防御星の数
      cha_skill_level_num = []    
      case tmp_set_action
      
      when 304 #自爆(サイバイマン
        #ヤムチャ以外には使わない
        #return false if $partyc[@chanum] != 7
        
        chkchanum = 7
        
        if get_chabtljoin_dead (chkchanum) == true
          return false
        else
          @ene_coerce_target_chanum = chkchanum
        end
      when 373 #大猿変身(べジータ
        
        return false if $battle_begi_oozaru_run == true
      
      when 644 #大猿変身(ターレス
        
        return false if $battle_tare_oozaru_run == true
      
      when 645 #巨大化(スラッグ
        
        return false if $battle_sura_big_run == true
      
      when 382,383 #パープルコメットクラッシュ
        #ジースが生きてる
        
        #ジースバータ
        if $battleenemy.index(49) != nil
          enenum = [49,50]
        else
          enenum = [248,249]
        end
        
        for x in 0..enenum.size - 1
          #p $battleenemy.index(enenum[x]),$enedeadchk[$battleenemy.index(enenum[x])-1],$ene_stop_num[$battleenemy.index(enenum[x])-1]
          return false if $battleenemy.index(enenum[x]) == nil
          return false if $enedeadchk[$battleenemy.index(enenum[x])-1] == true #生きてるか
          return false if $ene_stop_num[$battleenemy.index(enenum[x])-1] != 0 #超能力にかかってないか
        end
      when 518 #ブージン)合体超能力
        
        enenum = [145,146,147]
        
        for x in 0..enenum.size - 1
          #p $battleenemy.index(enenum[x]),$enedeadchk[$battleenemy.index(enenum[x])-1],$ene_stop_num[$battleenemy.index(enenum[x])-1]
          return false if $battleenemy.index(enenum[x]) == nil
          return false if $enedeadchk[$battleenemy.index(enenum[x])-1] == true #生きてるか
          return false if $ene_stop_num[$battleenemy.index(enenum[x])-1] != 0 #超能力にかかってないか
        end
      when 583 #リベンジャーチャージ
        return false if $battle_ribe_charge == true #リベンジャーチャージ管理用
      when 584 #リベンジャーカノン
        return false if $battle_ribe_charge == false #リベンジャーチャージ管理用
        return false if $battle_ribe_charge_turn == true #リベンジャーチャージしたターンか
      when 607 #タード&ゾルト)ダブルアタック
        
        enenum = [178,180]
        
        for x in 0..enenum.size - 1
          #p $battleenemy.index(enenum[x]),$enedeadchk[$battleenemy.index(enenum[x])-1],$ene_stop_num[$battleenemy.index(enenum[x])-1]
          return false if $battleenemy.index(enenum[x]) == nil
          return false if $enedeadchk[$battleenemy.index(enenum[x])-1] == true #生きてるか
          return false if $ene_stop_num[$battleenemy.index(enenum[x])-1] != 0 #超能力にかかってないか
        end
      when 637,640 #レズン、ラカセイ)ダブルエネルギー波
        
        #レズン、ラカセイ
        if $battleenemy.index(68) != nil
          enenum = [68,69]
        else
          enenum = [220,221]
        end
        
        for x in 0..enenum.size - 1
          #p $battleenemy.index(enenum[x]),$enedeadchk[$battleenemy.index(enenum[x])-1],$ene_stop_num[$battleenemy.index(enenum[x])-1]
          return false if $battleenemy.index(enenum[x]) == nil
          return false if $enedeadchk[$battleenemy.index(enenum[x])-1] == true #生きてるか
          return false if $ene_stop_num[$battleenemy.index(enenum[x])-1] != 0 #超能力にかかってないか
        end
      end
    else
      for x in 0..@btl_ani_scombo_cha_count-1

        if $partyc.index(@btl_ani_scombo_cha[x]) != nil #仲間にいる
          if $cardset_cha_no.index($partyc.index(@btl_ani_scombo_cha[x])) != nil #攻撃参加している
          #if $cardset_cha_no.index($partyc.index(@btl_ani_scombo_cha[x])) != nil #攻撃参加している 20140203コメントアウト
            #p $scombo_chk_flag[@btl_ani_scombo_tec_no],@btl_ani_scombo_tec_no
            if $scombo_chk_flag[@btl_ani_scombo_tec_no] != 0
              
              
              
              if $scombo_chk_flag[@btl_ani_scombo_tec_no] == 1 #スイッチ
                
                return false if $game_switches[$scombo_chk_flag_no[@btl_ani_scombo_tec_no]] == false
                #p $scombo_chk_flag_no[x],$game_switches[$scombo_chk_flag_no[x]]
              elsif $scombo_chk_flag[@btl_ani_scombo_tec_no] == 2 #変数
                #チェック方法 0:一致 1:以上 2:以下
                case $scombo_chk_flag_process[@btl_ani_scombo_tec_no]
                when 0
                  return false if $game_variables[$scombo_chk_flag_no[@btl_ani_scombo_tec_no]] != $scombo_chk_flag_value[@btl_ani_scombo_tec_no]
                when 1
                  return false if $game_variables[$scombo_chk_flag_no[@btl_ani_scombo_tec_no]] < $scombo_chk_flag_value[@btl_ani_scombo_tec_no]
                when 2
                  return false if $game_variables[$scombo_chk_flag_no[@btl_ani_scombo_tec_no]] > $scombo_chk_flag_value[@btl_ani_scombo_tec_no]
                end
              end
            end
            
            #スキルでSコンボの必要な星を調整
            scmb_mainasu_a = 0
            scmb_mainasu_g = 0
            
            scmb_mainasu_a,scmb_mainasu_g = chk_doutyou_run @btl_ani_scombo_cha[x]
            
            #シナリオ進行度
            return false if $scombo_chk_scenario_progress[@btl_ani_scombo_tec_no] > $game_variables[40]
            return false if chk_skill_learn(430,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(644,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(645,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(646,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(647,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(648,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(649,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(650,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(651,@btl_ani_scombo_cha[x])[0] == true #アウトサイダー取得していないか
            return false if chk_skill_learn(476,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(477,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(478,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(479,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(480,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(481,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(482,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(483,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if chk_skill_learn(484,@btl_ani_scombo_cha[x])[0] == true #傍若無人取得していないか
            return false if $chadeadchk[$partyc.index(@btl_ani_scombo_cha[x])] == true #生きてる
            return false if $cha_stop_num[$partyc.index(@btl_ani_scombo_cha[x])] != 0 #超能力にかかってないか
            return false if @cha_attack_run[$partyc.index(@btl_ani_scombo_cha[x])] == true #行動済みではない
            return false if $cha_set_action[$partyc.index(@btl_ani_scombo_cha[x])]-10 != @btl_ani_scombo_flag_tec[x] #対象技を使ってるか
            return false if $game_actors[@btl_ani_scombo_cha[x]].class_id-1 != $cardi[$cardset_cha_no.index($partyc.index(@btl_ani_scombo_cha[x]))] #流派が一致
            return false if $carda[$cardset_cha_no.index($partyc.index(@btl_ani_scombo_cha[x]))] < (@btl_ani_scombo_card_attack_num[x] - scmb_mainasu_a) #カードの攻撃星が以上
            return false if $cardg[$cardset_cha_no.index($partyc.index(@btl_ani_scombo_cha[x]))] < (@btl_ani_scombo_card_gard_num[x] - scmb_mainasu_g) #カードの防御星が以上
            $cha_skill_level[@btl_ani_scombo_flag_tec[x]] = 0 if $cha_skill_level[@btl_ani_scombo_flag_tec[x]] == nil #必殺技使用回数がnilかチェックしてnilなら0格納
            return false if $cha_skill_level[@btl_ani_scombo_flag_tec[x]] < @btl_ani_scombo_skill_level_num[x]
            if $game_switches[1305] == false #戦闘の練習中は覚えない 
              return false if $game_switches[$scombo_get_flag[@btl_ani_scombo_tec_no]] == true && chknewonlyflag == true #未取得のスキルのみ
            else
              return false if $game_switches[$scombo_get_flag[@btl_ani_scombo_tec_no]] == false && chknewonlyflag == true #未取得のスキルのみだとしても
            end
            return false if $game_switches[$scombo_get_flag[@btl_ani_scombo_tec_no]] == false && chknewonlyflag == false #取得済みのスキルのみ
            
            return false if $cha_single_attack[$partyc.index(@btl_ani_scombo_cha[x])] == true #&& chknewonlyflag == false #Sコンボ使わないフラグがONになっていないか
            
            #大猿チェック
            if @btl_ani_scombo_chk_flag_oozaru_put == 0
              return false if $cha_bigsize_on[$partyc.index(@btl_ani_scombo_cha[x])] == true
            else
              return false if $cha_bigsize_on[$partyc.index(@btl_ani_scombo_cha[x])] == false
            end
          else
            return false
          end
        else
          return false
        end
      
      end
    end
    
    return true
  end
  
  #--------------------------------------------------------------------------
  # ● 攻撃回数確認
  #--------------------------------------------------------------------------  
  def chk_attack_num x
    @enenum = $attack_order[x].to_s[1,1].to_i #敵キャラNoセット(表示順)
    @enedatenum = $battleenemy[@enenum] #キャラNoセット(データ順)
    if $attack_order[x].to_s.size == 1
      @attack_num = 1
    else
      #攻撃が強制的に1回フラグがOFFならば設定値、ONならば1にする
      if $game_switches[40] == false
        @attack_num = $data_enemies[@enedatenum].eva
      else
        @attack_num = 1
      end
      if $game_switches[25] == true || $game_switches[28] == true #一定人数になると攻撃回数増加チェックフラグ
        ene_non_dead_count = 0
        for a in 0..$enedead.size-1
          ene_non_dead_count += 1 if $enedead[a] == false
        end
        
        if $game_switches[25] == true
          @attack_num +=1 if ene_non_dead_count == 1
        end
        if $game_switches[28] == true
          @attack_num +=1 if ene_non_dead_count <= 2
        end
      end
      
      if $game_switches[26] == true #HP30％攻撃回数増加チェックフラグ
        @attack_num +=1 if ($enehp[@enenum]*100 / $data_enemies[@enedatenum].maxhp) <= 30
      end
      
      if $game_switches[27] == true #HP40％攻撃回数増加チェックフラグ
        @attack_num +=1 if ($enehp[@enenum]*100 / $data_enemies[@enedatenum].maxhp) <= 40
      end

      if $game_switches[29] == true #HP50％攻撃回数増加チェックフラグ
        @attack_num +=1 if ($enehp[@enenum]*100 / $data_enemies[@enedatenum].maxhp) <= 50
      end
      
      #戦闘イベントの場合は強制的に攻撃回数を1とする
      if $game_variables[96] != 0
        @attack_num =1
      end
      if @attack_count > 0
        create_enemy_card(@enenum,false)
        ryuhakakuritu_keisan @enenum,$battleenemy[@enenum]
      end
    end
  end
  
  #--------------------------------------------------------------------------
  # ● 必殺技熟練度をデータベースへセット
  #-------------------------------------------------------------------------- 
  def set_skill_level
    if @attackcourse == 0 #味方
      for x in 0..$Cardmaxnum
        if $cardset_cha_no[x] == @chanum.to_i
          if $cha_set_action[@chanum] >= 11
            #使用回数増加
            if $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] == nil
              $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] = 0
            end
            $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] += 1 if $game_switches[1305] == false
            #使用回数が9999を超えたら9999をセット
            if $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] > $cha_skill_level_max
              $cha_skill_level[$data_skills[$cha_set_action[@chanum] - 10].id] = $cha_skill_level_max
            end
            
            #必殺技回数同期
            if $data_skills[$cha_set_action[@chanum] - 10].message2 != ""

              #同期対象の配列取得
              skillsyncs = $data_skills[$cha_set_action[@chanum] - 10].message2.split(",")

              #skill最大値
              skillmax = 0
              
              #skill最大値の取得
              for x in 0..skillsyncs.size-1
                #同期先がnilの場合0セット
                if $cha_skill_level[skillsyncs[x].to_i] == nil
                    $cha_skill_level[skillsyncs[x].to_i] = 0
                end
                if skillmax < $cha_skill_level[skillsyncs[x].to_i]
                  skillmax = $cha_skill_level[skillsyncs[x].to_i]
                end
              end

              #最大値をセット
              for x in 0..skillsyncs.size-1
                #最大値より小さければセットする
                if skillmax > $cha_skill_level[skillsyncs[x].to_i]
                  $cha_skill_level[skillsyncs[x].to_i] = skillmax
                end
              end
            end

          else #通常攻撃
            #nilの初期化
            $cha_normal_attack_level[$partyc[@chanum]] = 0 if $cha_normal_attack_level[$partyc[@chanum]] == nil
            
            saiyazinflag = false
            tuuzyouchanum = 0
            superchanum = 0
            
            #サイヤ人系の通常攻撃の回数同期用の事前処理
            case $partyc[@chanum]
            
            when 3,14 #悟空
              tuuzyouchanum = 3
              superchanum = 14
              saiyazinflag = true
            when 5,18 #悟飯
              tuuzyouchanum = 5
              superchanum = 18
              saiyazinflag = true
            when 12,19 #ベジータ
              tuuzyouchanum = 12
              superchanum = 19
              saiyazinflag = true
            when 17,20 #トランクス
              tuuzyouchanum = 17
              superchanum = 20
              saiyazinflag = true
            when 16,32 #バーダック
              tuuzyouchanum = 16
              superchanum = 32
              saiyazinflag = true
            when 25,26 #未来悟飯
              tuuzyouchanum = 25
              superchanum = 26
              saiyazinflag = true
            end
            
            #サイヤ人系の通常攻撃の回数同期用の処理
            if saiyazinflag == true
              #nilの初期化
              $cha_normal_attack_level[tuuzyouchanum] = 0 if $cha_normal_attack_level[tuuzyouchanum] == nil
              #nilの初期化
              $cha_normal_attack_level[superchanum] = 0 if $cha_normal_attack_level[superchanum] == nil
            
              if $cha_normal_attack_level[tuuzyouchanum] > $cha_normal_attack_level[superchanum]
                $cha_normal_attack_level[superchanum] = $cha_normal_attack_level[tuuzyouchanum]
              else
                $cha_normal_attack_level[tuuzyouchanum] = $cha_normal_attack_level[superchanum]
              end
                
            end
            #p $cha_normal_attack_level
            
            #攻撃回数加算
            $cha_normal_attack_level[$partyc[@chanum]] += 1 if $game_switches[1305] == false
            #p $cha_normal_attack_level
          end
        end
      end
    end
  end
  
  #--------------------------------------------------------------------------
  # ● 戦闘曲再生
  #--------------------------------------------------------------------------    
  def set_battle_bgm
    
    if $put_battle_bgm == false
      
      if $battle_escape == true
        set_battle_bgm_name true
      else
        #逃げられないのはイベント戦判定にする。
        set_battle_bgm_name true,1
      end

      if $battle_escape == true
        if $option_battle_bgm_name.include?("_user") == false
          Audio.bgm_play("Audio/BGM/" + $option_battle_bgm_name)    # 効果音を再生する
        else
          Audio.bgm_play("Audio/MYBGM/" + $option_battle_bgm_name)    # 効果音を再生する
        end
      else
        if $option_evbattle_bgm_name.include?("_user") == false
          Audio.bgm_play("Audio/BGM/" + $option_evbattle_bgm_name)    # 効果音を再生する
        else
          Audio.bgm_play("Audio/MYBGM/" + $option_evbattle_bgm_name)    # 効果音を再生する
        end
      end

      #$put_battle_bgm = true
    end
  end
  #--------------------------------------------------------------------------
  # ● 通常攻撃セット
  # x:アニメの配列位置
  #--------------------------------------------------------------------------   
  def set_def_attack x=1
    case $attack_anime[x]
    
    when 1
      @battle_anime_result = anime_pattern 51 #キック　左
      
    when 2
      @battle_anime_result = anime_pattern 52 #キック　右      
      
    when 3
      @battle_anime_result = anime_pattern 53 #パンチ　左

    when 4
      @battle_anime_result = anime_pattern 54 #パンチ　右
    end
  end
  
  #--------------------------------------------------------------------------
  # ● 爆発効果音、エフェクトセット
  # x:アニメの配列位置
  #--------------------------------------------------------------------------   
  def get_explosion get_flag = false
    
      
      #dmg_rate = 100 if dmg_rate > 100
      #p dmg_rate
      
      #味方と敵でレートを変更する
      if @attackcourse == 0
        dmg_rate = (@battledamage / $data_enemies[@enedatenum].maxhp.prec_f * 100).prec_i
        
        if $data_enemies[@enedatenum].element_ranks[22] == 1
          dmg_rate = dmg_rate * 5
        end
        
        case dmg_rate
        
        when 0..20
          #小
          explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
          explosion_eff = 101
        when 21..40
          #中
          explosion_se = "Audio/SE/" + "ZG 光線系ヒット2"
          explosion_eff = 102
        when 41..60
          #大
          explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
          explosion_eff = 103
        when 61..99
          #特大
          explosion_se = "Audio/SE/" + "Z1 爆発1"
          explosion_eff = 104
        else
          #撃破
          explosion_se = "Audio/SE/" + "DB3 大爆発"
          explosion_eff = 105
        end

        
        
        
      else
        dmg_rate = (@battledamage / $game_actors[$partyc[@chanum.to_i]].maxhp.prec_f * 100).prec_i
        case dmg_rate
        #$game_actors[$partyc[@chanum.to_i]].hp.prec_f / $game_actors[$partyc[@chanum.to_i]].maxhp.prec_f * 100).prec_i
          
          when 0..15
            #小
            explosion_se = "Audio/SE/" + "Z3 光線系ヒット"
            explosion_eff = 101
          when 16..30
            #中
            explosion_se = "Audio/SE/" + "ZG 光線系ヒット2"
            explosion_eff = 102
          when 31..45
            #大
            explosion_se = "Audio/SE/" + "ZG 光線系ヒット3"
            explosion_eff = 103
          when 46..60
            #特大
            explosion_se = "Audio/SE/" + "Z1 爆発1"
            explosion_eff = 104
          else
            #撃破
            explosion_se = "Audio/SE/" + "DB3 大爆発"
            explosion_eff = 105
        end
      end
      return explosion_se,explosion_eff
  end
end